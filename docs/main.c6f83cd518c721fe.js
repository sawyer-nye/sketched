(self.webpackChunksketched_app=self.webpackChunksketched_app||[]).push([[179],{123:(de,Pt,je)=>{"use strict";function W(n){return"function"==typeof n}function Be(n){const t=n(s=>{Error.call(s),s.stack=(new Error).stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}const Fe=Be(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((s,r)=>`${r+1}) ${s.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t});function ft(n,e){if(n){const t=n.indexOf(e);0<=t&&n.splice(t,1)}}class $e{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(const i of t)i.remove(this);else t.remove(this);const{initialTeardown:s}=this;if(W(s))try{s()}catch(i){e=i instanceof Fe?i.errors:[i]}const{_finalizers:r}=this;if(r){this._finalizers=null;for(const i of r)try{go(i)}catch(o){e=e??[],o instanceof Fe?e=[...e,...o.errors]:e.push(o)}}if(e)throw new Fe(e)}}add(e){var t;if(e&&e!==this)if(this.closed)go(e);else{if(e instanceof $e){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(t=this._finalizers)&&void 0!==t?t:[]).push(e)}}_hasParent(e){const{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){const{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){const{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&ft(t,e)}remove(e){const{_finalizers:t}=this;t&&ft(t,e),e instanceof $e&&e._removeParent(this)}}$e.EMPTY=(()=>{const n=new $e;return n.closed=!0,n})();const Qn=$e.EMPTY;function ks(n){return n instanceof $e||n&&"closed"in n&&W(n.remove)&&W(n.add)&&W(n.unsubscribe)}function go(n){W(n)?n():n.unsubscribe()}const Fs={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Di={setTimeout(n,e,...t){const{delegate:s}=Di;return s?.setTimeout?s.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){const{delegate:e}=Di;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function mo(n){Di.setTimeout(()=>{const{onUnhandledError:e}=Fs;if(!e)throw n;e(n)})}function Ci(){}const Uu=Zn("C",void 0,void 0);function Zn(n,e,t){return{kind:n,value:e,error:t}}let ps=null;function Tn(n){if(Fs.useDeprecatedSynchronousErrorHandling){const e=!ps;if(e&&(ps={errorThrown:!1,error:null}),n(),e){const{errorThrown:t,error:s}=ps;if(ps=null,t)throw s}}else n()}class yo extends $e{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,ks(e)&&e.add(this)):this.destination=vo}static create(e,t,s){return new Ur(e,t,s)}next(e){this.isStopped?Ga(function _o(n){return Zn("N",n,void 0)}(e),this):this._next(e)}error(e){this.isStopped?Ga(function Hr(n){return Zn("E",void 0,n)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Ga(Uu,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const qa=Function.prototype.bind;function bi(n,e){return qa.call(n,e)}class Ps{constructor(e){this.partialObserver=e}next(e){const{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(s){Si(s)}}error(e){const{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(s){Si(s)}else Si(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Si(t)}}}class Ur extends yo{constructor(e,t,s){let r;if(super(),W(e)||!e)r={next:e??void 0,error:t??void 0,complete:s??void 0};else{let i;this&&Fs.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),r={next:e.next&&bi(e.next,i),error:e.error&&bi(e.error,i),complete:e.complete&&bi(e.complete,i)}):r=e}this.destination=new Ps(r)}}function Si(n){Fs.useDeprecatedSynchronousErrorHandling?function Ua(n){Fs.useDeprecatedSynchronousErrorHandling&&ps&&(ps.errorThrown=!0,ps.error=n)}(n):mo(n)}function Ga(n,e){const{onStoppedNotification:t}=Fs;t&&Di.setTimeout(()=>t(n,e))}const vo={closed:!0,next:Ci,error:function Yd(n){throw n},complete:Ci},Wa="function"==typeof Symbol&&Symbol.observable||"@@observable";function Vs(n){return n}function qu(n){return 0===n.length?Vs:1===n.length?n[0]:function(t){return n.reduce((s,r)=>r(s),t)}}let at=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){const s=new n;return s.source=this,s.operator=t,s}subscribe(t,s,r){const i=function $(n){return n&&n instanceof yo||function Me(n){return n&&W(n.next)&&W(n.error)&&W(n.complete)}(n)&&ks(n)}(t)?t:new Ur(t,s,r);return Tn(()=>{const{operator:o,source:a}=this;i.add(o?o.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(t){try{return this._subscribe(t)}catch(s){t.error(s)}}forEach(t,s){return new(s=Gu(s))((r,i)=>{const o=new Ur({next:a=>{try{t(a)}catch(c){i(c),o.unsubscribe()}},error:i,complete:r});this.subscribe(o)})}_subscribe(t){var s;return null===(s=this.source)||void 0===s?void 0:s.subscribe(t)}[Wa](){return this}pipe(...t){return qu(t)(this)}toPromise(t){return new(t=Gu(t))((s,r)=>{let i;this.subscribe(o=>i=o,o=>r(o),()=>s(i))})}}return n.create=e=>new n(e),n})();function Gu(n){var e;return null!==(e=n??Fs.Promise)&&void 0!==e?e:Promise}const _e=Be(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let O=(()=>{class n extends at{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){const s=new fe(this,this);return s.operator=t,s}_throwIfClosed(){if(this.closed)throw new _e}next(t){Tn(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const s of this.currentObservers)s.next(t)}})}error(t){Tn(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;const{observers:s}=this;for(;s.length;)s.shift().error(t)}})}complete(){Tn(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return(null===(t=this.observers)||void 0===t?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){const{hasError:s,isStopped:r,observers:i}=this;return s||r?Qn:(this.currentObservers=null,i.push(t),new $e(()=>{this.currentObservers=null,ft(i,t)}))}_checkFinalizedStatuses(t){const{hasError:s,thrownError:r,isStopped:i}=this;s?t.error(r):i&&t.complete()}asObservable(){const t=new at;return t.source=this,t}}return n.create=(e,t)=>new fe(e,t),n})();class fe extends O{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,s;null===(s=null===(t=this.destination)||void 0===t?void 0:t.next)||void 0===s||s.call(t,e)}error(e){var t,s;null===(s=null===(t=this.destination)||void 0===t?void 0:t.error)||void 0===s||s.call(t,e)}complete(){var e,t;null===(t=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===t||t.call(e)}_subscribe(e){var t,s;return null!==(s=null===(t=this.source)||void 0===t?void 0:t.subscribe(e))&&void 0!==s?s:Qn}}function X(n){return W(n?.lift)}function ae(n){return e=>{if(X(e))return e.lift(function(t){try{return n(t,this)}catch(s){this.error(s)}});throw new TypeError("Unable to lift unknown Observable type")}}function U(n,e,t,s,r){return new wo(n,e,t,s,r)}class wo extends yo{constructor(e,t,s,r,i,o){super(e),this.onFinalize=i,this.shouldUnsubscribe=o,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=r?function(a){try{r(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=s?function(){try{s()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:t}=this;super.unsubscribe(),!t&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function ee(n,e){return ae((t,s)=>{let r=0;t.subscribe(U(s,i=>{s.next(n.call(e,i,r++))}))})}function sn(n,e,t,s){var o,r=arguments.length,i=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,t):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(n,e,t,s);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(i=(r<3?o(i):r>3?o(e,t,i):o(e,t))||i);return r>3&&i&&Object.defineProperty(e,t,i),i}function St(n,e,t,s){return new(t||(t=Promise))(function(i,o){function a(l){try{u(s.next(l))}catch(h){o(h)}}function c(l){try{u(s.throw(l))}catch(h){o(h)}}function u(l){l.done?i(l.value):function r(i){return i instanceof t?i:new t(function(o){o(i)})}(l.value).then(a,c)}u((s=s.apply(n,e||[])).next())})}function Ti(n){return this instanceof Ti?(this.v=n,this):new Ti(n)}function uM(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,s=t.apply(n,e||[]),i=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(d){s[d]&&(r[d]=function(f){return new Promise(function(p,g){i.push([d,f,p,g])>1||a(d,f)})})}function a(d,f){try{!function c(d){d.value instanceof Ti?Promise.resolve(d.value.v).then(u,l):h(i[0][2],d)}(s[d](f))}catch(p){h(i[0][3],p)}}function u(d){a("next",d)}function l(d){a("throw",d)}function h(d,f){d(f),i.shift(),i.length&&a(i[0][0],i[0][1])}}function lM(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=n[Symbol.asyncIterator];return e?e.call(n):(n=function uv(n){var e="function"==typeof Symbol&&Symbol.iterator,t=e&&n[e],s=0;if(t)return t.call(n);if(n&&"number"==typeof n.length)return{next:function(){return n&&s>=n.length&&(n=void 0),{value:n&&n[s++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(n),t={},s("next"),s("throw"),s("return"),t[Symbol.asyncIterator]=function(){return this},t);function s(i){t[i]=n[i]&&function(o){return new Promise(function(a,c){!function r(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}(a,c,(o=n[i](o)).done,o.value)})}}}const lv=n=>n&&"number"==typeof n.length&&"function"!=typeof n;function hv(n){return W(n?.then)}function dv(n){return W(n[Wa])}function fv(n){return Symbol.asyncIterator&&W(n?.[Symbol.asyncIterator])}function pv(n){return new TypeError(`You provided ${null!==n&&"object"==typeof n?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const gv=function dM(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function mv(n){return W(n?.[gv])}function _v(n){return uM(this,arguments,function*(){const t=n.getReader();try{for(;;){const{value:s,done:r}=yield Ti(t.read());if(r)return yield Ti(void 0);yield yield Ti(s)}}finally{t.releaseLock()}})}function yv(n){return W(n?.getReader)}function Yn(n){if(n instanceof at)return n;if(null!=n){if(dv(n))return function fM(n){return new at(e=>{const t=n[Wa]();if(W(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(n);if(lv(n))return function pM(n){return new at(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}(n);if(hv(n))return function gM(n){return new at(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,mo)})}(n);if(fv(n))return vv(n);if(mv(n))return function mM(n){return new at(e=>{for(const t of n)if(e.next(t),e.closed)return;e.complete()})}(n);if(yv(n))return function _M(n){return vv(_v(n))}(n)}throw pv(n)}function vv(n){return new at(e=>{(function yM(n,e){var t,s,r,i;return St(this,void 0,void 0,function*(){try{for(t=lM(n);!(s=yield t.next()).done;)if(e.next(s.value),e.closed)return}catch(o){r={error:o}}finally{try{s&&!s.done&&(i=t.return)&&(yield i.call(t))}finally{if(r)throw r.error}}e.complete()})})(n,e).catch(t=>e.error(t))})}function ur(n,e,t,s=0,r=!1){const i=e.schedule(function(){t(),r?n.add(this.schedule(null,s)):this.unsubscribe()},s);if(n.add(i),!r)return i}function Yt(n,e,t=1/0){return W(e)?Yt((s,r)=>ee((i,o)=>e(s,i,r,o))(Yn(n(s,r))),t):("number"==typeof e&&(t=e),ae((s,r)=>function vM(n,e,t,s,r,i,o,a){const c=[];let u=0,l=0,h=!1;const d=()=>{h&&!c.length&&!u&&e.complete()},f=g=>u<s?p(g):c.push(g),p=g=>{i&&e.next(g),u++;let _=!1;Yn(t(g,l++)).subscribe(U(e,m=>{r?.(m),i?f(m):e.next(m)},()=>{_=!0},void 0,()=>{if(_)try{for(u--;c.length&&u<s;){const m=c.shift();o?ur(e,o,()=>p(m)):p(m)}d()}catch(m){e.error(m)}}))};return n.subscribe(U(e,f,()=>{h=!0,d()})),()=>{a?.()}}(s,r,n,t)))}function Do(n=1/0){return Yt(Vs,n)}const lr=new at(n=>n.complete());function wv(n){return n&&W(n.schedule)}function Kd(n){return n[n.length-1]}function Jd(n){return W(Kd(n))?n.pop():void 0}function za(n){return wv(Kd(n))?n.pop():void 0}function Dv(n,e=0){return ae((t,s)=>{t.subscribe(U(s,r=>ur(s,n,()=>s.next(r),e),()=>ur(s,n,()=>s.complete(),e),r=>ur(s,n,()=>s.error(r),e)))})}function Cv(n,e=0){return ae((t,s)=>{s.add(n.schedule(()=>t.subscribe(s),e))})}function bv(n,e){if(!n)throw new Error("Iterable cannot be null");return new at(t=>{ur(t,e,()=>{const s=n[Symbol.asyncIterator]();ur(t,e,()=>{s.next().then(r=>{r.done?t.complete():t.next(r.value)})},0,!0)})})}function It(n,e){return e?function AM(n,e){if(null!=n){if(dv(n))return function CM(n,e){return Yn(n).pipe(Cv(e),Dv(e))}(n,e);if(lv(n))return function SM(n,e){return new at(t=>{let s=0;return e.schedule(function(){s===n.length?t.complete():(t.next(n[s++]),t.closed||this.schedule())})})}(n,e);if(hv(n))return function bM(n,e){return Yn(n).pipe(Cv(e),Dv(e))}(n,e);if(fv(n))return bv(n,e);if(mv(n))return function TM(n,e){return new at(t=>{let s;return ur(t,e,()=>{s=n[gv](),ur(t,e,()=>{let r,i;try{({value:r,done:i}=s.next())}catch(o){return void t.error(o)}i?t.complete():t.next(r)},0,!0)}),()=>W(s?.return)&&s.return()})}(n,e);if(yv(n))return function EM(n,e){return bv(_v(n),e)}(n,e)}throw pv(n)}(n,e):Yn(n)}function ef(n,e,...t){if(!0===e)return void n();if(!1===e)return;const s=new Ur({next:()=>{s.unsubscribe(),n()}});return e(...t).subscribe(s)}function Ze(n){for(let e in n)if(n[e]===Ze)return e;throw Error("Could not find renamed property on target object.")}function tf(n,e){for(const t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function Ye(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ye).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const e=n.toString();if(null==e)return""+e;const t=e.indexOf("\n");return-1===t?e:e.substring(0,t)}function nf(n,e){return null==n||""===n?null===e?"":e:null==e||""===e?n:n+" "+e}const IM=Ze({__forward_ref__:Ze});function Ke(n){return n.__forward_ref__=Ke,n.toString=function(){return Ye(this())},n}function te(n){return sf(n)?n():n}function sf(n){return"function"==typeof n&&n.hasOwnProperty(IM)&&n.__forward_ref__===Ke}function rf(n){return n&&!!n.\u0275providers}const Sv="https://g.co/ng/security#xss";class I extends Error{constructor(e,t){super(function zu(n,e){return`NG0${Math.abs(n)}${e?": "+e.trim():""}`}(e,t)),this.code=e}}function pe(n){return"string"==typeof n?n:null==n?"":String(n)}function Qu(n,e){throw new I(-201,!1)}function Pn(n,e){null==n&&function Ve(n,e,t,s){throw new Error(`ASSERTION ERROR: ${n}`+(null==s?"":` [Expected=> ${t} ${s} ${e} <=Actual]`))}(e,n,null,"!=")}function re(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Wr(n){return{providers:n.providers||[],imports:n.imports||[]}}function Zu(n){return Tv(n,Yu)||Tv(n,Av)}function Tv(n,e){return n.hasOwnProperty(e)?n[e]:null}function Ev(n){return n&&(n.hasOwnProperty(af)||n.hasOwnProperty(jM))?n[af]:null}const Yu=Ze({\u0275prov:Ze}),af=Ze({\u0275inj:Ze}),Av=Ze({ngInjectableDef:Ze}),jM=Ze({ngInjectorDef:Ze});var ne=(()=>((ne=ne||{})[ne.Default=0]="Default",ne[ne.Host=1]="Host",ne[ne.Self=2]="Self",ne[ne.SkipSelf=4]="SkipSelf",ne[ne.Optional=8]="Optional",ne))();let cf;function Xn(n){const e=cf;return cf=n,e}function xv(n,e,t){const s=Zu(n);return s&&"root"==s.providedIn?void 0===s.value?s.value=s.factory():s.value:t&ne.Optional?null:void 0!==e?e:void Qu(Ye(n))}const Je=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Qa={},uf="__NG_DI_FLAG__",Xu="ngTempTokenPath",HM=/\n/gm,Mv="__source";let Za;function Co(n){const e=Za;return Za=n,e}function qM(n,e=ne.Default){if(void 0===Za)throw new I(-203,!1);return null===Za?xv(n,void 0,e):Za.get(n,e&ne.Optional?null:void 0,e)}function K(n,e=ne.Default){return(function BM(){return cf}()||qM)(te(n),e)}function Ue(n,e=ne.Default){return K(n,Ku(e))}function Ku(n){return typeof n>"u"||"number"==typeof n?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function lf(n){const e=[];for(let t=0;t<n.length;t++){const s=te(n[t]);if(Array.isArray(s)){if(0===s.length)throw new I(900,!1);let r,i=ne.Default;for(let o=0;o<s.length;o++){const a=s[o],c=GM(a);"number"==typeof c?-1===c?r=a.token:i|=c:r=a}e.push(K(r,i))}else e.push(K(s))}return e}function Ya(n,e){return n[uf]=e,n.prototype[uf]=e,n}function GM(n){return n[uf]}function zr(n){return{toString:n}.toString()}var gs=(()=>((gs=gs||{})[gs.OnPush=0]="OnPush",gs[gs.Default=1]="Default",gs))(),js=(()=>{return(n=js||(js={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",js;var n})();const dr={},Oe=[],Ju=Ze({\u0275cmp:Ze}),hf=Ze({\u0275dir:Ze}),df=Ze({\u0275pipe:Ze}),Nv=Ze({\u0275mod:Ze}),fr=Ze({\u0275fac:Ze}),Xa=Ze({__NG_ELEMENT_ID__:Ze});let QM=0;function Vn(n){return zr(()=>{const t=!0===n.standalone,s={},r={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===gs.OnPush,directiveDefs:null,pipeDefs:null,standalone:t,dependencies:t&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||Oe,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||js.Emulated,id:"c"+QM++,styles:n.styles||Oe,_:null,setInput:null,schemas:n.schemas||null,tView:null,findHostDirectiveDefs:null,hostDirectives:null},i=n.dependencies,o=n.features;return r.inputs=kv(n.inputs,s),r.outputs=kv(n.outputs),o&&o.forEach(a=>a(r)),r.directiveDefs=i?()=>("function"==typeof i?i():i).map(Ov).filter(Rv):null,r.pipeDefs=i?()=>("function"==typeof i?i():i).map(gn).filter(Rv):null,r})}function Ov(n){return Le(n)||rn(n)}function Rv(n){return null!==n}function Ei(n){return zr(()=>({type:n.type,bootstrap:n.bootstrap||Oe,declarations:n.declarations||Oe,imports:n.imports||Oe,exports:n.exports||Oe,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function kv(n,e){if(null==n)return dr;const t={};for(const s in n)if(n.hasOwnProperty(s)){let r=n[s],i=r;Array.isArray(r)&&(i=r[1],r=r[0]),t[r]=s,e&&(e[r]=i)}return t}const ce=Vn;function Xt(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function Le(n){return n[Ju]||null}function rn(n){return n[hf]||null}function gn(n){return n[df]||null}function Ln(n,e){const t=n[Nv]||null;if(!t&&!0===e)throw new Error(`Type ${Ye(n)} does not have '\u0275mod' property.`);return t}function En(n){return Array.isArray(n)&&"object"==typeof n[1]}function _s(n){return Array.isArray(n)&&!0===n[1]}function gf(n){return 0!=(4&n.flags)}function sl(n){return n.componentOffset>-1}function rl(n){return 1==(1&n.flags)}function ys(n){return null!==n.template}function eI(n){return 0!=(256&n[2])}function Ni(n,e){return n.hasOwnProperty(fr)?n[fr]:null}class sI{constructor(e,t,s){this.previousValue=e,this.currentValue=t,this.firstChange=s}isFirstChange(){return this.firstChange}}function Jn(){return Vv}function Vv(n){return n.type.prototype.ngOnChanges&&(n.setInput=iI),rI}function rI(){const n=jv(this),e=n?.current;if(e){const t=n.previous;if(t===dr)n.previous=e;else for(let s in e)t[s]=e[s];n.current=null,this.ngOnChanges(e)}}function iI(n,e,t,s){const r=this.declaredInputs[t],i=jv(n)||function oI(n,e){return n[Lv]=e}(n,{previous:dr,current:null}),o=i.current||(i.current={}),a=i.previous,c=a[r];o[r]=new sI(c&&c.currentValue,e,a===dr),n[s]=e}Jn.ngInherit=!0;const Lv="__ngSimpleChanges__";function jv(n){return n[Lv]||null}function Vt(n){for(;Array.isArray(n);)n=n[0];return n}function il(n,e){return Vt(e[n])}function Bn(n,e){return Vt(e[n.index])}function wf(n,e){return n.data[e]}function Ao(n,e){return n[e]}function $n(n,e){const t=e[n];return En(t)?t:t[0]}function ol(n){return 64==(64&n[2])}function Qr(n,e){return null==e?null:n[e]}function Bv(n){n[18]=0}function Df(n,e){n[5]+=e;let t=n,s=n[3];for(;null!==s&&(1===e&&1===t[5]||-1===e&&0===t[5]);)s[5]+=e,t=s,s=s[3]}const he={lFrame:Yv(null),bindingsEnabled:!0};function Hv(){return he.bindingsEnabled}function A(){return he.lFrame.lView}function Ie(){return he.lFrame.tView}function vs(n){return he.lFrame.contextLView=n,n[8]}function ws(n){return he.lFrame.contextLView=null,n}function Kt(){let n=Uv();for(;null!==n&&64===n.type;)n=n.parent;return n}function Uv(){return he.lFrame.currentTNode}function Bs(n,e){const t=he.lFrame;t.currentTNode=n,t.isParent=e}function Cf(){return he.lFrame.isParent}function bf(){he.lFrame.isParent=!1}function mn(){const n=he.lFrame;let e=n.bindingRootIndex;return-1===e&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function xo(){return he.lFrame.bindingIndex++}function DI(n,e){const t=he.lFrame;t.bindingIndex=t.bindingRootIndex=n,Sf(e)}function Sf(n){he.lFrame.currentDirectiveIndex=n}function Ef(n){he.lFrame.currentQueryIndex=n}function bI(n){const e=n[1];return 2===e.type?e.declTNode:1===e.type?n[6]:null}function Qv(n,e,t){if(t&ne.SkipSelf){let r=e,i=n;for(;!(r=r.parent,null!==r||t&ne.Host||(r=bI(i),null===r||(i=i[15],10&r.type))););if(null===r)return!1;e=r,n=i}const s=he.lFrame=Zv();return s.currentTNode=e,s.lView=n,!0}function Af(n){const e=Zv(),t=n[1];he.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function Zv(){const n=he.lFrame,e=null===n?null:n.child;return null===e?Yv(n):e}function Yv(n){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=e),e}function Xv(){const n=he.lFrame;return he.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const Kv=Xv;function xf(){const n=Xv();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function _n(){return he.lFrame.selectedIndex}function Oi(n){he.lFrame.selectedIndex=n}function pt(){const n=he.lFrame;return wf(n.tView,n.selectedIndex)}function al(n,e){for(let t=e.directiveStart,s=e.directiveEnd;t<s;t++){const i=n.data[t].type.prototype,{ngAfterContentInit:o,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=i;o&&(n.contentHooks||(n.contentHooks=[])).push(-t,o),a&&((n.contentHooks||(n.contentHooks=[])).push(t,a),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(t,a)),c&&(n.viewHooks||(n.viewHooks=[])).push(-t,c),u&&((n.viewHooks||(n.viewHooks=[])).push(t,u),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(t,u)),null!=l&&(n.destroyHooks||(n.destroyHooks=[])).push(t,l)}}function cl(n,e,t){Jv(n,e,3,t)}function ul(n,e,t,s){(3&n[2])===t&&Jv(n,e,t,s)}function Mf(n,e){let t=n[2];(3&t)===e&&(t&=2047,t+=1,n[2]=t)}function Jv(n,e,t,s){const i=s??-1,o=e.length-1;let a=0;for(let c=void 0!==s?65535&n[18]:0;c<o;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=s&&a>=s)break}else e[c]<0&&(n[18]+=65536),(a<i||-1==i)&&(OI(n,t,e,c),n[18]=(4294901760&n[18])+c+2),c++}function OI(n,e,t,s){const r=t[s]<0,i=t[s+1],a=n[r?-t[s]:t[s]];if(r){if(n[2]>>11<n[18]>>16&&(3&n[2])===e){n[2]+=2048;try{i.call(a)}finally{}}}else try{i.call(a)}finally{}}class sc{constructor(e,t,s){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=s}}function Nf(n,e,t){let s=0;for(;s<t.length;){const r=t[s];if("number"==typeof r){if(0!==r)break;s++;const i=t[s++],o=t[s++],a=t[s++];n.setAttribute(e,o,a,i)}else{const i=r,o=t[++s];tw(i)?n.setProperty(e,i,o):n.setAttribute(e,i,o),s++}}return s}function ew(n){return 3===n||4===n||6===n}function tw(n){return 64===n.charCodeAt(0)}function ic(n,e){if(null!==e&&0!==e.length)if(null===n||0===n.length)n=e.slice();else{let t=-1;for(let s=0;s<e.length;s++){const r=e[s];"number"==typeof r?t=r:0===t||nw(n,t,r,null,-1===t||2===t?e[++s]:null)}}return n}function nw(n,e,t,s,r){let i=0,o=n.length;if(-1===e)o=-1;else for(;i<n.length;){const a=n[i++];if("number"==typeof a){if(a===e){o=-1;break}if(a>e){o=i-1;break}}}for(;i<n.length;){const a=n[i];if("number"==typeof a)break;if(a===t){if(null===s)return void(null!==r&&(n[i+1]=r));if(s===n[i+1])return void(n[i+2]=r)}i++,null!==s&&i++,null!==r&&i++}-1!==o&&(n.splice(o,0,e),i=o+1),n.splice(i++,0,t),null!==s&&n.splice(i++,0,s),null!==r&&n.splice(i++,0,r)}function sw(n){return-1!==n}function Mo(n){return 32767&n}function Io(n,e){let t=function VI(n){return n>>16}(n),s=e;for(;t>0;)s=s[15],t--;return s}let Of=!0;function ll(n){const e=Of;return Of=n,e}let LI=0;const $s={};function hl(n,e){const t=kf(n,e);if(-1!==t)return t;const s=e[1];s.firstCreatePass&&(n.injectorIndex=e.length,Rf(s.data,n),Rf(e,null),Rf(s.blueprint,null));const r=dl(n,e),i=n.injectorIndex;if(sw(r)){const o=Mo(r),a=Io(r,e),c=a[1].data;for(let u=0;u<8;u++)e[i+u]=a[o+u]|c[o+u]}return e[i+8]=r,i}function Rf(n,e){n.push(0,0,0,0,0,0,0,0,e)}function kf(n,e){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===e[n.injectorIndex+8]?-1:n.injectorIndex}function dl(n,e){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let t=0,s=null,r=e;for(;null!==r;){if(s=dw(r),null===s)return-1;if(t++,r=r[15],-1!==s.injectorIndex)return s.injectorIndex|t<<16}return-1}function Ff(n,e,t){!function jI(n,e,t){let s;"string"==typeof t?s=t.charCodeAt(0)||0:t.hasOwnProperty(Xa)&&(s=t[Xa]),null==s&&(s=t[Xa]=LI++);const r=255&s;e.data[n+(r>>5)]|=1<<r}(n,e,t)}function ow(n,e,t){if(t&ne.Optional||void 0!==n)return n;Qu()}function aw(n,e,t,s){if(t&ne.Optional&&void 0===s&&(s=null),0==(t&(ne.Self|ne.Host))){const r=n[9],i=Xn(void 0);try{return r?r.get(e,s,t&ne.Optional):xv(e,s,t&ne.Optional)}finally{Xn(i)}}return ow(s,0,t)}function cw(n,e,t,s=ne.Default,r){if(null!==n){if(1024&e[2]){const o=function qI(n,e,t,s,r){let i=n,o=e;for(;null!==i&&null!==o&&1024&o[2]&&!(256&o[2]);){const a=uw(i,o,t,s|ne.Self,$s);if(a!==$s)return a;let c=i.parent;if(!c){const u=o[21];if(u){const l=u.get(t,$s,s);if(l!==$s)return l}c=dw(o),o=o[15]}i=c}return r}(n,e,t,s,$s);if(o!==$s)return o}const i=uw(n,e,t,s,$s);if(i!==$s)return i}return aw(e,t,s,r)}function uw(n,e,t,s,r){const i=function HI(n){if("string"==typeof n)return n.charCodeAt(0)||0;const e=n.hasOwnProperty(Xa)?n[Xa]:void 0;return"number"==typeof e?e>=0?255&e:UI:e}(t);if("function"==typeof i){if(!Qv(e,n,s))return s&ne.Host?ow(r,0,s):aw(e,t,s,r);try{const o=i(s);if(null!=o||s&ne.Optional)return o;Qu()}finally{Kv()}}else if("number"==typeof i){let o=null,a=kf(n,e),c=-1,u=s&ne.Host?e[16][6]:null;for((-1===a||s&ne.SkipSelf)&&(c=-1===a?dl(n,e):e[a+8],-1!==c&&hw(s,!1)?(o=e[1],a=Mo(c),e=Io(c,e)):a=-1);-1!==a;){const l=e[1];if(lw(i,a,l.data)){const h=$I(a,e,t,o,s,u);if(h!==$s)return h}c=e[a+8],-1!==c&&hw(s,e[1].data[a+8]===u)&&lw(i,a,e)?(o=l,a=Mo(c),e=Io(c,e)):a=-1}}return r}function $I(n,e,t,s,r,i){const o=e[1],a=o.data[n+8],l=function fl(n,e,t,s,r){const i=n.providerIndexes,o=e.data,a=1048575&i,c=n.directiveStart,l=i>>20,d=r?a+l:n.directiveEnd;for(let f=s?a:a+l;f<d;f++){const p=o[f];if(f<c&&t===p||f>=c&&p.type===t)return f}if(r){const f=o[c];if(f&&ys(f)&&f.type===t)return c}return null}(a,o,t,null==s?sl(a)&&Of:s!=o&&0!=(3&a.type),r&ne.Host&&i===a);return null!==l?No(e,o,l,a):$s}function No(n,e,t,s){let r=n[t];const i=e.data;if(function RI(n){return n instanceof sc}(r)){const o=r;o.resolving&&function NM(n,e){const t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new I(-200,`Circular dependency in DI detected for ${n}${t}`)}(function Pe(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():pe(n)}(i[t]));const a=ll(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?Xn(o.injectImpl):null;Qv(n,s,ne.Default);try{r=n[t]=o.factory(void 0,i,n,s),e.firstCreatePass&&t>=s.directiveStart&&function NI(n,e,t){const{ngOnChanges:s,ngOnInit:r,ngDoCheck:i}=e.type.prototype;if(s){const o=Vv(e);(t.preOrderHooks||(t.preOrderHooks=[])).push(n,o),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,o)}r&&(t.preOrderHooks||(t.preOrderHooks=[])).push(0-n,r),i&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n,i),(t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n,i))}(t,i[t],e)}finally{null!==c&&Xn(c),ll(a),o.resolving=!1,Kv()}}return r}function lw(n,e,t){return!!(t[e+(n>>5)]&1<<n)}function hw(n,e){return!(n&ne.Self||n&ne.Host&&e)}class Oo{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,s){return cw(this._tNode,this._lView,e,Ku(s),t)}}function UI(){return new Oo(Kt(),A())}function Jt(n){return zr(()=>{const e=n.prototype.constructor,t=e[fr]||Pf(e),s=Object.prototype;let r=Object.getPrototypeOf(n.prototype).constructor;for(;r&&r!==s;){const i=r[fr]||Pf(r);if(i&&i!==t)return i;r=Object.getPrototypeOf(r)}return i=>new i})}function Pf(n){return sf(n)?()=>{const e=Pf(te(n));return e&&e()}:Ni(n)}function dw(n){const e=n[1],t=e.type;return 2===t?e.declTNode:1===t?n[6]:null}const ko="__parameters__";function Po(n,e,t){return zr(()=>{const s=function Vf(n){return function(...t){if(n){const s=n(...t);for(const r in s)this[r]=s[r]}}}(e);function r(...i){if(this instanceof r)return s.apply(this,i),this;const o=new r(...i);return a.annotation=o,a;function a(c,u,l){const h=c.hasOwnProperty(ko)?c[ko]:Object.defineProperty(c,ko,{value:[]})[ko];for(;h.length<=l;)h.push(null);return(h[l]=h[l]||[]).push(o),c}}return t&&(r.prototype=Object.create(t.prototype)),r.prototype.ngMetadataName=n,r.annotationCls=r,r})}class Q{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=re({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ri(n,e){n.forEach(t=>Array.isArray(t)?Ri(t,e):e(t))}function pw(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function gl(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function Un(n,e,t){let s=Vo(n,e);return s>=0?n[1|s]=t:(s=~s,function QI(n,e,t,s){let r=n.length;if(r==e)n.push(t,s);else if(1===r)n.push(s,n[0]),n[0]=t;else{for(r--,n.push(n[r-1],n[r]);r>e;)n[r]=n[r-2],r--;n[e]=t,n[e+1]=s}}(n,s,e,t)),s}function jf(n,e){const t=Vo(n,e);if(t>=0)return n[1|t]}function Vo(n,e){return function _w(n,e,t){let s=0,r=n.length>>t;for(;r!==s;){const i=s+(r-s>>1),o=n[i<<t];if(e===o)return i<<t;o>e?r=i:s=i+1}return~(r<<t)}(n,e,1)}const uc=Ya(Po("Optional"),8),lc=Ya(Po("SkipSelf"),4);var An=(()=>((An=An||{})[An.Important=1]="Important",An[An.DashCase=2]="DashCase",An))();const Gf=new Map;let m1=0;const zf="__ngContext__";function cn(n,e){En(e)?(n[zf]=e[20],function y1(n){Gf.set(n[20],n)}(e)):n[zf]=e}function Zf(n,e){return undefined(n,e)}function pc(n){const e=n[3];return _s(e)?e[3]:e}function Yf(n){return Lw(n[13])}function Xf(n){return Lw(n[4])}function Lw(n){for(;null!==n&&!_s(n);)n=n[4];return n}function jo(n,e,t,s,r){if(null!=s){let i,o=!1;_s(s)?i=s:En(s)&&(o=!0,s=s[0]);const a=Vt(s);0===n&&null!==t?null==r?qw(e,t,a):ki(e,t,a,r||null,!0):1===n&&null!==t?ki(e,t,a,r||null,!0):2===n?function rp(n,e,t){const s=vl(n,e);s&&function j1(n,e,t,s){n.removeChild(e,t,s)}(n,s,e,t)}(e,a,o):3===n&&e.destroyNode(a),null!=i&&function H1(n,e,t,s,r){const i=t[7];i!==Vt(t)&&jo(e,n,s,i,r);for(let a=10;a<t.length;a++){const c=t[a];gc(c[1],c,n,e,s,i)}}(e,n,i,t,r)}}function Jf(n,e,t){return n.createElement(e,t)}function Bw(n,e){const t=n[9],s=t.indexOf(e),r=e[3];512&e[2]&&(e[2]&=-513,Df(r,-1)),t.splice(s,1)}function ep(n,e){if(n.length<=10)return;const t=10+e,s=n[t];if(s){const r=s[17];null!==r&&r!==n&&Bw(r,s),e>0&&(n[t-1][4]=s[4]);const i=gl(n,10+e);!function N1(n,e){gc(n,e,e[11],2,null,null),e[0]=null,e[6]=null}(s[1],s);const o=i[19];null!==o&&o.detachView(i[1]),s[3]=null,s[4]=null,s[2]&=-65}return s}function $w(n,e){if(!(128&e[2])){const t=e[11];t.destroyNode&&gc(n,e,t,3,null,null),function k1(n){let e=n[13];if(!e)return tp(n[1],n);for(;e;){let t=null;if(En(e))t=e[13];else{const s=e[10];s&&(t=s)}if(!t){for(;e&&!e[4]&&e!==n;)En(e)&&tp(e[1],e),e=e[3];null===e&&(e=n),En(e)&&tp(e[1],e),t=e&&e[4]}e=t}}(e)}}function tp(n,e){if(!(128&e[2])){e[2]&=-65,e[2]|=128,function L1(n,e){let t;if(null!=n&&null!=(t=n.destroyHooks))for(let s=0;s<t.length;s+=2){const r=e[t[s]];if(!(r instanceof sc)){const i=t[s+1];if(Array.isArray(i))for(let o=0;o<i.length;o+=2){const a=r[i[o]],c=i[o+1];try{c.call(a)}finally{}}else try{i.call(r)}finally{}}}}(n,e),function V1(n,e){const t=n.cleanup,s=e[7];let r=-1;if(null!==t)for(let i=0;i<t.length-1;i+=2)if("string"==typeof t[i]){const o=t[i+3];o>=0?s[r=o]():s[r=-o].unsubscribe(),i+=2}else{const o=s[r=t[i+1]];t[i].call(o)}if(null!==s){for(let i=r+1;i<s.length;i++)(0,s[i])();e[7]=null}}(n,e),1===e[1].type&&e[11].destroy();const t=e[17];if(null!==t&&_s(e[3])){t!==e[3]&&Bw(t,e);const s=e[19];null!==s&&s.detachView(n)}!function v1(n){Gf.delete(n[20])}(e)}}function Hw(n,e,t){return function Uw(n,e,t){let s=e;for(;null!==s&&40&s.type;)s=(e=s).parent;if(null===s)return t[0];{const{componentOffset:r}=s;if(r>-1){const{encapsulation:i}=n.data[s.directiveStart+r];if(i===js.None||i===js.Emulated)return null}return Bn(s,t)}}(n,e.parent,t)}function ki(n,e,t,s,r){n.insertBefore(e,t,s,r)}function qw(n,e,t){n.appendChild(e,t)}function Gw(n,e,t,s,r){null!==s?ki(n,e,t,s,r):qw(n,e,t)}function vl(n,e){return n.parentNode(e)}let ap,bl,Qw=function zw(n,e,t){return 40&n.type?Bn(n,t):null};function wl(n,e,t,s){const r=Hw(n,s,e),i=e[11],a=function Ww(n,e,t){return Qw(n,e,t)}(s.parent||e[6],s,e);if(null!=r)if(Array.isArray(t))for(let c=0;c<t.length;c++)Gw(i,r,t[c],a,!1);else Gw(i,r,t,a,!1)}function Dl(n,e){if(null!==e){const t=e.type;if(3&t)return Bn(e,n);if(4&t)return sp(-1,n[e.index]);if(8&t){const s=e.child;if(null!==s)return Dl(n,s);{const r=n[e.index];return _s(r)?sp(-1,r):Vt(r)}}if(32&t)return Zf(e,n)()||Vt(n[e.index]);{const s=Yw(n,e);return null!==s?Array.isArray(s)?s[0]:Dl(pc(n[16]),s):Dl(n,e.next)}}return null}function Yw(n,e){return null!==e?n[16][6].projection[e.projection]:null}function sp(n,e){const t=10+n+1;if(t<e.length){const s=e[t],r=s[1].firstChild;if(null!==r)return Dl(s,r)}return e[7]}function ip(n,e,t,s,r,i,o){for(;null!=t;){const a=s[t.index],c=t.type;if(o&&0===e&&(a&&cn(Vt(a),s),t.flags|=2),32!=(32&t.flags))if(8&c)ip(n,e,t.child,s,r,i,!1),jo(e,n,r,a,i);else if(32&c){const u=Zf(t,s);let l;for(;l=u();)jo(e,n,r,l,i);jo(e,n,r,a,i)}else 16&c?Xw(n,e,s,t,r,i):jo(e,n,r,a,i);t=o?t.projectionNext:t.next}}function gc(n,e,t,s,r,i){ip(t,s,n.firstChild,e,r,i,!1)}function Xw(n,e,t,s,r,i){const o=t[16],c=o[6].projection[s.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)jo(e,n,r,c[u],i);else ip(n,e,c,o[3],r,i,!0)}function Kw(n,e,t){""===t?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Jw(n,e,t){const{mergedAttrs:s,classes:r,styles:i}=t;null!==s&&Nf(n,e,s),null!==r&&Kw(n,e,r),null!==i&&function q1(n,e,t){n.setAttribute(e,"style",t)}(n,e,i)}function sD(n){return function cp(){if(void 0===bl&&(bl=null,Je.trustedTypes))try{bl=Je.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return bl}()?.createScriptURL(n)||n}class rD{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Sv})`}}function Yr(n){return n instanceof rD?n.changingThisBreaksApplicationSecurity:n}function mc(n,e){const t=function eN(n){return n instanceof rD&&n.getTypeName()||null}(n);if(null!=t&&t!==e){if("ResourceURL"===t&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Sv})`)}return t===e}const rN=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Nt=(()=>((Nt=Nt||{})[Nt.NONE=0]="NONE",Nt[Nt.HTML=1]="HTML",Nt[Nt.STYLE=2]="STYLE",Nt[Nt.SCRIPT=3]="SCRIPT",Nt[Nt.URL=4]="URL",Nt[Nt.RESOURCE_URL=5]="RESOURCE_URL",Nt))();function hD(n){const e=yc();return e?e.sanitize(Nt.URL,n)||"":mc(n,"URL")?Yr(n):function up(n){return(n=String(n)).match(rN)?n:"unsafe:"+n}(pe(n))}function dD(n){const e=yc();if(e)return sD(e.sanitize(Nt.RESOURCE_URL,n)||"");if(mc(n,"ResourceURL"))return sD(Yr(n));throw new I(904,!1)}function yc(){const n=A();return n&&n[12]}const Tl=new Q("ENVIRONMENT_INITIALIZER"),pD=new Q("INJECTOR",-1),gD=new Q("INJECTOR_DEF_TYPES");class mD{get(e,t=Qa){if(t===Qa){const s=new Error(`NullInjectorError: No provider for ${Ye(e)}!`);throw s.name="NullInjectorError",s}return t}}function yN(...n){return{\u0275providers:_D(0,n),\u0275fromNgModule:!0}}function _D(n,...e){const t=[],s=new Set;let r;return Ri(e,i=>{const o=i;fp(o,t,[],s)&&(r||(r=[]),r.push(o))}),void 0!==r&&yD(r,t),t}function yD(n,e){for(let t=0;t<n.length;t++){const{providers:r}=n[t];pp(r,i=>{e.push(i)})}}function fp(n,e,t,s){if(!(n=te(n)))return!1;let r=null,i=Ev(n);const o=!i&&Le(n);if(i||o){if(o&&!o.standalone)return!1;r=n}else{const c=n.ngModule;if(i=Ev(c),!i)return!1;r=c}const a=s.has(r);if(o){if(a)return!1;if(s.add(r),o.dependencies){const c="function"==typeof o.dependencies?o.dependencies():o.dependencies;for(const u of c)fp(u,e,t,s)}}else{if(!i)return!1;{if(null!=i.imports&&!a){let u;s.add(r);try{Ri(i.imports,l=>{fp(l,e,t,s)&&(u||(u=[]),u.push(l))})}finally{}void 0!==u&&yD(u,e)}if(!a){const u=Ni(r)||(()=>new r);e.push({provide:r,useFactory:u,deps:Oe},{provide:gD,useValue:r,multi:!0},{provide:Tl,useValue:()=>K(r),multi:!0})}const c=i.providers;null==c||a||pp(c,l=>{e.push(l)})}}return r!==n&&void 0!==n.providers}function pp(n,e){for(let t of n)rf(t)&&(t=t.\u0275providers),Array.isArray(t)?pp(t,e):e(t)}const vN=Ze({provide:String,useValue:Ze});function gp(n){return null!==n&&"object"==typeof n&&vN in n}function Pi(n){return"function"==typeof n}const mp=new Q("Set Injector scope."),El={},DN={};let _p;function Al(){return void 0===_p&&(_p=new mD),_p}class Xr{}class DD extends Xr{constructor(e,t,s,r){super(),this.parent=t,this.source=s,this.scopes=r,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,vp(e,o=>this.processProvider(o)),this.records.set(pD,Bo(void 0,this)),r.has("environment")&&this.records.set(Xr,Bo(void 0,this));const i=this.records.get(mp);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(gD.multi,Oe,ne.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const e of this._ngOnDestroyHooks)e.ngOnDestroy();for(const e of this._onDestroyHooks)e()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(e){this._onDestroyHooks.push(e)}runInContext(e){this.assertNotDestroyed();const t=Co(this),s=Xn(void 0);try{return e()}finally{Co(t),Xn(s)}}get(e,t=Qa,s=ne.Default){this.assertNotDestroyed(),s=Ku(s);const r=Co(this),i=Xn(void 0);try{if(!(s&ne.SkipSelf)){let a=this.records.get(e);if(void 0===a){const c=function EN(n){return"function"==typeof n||"object"==typeof n&&n instanceof Q}(e)&&Zu(e);a=c&&this.injectableDefInScope(c)?Bo(yp(e),El):null,this.records.set(e,a)}if(null!=a)return this.hydrate(e,a)}return(s&ne.Self?Al():this.parent).get(e,t=s&ne.Optional&&t===Qa?null:t)}catch(o){if("NullInjectorError"===o.name){if((o[Xu]=o[Xu]||[]).unshift(Ye(e)),r)throw o;return function WM(n,e,t,s){const r=n[Xu];throw e[Mv]&&r.unshift(e[Mv]),n.message=function zM(n,e,t,s=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let r=Ye(e);if(Array.isArray(e))r=e.map(Ye).join(" -> ");else if("object"==typeof e){let i=[];for(let o in e)if(e.hasOwnProperty(o)){let a=e[o];i.push(o+":"+("string"==typeof a?JSON.stringify(a):Ye(a)))}r=`{${i.join(", ")}}`}return`${t}${s?"("+s+")":""}[${r}]: ${n.replace(HM,"\n  ")}`}("\n"+n.message,r,t,s),n.ngTokenPath=r,n[Xu]=null,n}(o,e,"R3InjectorError",this.source)}throw o}finally{Xn(i),Co(r)}}resolveInjectorInitializers(){const e=Co(this),t=Xn(void 0);try{const s=this.get(Tl.multi,Oe,ne.Self);for(const r of s)r()}finally{Co(e),Xn(t)}}toString(){const e=[],t=this.records;for(const s of t.keys())e.push(Ye(s));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new I(205,!1)}processProvider(e){let t=Pi(e=te(e))?e:te(e&&e.provide);const s=function bN(n){return gp(n)?Bo(void 0,n.useValue):Bo(CD(n),El)}(e);if(Pi(e)||!0!==e.multi)this.records.get(t);else{let r=this.records.get(t);r||(r=Bo(void 0,El,!0),r.factory=()=>lf(r.multi),this.records.set(t,r)),t=e,r.multi.push(e)}this.records.set(t,s)}hydrate(e,t){return t.value===El&&(t.value=DN,t.value=t.factory()),"object"==typeof t.value&&t.value&&function TN(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=te(e.providedIn);return"string"==typeof t?"any"===t||this.scopes.has(t):this.injectorDefTypes.has(t)}}function yp(n){const e=Zu(n),t=null!==e?e.factory:Ni(n);if(null!==t)return t;if(n instanceof Q)throw new I(204,!1);if(n instanceof Function)return function CN(n){const e=n.length;if(e>0)throw function cc(n,e){const t=[];for(let s=0;s<n;s++)t.push(e);return t}(e,"?"),new I(204,!1);const t=function VM(n){const e=n&&(n[Yu]||n[Av]);if(e){const t=function LM(n){if(n.hasOwnProperty("name"))return n.name;const e=(""+n).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${t}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${t}" class.`),e}return null}(n);return null!==t?()=>t.factory(n):()=>new n}(n);throw new I(204,!1)}function CD(n,e,t){let s;if(Pi(n)){const r=te(n);return Ni(r)||yp(r)}if(gp(n))s=()=>te(n.useValue);else if(function wD(n){return!(!n||!n.useFactory)}(n))s=()=>n.useFactory(...lf(n.deps||[]));else if(function vD(n){return!(!n||!n.useExisting)}(n))s=()=>K(te(n.useExisting));else{const r=te(n&&(n.useClass||n.provide));if(!function SN(n){return!!n.deps}(n))return Ni(r)||yp(r);s=()=>new r(...lf(n.deps))}return s}function Bo(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function vp(n,e){for(const t of n)Array.isArray(t)?vp(t,e):t&&rf(t)?vp(t.\u0275providers,e):e(t)}class AN{}class bD{}class MN{resolveComponentFactory(e){throw function xN(n){const e=Error(`No component factory found for ${Ye(n)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=n,e}(e)}}let vc=(()=>{class n{}return n.NULL=new MN,n})();function IN(){return $o(Kt(),A())}function $o(n,e){return new qn(Bn(n,e))}let qn=(()=>{class n{constructor(t){this.nativeElement=t}}return n.__NG_ELEMENT_ID__=IN,n})();class TD{}let _r=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function ON(){const n=A(),t=$n(Kt().index,n);return(En(t)?t:n)[11]}(),n})(),RN=(()=>{class n{}return n.\u0275prov=re({token:n,providedIn:"root",factory:()=>null}),n})();class wc{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const kN=new wc("15.0.1"),wp={};function Cp(n){return n.ngOriginalError}class Ho{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&Cp(e);for(;t&&Cp(t);)t=Cp(t);return t||null}}function yr(n){return n instanceof Function?n():n}function AD(n,e,t){let s=n.length;for(;;){const r=n.indexOf(e,t);if(-1===r)return r;if(0===r||n.charCodeAt(r-1)<=32){const i=e.length;if(r+i===s||n.charCodeAt(r+i)<=32)return r}t=r+1}}const xD="ng-template";function GN(n,e,t){let s=0;for(;s<n.length;){let r=n[s++];if(t&&"class"===r){if(r=n[s],-1!==AD(r.toLowerCase(),e,0))return!0}else if(1===r){for(;s<n.length&&"string"==typeof(r=n[s++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function MD(n){return 4===n.type&&n.value!==xD}function WN(n,e,t){return e===(4!==n.type||t?n.value:xD)}function zN(n,e,t){let s=4;const r=n.attrs||[],i=function YN(n){for(let e=0;e<n.length;e++)if(ew(n[e]))return e;return n.length}(r);let o=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!o)if(4&s){if(s=2|1&s,""!==c&&!WN(n,c,t)||""===c&&1===e.length){if(Ds(s))return!1;o=!0}}else{const u=8&s?c:e[++a];if(8&s&&null!==n.attrs){if(!GN(n.attrs,u,t)){if(Ds(s))return!1;o=!0}continue}const h=QN(8&s?"class":c,r,MD(n),t);if(-1===h){if(Ds(s))return!1;o=!0;continue}if(""!==u){let d;d=h>i?"":r[h+1].toLowerCase();const f=8&s?d:null;if(f&&-1!==AD(f,u,0)||2&s&&u!==d){if(Ds(s))return!1;o=!0}}}}else{if(!o&&!Ds(s)&&!Ds(c))return!1;if(o&&Ds(c))continue;o=!1,s=c|1&s}}return Ds(s)||o}function Ds(n){return 0==(1&n)}function QN(n,e,t,s){if(null===e)return-1;let r=0;if(s||!t){let i=!1;for(;r<e.length;){const o=e[r];if(o===n)return r;if(3===o||6===o)i=!0;else{if(1===o||2===o){let a=e[++r];for(;"string"==typeof a;)a=e[++r];continue}if(4===o)break;if(0===o){r+=4;continue}}r+=i?1:2}return-1}return function XN(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){const s=n[t];if("number"==typeof s)return-1;if(s===e)return t;t++}return-1}(e,n)}function ID(n,e,t=!1){for(let s=0;s<e.length;s++)if(zN(n,e[s],t))return!0;return!1}function ND(n,e){return n?":not("+e.trim()+")":e}function JN(n){let e=n[0],t=1,s=2,r="",i=!1;for(;t<n.length;){let o=n[t];if("string"==typeof o)if(2&s){const a=n[++t];r+="["+o+(a.length>0?'="'+a+'"':"")+"]"}else 8&s?r+="."+o:4&s&&(r+=" "+o);else""!==r&&!Ds(o)&&(e+=ND(i,r),r=""),s=o,i=i||!Ds(s);t++}return""!==r&&(e+=ND(i,r)),e}const ge={};function be(n){OD(Ie(),A(),_n()+n,!1)}function OD(n,e,t,s){if(!s)if(3==(3&e[2])){const i=n.preOrderCheckHooks;null!==i&&cl(e,i,t)}else{const i=n.preOrderHooks;null!==i&&ul(e,i,0,t)}Oi(t)}function PD(n,e=null,t=null,s){const r=VD(n,e,t,s);return r.resolveInjectorInitializers(),r}function VD(n,e=null,t=null,s,r=new Set){const i=[t||Oe,yN(n)];return s=s||("object"==typeof n?void 0:Ye(n)),new DD(i,e||Al(),s||null,r)}let ts=(()=>{class n{static create(t,s){if(Array.isArray(t))return PD({name:""},s,t,"");{const r=t.name??"";return PD({name:r},t.parent,t.providers,r)}}}return n.THROW_IF_NOT_FOUND=Qa,n.NULL=new mD,n.\u0275prov=re({token:n,providedIn:"any",factory:()=>K(pD)}),n.__NG_ELEMENT_ID__=-1,n})();function E(n,e=ne.Default){const t=A();return null===t?K(n,e):cw(Kt(),t,te(n),e)}function Ap(){throw new Error("invalid")}function Ml(n,e){return n<<17|e<<2}function Cs(n){return n>>17&32767}function xp(n){return 2|n}function vr(n){return(131068&n)>>2}function Mp(n,e){return-131069&n|e<<2}function Ip(n){return 1|n}function eC(n,e){const t=n.contentQueries;if(null!==t)for(let s=0;s<t.length;s+=2){const r=t[s],i=t[s+1];if(-1!==i){const o=n.data[i];Ef(r),o.contentQueries(2,e[i],i)}}}function Ol(n,e,t,s,r,i,o,a,c,u,l){const h=e.blueprint.slice();return h[0]=r,h[2]=76|s,(null!==l||n&&1024&n[2])&&(h[2]|=1024),Bv(h),h[3]=h[15]=n,h[8]=t,h[10]=o||n&&n[10],h[11]=a||n&&n[11],h[12]=c||n&&n[12]||null,h[9]=u||n&&n[9]||null,h[6]=i,h[20]=function _1(){return m1++}(),h[21]=l,h[16]=2==e.type?n[16]:h,h}function Go(n,e,t,s,r){let i=n.data[e];if(null===i)i=function Lp(n,e,t,s,r){const i=Uv(),o=Cf(),c=n.data[e]=function FO(n,e,t,s,r,i){return{type:t,index:s,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?i:i&&i.parent,t,e,s,r);return null===n.firstChild&&(n.firstChild=c),null!==i&&(o?null==i.child&&null!==c.parent&&(i.child=c):null===i.next&&(i.next=c)),c}(n,e,t,s,r),function wI(){return he.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=t,i.value=s,i.attrs=r;const o=function nc(){const n=he.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}();i.injectorIndex=null===o?-1:o.injectorIndex}return Bs(i,!0),i}function Dc(n,e,t,s){if(0===t)return-1;const r=e.length;for(let i=0;i<t;i++)e.push(s),n.blueprint.push(s),n.data.push(null);return r}function jp(n,e,t){Af(e);try{const s=n.viewQuery;null!==s&&Zp(1,s,t);const r=n.template;null!==r&&tC(n,e,r,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&eC(n,e),n.staticViewQueries&&Zp(2,n.viewQuery,t);const i=n.components;null!==i&&function OO(n,e){for(let t=0;t<e.length;t++)eR(n,e[t])}(e,i)}catch(s){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),s}finally{e[2]&=-5,xf()}}function Rl(n,e,t,s){const r=e[2];if(128!=(128&r)){Af(e);try{Bv(e),function Gv(n){return he.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==t&&tC(n,e,t,2,s);const o=3==(3&r);if(o){const u=n.preOrderCheckHooks;null!==u&&cl(e,u,null)}else{const u=n.preOrderHooks;null!==u&&ul(e,u,0,null),Mf(e,0)}if(function KO(n){for(let e=Yf(n);null!==e;e=Xf(e)){if(!e[2])continue;const t=e[9];for(let s=0;s<t.length;s++){const r=t[s],i=r[3];0==(512&r[2])&&Df(i,1),r[2]|=512}}}(e),function XO(n){for(let e=Yf(n);null!==e;e=Xf(e))for(let t=10;t<e.length;t++){const s=e[t],r=s[1];ol(s)&&Rl(r,s,r.template,s[8])}}(e),null!==n.contentQueries&&eC(n,e),o){const u=n.contentCheckHooks;null!==u&&cl(e,u)}else{const u=n.contentHooks;null!==u&&ul(e,u,1),Mf(e,1)}!function IO(n,e){const t=n.hostBindingOpCodes;if(null!==t)try{for(let s=0;s<t.length;s++){const r=t[s];if(r<0)Oi(~r);else{const i=r,o=t[++s],a=t[++s];DI(o,i),a(2,e[i])}}}finally{Oi(-1)}}(n,e);const a=n.components;null!==a&&function NO(n,e){for(let t=0;t<e.length;t++)JO(n,e[t])}(e,a);const c=n.viewQuery;if(null!==c&&Zp(2,c,s),o){const u=n.viewCheckHooks;null!==u&&cl(e,u)}else{const u=n.viewHooks;null!==u&&ul(e,u,2),Mf(e,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),e[2]&=-41,512&e[2]&&(e[2]&=-513,Df(e[3],-1))}finally{xf()}}}function tC(n,e,t,s,r){const i=_n(),o=2&s;try{Oi(-1),o&&e.length>22&&OD(n,e,22,!1),t(s,r)}finally{Oi(i)}}function Bp(n,e,t){if(gf(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const o=n.data[i];o.contentQueries&&o.contentQueries(1,t[i],i)}}}function $p(n,e,t){!Hv()||(function $O(n,e,t,s){const r=t.directiveStart,i=t.directiveEnd;n.firstCreatePass||hl(t,e),cn(s,e);const o=t.initialInputs;for(let a=r;a<i;a++){const c=n.data[a],u=ys(c);u&&QO(e,t,c);const l=No(e,n,a,t);cn(l,e),null!==o&&ZO(0,a-r,l,c,0,o),u&&($n(t.index,e)[8]=l)}}(n,e,t,Bn(t,e)),64==(64&t.flags)&&cC(n,e,t))}function Hp(n,e,t=Bn){const s=e.localNames;if(null!==s){let r=e.index+1;for(let i=0;i<s.length;i+=2){const o=s[i+1],a=-1===o?t(e,n):n[o];n[r++]=a}}}function nC(n){const e=n.tView;return null===e||e.incompleteFirstPass?n.tView=Up(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):e}function Up(n,e,t,s,r,i,o,a,c,u){const l=22+s,h=l+r,d=function RO(n,e){const t=[];for(let s=0;s<e;s++)t.push(s<n?null:ge);return t}(l,h),f="function"==typeof u?u():u;return d[1]={type:n,blueprint:d,template:t,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:f,incompleteFirstPass:!1}}function rC(n,e,t,s){for(let r in n)if(n.hasOwnProperty(r)){t=null===t?{}:t;const i=n[r];null===s?iC(t,e,r,i):s.hasOwnProperty(r)&&iC(t,e,s[r],i)}return t}function iC(n,e,t,s){n.hasOwnProperty(t)?n[t].push(e,s):n[t]=[e,s]}function oC(n,e){const t=$n(e,n);16&t[2]||(t[2]|=32)}function qp(n,e,t,s){let r=!1;if(Hv()){const i=null===s?null:{"":-1},o=function UO(n,e){const t=n.directiveRegistry;let s=null,r=null;if(t)for(let i=0;i<t.length;i++){const o=t[i];if(ID(e,o.selectors,!1))if(s||(s=[]),ys(o))if(null!==o.findHostDirectiveDefs){const a=[];r=r||new Map,o.findHostDirectiveDefs(o,a,r),s.unshift(...a,o),Gp(n,e,a.length)}else s.unshift(o),Gp(n,e,0);else r=r||new Map,o.findHostDirectiveDefs?.(o,s,r),s.push(o)}return null===s?null:[s,r]}(n,t);let a,c;null===o?a=c=null:[a,c]=o,null!==a&&(r=!0,aC(n,e,t,a,i,c)),i&&function qO(n,e,t){if(e){const s=n.localNames=[];for(let r=0;r<e.length;r+=2){const i=t[e[r+1]];if(null==i)throw new I(-301,!1);s.push(e[r],i)}}}(t,s,i)}return t.mergedAttrs=ic(t.mergedAttrs,t.attrs),r}function aC(n,e,t,s,r,i){for(let u=0;u<s.length;u++)Ff(hl(t,e),n,s[u].type);!function WO(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}(t,n.data.length,s.length);for(let u=0;u<s.length;u++){const l=s[u];l.providersResolver&&l.providersResolver(l)}let o=!1,a=!1,c=Dc(n,e,s.length,null);for(let u=0;u<s.length;u++){const l=s[u];t.mergedAttrs=ic(t.mergedAttrs,l.hostAttrs),zO(n,t,e,c,l),GO(c,l,r),null!==l.contentQueries&&(t.flags|=4),(null!==l.hostBindings||null!==l.hostAttrs||0!==l.hostVars)&&(t.flags|=64);const h=l.type.prototype;!o&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t.index),o=!0),!a&&(h.ngOnChanges||h.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t.index),a=!0),c++}!function PO(n,e,t){const r=e.directiveEnd,i=n.data,o=e.attrs,a=[];let c=null,u=null;for(let l=e.directiveStart;l<r;l++){const h=i[l],d=t?t.get(h):null,p=d?d.outputs:null;c=rC(h.inputs,l,c,d?d.inputs:null),u=rC(h.outputs,l,u,p);const g=null===c||null===o||MD(e)?null:YO(c,l,o);a.push(g)}null!==c&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=u}(n,t,i)}function cC(n,e,t){const s=t.directiveStart,r=t.directiveEnd,i=t.index,o=function CI(){return he.lFrame.currentDirectiveIndex}();try{Oi(i);for(let a=s;a<r;a++){const c=n.data[a],u=e[a];Sf(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&HO(c,u)}}finally{Oi(-1),Sf(o)}}function HO(n,e){null!==n.hostBindings&&n.hostBindings(1,e)}function Gp(n,e,t){e.componentOffset=t,(n.components||(n.components=[])).push(e.index)}function GO(n,e,t){if(t){if(e.exportAs)for(let s=0;s<e.exportAs.length;s++)t[e.exportAs[s]]=n;ys(e)&&(t[""]=n)}}function zO(n,e,t,s,r){n.data[s]=r;const i=r.factory||(r.factory=Ni(r.type)),o=new sc(i,ys(r),E);n.blueprint[s]=o,t[s]=o,function jO(n,e,t,s,r){const i=r.hostBindings;if(i){let o=n.hostBindingOpCodes;null===o&&(o=n.hostBindingOpCodes=[]);const a=~e.index;(function BO(n){let e=n.length;for(;e>0;){const t=n[--e];if("number"==typeof t&&t<0)return t}return 0})(o)!=a&&o.push(a),o.push(t,s,i)}}(n,e,s,Dc(n,t,r.hostVars,ge),r)}function QO(n,e,t){const s=Bn(e,n),r=nC(t),i=n[10],o=kl(n,Ol(n,r,null,t.onPush?32:16,s,e,i,i.createRenderer(s,t),null,null,null));n[e.index]=o}function Hs(n,e,t,s,r,i){const o=Bn(n,e);!function Wp(n,e,t,s,r,i,o){if(null==i)n.removeAttribute(e,r,t);else{const a=null==o?pe(i):o(i,s||"",r);n.setAttribute(e,r,a,t)}}(e[11],o,i,n.value,t,s,r)}function ZO(n,e,t,s,r,i){const o=i[e];if(null!==o){const a=s.setInput;for(let c=0;c<o.length;){const u=o[c++],l=o[c++],h=o[c++];null!==a?s.setInput(t,h,u,l):t[l]=h}}}function YO(n,e,t){let s=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;if(n.hasOwnProperty(i)){null===s&&(s=[]);const o=n[i];for(let a=0;a<o.length;a+=2)if(o[a]===e){s.push(i,o[a+1],t[r+1]);break}}r+=2}else r+=2;else r+=4}return s}function uC(n,e,t,s){return new Array(n,!0,!1,e,null,0,s,t,null,null)}function JO(n,e){const t=$n(e,n);if(ol(t)){const s=t[1];48&t[2]?Rl(s,t,s.template,t[8]):t[5]>0&&zp(t)}}function zp(n){for(let s=Yf(n);null!==s;s=Xf(s))for(let r=10;r<s.length;r++){const i=s[r];if(ol(i))if(512&i[2]){const o=i[1];Rl(o,i,o.template,i[8])}else i[5]>0&&zp(i)}const t=n[1].components;if(null!==t)for(let s=0;s<t.length;s++){const r=$n(t[s],n);ol(r)&&r[5]>0&&zp(r)}}function eR(n,e){const t=$n(e,n),s=t[1];(function tR(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])})(s,t),jp(s,t,t[8])}function kl(n,e){return n[13]?n[14][4]=e:n[13]=e,n[14]=e,e}function Qp(n){for(;n;){n[2]|=32;const e=pc(n);if(eI(n)&&!e)return n;n=e}return null}function Fl(n,e,t,s=!0){const r=e[10];r.begin&&r.begin();try{Rl(n,e,n.template,t)}catch(o){throw s&&fC(e,o),o}finally{r.end&&r.end()}}function Zp(n,e,t){Ef(0),e(n,t)}function lC(n){return n[7]||(n[7]=[])}function hC(n){return n.cleanup||(n.cleanup=[])}function fC(n,e){const t=n[9],s=t?t.get(Ho,null):null;s&&s.handleError(e)}function Yp(n,e,t,s,r){for(let i=0;i<t.length;){const o=t[i++],a=t[i++],c=e[o],u=n.data[o];null!==u.setInput?u.setInput(c,r,s,a):c[a]=r}}function Pl(n,e,t){let s=t?n.styles:null,r=t?n.classes:null,i=0;if(null!==e)for(let o=0;o<e.length;o++){const a=e[o];"number"==typeof a?i=a:1==i?r=nf(r,a):2==i&&(s=nf(s,a+": "+e[++o]+";"))}t?n.styles=s:n.stylesWithoutHost=s,t?n.classes=r:n.classesWithoutHost=r}function Vl(n,e,t,s,r=!1){for(;null!==t;){const i=e[t.index];if(null!==i&&s.push(Vt(i)),_s(i))for(let a=10;a<i.length;a++){const c=i[a],u=c[1].firstChild;null!==u&&Vl(c[1],c,u,s)}const o=t.type;if(8&o)Vl(n,e,t.child,s);else if(32&o){const a=Zf(t,e);let c;for(;c=a();)s.push(c)}else if(16&o){const a=Yw(e,t);if(Array.isArray(a))s.push(...a);else{const c=pc(e[16]);Vl(c[1],c,a,s,!0)}}t=r?t.projectionNext:t.next}return s}class Cc{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Vl(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(_s(e)){const t=e[8],s=t?t.indexOf(this):-1;s>-1&&(ep(e,s),gl(t,s))}this._attachedToViewContainer=!1}$w(this._lView[1],this._lView)}onDestroy(e){!function sC(n,e,t,s){const r=lC(e);null===t?r.push(s):(r.push(t),n.firstCreatePass&&hC(n).push(s,r.length-1))}(this._lView[1],this._lView,null,e)}markForCheck(){Qp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Fl(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new I(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function R1(n,e){gc(n,e,e[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new I(902,!1);this._appRef=e}}class nR extends Cc{constructor(e){super(e),this._view=e}detectChanges(){const e=this._view;Fl(e[1],e,e[8],!1)}checkNoChanges(){}get context(){return null}}class Xp extends vc{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=Le(e);return new bc(t,this.ngModule)}}function pC(n){const e=[];for(let t in n)n.hasOwnProperty(t)&&e.push({propName:n[t],templateName:t});return e}class rR{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,s){s=Ku(s);const r=this.injector.get(e,wp,s);return r!==wp||t===wp?r:this.parentInjector.get(e,t,s)}}class bc extends bD{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=function eO(n){return n.map(JN).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return pC(this.componentDef.inputs)}get outputs(){return pC(this.componentDef.outputs)}create(e,t,s,r){let i=(r=r||this.ngModule)instanceof Xr?r:r?.injector;i&&null!==this.componentDef.getStandaloneInjector&&(i=this.componentDef.getStandaloneInjector(i)||i);const o=i?new rR(e,i):e,a=o.get(TD,null);if(null===a)throw new I(407,!1);const c=o.get(RN,null),u=a.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",h=s?function kO(n,e,t){return n.selectRootElement(e,t===js.ShadowDom)}(u,s,this.componentDef.encapsulation):Jf(u,l,function sR(n){const e=n.toLowerCase();return"svg"===e?"svg":"math"===e?"math":null}(l)),d=this.componentDef.onPush?288:272,f=Up(0,null,null,1,0,null,null,null,null,null),p=Ol(null,f,null,d,null,null,a,u,c,o,null);let g,_;Af(p);try{const m=this.componentDef;let w,v=null;m.findHostDirectiveDefs?(w=[],v=new Map,m.findHostDirectiveDefs(m,w,v),w.push(m)):w=[m];const D=function aR(n,e){const t=n[1];return n[22]=e,Go(t,22,2,"#host",null)}(p,h),y=function cR(n,e,t,s,r,i,o,a){const c=r[1];!function uR(n,e,t,s){for(const r of n)e.mergedAttrs=ic(e.mergedAttrs,r.hostAttrs);null!==e.mergedAttrs&&(Pl(e,e.mergedAttrs,!0),null!==t&&Jw(s,t,e))}(s,n,e,o);const u=i.createRenderer(e,t),l=Ol(r,nC(t),null,t.onPush?32:16,r[n.index],n,i,u,a||null,null,null);return c.firstCreatePass&&Gp(c,n,s.length-1),kl(r,l),r[n.index]=l}(D,h,m,w,p,a,u);_=wf(f,22),h&&function hR(n,e,t,s){if(s)Nf(n,t,["ng-version",kN.full]);else{const{attrs:r,classes:i}=function tO(n){const e=[],t=[];let s=1,r=2;for(;s<n.length;){let i=n[s];if("string"==typeof i)2===r?""!==i&&e.push(i,n[++s]):8===r&&t.push(i);else{if(!Ds(r))break;r=i}s++}return{attrs:e,classes:t}}(e.selectors[0]);r&&Nf(n,t,r),i&&i.length>0&&Kw(n,t,i.join(" "))}}(u,m,h,s),void 0!==t&&function dR(n,e,t){const s=n.projection=[];for(let r=0;r<e.length;r++){const i=t[r];s.push(null!=i?Array.from(i):null)}}(_,this.ngContentSelectors,t),g=function lR(n,e,t,s,r,i){const o=Kt(),a=r[1],c=Bn(o,r);aC(a,r,o,t,null,s);for(let l=0;l<t.length;l++)cn(No(r,a,o.directiveStart+l,o),r);cC(a,r,o),c&&cn(c,r);const u=No(r,a,o.directiveStart+o.componentOffset,o);if(n[8]=r[8]=u,null!==i)for(const l of i)l(u,e);return Bp(a,o,n),u}(y,m,w,v,p,[fR]),jp(f,p,null)}finally{xf()}return new oR(this.componentType,g,$o(_,p),p,_)}}class oR extends AN{constructor(e,t,s,r,i){super(),this.location=s,this._rootLView=r,this._tNode=i,this.instance=t,this.hostView=this.changeDetectorRef=new nR(r),this.componentType=e}setInput(e,t){const s=this._tNode.inputs;let r;if(null!==s&&(r=s[e])){const i=this._rootLView;Yp(i[1],i,r,e,t),oC(i,this._tNode.index)}}get injector(){return new Oo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}function fR(){const n=Kt();al(A()[1],n)}function He(n){let e=function gC(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),t=!0;const s=[n];for(;e;){let r;if(ys(n))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new I(903,!1);r=e.\u0275dir}if(r){if(t){s.push(r);const o=n;o.inputs=Kp(n.inputs),o.declaredInputs=Kp(n.declaredInputs),o.outputs=Kp(n.outputs);const a=r.hostBindings;a&&_R(n,a);const c=r.viewQuery,u=r.contentQueries;if(c&&gR(n,c),u&&mR(n,u),tf(n.inputs,r.inputs),tf(n.declaredInputs,r.declaredInputs),tf(n.outputs,r.outputs),ys(r)&&r.data.animation){const l=n.data;l.animation=(l.animation||[]).concat(r.data.animation)}}const i=r.features;if(i)for(let o=0;o<i.length;o++){const a=i[o];a&&a.ngInherit&&a(n),a===He&&(t=!1)}}e=Object.getPrototypeOf(e)}!function pR(n){let e=0,t=null;for(let s=n.length-1;s>=0;s--){const r=n[s];r.hostVars=e+=r.hostVars,r.hostAttrs=ic(r.hostAttrs,t=ic(t,r.hostAttrs))}}(s)}function Kp(n){return n===dr?{}:n===Oe?[]:n}function gR(n,e){const t=n.viewQuery;n.viewQuery=t?(s,r)=>{e(s,r),t(s,r)}:e}function mR(n,e){const t=n.contentQueries;n.contentQueries=t?(s,r,i)=>{e(s,r,i),t(s,r,i)}:e}function _R(n,e){const t=n.hostBindings;n.hostBindings=t?(s,r)=>{e(s,r),t(s,r)}:e}let Ll=null;function Vi(){if(!Ll){const n=Je.Symbol;if(n&&n.iterator)Ll=n.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const s=e[t];"entries"!==s&&"size"!==s&&Map.prototype[s]===Map.prototype.entries&&(Ll=s)}}}return Ll}function Sc(n){return!!Jp(n)&&(Array.isArray(n)||!(n instanceof Map)&&Vi()in n)}function Jp(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Us(n,e,t){return n[e]=t}function un(n,e,t){return!Object.is(n[e],t)&&(n[e]=t,!0)}function qs(n,e,t,s){const r=A();return un(r,xo(),e)&&(Ie(),Hs(pt(),r,n,e,t,s)),qs}function Tt(n,e,t,s,r,i,o,a){const c=A(),u=Ie(),l=n+22,h=u.firstCreatePass?function AR(n,e,t,s,r,i,o,a,c){const u=e.consts,l=Go(e,n,4,o||null,Qr(u,a));qp(e,t,l,Qr(u,c)),al(e,l);const h=l.tViews=Up(2,l,s,r,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,u);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,u,c,e,t,s,r,i,o):u.data[l];Bs(h,!1);const d=c[11].createComment("");wl(u,c,d,h),cn(d,c),kl(c,c[l]=uC(d,c,d,h)),rl(h)&&$p(u,c,h),null!=o&&Hp(c,h,a)}function eg(n){return Ao(function vI(){return he.lFrame.contextLView}(),22+n)}function qe(n,e,t){const s=A();return un(s,xo(),e)&&function Gn(n,e,t,s,r,i,o,a){const c=Bn(e,t);let l,u=e.inputs;!a&&null!=u&&(l=u[s])?(Yp(n,t,l,s,r),sl(e)&&oC(t,e.index)):3&e.type&&(s=function VO(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(s),r=null!=o?o(r,e.value||"",s):r,i.setProperty(c,s,r))}(Ie(),pt(),s,n,e,s[11],t,!1),qe}function tg(n,e,t,s,r){const o=r?"class":"style";Yp(n,t,e.inputs[o],o,s)}function H(n,e,t,s){const r=A(),i=Ie(),o=22+n,a=r[11],c=r[o]=Jf(a,e,function II(){return he.lFrame.currentNamespace}()),u=i.firstCreatePass?function MR(n,e,t,s,r,i,o){const a=e.consts,u=Go(e,n,2,r,Qr(a,i));return qp(e,t,u,Qr(a,o)),null!==u.attrs&&Pl(u,u.attrs,!1),null!==u.mergedAttrs&&Pl(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(o,i,r,0,e,t,s):i.data[o];return Bs(u,!0),Jw(a,c,u),32!=(32&u.flags)&&wl(i,r,c,u),0===function pI(){return he.lFrame.elementDepthCount}()&&cn(c,r),function gI(){he.lFrame.elementDepthCount++}(),rl(u)&&($p(i,r,u),Bp(i,u,r)),null!==s&&Hp(r,u),H}function q(){let n=Kt();Cf()?bf():(n=n.parent,Bs(n,!1));const e=n;!function mI(){he.lFrame.elementDepthCount--}();const t=Ie();return t.firstCreatePass&&(al(t,n),gf(n)&&t.queries.elementEnd(n)),null!=e.classesWithoutHost&&function FI(n){return 0!=(8&n.flags)}(e)&&tg(t,e,A(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function PI(n){return 0!=(16&n.flags)}(e)&&tg(t,e,A(),e.stylesWithoutHost,!1),q}function Gs(n,e,t,s){return H(n,e,t,s),q(),Gs}function Ec(n,e,t){const s=A(),r=Ie(),i=n+22,o=r.firstCreatePass?function IR(n,e,t,s,r){const i=e.consts,o=Qr(i,s),a=Go(e,n,8,"ng-container",o);return null!==o&&Pl(a,o,!0),qp(e,t,a,Qr(i,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(i,r,s,e,t):r.data[i];Bs(o,!0);const a=s[i]=s[11].createComment("");return wl(r,s,a,o),cn(a,s),rl(o)&&($p(r,s,o),Bp(r,o,s)),null!=t&&Hp(s,o),Ec}function Ac(){let n=Kt();const e=Ie();return Cf()?bf():(n=n.parent,Bs(n,!1)),e.firstCreatePass&&(al(e,n),gf(n)&&e.queries.elementEnd(n)),Ac}function bs(){return A()}function xc(n){return!!n&&"function"==typeof n.then}function MC(n){return!!n&&"function"==typeof n.subscribe}const ng=MC;function Ge(n,e,t,s){const r=A(),i=Ie(),o=Kt();return function NC(n,e,t,s,r,i,o){const a=rl(s),u=n.firstCreatePass&&hC(n),l=e[8],h=lC(e);let d=!0;if(3&s.type||o){const g=Bn(s,e),_=o?o(g):g,m=h.length,w=o?D=>o(Vt(D[s.index])):s.index;let v=null;if(!o&&a&&(v=function NR(n,e,t,s){const r=n.cleanup;if(null!=r)for(let i=0;i<r.length-1;i+=2){const o=r[i];if(o===t&&r[i+1]===s){const a=e[7],c=r[i+2];return a.length>c?a[c]:null}"string"==typeof o&&(i+=2)}return null}(n,e,r,s.index)),null!==v)(v.__ngLastListenerFn__||v).__ngNextListenerFn__=i,v.__ngLastListenerFn__=i,d=!1;else{i=RC(s,e,l,i,!1);const D=t.listen(_,r,i);h.push(i,D),u&&u.push(r,w,m,m+1)}}else i=RC(s,e,l,i,!1);const f=s.outputs;let p;if(d&&null!==f&&(p=f[r])){const g=p.length;if(g)for(let _=0;_<g;_+=2){const y=e[p[_]][p[_+1]].subscribe(i),C=h.length;h.push(i,y),u&&u.push(r,s.index,C,-(C+1))}}}(i,r,r[11],o,n,e,s),Ge}function OC(n,e,t,s){try{return!1!==t(s)}catch(r){return fC(n,r),!1}}function RC(n,e,t,s,r){return function i(o){if(o===Function)return s;Qp(n.componentOffset>-1?$n(n.index,e):e);let c=OC(e,0,s,o),u=i.__ngNextListenerFn__;for(;u;)c=OC(e,0,u,o)&&c,u=u.__ngNextListenerFn__;return r&&!1===c&&(o.preventDefault(),o.returnValue=!1),c}}function vt(n=1){return function SI(n){return(he.lFrame.contextLView=function TI(n,e){for(;n>0;)e=e[15],n--;return e}(n,he.lFrame.contextLView))[8]}(n)}function UC(n,e,t,s,r){const i=n[t+1],o=null===e;let a=s?Cs(i):vr(i),c=!1;for(;0!==a&&(!1===c||o);){const l=n[a+1];VR(n[a],e)&&(c=!0,n[a+1]=s?Ip(l):xp(l)),a=s?Cs(l):vr(l)}c&&(n[t+1]=s?xp(i):Ip(i))}function VR(n,e){return null===n||null==e||(Array.isArray(n)?n[1]:n)===e||!(!Array.isArray(n)||"string"!=typeof e)&&Vo(n,e)>=0}function ji(n,e){return function Ss(n,e,t,s){const r=A(),i=Ie(),o=function gr(n){const e=he.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}(2);i.firstUpdatePass&&function KC(n,e,t,s){const r=n.data;if(null===r[t+1]){const i=r[_n()],o=function XC(n,e){return e>=n.expandoStartIndex}(n,t);(function nb(n,e){return 0!=(n.flags&(e?8:16))})(i,s)&&null===e&&!o&&(e=!1),e=function WR(n,e,t,s){const r=function Tf(n){const e=he.lFrame.currentDirectiveIndex;return-1===e?null:n[e]}(n);let i=s?e.residualClasses:e.residualStyles;if(null===r)0===(s?e.classBindings:e.styleBindings)&&(t=Mc(t=rg(null,n,e,t,s),e.attrs,s),i=null);else{const o=e.directiveStylingLast;if(-1===o||n[o]!==r)if(t=rg(r,n,e,t,s),null===i){let c=function zR(n,e,t){const s=t?e.classBindings:e.styleBindings;if(0!==vr(s))return n[Cs(s)]}(n,e,s);void 0!==c&&Array.isArray(c)&&(c=rg(null,n,e,c[1],s),c=Mc(c,e.attrs,s),function QR(n,e,t,s){n[Cs(t?e.classBindings:e.styleBindings)]=s}(n,e,s,c))}else i=function ZR(n,e,t){let s;const r=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<r;i++)s=Mc(s,n[i].hostAttrs,t);return Mc(s,e.attrs,t)}(n,e,s)}return void 0!==i&&(s?e.residualClasses=i:e.residualStyles=i),t}(r,i,e,s),function FR(n,e,t,s,r,i){let o=i?e.classBindings:e.styleBindings,a=Cs(o),c=vr(o);n[s]=t;let l,u=!1;if(Array.isArray(t)){const h=t;l=h[1],(null===l||Vo(h,l)>0)&&(u=!0)}else l=t;if(r)if(0!==c){const d=Cs(n[a+1]);n[s+1]=Ml(d,a),0!==d&&(n[d+1]=Mp(n[d+1],s)),n[a+1]=function wO(n,e){return 131071&n|e<<17}(n[a+1],s)}else n[s+1]=Ml(a,0),0!==a&&(n[a+1]=Mp(n[a+1],s)),a=s;else n[s+1]=Ml(c,0),0===a?a=s:n[c+1]=Mp(n[c+1],s),c=s;u&&(n[s+1]=xp(n[s+1])),UC(n,l,s,!0),UC(n,l,s,!1),function PR(n,e,t,s,r){const i=r?n.residualClasses:n.residualStyles;null!=i&&"string"==typeof e&&Vo(i,e)>=0&&(t[s+1]=Ip(t[s+1]))}(e,l,n,s,i),o=Ml(a,c),i?e.classBindings=o:e.styleBindings=o}(r,i,e,t,o,s)}}(i,n,o,s),e!==ge&&un(r,o,e)&&function eb(n,e,t,s,r,i,o,a){if(!(3&e.type))return;const c=n.data,u=c[a+1];Bl(function WD(n){return 1==(1&n)}(u)?tb(c,e,t,r,vr(u),o):void 0)||(Bl(i)||function GD(n){return 2==(2&n)}(u)&&(i=tb(c,null,t,r,a,o)),function U1(n,e,t,s,r){if(e)r?n.addClass(t,s):n.removeClass(t,s);else{let i=-1===s.indexOf("-")?void 0:An.DashCase;null==r?n.removeStyle(t,s,i):("string"==typeof r&&r.endsWith("!important")&&(r=r.slice(0,-10),i|=An.Important),n.setStyle(t,s,r,i))}}(s,o,il(_n(),t),r,i))}(i,i.data[_n()],r,r[11],n,r[o+1]=function KR(n,e){return null==n||("string"==typeof e?n+=e:"object"==typeof n&&(n=Ye(Yr(n)))),n}(e,t),s,o)}(n,e,null,!0),ji}function rg(n,e,t,s,r){let i=null;const o=t.directiveEnd;let a=t.directiveStylingLast;for(-1===a?a=t.directiveStart:a++;a<o&&(i=e[a],s=Mc(s,i.hostAttrs,r),i!==n);)a++;return null!==n&&(t.directiveStylingLast=a),s}function Mc(n,e,t){const s=t?1:2;let r=-1;if(null!==e)for(let i=0;i<e.length;i++){const o=e[i];"number"==typeof o?r=o:r===s&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Un(n,o,!!t||e[++i]))}return void 0===n?null:n}function tb(n,e,t,s,r,i){const o=null===e;let a;for(;r>0;){const c=n[r],u=Array.isArray(c),l=u?c[1]:c,h=null===l;let d=t[r+1];d===ge&&(d=h?Oe:void 0);let f=h?jf(d,s):l===s?d:void 0;if(u&&!Bl(f)&&(f=jf(c,s)),Bl(f)&&(a=f,o))return a;const p=n[r+1];r=o?Cs(p):vr(p)}if(null!==e){let c=i?e.residualClasses:e.residualStyles;null!=c&&(a=jf(c,s))}return a}function Bl(n){return void 0!==n}function Ne(n,e=""){const t=A(),s=Ie(),r=n+22,i=s.firstCreatePass?Go(s,r,1,e,null):s.data[r],o=t[r]=function Kf(n,e){return n.createText(e)}(t[11],e);wl(s,t,o,i),Bs(i,!1)}function Dr(n){return Qs("",n,""),Dr}function Qs(n,e,t){const s=A(),r=function zo(n,e,t,s){return un(n,xo(),t)?e+pe(t)+s:ge}(s,n,e,t);return r!==ge&&function wr(n,e,t){const s=il(e,n);!function jw(n,e,t){n.setValue(e,t)}(n[11],s,t)}(s,_n(),r),Qs}const sa="en-US";let Sb=sa;function ag(n,e,t,s,r){if(n=te(n),Array.isArray(n))for(let i=0;i<n.length;i++)ag(n[i],e,t,s,r);else{const i=Ie(),o=A();let a=Pi(n)?n:te(n.provide),c=CD(n);const u=Kt(),l=1048575&u.providerIndexes,h=u.directiveStart,d=u.providerIndexes>>20;if(Pi(n)||!n.multi){const f=new sc(c,r,E),p=ug(a,e,r?l:l+d,h);-1===p?(Ff(hl(u,o),i,a),cg(i,n,e.length),e.push(a),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=1048576),t.push(f),o.push(f)):(t[p]=f,o[p]=f)}else{const f=ug(a,e,l+d,h),p=ug(a,e,l,l+d),g=f>=0&&t[f],_=p>=0&&t[p];if(r&&!_||!r&&!g){Ff(hl(u,o),i,a);const m=function mF(n,e,t,s,r){const i=new sc(n,t,E);return i.multi=[],i.index=e,i.componentProviders=0,Zb(i,r,s&&!t),i}(r?gF:pF,t.length,r,s,c);!r&&_&&(t[p].providerFactory=m),cg(i,n,e.length,0),e.push(a),u.directiveStart++,u.directiveEnd++,r&&(u.providerIndexes+=1048576),t.push(m),o.push(m)}else cg(i,n,f>-1?f:p,Zb(t[r?p:f],c,!r&&s));!r&&s&&_&&t[p].componentProviders++}}}function cg(n,e,t,s){const r=Pi(e),i=function wN(n){return!!n.useClass}(e);if(r||i){const c=(i?te(e.useClass):e).prototype.ngOnDestroy;if(c){const u=n.destroyHooks||(n.destroyHooks=[]);if(!r&&e.multi){const l=u.indexOf(t);-1===l?u.push(t,[s,c]):u[l+1].push(s,c)}else u.push(t,c)}}}function Zb(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function ug(n,e,t,s){for(let r=t;r<s;r++)if(e[r]===n)return r;return-1}function pF(n,e,t,s){return lg(this.multi,[])}function gF(n,e,t,s){const r=this.multi;let i;if(this.providerFactory){const o=this.providerFactory.componentProviders,a=No(t,t[1],this.providerFactory.index,s);i=a.slice(0,o),lg(r,i);for(let c=o;c<a.length;c++)i.push(a[c])}else i=[],lg(r,i);return i}function lg(n,e){for(let t=0;t<n.length;t++)e.push((0,n[t])());return e}function ut(n,e=[]){return t=>{t.providersResolver=(s,r)=>function fF(n,e,t){const s=Ie();if(s.firstCreatePass){const r=ys(n);ag(t,s.data,s.blueprint,r,!0),ag(e,s.data,s.blueprint,r,!1)}}(s,r?r(n):n,e)}}class $i{}class Yb{}class Xb extends $i{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Xp(this);const s=Ln(e);this._bootstrapComponents=yr(s.bootstrap),this._r3Injector=VD(e,t,[{provide:$i,useValue:this},{provide:vc,useValue:this.componentFactoryResolver}],Ye(e),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(e)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class hg extends Yb{constructor(e){super(),this.moduleType=e}create(e){return new Xb(this.moduleType,e)}}class yF extends $i{constructor(e,t,s){super(),this.componentFactoryResolver=new Xp(this),this.instance=null;const r=new DD([...e,{provide:$i,useValue:this},{provide:vc,useValue:this.componentFactoryResolver}],t||Al(),s,new Set(["environment"]));this.injector=r,r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Gl(n,e,t=null){return new yF(n,e,t).injector}let vF=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t.id)){const s=_D(0,t.type),r=s.length>0?Gl([s],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t.id,r)}return this.cachedInjectors.get(t.id)}ngOnDestroy(){try{for(const t of this.cachedInjectors.values())null!==t&&t.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=re({token:n,providedIn:"environment",factory:()=>new n(K(Xr))}),n})();function ss(n){n.getStandaloneInjector=e=>e.get(vF).getOrCreateStandaloneInjector(n)}function Wl(n,e,t){const s=mn()+n,r=A();return r[s]===ge?Us(r,s,t?e.call(t):e()):function Tc(n,e){return n[e]}(r,s)}function Fc(n,e){const t=n[e];return t===ge?void 0:t}function o0(n,e,t,s,r,i,o){const a=e+t;return function Li(n,e,t,s){const r=un(n,e,t);return un(n,e+1,s)||r}(n,a,r,i)?Us(n,a+2,o?s.call(o,r,i):s(r,i)):Fc(n,a+2)}function tt(n,e){const t=Ie();let s;const r=n+22;t.firstCreatePass?(s=function VF(n,e){if(e)for(let t=e.length-1;t>=0;t--){const s=e[t];if(n===s.name)return s}}(e,t.pipeRegistry),t.data[r]=s,s.onDestroy&&(t.destroyHooks||(t.destroyHooks=[])).push(r,s.onDestroy)):s=t.data[r];const i=s.factory||(s.factory=Ni(s.type)),o=Xn(E);try{const a=ll(!1),c=i();return ll(a),function xR(n,e,t,s){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=s}(t,A(),r,c),c}finally{Xn(o)}}function gt(n,e,t){const s=n+22,r=A(),i=Ao(r,s);return Pc(r,s)?function r0(n,e,t,s,r,i){const o=e+t;return un(n,o,r)?Us(n,o+1,i?s.call(i,r):s(r)):Fc(n,o+1)}(r,mn(),e,i.transform,t,i):i.transform(t)}function zl(n,e,t,s){const r=n+22,i=A(),o=Ao(i,r);return Pc(i,r)?o0(i,mn(),e,o.transform,t,s,o):o.transform(t,s)}function Pc(n,e){return n[1].data[e].pure}function fg(n){return e=>{setTimeout(n,void 0,e)}}const Dt=class $F extends O{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,s){let r=e,i=t||(()=>null),o=s;if(e&&"object"==typeof e){const c=e;r=c.next?.bind(c),i=c.error?.bind(c),o=c.complete?.bind(c)}this.__isAsync&&(i=fg(i),r&&(r=fg(r)),o&&(o=fg(o)));const a=super.subscribe({next:r,error:i,complete:o});return e instanceof $e&&e.add(a),a}};let Cr=(()=>{class n{}return n.__NG_ELEMENT_ID__=GF,n})();const UF=Cr,qF=class extends UF{constructor(e,t,s){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=s}createEmbeddedView(e,t){const s=this._declarationTContainer.tViews,r=Ol(this._declarationLView,s,e,16,null,s.declTNode,null,null,null,null,t||null);r[17]=this._declarationLView[this._declarationTContainer.index];const o=this._declarationLView[19];return null!==o&&(r[19]=o.createEmbeddedView(s)),jp(s,r,e),new Cc(r)}};function GF(){return Ql(Kt(),A())}function Ql(n,e){return 4&n.type?new qF(e,n,$o(n,e)):null}let Es=(()=>{class n{}return n.__NG_ELEMENT_ID__=WF,n})();function WF(){return function d0(n,e){let t;const s=e[n.index];if(_s(s))t=s;else{let r;if(8&n.type)r=Vt(s);else{const i=e[11];r=i.createComment("");const o=Bn(n,e);ki(i,vl(i,o),r,function B1(n,e){return n.nextSibling(e)}(i,o),!1)}e[n.index]=t=uC(s,e,r,n),kl(e,t)}return new l0(t,n,e)}(Kt(),A())}const zF=Es,l0=class extends zF{constructor(e,t,s){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=s}get element(){return $o(this._hostTNode,this._hostLView)}get injector(){return new Oo(this._hostTNode,this._hostLView)}get parentInjector(){const e=dl(this._hostTNode,this._hostLView);if(sw(e)){const t=Io(e,this._hostLView),s=Mo(e);return new Oo(t[1].data[s+8],t)}return new Oo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=h0(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,t,s){let r,i;"number"==typeof s?r=s:null!=s&&(r=s.index,i=s.injector);const o=e.createEmbeddedView(t||{},i);return this.insert(o,r),o}createComponent(e,t,s,r,i){const o=e&&!function ac(n){return"function"==typeof n}(e);let a;if(o)a=t;else{const h=t||{};a=h.index,s=h.injector,r=h.projectableNodes,i=h.environmentInjector||h.ngModuleRef}const c=o?e:new bc(Le(e)),u=s||this.parentInjector;if(!i&&null==c.ngModule){const d=(o?u:this.parentInjector).get(Xr,null);d&&(i=d)}const l=c.create(u,r,void 0,i);return this.insert(l.hostView,a),l}insert(e,t){const s=e._lView,r=s[1];if(function fI(n){return _s(n[3])}(s)){const l=this.indexOf(e);if(-1!==l)this.detach(l);else{const h=s[3],d=new l0(h,h[6],h[3]);d.detach(d.indexOf(e))}}const i=this._adjustIndex(t),o=this._lContainer;!function F1(n,e,t,s){const r=10+s,i=t.length;s>0&&(t[r-1][4]=e),s<i-10?(e[4]=t[r],pw(t,10+s,e)):(t.push(e),e[4]=null),e[3]=t;const o=e[17];null!==o&&t!==o&&function P1(n,e){const t=n[9];e[16]!==e[3][3][16]&&(n[2]=!0),null===t?n[9]=[e]:t.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(n),e[2]|=64}(r,s,o,i);const a=sp(i,o),c=s[11],u=vl(c,o[7]);return null!==u&&function O1(n,e,t,s,r,i){s[0]=r,s[6]=e,gc(n,s,t,1,r,i)}(r,o[6],c,s,u,a),e.attachToViewContainerRef(),pw(gg(o),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=h0(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),s=ep(this._lContainer,t);s&&(gl(gg(this._lContainer),t),$w(s[1],s))}detach(e){const t=this._adjustIndex(e,-1),s=ep(this._lContainer,t);return s&&null!=gl(gg(this._lContainer),t)?new Cc(s):null}_adjustIndex(e,t=0){return e??this.length+t}};function h0(n){return n[8]}function gg(n){return n[8]||(n[8]=[])}function Dg(n,e){return Ql(n,e)}function Yl(...n){}const Xl=new Q("Application Initializer");let Kl=(()=>{class n{constructor(t){this.appInits=t,this.resolve=Yl,this.reject=Yl,this.initialized=!1,this.done=!1,this.donePromise=new Promise((s,r)=>{this.resolve=s,this.reject=r})}runInitializers(){if(this.initialized)return;const t=[],s=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let r=0;r<this.appInits.length;r++){const i=this.appInits[r]();if(xc(i))t.push(i);else if(ng(i)){const o=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});t.push(o)}}Promise.all(t).then(()=>{s()}).catch(r=>{this.reject(r)}),0===t.length&&s(),this.initialized=!0}}return n.\u0275fac=function(t){return new(t||n)(K(Xl,8))},n.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Eg=new Q("AppId",{providedIn:"root",factory:function j0(){return`${Ag()}${Ag()}${Ag()}`}});function Ag(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const B0=new Q("Platform Initializer"),$0=new Q("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),xg=new Q("appBootstrapListener");let CP=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const br=new Q("LocaleId",{providedIn:"root",factory:()=>Ue(br,ne.Optional|ne.SkipSelf)||function bP(){return typeof $localize<"u"&&$localize.locale||sa}()});class TP{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}let Mg=(()=>{class n{compileModuleSync(t){return new hg(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){const s=this.compileModuleSync(t),i=yr(Ln(t).declarations).reduce((o,a)=>{const c=Le(a);return c&&o.push(new bc(c)),o},[]);return new TP(s,i)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const xP=(()=>Promise.resolve(0))();class Ot{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:s=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Dt(!1),this.onMicrotaskEmpty=new Dt(!1),this.onStable=new Dt(!1),this.onError=new Dt(!1),typeof Zone>"u")throw new I(908,!1);Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!s&&t,r.shouldCoalesceRunChangeDetection=s,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function MP(){let n=Je.requestAnimationFrame,e=Je.cancelAnimationFrame;if(typeof Zone<"u"&&n&&e){const t=n[Zone.__symbol__("OriginalDelegate")];t&&(n=t);const s=e[Zone.__symbol__("OriginalDelegate")];s&&(e=s)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function OP(n){const e=()=>{!function NP(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(Je,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,Og(n),n.isCheckStableRunning=!0,Ng(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),Og(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(t,s,r,i,o,a)=>{try{return q0(n),t.invokeTask(r,i,o,a)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===i.type||n.shouldCoalesceRunChangeDetection)&&e(),G0(n)}},onInvoke:(t,s,r,i,o,a,c)=>{try{return q0(n),t.invoke(r,i,o,a,c)}finally{n.shouldCoalesceRunChangeDetection&&e(),G0(n)}},onHasTask:(t,s,r,i)=>{t.hasTask(r,i),s===r&&("microTask"==i.change?(n._hasPendingMicrotasks=i.microTask,Og(n),Ng(n)):"macroTask"==i.change&&(n.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,s,r,i)=>(t.handleError(r,i),n.runOutsideAngular(()=>n.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ot.isInAngularZone())throw new I(909,!1)}static assertNotInAngularZone(){if(Ot.isInAngularZone())throw new I(909,!1)}run(e,t,s){return this._inner.run(e,t,s)}runTask(e,t,s,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,e,IP,Yl,Yl);try{return i.runTask(o,t,s)}finally{i.cancelTask(o)}}runGuarded(e,t,s){return this._inner.runGuarded(e,t,s)}runOutsideAngular(e){return this._outer.run(e)}}const IP={};function Ng(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function Og(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function q0(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function G0(n){n._nesting--,Ng(n)}class RP{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Dt,this.onMicrotaskEmpty=new Dt,this.onStable=new Dt,this.onError=new Dt}run(e,t,s){return e.apply(t,s)}runGuarded(e,t,s){return e.apply(t,s)}runOutsideAngular(e){return e()}runTask(e,t,s,r){return e.apply(t,s)}}const W0=new Q("");let ei=null;const Pg=new Q("PlatformDestroyListeners");class Q0{constructor(e,t){this.name=e,this.token=t}}function jP(n){const{rootComponent:e,appProviders:t,platformProviders:s}=n,r=function LP(n=[]){if(ei)return ei;const e=function Y0(n=[],e){return ts.create({name:e,providers:[{provide:mp,useValue:"platform"},{provide:Pg,useValue:new Set([()=>ei=null])},...n]})}(n);return ei=e,function Z0(n){const e=n.get(B0,null);e&&e.forEach(t=>t())}(e),e}(s),i=function J0(n,e){let t;return t="noop"===n?new RP:("zone.js"===n?void 0:n)||new Ot(e),t}("zone.js",function K0(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}());return i.run(()=>{const a=Gl([{provide:Ot,useValue:i},...t||[]],r,"Environment Injector"),c=a.get(Ho,null);let u;i.runOutsideAngular(()=>{u=i.onError.subscribe({next:d=>{c.handleError(d)}})});const l=()=>a.destroy(),h=r.get(Pg);return h.add(l),a.onDestroy(()=>{u.unsubscribe(),h.delete(l)}),function eS(n,e,t){try{const s=t();return xc(s)?s.catch(r=>{throw e.runOutsideAngular(()=>n.handleError(r)),r}):s}catch(s){throw e.runOutsideAngular(()=>n.handleError(s)),s}}(c,i,()=>{const d=a.get(Kl);return d.runInitializers(),d.donePromise.then(()=>{!function Tb(n){Pn(n,"Expected localeId to be defined"),"string"==typeof n&&(Sb=n.toLowerCase().replace(/_/g,"-"))}(a.get(br,sa)||sa);const p=a.get(eh);return void 0!==e&&p.bootstrap(e),p})})})}let eh=(()=>{class n{constructor(t,s,r){this._zone=t,this._injector=s,this._exceptionHandler=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const i=new at(a=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{a.next(this._stable),a.complete()})}),o=new at(a=>{let c;this._zone.runOutsideAngular(()=>{c=this._zone.onStable.subscribe(()=>{Ot.assertNotInAngularZone(),function Ig(n){typeof Zone>"u"?xP.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,a.next(!0))})})});const u=this._zone.onUnstable.subscribe(()=>{Ot.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{a.next(!1)}))});return()=>{c.unsubscribe(),u.unsubscribe()}});this.isStable=function xM(...n){const e=za(n),t=function DM(n,e){return"number"==typeof Kd(n)?n.pop():e}(n,1/0),s=n;return s.length?1===s.length?Yn(s[0]):Do(t)(It(s,e)):lr}(i,o.pipe(function MM(n={}){const{connector:e=(()=>new O),resetOnError:t=!0,resetOnComplete:s=!0,resetOnRefCountZero:r=!0}=n;return i=>{let o,a,c,u=0,l=!1,h=!1;const d=()=>{a?.unsubscribe(),a=void 0},f=()=>{d(),o=c=void 0,l=h=!1},p=()=>{const g=o;f(),g?.unsubscribe()};return ae((g,_)=>{u++,!h&&!l&&d();const m=c=c??e();_.add(()=>{u--,0===u&&!h&&!l&&(a=ef(p,r))}),m.subscribe(_),!o&&u>0&&(o=new Ur({next:w=>m.next(w),error:w=>{h=!0,d(),a=ef(f,t,w),m.error(w)},complete:()=>{l=!0,d(),a=ef(f,s),m.complete()}}),Yn(g).subscribe(o))})(i)}}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(t,s){const r=t instanceof bD;if(!this._injector.get(Kl).done)throw!r&&function bo(n){const e=Le(n)||rn(n)||gn(n);return null!==e&&e.standalone}(t),new I(405,false);let o;o=r?t:this._injector.get(vc).resolveComponentFactory(t),this.componentTypes.push(o.componentType);const a=function PP(n){return n.isBoundToModule}(o)?void 0:this._injector.get($i),u=o.create(ts.NULL,[],s||o.selector,a),l=u.location.nativeElement,h=u.injector.get(W0,null);return h?.registerApplication(l),u.onDestroy(()=>{this.detachView(u.hostView),th(this.components,u),h?.unregisterApplication(l)}),this._loadComponent(u),u}tick(){if(this._runningTick)throw new I(101,!1);try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const s=t;this._views.push(s),s.attachToAppRef(this)}detachView(t){const s=t;th(this._views,s),s.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(xg,[]).concat(this._bootstrapListeners).forEach(r=>r(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>th(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new I(406,!1);const t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(t){return new(t||n)(K(Ot),K(Xr),K(Ho))},n.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function th(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}let nh=(()=>{class n{}return n.__NG_ELEMENT_ID__=HP,n})();function HP(n){return function UP(n,e,t){if(sl(n)&&!t){const s=$n(n.index,e);return new Cc(s,s)}return 47&n.type?new Cc(e[16],e):null}(Kt(),A(),16==(16&n))}class oS{constructor(){}supports(e){return Sc(e)}create(e){return new ZP(e)}}const QP=(n,e)=>e;class ZP{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||QP}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,s=this._removalsHead,r=0,i=null;for(;t||s;){const o=!s||t&&t.currentIndex<cS(s,r,i)?t:s,a=cS(o,r,i),c=o.currentIndex;if(o===s)r--,s=s._nextRemoved;else if(t=t._next,null==o.previousIndex)r++;else{i||(i=[]);const u=a-r,l=c-r;if(u!=l){for(let d=0;d<u;d++){const f=d<i.length?i[d]:i[d]=0,p=f+d;l<=p&&p<u&&(i[d]=f+1)}i[o.previousIndex]=l-u}}a!==c&&e(o,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Sc(e))throw new I(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r,i,o,t=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)i=e[a],o=this._trackByFn(a,i),null!==t&&Object.is(t.trackById,o)?(s&&(t=this._verifyReinsertion(t,i,o,a)),Object.is(t.item,i)||this._addIdentityChange(t,i)):(t=this._mismatch(t,i,o,a),s=!0),t=t._next}else r=0,function SR(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{const t=n[Vi()]();let s;for(;!(s=t.next()).done;)e(s.value)}}(e,a=>{o=this._trackByFn(r,a),null!==t&&Object.is(t.trackById,o)?(s&&(t=this._verifyReinsertion(t,a,o,r)),Object.is(t.item,a)||this._addIdentityChange(t,a)):(t=this._mismatch(t,a,o,r),s=!0),t=t._next,r++}),this.length=r;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,s,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(s,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new YP(t,s),i,r),e}_verifyReinsertion(e,t,s,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(s,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,s){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,s),this._addToMoves(e,s),e}_moveAfter(e,t,s){return this._unlink(e),this._insertAfter(e,t,s),this._addToMoves(e,s),e}_addAfter(e,t,s){return this._insertAfter(e,t,s),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,s){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new aS),this._linkedRecords.put(e),e.currentIndex=s,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,s=e._next;return null===t?this._itHead=s:t._next=s,null===s?this._itTail=t:s._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new aS),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class YP{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class XP{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let s;for(s=this._head;null!==s;s=s._nextDup)if((null===t||t<=s.currentIndex)&&Object.is(s.trackById,e))return s;return null}remove(e){const t=e._prevDup,s=e._nextDup;return null===t?this._head=s:t._nextDup=s,null===s?this._tail=t:s._prevDup=t,null===this._head}}class aS{constructor(){this.map=new Map}put(e){const t=e.trackById;let s=this.map.get(t);s||(s=new XP,this.map.set(t,s)),s.add(e)}get(e,t){const r=this.map.get(e);return r?r.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cS(n,e,t){const s=n.previousIndex;if(null===s)return s;let r=0;return t&&s<t.length&&(r=t[s]),s+e+r}class uS{constructor(){}supports(e){return e instanceof Map||Jp(e)}create(){return new KP}}class KP{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Jp(e)))throw new I(900,!1)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(s,r)=>{if(t&&t.key===r)this._maybeAddToChanges(t,s),this._appendAfter=t,t=t._next;else{const i=this._getOrCreateRecordForKey(r,s);t=this._insertBeforeOrAppend(t,i)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let s=t;null!==s;s=s._nextRemoved)s===this._mapHead&&(this._mapHead=null),this._records.delete(s.key),s._nextRemoved=s._next,s.previousValue=s.currentValue,s.currentValue=null,s._prev=null,s._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const s=e._prev;return t._next=e,t._prev=s,e._prev=t,s&&(s._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const r=this._records.get(e);this._maybeAddToChanges(r,t);const i=r._prev,o=r._next;return i&&(i._next=o),o&&(o._prev=i),r._next=null,r._prev=null,r}const s=new JP(e);return this._records.set(e,s),s.currentValue=t,this._addToAdditions(s),s}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(s=>t(e[s],s))}}class JP{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function lS(){return new ih([new oS])}let ih=(()=>{class n{constructor(t){this.factories=t}static create(t,s){if(null!=s){const r=s.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:s=>n.create(t,s||lS()),deps:[[n,new lc,new uc]]}}find(t){const s=this.factories.find(r=>r.supports(t));if(null!=s)return s;throw new I(901,!1)}}return n.\u0275prov=re({token:n,providedIn:"root",factory:lS}),n})();function hS(){return new Lc([new uS])}let Lc=(()=>{class n{constructor(t){this.factories=t}static create(t,s){if(s){const r=s.factories.slice();t=t.concat(r)}return new n(t)}static extend(t){return{provide:n,useFactory:s=>n.create(t,s||hS()),deps:[[n,new lc,new uc]]}}find(t){const s=this.factories.find(r=>r.supports(t));if(s)return s;throw new I(901,!1)}}return n.\u0275prov=re({token:n,providedIn:"root",factory:hS}),n})();function oa(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}let oh=null;function Zs(){return oh}class rV{}const xn=new Q("DocumentToken");let Hg=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=re({token:n,factory:function(){return function iV(){return K(dS)}()},providedIn:"platform"}),n})();const oV=new Q("Location Initialized");let dS=(()=>{class n extends Hg{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Zs().getBaseHref(this._doc)}onPopState(t){const s=Zs().getGlobalEventTarget(this._doc,"window");return s.addEventListener("popstate",t,!1),()=>s.removeEventListener("popstate",t)}onHashChange(t){const s=Zs().getGlobalEventTarget(this._doc,"window");return s.addEventListener("hashchange",t,!1),()=>s.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,s,r){fS()?this._history.pushState(t,s,r):this.location.hash=r}replaceState(t,s,r){fS()?this._history.replaceState(t,s,r):this.location.hash=r}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(K(xn))},n.\u0275prov=re({token:n,factory:function(){return function aV(){return new dS(K(xn))}()},providedIn:"platform"}),n})();function fS(){return!!window.history.pushState}function Ug(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function pS(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function Tr(n){return n&&"?"!==n[0]?"?"+n:n}let Ui=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=re({token:n,factory:function(){return Ue(gS)},providedIn:"root"}),n})();const qg=new Q("appBaseHref");let gS=(()=>{class n extends Ui{constructor(t,s){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=s??this._platformLocation.getBaseHrefFromDOM()??Ue(xn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ug(this._baseHref,t)}path(t=!1){const s=this._platformLocation.pathname+Tr(this._platformLocation.search),r=this._platformLocation.hash;return r&&t?`${s}${r}`:s}pushState(t,s,r,i){const o=this.prepareExternalUrl(r+Tr(i));this._platformLocation.pushState(t,s,o)}replaceState(t,s,r,i){const o=this.prepareExternalUrl(r+Tr(i));this._platformLocation.replaceState(t,s,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(K(Hg),K(qg,8))},n.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),cV=(()=>{class n extends Ui{constructor(t,s){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=s&&(this._baseHref=s)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let s=this._platformLocation.hash;return null==s&&(s="#"),s.length>0?s.substring(1):s}prepareExternalUrl(t){const s=Ug(this._baseHref,t);return s.length>0?"#"+s:s}pushState(t,s,r,i){let o=this.prepareExternalUrl(r+Tr(i));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.pushState(t,s,o)}replaceState(t,s,r,i){let o=this.prepareExternalUrl(r+Tr(i));0==o.length&&(o=this._platformLocation.pathname),this._platformLocation.replaceState(t,s,o)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(K(Hg),K(qg,8))},n.\u0275prov=re({token:n,factory:n.\u0275fac}),n})(),Gg=(()=>{class n{constructor(t){this._subject=new Dt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const s=this._locationStrategy.getBaseHref();this._baseHref=pS(mS(s)),this._locationStrategy.onPopState(r=>{this._subject.emit({url:this.path(!0),pop:!0,state:r.state,type:r.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,s=""){return this.path()==this.normalize(t+Tr(s))}normalize(t){return n.stripTrailingSlash(function lV(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,mS(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,s="",r=null){this._locationStrategy.pushState(r,"",t,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Tr(s)),r)}replaceState(t,s="",r=null){this._locationStrategy.replaceState(r,"",t,s),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Tr(s)),r)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(s=>{this._notifyUrlChangeListeners(s.url,s.state)})),()=>{const s=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(s,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",s){this._urlChangeListeners.forEach(r=>r(t,s))}subscribe(t,s,r){return this._subject.subscribe({next:t,error:s,complete:r})}}return n.normalizeQueryParams=Tr,n.joinWithSlash=Ug,n.stripTrailingSlash=pS,n.\u0275fac=function(t){return new(t||n)(K(Ui))},n.\u0275prov=re({token:n,factory:function(){return function uV(){return new Gg(K(Ui))}()},providedIn:"root"}),n})();function mS(n){return n.replace(/\/index.html$/,"")}class YV{constructor(e,t,s,r){this.$implicit=e,this.ngForOf=t,this.index=s,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let qi=(()=>{class n{constructor(t,s,r){this._viewContainer=t,this._template=s,this._differs=r,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const s=this._viewContainer;t.forEachOperation((r,i,o)=>{if(null==r.previousIndex)s.createEmbeddedView(this._template,new YV(r.item,this._ngForOf,-1,-1),null===o?void 0:o);else if(null==o)s.remove(null===i?void 0:i);else if(null!==i){const a=s.get(i);s.move(a,o),AS(a,r)}});for(let r=0,i=s.length;r<i;r++){const a=s.get(r).context;a.index=r,a.count=i,a.ngForOf=this._ngForOf}t.forEachIdentityChange(r=>{AS(s.get(r.currentIndex),r)})}static ngTemplateContextGuard(t,s){return!0}}return n.\u0275fac=function(t){return new(t||n)(E(Es),E(Cr),E(ih))},n.\u0275dir=ce({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function AS(n,e){n.context.$implicit=e.item}let tm=(()=>{class n{constructor(t,s){this._viewContainer=t,this._context=new KV,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=s}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){xS("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){xS("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,s){return!0}}return n.\u0275fac=function(t){return new(t||n)(E(Es),E(Cr))},n.\u0275dir=ce({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class KV{constructor(){this.$implicit=null,this.ngIf=null}}function xS(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${Ye(e)}'.`)}function Ms(n,e){return new I(2100,!1)}class rL{createSubscription(e,t){return e.subscribe({next:t,error:s=>{throw s}})}dispose(e){e.unsubscribe()}}class iL{createSubscription(e,t){return e.then(t,s=>{throw s})}dispose(e){}}const oL=new iL,aL=new rL;let mh=(()=>{class n{constructor(t){this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){return this._obj?t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue:(t&&this._subscribe(t),this._latestValue)}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,s=>this._updateLatestValue(t,s))}_selectStrategy(t){if(xc(t))return oL;if(MC(t))return aL;throw Ms()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,s){t===this._obj&&(this._latestValue=s,this._ref.markForCheck())}}return n.\u0275fac=function(t){return new(t||n)(E(nh,16))},n.\u0275pipe=Xt({name:"async",type:n,pure:!1,standalone:!0}),n})(),IS=(()=>{class n{transform(t){if(null==t)return null;if("string"!=typeof t)throw Ms();return t.toUpperCase()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=Xt({name:"uppercase",type:n,pure:!0,standalone:!0}),n})(),NS=(()=>{class n{constructor(t){this.differs=t,this.keyValues=[],this.compareFn=OS}transform(t,s=OS){if(!t||!(t instanceof Map)&&"object"!=typeof t)return null;this.differ||(this.differ=this.differs.find(t).create());const r=this.differ.diff(t),i=s!==this.compareFn;return r&&(this.keyValues=[],r.forEachItem(o=>{this.keyValues.push(function vL(n,e){return{key:n,value:e}}(o.key,o.currentValue))})),(r||i)&&(this.keyValues.sort(s),this.compareFn=s),this.keyValues}}return n.\u0275fac=function(t){return new(t||n)(E(Lc,16))},n.\u0275pipe=Xt({name:"keyvalue",type:n,pure:!1,standalone:!0}),n})();function OS(n,e){const t=n.key,s=e.key;if(t===s)return 0;if(void 0===t)return 1;if(void 0===s)return-1;if(null===t)return 1;if(null===s)return-1;if("string"==typeof t&&"string"==typeof s)return t<s?-1:1;if("number"==typeof t&&"number"==typeof s)return t-s;if("boolean"==typeof t&&"boolean"==typeof s)return t<s?-1:1;const r=String(t),i=String(s);return r==i?0:r<i?-1:1}let Ys=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ei({type:n}),n.\u0275inj=Wr({}),n})();let AL=(()=>{class n{}return n.\u0275prov=re({token:n,providedIn:"root",factory:()=>new xL(K(xn),window)}),n})();class xL{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ML(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const s=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let r=s.currentNode;for(;r;){const i=r.shadowRoot;if(i){const o=i.getElementById(e)||i.querySelector(`[name="${e}"]`);if(o)return o}r=s.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),s=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(s-i[0],r-i[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=kS(this.window.history)||kS(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function kS(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class s2 extends rV{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class cm extends s2{static makeCurrent(){!function sV(n){oh||(oh=n)}(new cm)}onAndCancel(e,t,s){return e.addEventListener(t,s,!1),()=>{e.removeEventListener(t,s,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function r2(){return Hc=Hc||document.querySelector("base"),Hc?Hc.getAttribute("href"):null}();return null==t?null:function i2(n){yh=yh||document.createElement("a"),yh.setAttribute("href",n);const e=yh.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Hc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function zV(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const s=t.indexOf("="),[r,i]=-1==s?[t,""]:[t.slice(0,s),t.slice(s+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,e)}}let yh,Hc=null,u2=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=re({token:n,factory:n.\u0275fac}),n})();const vh=new Q("EventManagerPlugins");let wh=(()=>{class n{constructor(t,s){this._zone=s,this._eventNameToPlugin=new Map,t.forEach(r=>r.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,s,r){return this._findPluginFor(s).addEventListener(t,s,r)}addGlobalEventListener(t,s,r){return this._findPluginFor(s).addGlobalEventListener(t,s,r)}getZone(){return this._zone}_findPluginFor(t){const s=this._eventNameToPlugin.get(t);if(s)return s;const r=this._plugins;for(let i=0;i<r.length;i++){const o=r[i];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(K(vh),K(Ot))},n.\u0275prov=re({token:n,factory:n.\u0275fac}),n})();class BS{constructor(e){this._doc=e}addGlobalEventListener(e,t,s){const r=Zs().getGlobalEventTarget(this._doc,e);if(!r)throw new Error(`Unsupported event target ${r} for event ${t}`);return this.addEventListener(r,t,s)}}let $S=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const s=new Set;t.forEach(r=>{this._stylesSet.has(r)||(this._stylesSet.add(r),s.add(r))}),this.onStylesAdded(s)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=re({token:n,factory:n.\u0275fac}),n})(),Uc=(()=>{class n extends $S{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,s,r){t.forEach(i=>{const o=this._doc.createElement("style");o.textContent=i,r.push(s.appendChild(o))})}addHost(t){const s=[];this._addStylesToHost(this._stylesSet,t,s),this._hostNodes.set(t,s)}removeHost(t){const s=this._hostNodes.get(t);s&&s.forEach(HS),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((s,r)=>{this._addStylesToHost(t,r,s)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(HS))}}return n.\u0275fac=function(t){return new(t||n)(K(xn))},n.\u0275prov=re({token:n,factory:n.\u0275fac}),n})();function HS(n){Zs().remove(n)}const um={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},lm=/%COMP%/g;function Dh(n,e,t){for(let s=0;s<e.length;s++){let r=e[s];Array.isArray(r)?Dh(n,r,t):(r=r.replace(lm,n),t.push(r))}return t}function GS(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let hm=(()=>{class n{constructor(t,s,r){this.eventManager=t,this.sharedStylesHost=s,this.appId=r,this.rendererByCompId=new Map,this.defaultRenderer=new dm(t)}createRenderer(t,s){if(!t||!s)return this.defaultRenderer;switch(s.encapsulation){case js.Emulated:{let r=this.rendererByCompId.get(s.id);return r||(r=new g2(this.eventManager,this.sharedStylesHost,s,this.appId),this.rendererByCompId.set(s.id,r)),r.applyToHost(t),r}case 1:case js.ShadowDom:return new m2(this.eventManager,this.sharedStylesHost,t,s);default:if(!this.rendererByCompId.has(s.id)){const r=Dh(s.id,s.styles,[]);this.sharedStylesHost.addStyles(r),this.rendererByCompId.set(s.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(K(wh),K(Uc),K(Eg))},n.\u0275prov=re({token:n,factory:n.\u0275fac}),n})();class dm{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(um[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(zS(e)?e.content:e).appendChild(t)}insertBefore(e,t,s){e&&(zS(e)?e.content:e).insertBefore(t,s)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let s="string"==typeof e?document.querySelector(e):e;if(!s)throw new Error(`The selector "${e}" did not match any elements`);return t||(s.textContent=""),s}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,s,r){if(r){t=r+":"+t;const i=um[r];i?e.setAttributeNS(i,t,s):e.setAttribute(t,s)}else e.setAttribute(t,s)}removeAttribute(e,t,s){if(s){const r=um[s];r?e.removeAttributeNS(r,t):e.removeAttribute(`${s}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,s,r){r&(An.DashCase|An.Important)?e.style.setProperty(t,s,r&An.Important?"important":""):e.style[t]=s}removeStyle(e,t,s){s&An.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,s){e[t]=s}setValue(e,t){e.nodeValue=t}listen(e,t,s){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,GS(s)):this.eventManager.addEventListener(e,t,GS(s))}}function zS(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class g2 extends dm{constructor(e,t,s,r){super(e),this.component=s;const i=Dh(r+"-"+s.id,s.styles,[]);t.addStyles(i),this.contentAttr=function d2(n){return"_ngcontent-%COMP%".replace(lm,n)}(r+"-"+s.id),this.hostAttr=function f2(n){return"_nghost-%COMP%".replace(lm,n)}(r+"-"+s.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const s=super.createElement(e,t);return super.setAttribute(s,this.contentAttr,""),s}}class m2 extends dm{constructor(e,t,s,r){super(e),this.sharedStylesHost=t,this.hostEl=s,this.shadowRoot=s.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=Dh(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const a=document.createElement("style");a.textContent=i[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,s){return super.insertBefore(this.nodeOrShadowRoot(e),t,s)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let _2=(()=>{class n extends BS{constructor(t){super(t)}supports(t){return!0}addEventListener(t,s,r){return t.addEventListener(s,r,!1),()=>this.removeEventListener(t,s,r)}removeEventListener(t,s,r){return t.removeEventListener(s,r)}}return n.\u0275fac=function(t){return new(t||n)(K(xn))},n.\u0275prov=re({token:n,factory:n.\u0275fac}),n})();const QS=["alt","control","meta","shift"],y2={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},v2={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let w2=(()=>{class n extends BS{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,s,r){const i=n.parseEventName(s),o=n.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Zs().onAndCancel(t,i.domEventName,o))}static parseEventName(t){const s=t.toLowerCase().split("."),r=s.shift();if(0===s.length||"keydown"!==r&&"keyup"!==r)return null;const i=n._normalizeKey(s.pop());let o="",a=s.indexOf("code");if(a>-1&&(s.splice(a,1),o="code."),QS.forEach(u=>{const l=s.indexOf(u);l>-1&&(s.splice(l,1),o+=u+".")}),o+=i,0!=s.length||0===i.length)return null;const c={};return c.domEventName=r,c.fullKey=o,c}static matchEventFullKeyCode(t,s){let r=y2[t.key]||t.key,i="";return s.indexOf("code.")>-1&&(r=t.code,i="code."),!(null==r||!r)&&(r=r.toLowerCase()," "===r?r="space":"."===r&&(r="dot"),QS.forEach(o=>{o!==r&&(0,v2[o])(t)&&(i+=o+".")}),i+=r,i===s)}static eventCallback(t,s,r){return i=>{n.matchEventFullKeyCode(i,t)&&r.runGuarded(()=>s(i))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(K(xn))},n.\u0275prov=re({token:n,factory:n.\u0275fac}),n})();function YS(n){return{appProviders:[...x2,...n?.providers??[]],platformProviders:T2}}const T2=[{provide:$0,useValue:"browser"},{provide:B0,useValue:function C2(){cm.makeCurrent()},multi:!0},{provide:xn,useFactory:function S2(){return function Q1(n){ap=n}(document),document},deps:[]}],x2=[{provide:mp,useValue:"root"},{provide:Ho,useFactory:function b2(){return new Ho},deps:[]},{provide:vh,useClass:_2,multi:!0,deps:[xn,Ot,$0]},{provide:vh,useClass:w2,multi:!0,deps:[xn]},{provide:hm,useClass:hm,deps:[wh,Uc,Eg]},{provide:TD,useExisting:hm},{provide:$S,useExisting:Uc},{provide:Uc,useClass:Uc,deps:[xn]},{provide:wh,useClass:wh,deps:[vh,Ot]},{provide:class IL{},useClass:u2,deps:[]},[]];let XS=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(K(xn))},n.\u0275prov=re({token:n,factory:function(t){let s=null;return s=t?new t:function I2(){return new XS(K(xn))}(),s},providedIn:"root"}),n})();function Z(...n){return It(n,za(n))}typeof window<"u"&&window;class Ht extends O{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:s}=this;if(e)throw t;return this._throwIfClosed(),s}next(e){super.next(this._value=e)}}const Ch=Be(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"}),{isArray:L2}=Array,{getPrototypeOf:j2,prototype:B2,keys:$2}=Object;function eT(n){if(1===n.length){const e=n[0];if(L2(e))return{args:e,keys:null};if(function H2(n){return n&&"object"==typeof n&&j2(n)===B2}(e)){const t=$2(e);return{args:t.map(s=>e[s]),keys:t}}}return{args:n,keys:null}}const{isArray:U2}=Array;function tT(n){return ee(e=>function q2(n,e){return U2(e)?n(...e):n(e)}(n,e))}function nT(n,e){return n.reduce((t,s,r)=>(t[s]=e[r],t),{})}function aa(...n){const e=za(n),t=Jd(n),{args:s,keys:r}=eT(n);if(0===s.length)return It([],e);const i=new at(function G2(n,e,t=Vs){return s=>{sT(e,()=>{const{length:r}=n,i=new Array(r);let o=r,a=r;for(let c=0;c<r;c++)sT(e,()=>{const u=It(n[c],e);let l=!1;u.subscribe(U(s,h=>{i[c]=h,l||(l=!0,a--),a||s.next(t(i.slice()))},()=>{--o||s.complete()}))},s)},s)}}(s,e,r?o=>nT(r,o):Vs));return t?i.pipe(tT(t)):i}function sT(n,e,t){n?ur(t,n,e):e()}function pm(...n){return function W2(){return Do(1)}()(It(n,za(n)))}function rT(n){return new at(e=>{Yn(n()).subscribe(e)})}function qc(n,e){const t=W(n)?n:()=>n,s=r=>r.error(t());return new at(e?r=>e.schedule(s,0,r):s)}function gm(){return ae((n,e)=>{let t=null;n._refCount++;const s=U(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const r=n._connection,i=t;t=null,r&&(!i||r===i)&&r.unsubscribe(),e.unsubscribe()});n.subscribe(s),s.closed||(t=n.connect())})}class iT extends at{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,X(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new $e;const t=this.getSubject();e.add(this.source.subscribe(U(t,void 0,()=>{this._teardown(),t.complete()},s=>{this._teardown(),t.error(s)},()=>this._teardown()))),e.closed&&(this._connection=null,e=$e.EMPTY)}return e}refCount(){return gm()(this)}}function ln(n,e){return ae((t,s)=>{let r=null,i=0,o=!1;const a=()=>o&&!r&&s.complete();t.subscribe(U(s,c=>{r?.unsubscribe();let u=0;const l=i++;Yn(n(c,l)).subscribe(r=U(s,h=>s.next(e?e(c,h,l,u++):h),()=>{r=null,a()}))},()=>{o=!0,a()}))})}function Gc(n){return n<=0?()=>lr:ae((e,t)=>{let s=0;e.subscribe(U(t,r=>{++s<=n&&(t.next(r),n<=s&&t.complete())}))})}function ni(n,e){return ae((t,s)=>{let r=0;t.subscribe(U(s,i=>n.call(e,i,r++)&&s.next(i)))})}function bh(n){return ae((e,t)=>{let s=!1;e.subscribe(U(t,r=>{s=!0,t.next(r)},()=>{s||t.next(n),t.complete()}))})}function oT(n=Q2){return ae((e,t)=>{let s=!1;e.subscribe(U(t,r=>{s=!0,t.next(r)},()=>s?t.complete():t.error(n())))})}function Q2(){return new Ch}function si(n,e){const t=arguments.length>=2;return s=>s.pipe(n?ni((r,i)=>n(r,i,s)):Vs,Gc(1),t?bh(e):oT(()=>new Ch))}function Gi(n,e){return W(e)?Yt(n,e,1):Yt(n,1)}function At(n,e,t){const s=W(n)||e||t?{next:n,error:e,complete:t}:n;return s?ae((r,i)=>{var o;null===(o=s.subscribe)||void 0===o||o.call(s);let a=!0;r.subscribe(U(i,c=>{var u;null===(u=s.next)||void 0===u||u.call(s,c),i.next(c)},()=>{var c;a=!1,null===(c=s.complete)||void 0===c||c.call(s),i.complete()},c=>{var u;a=!1,null===(u=s.error)||void 0===u||u.call(s,c),i.error(c)},()=>{var c,u;a&&(null===(c=s.unsubscribe)||void 0===c||c.call(s)),null===(u=s.finalize)||void 0===u||u.call(s)}))}):Vs}function ri(n){return ae((e,t)=>{let i,s=null,r=!1;s=e.subscribe(U(t,void 0,void 0,o=>{i=Yn(n(o,ri(n)(e))),s?(s.unsubscribe(),s=null,i.subscribe(t)):r=!0})),r&&(s.unsubscribe(),s=null,i.subscribe(t))})}function Z2(n,e,t,s,r){return(i,o)=>{let a=t,c=e,u=0;i.subscribe(U(o,l=>{const h=u++;c=a?n(c,l,h):(a=!0,l),s&&o.next(c)},r&&(()=>{a&&o.next(c),o.complete()})))}}function aT(n,e){return ae(Z2(n,e,arguments.length>=2,!0))}function mm(n){return n<=0?()=>lr:ae((e,t)=>{let s=[];e.subscribe(U(t,r=>{s.push(r),n<s.length&&s.shift()},()=>{for(const r of s)t.next(r);t.complete()},void 0,()=>{s=null}))})}function cT(n,e){const t=arguments.length>=2;return s=>s.pipe(n?ni((r,i)=>n(r,i,s)):Vs,mm(1),t?bh(e):oT(()=>new Ch))}function _m(n){return ae((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Ce="primary",Wc=Symbol("RouteTitle");class K2{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function ca(n){return new K2(n)}function J2(n,e,t){const s=t.path.split("/");if(s.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||s.length<n.length))return null;const r={};for(let i=0;i<s.length;i++){const o=s[i],a=n[i];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,s.length),posParams:r}}function Xs(n,e){const t=n?Object.keys(n):void 0,s=e?Object.keys(e):void 0;if(!t||!s||t.length!=s.length)return!1;let r;for(let i=0;i<t.length;i++)if(r=t[i],!uT(n[r],e[r]))return!1;return!0}function uT(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),s=[...e].sort();return t.every((r,i)=>s[i]===r)}return n===e}function lT(n){return Array.prototype.concat.apply([],n)}function hT(n){return n.length>0?n[n.length-1]:null}function en(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function ii(n){return ng(n)?n:xc(n)?It(Promise.resolve(n)):Z(n)}const Sh=!1,tj={exact:function pT(n,e,t){if(!zi(n.segments,e.segments)||!Th(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const s in e.children)if(!n.children[s]||!pT(n.children[s],e.children[s],t))return!1;return!0},subset:gT},dT={exact:function nj(n,e){return Xs(n,e)},subset:function sj(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>uT(n[t],e[t]))},ignored:()=>!0};function fT(n,e,t){return tj[t.paths](n.root,e.root,t.matrixParams)&&dT[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function gT(n,e,t){return mT(n,e,e.segments,t)}function mT(n,e,t,s){if(n.segments.length>t.length){const r=n.segments.slice(0,t.length);return!(!zi(r,t)||e.hasChildren()||!Th(r,t,s))}if(n.segments.length===t.length){if(!zi(n.segments,t)||!Th(n.segments,t,s))return!1;for(const r in e.children)if(!n.children[r]||!gT(n.children[r],e.children[r],s))return!1;return!0}{const r=t.slice(0,n.segments.length),i=t.slice(n.segments.length);return!!(zi(n.segments,r)&&Th(n.segments,r,s)&&n.children[Ce])&&mT(n.children[Ce],e,i,s)}}function Th(n,e,t){return e.every((s,r)=>dT[t](n[r].parameters,s.parameters))}class Wi{constructor(e=new Se([],{}),t={},s=null){this.root=e,this.queryParams=t,this.fragment=s}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ca(this.queryParams)),this._queryParamMap}toString(){return oj.serialize(this)}}class Se{constructor(e,t){this.segments=e,this.children=t,this.parent=null,en(t,(s,r)=>s.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Eh(this)}}class zc{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=ca(this.parameters)),this._parameterMap}toString(){return wT(this)}}function zi(n,e){return n.length===e.length&&n.every((t,s)=>t.path===e[s].path)}let _T=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=re({token:n,factory:function(){return new ym},providedIn:"root"}),n})();class ym{parse(e){const t=new gj(e);return new Wi(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Qc(e.root,!0)}`,s=function uj(n){const e=Object.keys(n).map(t=>{const s=n[t];return Array.isArray(s)?s.map(r=>`${Ah(t)}=${Ah(r)}`).join("&"):`${Ah(t)}=${Ah(s)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${s}${"string"==typeof e.fragment?`#${function aj(n){return encodeURI(n)}(e.fragment)}`:""}`}}const oj=new ym;function Eh(n){return n.segments.map(e=>wT(e)).join("/")}function Qc(n,e){if(!n.hasChildren())return Eh(n);if(e){const t=n.children[Ce]?Qc(n.children[Ce],!1):"",s=[];return en(n.children,(r,i)=>{i!==Ce&&s.push(`${i}:${Qc(r,!1)}`)}),s.length>0?`${t}(${s.join("//")})`:t}{const t=function ij(n,e){let t=[];return en(n.children,(s,r)=>{r===Ce&&(t=t.concat(e(s,r)))}),en(n.children,(s,r)=>{r!==Ce&&(t=t.concat(e(s,r)))}),t}(n,(s,r)=>r===Ce?[Qc(n.children[Ce],!1)]:[`${r}:${Qc(s,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Ce]?`${Eh(n)}/${t[0]}`:`${Eh(n)}/(${t.join("//")})`}}function yT(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ah(n){return yT(n).replace(/%3B/gi,";")}function vm(n){return yT(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function xh(n){return decodeURIComponent(n)}function vT(n){return xh(n.replace(/\+/g,"%20"))}function wT(n){return`${vm(n.path)}${function cj(n){return Object.keys(n).map(e=>`;${vm(e)}=${vm(n[e])}`).join("")}(n.parameters)}`}const lj=/^[^\/()?;=#]+/;function Mh(n){const e=n.match(lj);return e?e[0]:""}const hj=/^[^=?&#]+/,fj=/^[^&#]+/;class gj{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Se([],{}):new Se([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let s={};return this.peekStartsWith("(")&&(s=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(s[Ce]=new Se(e,t)),s}parseSegment(){const e=Mh(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new I(4009,Sh);return this.capture(e),new zc(xh(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Mh(this.remaining);if(!t)return;this.capture(t);let s="";if(this.consumeOptional("=")){const r=Mh(this.remaining);r&&(s=r,this.capture(s))}e[xh(t)]=xh(s)}parseQueryParam(e){const t=function dj(n){const e=n.match(hj);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let s="";if(this.consumeOptional("=")){const o=function pj(n){const e=n.match(fj);return e?e[0]:""}(this.remaining);o&&(s=o,this.capture(s))}const r=vT(t),i=vT(s);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(i)}else e[r]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const s=Mh(this.remaining),r=this.remaining[s.length];if("/"!==r&&")"!==r&&";"!==r)throw new I(4010,Sh);let i;s.indexOf(":")>-1?(i=s.slice(0,s.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=Ce);const o=this.parseChildren();t[i]=1===Object.keys(o).length?o[Ce]:new Se([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new I(4011,Sh)}}function wm(n){return n.segments.length>0?new Se([],{[Ce]:n}):n}function Ih(n){const e={};for(const s of Object.keys(n.children)){const i=Ih(n.children[s]);(i.segments.length>0||i.hasChildren())&&(e[s]=i)}return function mj(n){if(1===n.numberOfChildren&&n.children[Ce]){const e=n.children[Ce];return new Se(n.segments.concat(e.segments),e.children)}return n}(new Se(n.segments,e))}function Qi(n){return n instanceof Wi}function vj(n,e,t,s,r){if(0===t.length)return ua(e.root,e.root,e.root,s,r);const i=function bT(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new CT(!0,0,n);let e=0,t=!1;const s=n.reduce((r,i,o)=>{if("object"==typeof i&&null!=i){if(i.outlets){const a={};return en(i.outlets,(c,u)=>{a[u]="string"==typeof c?c.split("/"):c}),[...r,{outlets:a}]}if(i.segmentPath)return[...r,i.segmentPath]}return"string"!=typeof i?[...r,i]:0===o?(i.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?t=!0:".."===a?e++:""!=a&&r.push(a))}),r):[...r,i]},[]);return new CT(t,e,s)}(t);return i.toRoot()?ua(e.root,e.root,new Se([],{}),s,r):function o(c){const u=function Dj(n,e,t,s){if(n.isAbsolute)return new la(e.root,!0,0);if(-1===s)return new la(t,t===e.root,0);return function ST(n,e,t){let s=n,r=e,i=t;for(;i>r;){if(i-=r,s=s.parent,!s)throw new I(4005,!1);r=s.segments.length}return new la(s,!1,r-i)}(t,s+(Zc(n.commands[0])?0:1),n.numberOfDoubleDots)}(i,e,n.snapshot?._urlSegment,c),l=u.processChildren?Xc(u.segmentGroup,u.index,i.commands):Cm(u.segmentGroup,u.index,i.commands);return ua(e.root,u.segmentGroup,l,s,r)}(n.snapshot?._lastPathIndex)}function Zc(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Yc(n){return"object"==typeof n&&null!=n&&n.outlets}function ua(n,e,t,s,r){let o,i={};s&&en(s,(c,u)=>{i[u]=Array.isArray(c)?c.map(l=>`${l}`):`${c}`}),o=n===e?t:DT(n,e,t);const a=wm(Ih(o));return new Wi(a,i,r)}function DT(n,e,t){const s={};return en(n.children,(r,i)=>{s[i]=r===e?t:DT(r,e,t)}),new Se(n.segments,s)}class CT{constructor(e,t,s){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=s,e&&s.length>0&&Zc(s[0]))throw new I(4003,!1);const r=s.find(Yc);if(r&&r!==hT(s))throw new I(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class la{constructor(e,t,s){this.segmentGroup=e,this.processChildren=t,this.index=s}}function Cm(n,e,t){if(n||(n=new Se([],{})),0===n.segments.length&&n.hasChildren())return Xc(n,e,t);const s=function bj(n,e,t){let s=0,r=e;const i={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(s>=t.length)return i;const o=n.segments[r],a=t[s];if(Yc(a))break;const c=`${a}`,u=s<t.length-1?t[s+1]:null;if(r>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!ET(c,u,o))return i;s+=2}else{if(!ET(c,{},o))return i;s++}r++}return{match:!0,pathIndex:r,commandIndex:s}}(n,e,t),r=t.slice(s.commandIndex);if(s.match&&s.pathIndex<n.segments.length){const i=new Se(n.segments.slice(0,s.pathIndex),{});return i.children[Ce]=new Se(n.segments.slice(s.pathIndex),n.children),Xc(i,0,r)}return s.match&&0===r.length?new Se(n.segments,{}):s.match&&!n.hasChildren()?bm(n,e,t):s.match?Xc(n,0,r):bm(n,e,t)}function Xc(n,e,t){if(0===t.length)return new Se(n.segments,{});{const s=function Cj(n){return Yc(n[0])?n[0].outlets:{[Ce]:n}}(t),r={};return en(s,(i,o)=>{"string"==typeof i&&(i=[i]),null!==i&&(r[o]=Cm(n.children[o],e,i))}),en(n.children,(i,o)=>{void 0===s[o]&&(r[o]=i)}),new Se(n.segments,r)}}function bm(n,e,t){const s=n.segments.slice(0,e);let r=0;for(;r<t.length;){const i=t[r];if(Yc(i)){const c=Sj(i.outlets);return new Se(s,c)}if(0===r&&Zc(t[0])){s.push(new zc(n.segments[e].path,TT(t[0]))),r++;continue}const o=Yc(i)?i.outlets[Ce]:`${i}`,a=r<t.length-1?t[r+1]:null;o&&a&&Zc(a)?(s.push(new zc(o,TT(a))),r+=2):(s.push(new zc(o,{})),r++)}return new Se(s,{})}function Sj(n){const e={};return en(n,(t,s)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[s]=bm(new Se([],{}),0,t))}),e}function TT(n){const e={};return en(n,(t,s)=>e[s]=`${t}`),e}function ET(n,e,t){return n==t.path&&Xs(e,t.parameters)}class Ar{constructor(e,t){this.id=e,this.url=t}}class Sm extends Ar{constructor(e,t,s="imperative",r=null){super(e,t),this.type=0,this.navigationTrigger=s,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Zi extends Ar{constructor(e,t,s){super(e,t),this.urlAfterRedirects=s,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Nh extends Ar{constructor(e,t,s,r){super(e,t),this.reason=s,this.code=r,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class AT extends Ar{constructor(e,t,s,r){super(e,t),this.error=s,this.target=r,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Tj extends Ar{constructor(e,t,s,r){super(e,t),this.urlAfterRedirects=s,this.state=r,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ej extends Ar{constructor(e,t,s,r){super(e,t),this.urlAfterRedirects=s,this.state=r,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Aj extends Ar{constructor(e,t,s,r,i){super(e,t),this.urlAfterRedirects=s,this.state=r,this.shouldActivate=i,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class xj extends Ar{constructor(e,t,s,r){super(e,t),this.urlAfterRedirects=s,this.state=r,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Mj extends Ar{constructor(e,t,s,r){super(e,t),this.urlAfterRedirects=s,this.state=r,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ij{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Nj{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Oj{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Rj{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class kj{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Fj{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class xT{constructor(e,t,s){this.routerEvent=e,this.position=t,this.anchor=s,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class MT{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Tm(e,this._root);return t?t.children.map(s=>s.value):[]}firstChild(e){const t=Tm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Em(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Em(e,this._root).map(t=>t.value)}}function Tm(n,e){if(n===e.value)return e;for(const t of e.children){const s=Tm(n,t);if(s)return s}return null}function Em(n,e){if(n===e.value)return[e];for(const t of e.children){const s=Em(n,t);if(s.length)return s.unshift(e),s}return[]}class xr{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function ha(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class IT extends MT{constructor(e,t){super(e),this.snapshot=t,Am(this,e)}toString(){return this.snapshot.toString()}}function NT(n,e){const t=function Vj(n,e){const o=new Oh([],{},{},"",{},Ce,e,null,n.root,-1,{});return new RT("",new xr(o,[]))}(n,e),s=new Ht([new zc("",{})]),r=new Ht({}),i=new Ht({}),o=new Ht({}),a=new Ht(""),c=new da(s,r,o,a,i,Ce,e,t.root);return c.snapshot=t.root,new IT(new xr(c,[]),t)}class da{constructor(e,t,s,r,i,o,a,c){this.url=e,this.params=t,this.queryParams=s,this.fragment=r,this.data=i,this.outlet=o,this.component=a,this.title=this.data?.pipe(ee(u=>u[Wc]))??Z(void 0),this._futureSnapshot=c}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ee(e=>ca(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ee(e=>ca(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function OT(n,e="emptyOnly"){const t=n.pathFromRoot;let s=0;if("always"!==e)for(s=t.length-1;s>=1;){const r=t[s],i=t[s-1];if(r.routeConfig&&""===r.routeConfig.path)s--;else{if(i.component)break;s--}}return function Lj(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(s))}class Oh{constructor(e,t,s,r,i,o,a,c,u,l,h){this.url=e,this.params=t,this.queryParams=s,this.fragment=r,this.data=i,this.outlet=o,this.component=a,this.routeConfig=c,this._urlSegment=u,this._lastPathIndex=l,this._resolve=h}get title(){return this.data?.[Wc]}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=ca(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=ca(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(s=>s.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class RT extends MT{constructor(e,t){super(t),this.url=e,Am(this,t)}toString(){return kT(this._root)}}function Am(n,e){e.value._routerState=n,e.children.forEach(t=>Am(n,t))}function kT(n){const e=n.children.length>0?` { ${n.children.map(kT).join(", ")} } `:"";return`${n.value}${e}`}function xm(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Xs(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Xs(e.params,t.params)||n.params.next(t.params),function ej(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Xs(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Xs(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Mm(n,e){const t=Xs(n.params,e.params)&&function rj(n,e){return zi(n,e)&&n.every((t,s)=>Xs(t.parameters,e[s].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Mm(n.parent,e.parent))}function Kc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const s=t.value;s._futureSnapshot=e.value;const r=function Bj(n,e,t){return e.children.map(s=>{for(const r of t.children)if(n.shouldReuseRoute(s.value,r.value.snapshot))return Kc(n,s,r);return Kc(n,s)})}(n,e,t);return new xr(s,r)}{if(n.shouldAttach(e.value)){const i=n.retrieve(e.value);if(null!==i){const o=i.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Kc(n,a)),o}}const s=function $j(n){return new da(new Ht(n.url),new Ht(n.params),new Ht(n.queryParams),new Ht(n.fragment),new Ht(n.data),n.outlet,n.component,n)}(e.value),r=e.children.map(i=>Kc(n,i));return new xr(s,r)}}const Im="ngNavigationCancelingError";function FT(n,e){const{redirectTo:t,navigationBehaviorOptions:s}=Qi(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=PT(!1,0,e);return r.url=t,r.navigationBehaviorOptions=s,r}function PT(n,e,t){const s=new Error("NavigationCancelingError: "+(n||""));return s[Im]=!0,s.cancellationCode=e,t&&(s.url=t),s}function VT(n){return LT(n)&&Qi(n.url)}function LT(n){return n&&n[Im]}class Hj{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Jc,this.attachRef=null}}let Jc=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,s){const r=this.getOrCreateContext(t);r.outlet=s,this.contexts.set(t,r)}onChildOutletDestroyed(t){const s=this.getContext(t);s&&(s.outlet=null,s.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let s=this.getContext(t);return s||(s=new Hj,this.contexts.set(t,s)),s}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Rh=!1;let Nm=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ce,this.activateEvents=new Dt,this.deactivateEvents=new Dt,this.attachEvents=new Dt,this.detachEvents=new Dt,this.parentContexts=Ue(Jc),this.location=Ue(Es),this.changeDetector=Ue(nh),this.environmentInjector=Ue(Xr)}ngOnChanges(t){if(t.name){const{firstChange:s,previousValue:r}=t.name;if(s)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new I(4012,Rh);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new I(4012,Rh);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new I(4012,Rh);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,s){this.activated=t,this._activatedRoute=s,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,s){if(this.isActivated)throw new I(4013,Rh);this._activatedRoute=t;const r=this.location,o=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new Uj(t,a,r.injector);if(s&&function qj(n){return!!n.resolveComponentFactory}(s)){const u=s.resolveComponentFactory(o);this.activated=r.createComponent(u,r.length,c)}else this.activated=r.createComponent(o,{index:r.length,injector:c,environmentInjector:s??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=ce({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Jn]}),n})();class Uj{constructor(e,t,s){this.route=e,this.childContexts=t,this.parent=s}get(e,t){return e===da?this.route:e===Jc?this.childContexts:this.parent.get(e,t)}}let Om=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=Vn({type:n,selectors:[["ng-component"]],standalone:!0,features:[ss],decls:1,vars:0,template:function(t,s){1&t&&Gs(0,"router-outlet")},dependencies:[Nm],encapsulation:2}),n})();function jT(n,e){return n.providers&&!n._injector&&(n._injector=Gl(n.providers,e,`Route: ${n.path}`)),n._injector??e}function km(n){const e=n.children&&n.children.map(km),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ce&&(t.component=Om),t}function os(n){return n.outlet||Ce}function BT(n,e){const t=n.filter(s=>os(s)===e);return t.push(...n.filter(s=>os(s)!==e)),t}function eu(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class Zj{constructor(e,t,s,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=s,this.forwardEvent=r}activate(e){const t=this.futureState._root,s=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,s,e),xm(this.futureState.root),this.activateChildRoutes(t,s,e)}deactivateChildRoutes(e,t,s){const r=ha(t);e.children.forEach(i=>{const o=i.value.outlet;this.deactivateRoutes(i,r[o],s),delete r[o]}),en(r,(i,o)=>{this.deactivateRouteAndItsChildren(i,s)})}deactivateRoutes(e,t,s){const r=e.value,i=t?t.value:null;if(r===i)if(r.component){const o=s.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,s);else i&&this.deactivateRouteAndItsChildren(t,s)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const s=t.getContext(e.value.outlet),r=s&&e.value.component?s.children:t,i=ha(e);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);if(s&&s.outlet){const o=s.outlet.detach(),a=s.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){const s=t.getContext(e.value.outlet),r=s&&e.value.component?s.children:t,i=ha(e);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);s&&s.outlet&&(s.outlet.deactivate(),s.children.onOutletDeactivated(),s.attachRef=null,s.resolver=null,s.route=null)}activateChildRoutes(e,t,s){const r=ha(t);e.children.forEach(i=>{this.activateRoutes(i,r[i.value.outlet],s),this.forwardEvent(new Fj(i.value.snapshot))}),e.children.length&&this.forwardEvent(new Rj(e.value.snapshot))}activateRoutes(e,t,s){const r=e.value,i=t?t.value:null;if(xm(r),r===i)if(r.component){const o=s.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,s);else if(r.component){const o=s.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),xm(a.route.value),this.activateChildRoutes(e,null,o.children)}else{const a=eu(r.snapshot),c=a?.get(vc)??null;o.attachRef=null,o.route=r,o.resolver=c,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,s)}}class $T{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class kh{constructor(e,t){this.component=e,this.route=t}}function Yj(n,e,t){const s=n._root;return tu(s,e?e._root:null,t,[s.value])}function fa(n,e){const t=Symbol(),s=e.get(n,t);return s===t?"function"!=typeof n||function PM(n){return null!==Zu(n)}(n)?e.get(n):n:s}function tu(n,e,t,s,r={canDeactivateChecks:[],canActivateChecks:[]}){const i=ha(e);return n.children.forEach(o=>{(function Kj(n,e,t,s,r={canDeactivateChecks:[],canActivateChecks:[]}){const i=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&i.routeConfig===o.routeConfig){const c=function Jj(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!zi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!zi(n.url,e.url)||!Xs(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Mm(n,e)||!Xs(n.queryParams,e.queryParams);default:return!Mm(n,e)}}(o,i,i.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new $T(s)):(i.data=o.data,i._resolvedData=o._resolvedData),tu(n,e,i.component?a?a.children:null:t,s,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new kh(a.outlet.component,o))}else o&&nu(e,a,r),r.canActivateChecks.push(new $T(s)),tu(n,null,i.component?a?a.children:null:t,s,r)})(o,i[o.value.outlet],t,s.concat([o.value]),r),delete i[o.value.outlet]}),en(i,(o,a)=>nu(o,t.getContext(a),r)),r}function nu(n,e,t){const s=ha(n),r=n.value;en(s,(i,o)=>{nu(i,r.component?e?e.children.getContext(o):null:e,t)}),t.canDeactivateChecks.push(new kh(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}function su(n){return"function"==typeof n}function Fm(n){return n instanceof Ch||"EmptyError"===n?.name}const Fh=Symbol("INITIAL_VALUE");function pa(){return ln(n=>aa(n.map(e=>e.pipe(Gc(1),function z2(...n){const e=za(n);return ae((t,s)=>{(e?pm(n,t,e):pm(n,t)).subscribe(s)})}(Fh)))).pipe(ee(e=>{for(const t of e)if(!0!==t){if(t===Fh)return Fh;if(!1===t||t instanceof Wi)return t}return!0}),ni(e=>e!==Fh),Gc(1)))}function HT(n){return function Xd(...n){return qu(n)}(At(e=>{if(Qi(e))throw FT(0,e)}),ee(e=>!0===e))}const Pm={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function UT(n,e,t,s,r){const i=Vm(n,e,t);return i.matched?function mB(n,e,t,s){const r=e.canMatch;return r&&0!==r.length?Z(r.map(o=>{const a=fa(o,n);return ii(function iB(n){return n&&su(n.canMatch)}(a)?a.canMatch(e,t):n.runInContext(()=>a(e,t)))})).pipe(pa(),HT()):Z(!0)}(s=jT(e,s),e,t).pipe(ee(o=>!0===o?i:{...Pm})):Z(i)}function Vm(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Pm}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const r=(e.matcher||J2)(t,n,e);if(!r)return{...Pm};const i={};en(r.posParams,(a,c)=>{i[c]=a.path});const o=r.consumed.length>0?{...i,...r.consumed[r.consumed.length-1].parameters}:i;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function Ph(n,e,t,s){if(t.length>0&&function vB(n,e,t){return t.some(s=>Vh(n,e,s)&&os(s)!==Ce)}(n,t,s)){const i=new Se(e,function yB(n,e,t,s){const r={};r[Ce]=s,s._sourceSegment=n,s._segmentIndexShift=e.length;for(const i of t)if(""===i.path&&os(i)!==Ce){const o=new Se([],{});o._sourceSegment=n,o._segmentIndexShift=e.length,r[os(i)]=o}return r}(n,e,s,new Se(t,n.children)));return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===t.length&&function wB(n,e,t){return t.some(s=>Vh(n,e,s))}(n,t,s)){const i=new Se(n.segments,function _B(n,e,t,s,r){const i={};for(const o of s)if(Vh(n,t,o)&&!r[os(o)]){const a=new Se([],{});a._sourceSegment=n,a._segmentIndexShift=e.length,i[os(o)]=a}return{...r,...i}}(n,e,t,s,n.children));return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}const r=new Se(n.segments,n.children);return r._sourceSegment=n,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:t}}function Vh(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function qT(n,e,t,s){return!!(os(n)===s||s!==Ce&&Vh(e,t,n))&&("**"===n.path||Vm(e,n,t).matched)}function GT(n,e,t){return 0===e.length&&!n.children[t]}const Lh=!1;class jh{constructor(e){this.segmentGroup=e||null}}class WT{constructor(e){this.urlTree=e}}function ru(n){return qc(new jh(n))}function zT(n){return qc(new WT(n))}class SB{constructor(e,t,s,r,i){this.injector=e,this.configLoader=t,this.urlSerializer=s,this.urlTree=r,this.config=i,this.allowRedirects=!0}apply(){const e=Ph(this.urlTree.root,[],[],this.config).segmentGroup,t=new Se(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Ce).pipe(ee(i=>this.createUrlTree(Ih(i),this.urlTree.queryParams,this.urlTree.fragment))).pipe(ri(i=>{if(i instanceof WT)return this.allowRedirects=!1,this.match(i.urlTree);throw i instanceof jh?this.noMatchError(i):i}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Ce).pipe(ee(r=>this.createUrlTree(Ih(r),e.queryParams,e.fragment))).pipe(ri(r=>{throw r instanceof jh?this.noMatchError(r):r}))}noMatchError(e){return new I(4002,Lh)}createUrlTree(e,t,s){const r=wm(e);return new Wi(r,t,s)}expandSegmentGroup(e,t,s,r){return 0===s.segments.length&&s.hasChildren()?this.expandChildren(e,t,s).pipe(ee(i=>new Se([],i))):this.expandSegment(e,s,t,s.segments,r,!0)}expandChildren(e,t,s){const r=[];for(const i of Object.keys(s.children))"primary"===i?r.unshift(i):r.push(i);return It(r).pipe(Gi(i=>{const o=s.children[i],a=BT(t,i);return this.expandSegmentGroup(e,a,o,i).pipe(ee(c=>({segment:c,outlet:i})))}),aT((i,o)=>(i[o.outlet]=o.segment,i),{}),cT())}expandSegment(e,t,s,r,i,o){return It(s).pipe(Gi(a=>this.expandSegmentAgainstRoute(e,t,s,a,r,i,o).pipe(ri(u=>{if(u instanceof jh)return Z(null);throw u}))),si(a=>!!a),ri((a,c)=>{if(Fm(a))return GT(t,r,i)?Z(new Se([],{})):ru(t);throw a}))}expandSegmentAgainstRoute(e,t,s,r,i,o,a){return qT(r,t,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i,o):a&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,s,r,i,o):ru(t):ru(t)}expandSegmentAgainstRouteUsingRedirect(e,t,s,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,s,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,s,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,s,r){const i=this.applyRedirectCommands([],s.redirectTo,{});return s.redirectTo.startsWith("/")?zT(i):this.lineralizeSegments(s,i).pipe(Yt(o=>{const a=new Se(o,{});return this.expandSegment(e,a,t,o,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,s,r,i,o){const{matched:a,consumedSegments:c,remainingSegments:u,positionalParamSegments:l}=Vm(t,r,i);if(!a)return ru(t);const h=this.applyRedirectCommands(c,r.redirectTo,l);return r.redirectTo.startsWith("/")?zT(h):this.lineralizeSegments(r,h).pipe(Yt(d=>this.expandSegment(e,t,s,d.concat(u),o,!1)))}matchSegmentAgainstRoute(e,t,s,r,i){return"**"===s.path?(e=jT(s,e),s.loadChildren?(s._loadedRoutes?Z({routes:s._loadedRoutes,injector:s._loadedInjector}):this.configLoader.loadChildren(e,s)).pipe(ee(a=>(s._loadedRoutes=a.routes,s._loadedInjector=a.injector,new Se(r,{})))):Z(new Se(r,{}))):UT(t,s,r,e).pipe(ln(({matched:o,consumedSegments:a,remainingSegments:c})=>o?this.getChildConfig(e=s._injector??e,s,r).pipe(Yt(l=>{const h=l.injector??e,d=l.routes,{segmentGroup:f,slicedSegments:p}=Ph(t,a,c,d),g=new Se(f.segments,f.children);if(0===p.length&&g.hasChildren())return this.expandChildren(h,d,g).pipe(ee(v=>new Se(a,v)));if(0===d.length&&0===p.length)return Z(new Se(a,{}));const _=os(s)===i;return this.expandSegment(h,g,d,p,_?Ce:i,!0).pipe(ee(w=>new Se(a.concat(w.segments),w.children)))})):ru(t)))}getChildConfig(e,t,s){return t.children?Z({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?Z({routes:t._loadedRoutes,injector:t._loadedInjector}):function gB(n,e,t,s){const r=e.canLoad;return void 0===r||0===r.length?Z(!0):Z(r.map(o=>{const a=fa(o,n);return ii(function tB(n){return n&&su(n.canLoad)}(a)?a.canLoad(e,t):n.runInContext(()=>a(e,t)))})).pipe(pa(),HT())}(e,t,s).pipe(Yt(r=>r?this.configLoader.loadChildren(e,t).pipe(At(i=>{t._loadedRoutes=i.routes,t._loadedInjector=i.injector})):function CB(n){return qc(PT(Lh,3))}())):Z({routes:[],injector:e})}lineralizeSegments(e,t){let s=[],r=t.root;for(;;){if(s=s.concat(r.segments),0===r.numberOfChildren)return Z(s);if(r.numberOfChildren>1||!r.children[Ce])return qc(new I(4e3,Lh));r=r.children[Ce]}}applyRedirectCommands(e,t,s){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,s)}applyRedirectCreateUrlTree(e,t,s,r){const i=this.createSegmentGroup(e,t.root,s,r);return new Wi(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const s={};return en(e,(r,i)=>{if("string"==typeof r&&r.startsWith(":")){const a=r.substring(1);s[i]=t[a]}else s[i]=r}),s}createSegmentGroup(e,t,s,r){const i=this.createSegments(e,t.segments,s,r);let o={};return en(t.children,(a,c)=>{o[c]=this.createSegmentGroup(e,a,s,r)}),new Se(i,o)}createSegments(e,t,s,r){return t.map(i=>i.path.startsWith(":")?this.findPosParam(e,i,r):this.findOrReturn(i,s))}findPosParam(e,t,s){const r=s[t.path.substring(1)];if(!r)throw new I(4001,Lh);return r}findOrReturn(e,t){let s=0;for(const r of t){if(r.path===e.path)return t.splice(s),r;s++}return e}}class EB{}class MB{constructor(e,t,s,r,i,o,a){this.injector=e,this.rootComponentType=t,this.config=s,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=o,this.urlSerializer=a}recognize(){const e=Ph(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Ce).pipe(ee(t=>{if(null===t)return null;const s=new Oh([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Ce,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new xr(s,t),i=new RT(this.url,r);return this.inheritParamsAndData(i._root),i}))}inheritParamsAndData(e){const t=e.value,s=OT(t,this.paramsInheritanceStrategy);t.params=Object.freeze(s.params),t.data=Object.freeze(s.data),e.children.forEach(r=>this.inheritParamsAndData(r))}processSegmentGroup(e,t,s,r){return 0===s.segments.length&&s.hasChildren()?this.processChildren(e,t,s):this.processSegment(e,t,s,s.segments,r)}processChildren(e,t,s){return It(Object.keys(s.children)).pipe(Gi(r=>{const i=s.children[r],o=BT(t,r);return this.processSegmentGroup(e,o,i,r)}),aT((r,i)=>r&&i?(r.push(...i),r):null),function Y2(n,e=!1){return ae((t,s)=>{let r=0;t.subscribe(U(s,i=>{const o=n(i,r++);(o||e)&&s.next(i),!o&&s.complete()}))})}(r=>null!==r),bh(null),cT(),ee(r=>{if(null===r)return null;const i=ZT(r);return function IB(n){n.sort((e,t)=>e.value.outlet===Ce?-1:t.value.outlet===Ce?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}))}processSegment(e,t,s,r,i){return It(t).pipe(Gi(o=>this.processSegmentAgainstRoute(o._injector??e,o,s,r,i)),si(o=>!!o),ri(o=>{if(Fm(o))return GT(s,r,i)?Z([]):Z(null);throw o}))}processSegmentAgainstRoute(e,t,s,r,i){if(t.redirectTo||!qT(t,s,r,i))return Z(null);let o;if("**"===t.path){const a=r.length>0?hT(r).parameters:{},c=XT(s)+r.length;o=Z({snapshot:new Oh(r,a,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,KT(t),os(t),t.component??t._loadedComponent??null,t,YT(s),c,JT(t)),consumedSegments:[],remainingSegments:[]})}else o=UT(s,t,r,e).pipe(ee(({matched:a,consumedSegments:c,remainingSegments:u,parameters:l})=>{if(!a)return null;const h=XT(s)+c.length;return{snapshot:new Oh(c,l,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,KT(t),os(t),t.component??t._loadedComponent??null,t,YT(s),h,JT(t)),consumedSegments:c,remainingSegments:u}}));return o.pipe(ln(a=>{if(null===a)return Z(null);const{snapshot:c,consumedSegments:u,remainingSegments:l}=a;e=t._injector??e;const h=t._loadedInjector??e,d=function NB(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:f,slicedSegments:p}=Ph(s,u,l,d.filter(_=>void 0===_.redirectTo));if(0===p.length&&f.hasChildren())return this.processChildren(h,d,f).pipe(ee(_=>null===_?null:[new xr(c,_)]));if(0===d.length&&0===p.length)return Z([new xr(c,[])]);const g=os(t)===i;return this.processSegment(h,d,f,p,g?Ce:i).pipe(ee(_=>null===_?null:[new xr(c,_)]))}))}}function OB(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function ZT(n){const e=[],t=new Set;for(const s of n){if(!OB(s)){e.push(s);continue}const r=e.find(i=>s.value.routeConfig===i.value.routeConfig);void 0!==r?(r.children.push(...s.children),t.add(r)):e.push(s)}for(const s of t){const r=ZT(s.children);e.push(new xr(s.value,r))}return e.filter(s=>!t.has(s))}function YT(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function XT(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function KT(n){return n.data||{}}function JT(n){return n.resolve||{}}function eE(n){return"string"==typeof n.title||null===n.title}function Lm(n){return ln(e=>{const t=n(e);return t?It(t).pipe(ee(()=>e)):Z(e)})}class BB{constructor(e){this.router=e,this.currentNavigation=null}setupNavigations(e){const t=this.router.events;return e.pipe(ni(s=>0!==s.id),ee(s=>({...s,extractedUrl:this.router.urlHandlingStrategy.extract(s.rawUrl)})),ln(s=>{let r=!1,i=!1;return Z(s).pipe(At(o=>{this.currentNavigation={id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,trigger:o.source,extras:o.extras,previousNavigation:this.router.lastSuccessfulNavigation?{...this.router.lastSuccessfulNavigation,previousNavigation:null}:null}}),ln(o=>{const a=this.router.browserUrlTree.toString(),c=!this.router.navigated||o.extractedUrl.toString()!==a||a!==this.router.currentUrlTree.toString();if(("reload"===this.router.onSameUrlNavigation||c)&&this.router.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return nE(o.source)&&(this.router.browserUrlTree=o.extractedUrl),Z(o).pipe(ln(l=>{const h=this.router.transitions.getValue();return t.next(new Sm(l.id,this.router.serializeUrl(l.extractedUrl),l.source,l.restoredState)),h!==this.router.transitions.getValue()?lr:Promise.resolve(l)}),function TB(n,e,t,s){return ln(r=>function bB(n,e,t,s,r){return new SB(n,e,t,s,r).apply()}(n,e,t,r.extractedUrl,s).pipe(ee(i=>({...r,urlAfterRedirects:i}))))}(this.router.ngModule.injector,this.router.configLoader,this.router.urlSerializer,this.router.config),At(l=>{this.currentNavigation={...this.currentNavigation,finalUrl:l.urlAfterRedirects},s.urlAfterRedirects=l.urlAfterRedirects}),function kB(n,e,t,s,r){return Yt(i=>function xB(n,e,t,s,r,i,o="emptyOnly"){return new MB(n,e,t,s,r,o,i).recognize().pipe(ln(a=>null===a?function AB(n){return new at(e=>e.error(n))}(new EB):Z(a)))}(n,e,t,i.urlAfterRedirects,s.serialize(i.urlAfterRedirects),s,r).pipe(ee(o=>({...i,targetSnapshot:o}))))}(this.router.ngModule.injector,this.router.rootComponentType,this.router.config,this.router.urlSerializer,this.router.paramsInheritanceStrategy),At(l=>{if(s.targetSnapshot=l.targetSnapshot,"eager"===this.router.urlUpdateStrategy){if(!l.extras.skipLocationChange){const d=this.router.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl);this.router.setBrowserUrl(d,l)}this.router.browserUrlTree=l.urlAfterRedirects}const h=new Tj(l.id,this.router.serializeUrl(l.extractedUrl),this.router.serializeUrl(l.urlAfterRedirects),l.targetSnapshot);t.next(h)}));if(c&&this.router.rawUrlTree&&this.router.urlHandlingStrategy.shouldProcessUrl(this.router.rawUrlTree)){const{id:h,extractedUrl:d,source:f,restoredState:p,extras:g}=o,_=new Sm(h,this.router.serializeUrl(d),f,p);t.next(_);const m=NT(d,this.router.rootComponentType).snapshot;return Z(s={...o,targetSnapshot:m,urlAfterRedirects:d,extras:{...g,skipLocationChange:!1,replaceUrl:!1}})}return this.router.rawUrlTree=o.rawUrl,o.resolve(null),lr}),At(o=>{const a=new Ej(o.id,this.router.serializeUrl(o.extractedUrl),this.router.serializeUrl(o.urlAfterRedirects),o.targetSnapshot);this.router.triggerEvent(a)}),ee(o=>s={...o,guards:Yj(o.targetSnapshot,o.currentSnapshot,this.router.rootContexts)}),function aB(n,e){return Yt(t=>{const{targetSnapshot:s,currentSnapshot:r,guards:{canActivateChecks:i,canDeactivateChecks:o}}=t;return 0===o.length&&0===i.length?Z({...t,guardsResult:!0}):function cB(n,e,t,s){return It(n).pipe(Yt(r=>function pB(n,e,t,s,r){const i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return i&&0!==i.length?Z(i.map(a=>{const c=eu(e)??r,u=fa(a,c);return ii(function rB(n){return n&&su(n.canDeactivate)}(u)?u.canDeactivate(n,e,t,s):c.runInContext(()=>u(n,e,t,s))).pipe(si())})).pipe(pa()):Z(!0)}(r.component,r.route,t,e,s)),si(r=>!0!==r,!0))}(o,s,r,n).pipe(Yt(a=>a&&function eB(n){return"boolean"==typeof n}(a)?function uB(n,e,t,s){return It(e).pipe(Gi(r=>pm(function hB(n,e){return null!==n&&e&&e(new Oj(n)),Z(!0)}(r.route.parent,s),function lB(n,e){return null!==n&&e&&e(new kj(n)),Z(!0)}(r.route,s),function fB(n,e,t){const s=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(o=>function Xj(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(o)).filter(o=>null!==o).map(o=>rT(()=>Z(o.guards.map(c=>{const u=eu(o.node)??t,l=fa(c,u);return ii(function sB(n){return n&&su(n.canActivateChild)}(l)?l.canActivateChild(s,n):u.runInContext(()=>l(s,n))).pipe(si())})).pipe(pa())));return Z(i).pipe(pa())}(n,r.path,t),function dB(n,e,t){const s=e.routeConfig?e.routeConfig.canActivate:null;if(!s||0===s.length)return Z(!0);const r=s.map(i=>rT(()=>{const o=eu(e)??t,a=fa(i,o);return ii(function nB(n){return n&&su(n.canActivate)}(a)?a.canActivate(e,n):o.runInContext(()=>a(e,n))).pipe(si())}));return Z(r).pipe(pa())}(n,r.route,t))),si(r=>!0!==r,!0))}(s,i,n,e):Z(a)),ee(a=>({...t,guardsResult:a})))})}(this.router.ngModule.injector,o=>this.router.triggerEvent(o)),At(o=>{if(s.guardsResult=o.guardsResult,Qi(o.guardsResult))throw FT(0,o.guardsResult);const a=new Aj(o.id,this.router.serializeUrl(o.extractedUrl),this.router.serializeUrl(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.router.triggerEvent(a)}),ni(o=>!!o.guardsResult||(this.router.restoreHistory(o),this.router.cancelNavigationTransition(o,"",3),!1)),Lm(o=>{if(o.guards.canActivateChecks.length)return Z(o).pipe(At(a=>{const c=new xj(a.id,this.router.serializeUrl(a.extractedUrl),this.router.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.router.triggerEvent(c)}),ln(a=>{let c=!1;return Z(a).pipe(function FB(n,e){return Yt(t=>{const{targetSnapshot:s,guards:{canActivateChecks:r}}=t;if(!r.length)return Z(t);let i=0;return It(r).pipe(Gi(o=>function PB(n,e,t,s){const r=n.routeConfig,i=n._resolve;return void 0!==r?.title&&!eE(r)&&(i[Wc]=r.title),function VB(n,e,t,s){const r=function LB(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===r.length)return Z({});const i={};return It(r).pipe(Yt(o=>function jB(n,e,t,s){const r=eu(e)??s,i=fa(n,r);return ii(i.resolve?i.resolve(e,t):r.runInContext(()=>i(e,t)))}(n[o],e,t,s).pipe(si(),At(a=>{i[o]=a}))),mm(1),function X2(n){return ee(()=>n)}(i),ri(o=>Fm(o)?lr:qc(o)))}(i,n,e,s).pipe(ee(o=>(n._resolvedData=o,n.data=OT(n,t).resolve,r&&eE(r)&&(n.data[Wc]=r.title),null)))}(o.route,s,n,e)),At(()=>i++),mm(1),Yt(o=>i===r.length?Z(t):lr))})}(this.router.paramsInheritanceStrategy,this.router.ngModule.injector),At({next:()=>c=!0,complete:()=>{c||(this.router.restoreHistory(a),this.router.cancelNavigationTransition(a,"",2))}}))}),At(a=>{const c=new Mj(a.id,this.router.serializeUrl(a.extractedUrl),this.router.serializeUrl(a.urlAfterRedirects),a.targetSnapshot);this.router.triggerEvent(c)}))}),Lm(o=>{const a=c=>{const u=[];c.routeConfig?.loadComponent&&!c.routeConfig._loadedComponent&&u.push(this.router.configLoader.loadComponent(c.routeConfig).pipe(At(l=>{c.component=l}),ee(()=>{})));for(const l of c.children)u.push(...a(l));return u};return aa(a(o.targetSnapshot.root)).pipe(bh(),Gc(1))}),Lm(()=>this.router.afterPreactivation()),ee(o=>{const a=function jj(n,e,t){const s=Kc(n,e._root,t?t._root:void 0);return new IT(s,e)}(this.router.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return s={...o,targetRouterState:a}}),At(o=>{this.router.currentUrlTree=o.urlAfterRedirects,this.router.rawUrlTree=this.router.urlHandlingStrategy.merge(o.urlAfterRedirects,o.rawUrl),this.router.routerState=o.targetRouterState,"deferred"===this.router.urlUpdateStrategy&&(o.extras.skipLocationChange||this.router.setBrowserUrl(this.router.rawUrlTree,o),this.router.browserUrlTree=o.urlAfterRedirects)}),((n,e,t)=>ee(s=>(new Zj(e,s.targetRouterState,s.currentRouterState,t).activate(n),s)))(this.router.rootContexts,this.router.routeReuseStrategy,o=>this.router.triggerEvent(o)),At({next(){r=!0},complete(){r=!0}}),_m(()=>{r||i||this.router.cancelNavigationTransition(s,"",1),this.currentNavigation?.id===s.id&&(this.currentNavigation=null)}),ri(o=>{if(i=!0,LT(o)){VT(o)||(this.router.navigated=!0,this.router.restoreHistory(s,!0));const a=new Nh(s.id,this.router.serializeUrl(s.extractedUrl),o.message,o.cancellationCode);if(t.next(a),VT(o)){const c=this.router.urlHandlingStrategy.merge(o.url,this.router.rawUrlTree),u={skipLocationChange:s.extras.skipLocationChange,replaceUrl:"eager"===this.router.urlUpdateStrategy||nE(s.source)};this.router.scheduleNavigation(c,"imperative",null,u,{resolve:s.resolve,reject:s.reject,promise:s.promise})}else s.resolve(!1)}else{this.router.restoreHistory(s,!0);const a=new AT(s.id,this.router.serializeUrl(s.extractedUrl),o,s.targetSnapshot??void 0);t.next(a);try{s.resolve(this.router.errorHandler(o))}catch(c){s.reject(c)}}return lr}))}))}}function nE(n){return"imperative"!==n}let sE=(()=>{class n{buildTitle(t){let s,r=t.root;for(;void 0!==r;)s=this.getResolvedTitleForRoute(r)??s,r=r.children.find(i=>i.outlet===Ce);return s}getResolvedTitleForRoute(t){return t.data[Wc]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=re({token:n,factory:function(){return Ue($B)},providedIn:"root"}),n})(),$B=(()=>{class n extends sE{constructor(t){super(),this.title=t}updateTitle(t){const s=this.buildTitle(t);void 0!==s&&this.title.setTitle(s)}}return n.\u0275fac=function(t){return new(t||n)(K(XS))},n.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),HB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=re({token:n,factory:function(){return Ue(qB)},providedIn:"root"}),n})();class UB{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let qB=(()=>{class n extends UB{}return n.\u0275fac=function(){let e;return function(s){return(e||(e=Jt(n)))(s||n)}}(),n.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Bh=new Q("",{providedIn:"root",factory:()=>({})}),ga=new Q("ROUTES");let jm=(()=>{class n{constructor(t,s){this.injector=t,this.compiler=s,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Z(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const s=ii(t.loadComponent()).pipe(ee(iE),At(i=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=i}),_m(()=>{this.componentLoaders.delete(t)})),r=new iT(s,()=>new O).pipe(gm());return this.componentLoaders.set(t,r),r}loadChildren(t,s){if(this.childrenLoaders.get(s))return this.childrenLoaders.get(s);if(s._loadedRoutes)return Z({routes:s._loadedRoutes,injector:s._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(s);const i=this.loadModuleFactoryOrRoutes(s.loadChildren).pipe(ee(a=>{this.onLoadEndListener&&this.onLoadEndListener(s);let c,u,l=!1;Array.isArray(a)?u=a:(c=a.create(t).injector,u=lT(c.get(ga,[],ne.Self|ne.Optional)));return{routes:u.map(km),injector:c}}),_m(()=>{this.childrenLoaders.delete(s)})),o=new iT(i,()=>new O).pipe(gm());return this.childrenLoaders.set(s,o),o}loadModuleFactoryOrRoutes(t){return ii(t()).pipe(ee(iE),Yt(r=>r instanceof Yb||Array.isArray(r)?Z(r):It(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(K(ts),K(Mg))},n.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function iE(n){return function zB(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let QB=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=re({token:n,factory:function(){return Ue(ZB)},providedIn:"root"}),n})(),ZB=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,s){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function YB(n){throw n}function XB(n,e,t){return e.parse("/")}const KB={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},JB={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function aE(){const n=Ue(_T),e=Ue(Jc),t=Ue(Gg),s=Ue(ts),r=Ue(Mg),i=Ue(ga,{optional:!0})??[],o=Ue(Bh,{optional:!0})??{},a=new hn(null,n,e,t,s,r,lT(i));return function e$(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(o,a),a}let hn=(()=>{class n{constructor(t,s,r,i,o,a,c){this.rootComponentType=t,this.urlSerializer=s,this.rootContexts=r,this.location=i,this.config=c,this.lastSuccessfulNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new O,this.errorHandler=YB,this.malformedUriErrorHandler=XB,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>Z(void 0),this.urlHandlingStrategy=Ue(QB),this.routeReuseStrategy=Ue(HB),this.titleStrategy=Ue(sE),this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.canceledNavigationResolution="replace",this.navigationTransitions=new BB(this),this.configLoader=o.get(jm),this.configLoader.onLoadEndListener=d=>this.triggerEvent(new Nj(d)),this.configLoader.onLoadStartListener=d=>this.triggerEvent(new Ij(d)),this.ngModule=o.get($i),this.console=o.get(CP);const h=o.get(Ot);this.isNgZoneEnabled=h instanceof Ot&&Ot.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=new Wi,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=NT(this.currentUrlTree,this.rootComponentType),this.transitions=new Ht({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.navigationTransitions.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const s="popstate"===t.type?"popstate":"hashchange";"popstate"===s&&setTimeout(()=>{const r={replaceUrl:!0},i=t.state?.navigationId?t.state:null;if(t.state){const a={...t.state};delete a.navigationId,delete a.\u0275routerPageId,0!==Object.keys(a).length&&(r.state=a)}const o=this.parseUrl(t.url);this.scheduleNavigation(o,s,i,r)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(km),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,s={}){const{relativeTo:r,queryParams:i,fragment:o,queryParamsHandling:a,preserveFragment:c}=s,u=r||this.routerState.root,l=c?this.currentUrlTree.fragment:o;let h=null;switch(a){case"merge":h={...this.currentUrlTree.queryParams,...i};break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=i||null}return null!==h&&(h=this.removeEmptyProps(h)),vj(u,this.currentUrlTree,t,h,l??null)}navigateByUrl(t,s={skipLocationChange:!1}){const r=Qi(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,s)}navigate(t,s={skipLocationChange:!1}){return function t$(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new I(4008,!1)}}(t),this.navigateByUrl(this.createUrlTree(t,s),s)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let s;try{s=this.urlSerializer.parse(t)}catch(r){s=this.malformedUriErrorHandler(r,this.urlSerializer,t)}return s}isActive(t,s){let r;if(r=!0===s?{...KB}:!1===s?{...JB}:s,Qi(t))return fT(this.currentUrlTree,t,r);const i=this.parseUrl(t);return fT(this.currentUrlTree,i,r)}removeEmptyProps(t){return Object.keys(t).reduce((s,r)=>{const i=t[r];return null!=i&&(s[r]=i),s},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Zi(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.getCurrentNavigation(),this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,s,r,i,o){if(this.disposed)return Promise.resolve(!1);let a,c,u;o?(a=o.resolve,c=o.reject,u=o.promise):u=new Promise((d,f)=>{a=d,c=f});const l=++this.navigationId;let h;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(r=this.location.getState()),h=r&&r.\u0275routerPageId?r.\u0275routerPageId:i.replaceUrl||i.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):h=0,this.setTransition({id:l,targetPageId:h,source:s,restoredState:r,currentUrlTree:this.currentUrlTree,rawUrl:t,extras:i,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}setBrowserUrl(t,s){const r=this.urlSerializer.serialize(t),i={...s.extras.state,...this.generateNgRouterState(s.id,s.targetPageId)};this.location.isCurrentPathEqualTo(r)||s.extras.replaceUrl?this.location.replaceState(r,"",i):this.location.go(r,"",i)}restoreHistory(t,s=!1){if("computed"===this.canceledNavigationResolution){const r=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.getCurrentNavigation()?.finalUrl||0===r?this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===r&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(r)}else"replace"===this.canceledNavigationResolution&&(s&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,s,r){const i=new Nh(t.id,this.serializeUrl(t.extractedUrl),s,r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,s){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:s}:{navigationId:t}}}return n.\u0275fac=function(t){Ap()},n.\u0275prov=re({token:n,factory:function(){return aE()},providedIn:"root"}),n})(),$h=(()=>{class n{constructor(t,s,r,i,o,a){this.router=t,this.route=s,this.tabIndexAttribute=r,this.renderer=i,this.el=o,this.locationStrategy=a,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new O;const c=o.nativeElement.tagName;this.isAnchorElement="A"===c||"AREA"===c,this.isAnchorElement?this.subscription=t.events.subscribe(u=>{u instanceof Zi&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=oa(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=oa(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=oa(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,s,r,i,o){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||s||r||i||o||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:function fD(n,e,t){return function mN(n,e){return"src"===e&&("embed"===n||"frame"===n||"iframe"===n||"media"===n||"script"===n)||"href"===e&&("base"===n||"link"===n)?dD:hD}(e,t)(n)}(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,s){const r=this.renderer,i=this.el.nativeElement;null!==s?r.setAttribute(i,t,s):r.removeAttribute(i,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(E(hn),E(da),function pl(n){return function BI(n,e){if("class"===e)return n.classes;if("style"===e)return n.styles;const t=n.attrs;if(t){const s=t.length;let r=0;for(;r<s;){const i=t[r];if(ew(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<s&&"string"==typeof t[r];)r++;else{if(i===e)return t[r+1];r+=2}}}return null}(Kt(),n)}("tabindex"),E(_r),E(qn),E(Ui))},n.\u0275dir=ce({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,s){1&t&&Ge("click",function(i){return s.onClick(i.button,i.ctrlKey,i.shiftKey,i.altKey,i.metaKey)}),2&t&&qs("target",s.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[Jn]}),n})();class cE{}let r$=(()=>{class n{constructor(t,s,r,i,o){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(ni(t=>t instanceof Zi),Gi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,s){const r=[];for(const i of s){i.providers&&!i._injector&&(i._injector=Gl(i.providers,t,`Route: ${i.path}`));const o=i._injector??t,a=i._loadedInjector??o;i.loadChildren&&!i._loadedRoutes&&void 0===i.canLoad||i.loadComponent&&!i._loadedComponent?r.push(this.preloadConfig(o,i)):(i.children||i._loadedRoutes)&&r.push(this.processRoutes(a,i.children??i._loadedRoutes))}return It(r).pipe(Do())}preloadConfig(t,s){return this.preloadingStrategy.preload(s,()=>{let r;r=s.loadChildren&&void 0===s.canLoad?this.loader.loadChildren(t,s):Z(null);const i=r.pipe(Yt(o=>null===o?Z(void 0):(s._loadedRoutes=o.routes,s._loadedInjector=o.injector,this.processRoutes(o.injector??t,o.routes))));return s.loadComponent&&!s._loadedComponent?It([i,this.loader.loadComponent(s)]).pipe(Do()):i})}}return n.\u0275fac=function(t){return new(t||n)(K(hn),K(Mg),K(Xr),K(cE),K(jm))},n.\u0275prov=re({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Bm=new Q("");let uE=(()=>{class n{constructor(t,s,r,i={}){this.router=t,this.viewportScroller=s,this.zone=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Sm?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Zi&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof xT&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,s){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.router.triggerEvent(new xT(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,s))})},0)})}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){Ap()},n.\u0275prov=re({token:n,factory:n.\u0275fac}),n})();function lE(n){return n.routerState.root}function _a(n,e){return{\u0275kind:n,\u0275providers:e}}function hE(){const n=Ue(ts);return e=>{const t=n.get(eh);if(e!==t.components[0])return;const s=n.get(hn),r=n.get(dE);1===n.get(Hm)&&s.initialNavigation(),n.get(fE,null,ne.Optional)?.setUpPreloading(),n.get(Bm,null,ne.Optional)?.init(),s.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.unsubscribe())}}const dE=new Q("",{factory:()=>new O}),Hm=new Q("",{providedIn:"root",factory:()=>1});const fE=new Q("");function l$(n){return _a(0,[{provide:fE,useExisting:r$},{provide:cE,useExisting:n}])}const pE=new Q("ROUTER_FORROOT_GUARD"),h$=[Gg,{provide:_T,useClass:ym},{provide:hn,useFactory:aE},Jc,{provide:da,useFactory:lE,deps:[hn]},jm,[]];function d$(){return new Q0("Router",hn)}let gE=(()=>{class n{constructor(t){}static forRoot(t,s){return{ngModule:n,providers:[h$,[],{provide:ga,multi:!0,useValue:t},{provide:pE,useFactory:m$,deps:[[hn,new uc,new lc]]},{provide:Bh,useValue:s||{}},s?.useHash?{provide:Ui,useClass:cV}:{provide:Ui,useClass:gS},{provide:Bm,useFactory:()=>{const n=Ue(hn),e=Ue(AL),t=Ue(Ot),s=Ue(Bh);return s.scrollOffset&&e.setOffset(s.scrollOffset),new uE(n,e,t,s)}},s?.preloadingStrategy?l$(s.preloadingStrategy).\u0275providers:[],{provide:Q0,multi:!0,useFactory:d$},s?.initialNavigation?_$(s):[],[{provide:mE,useFactory:hE},{provide:xg,multi:!0,useExisting:mE}]]}}static forChild(t){return{ngModule:n,providers:[{provide:ga,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(K(pE,8))},n.\u0275mod=Ei({type:n}),n.\u0275inj=Wr({imports:[Om]}),n})();function m$(n){return"guarded"}function _$(n){return["disabled"===n.initialNavigation?_a(3,[{provide:Xl,multi:!0,useFactory:()=>{const e=Ue(hn);return()=>{e.setUpLocationChangeListener()}}},{provide:Hm,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?_a(2,[{provide:Hm,useValue:0},{provide:Xl,multi:!0,deps:[ts],useFactory:e=>{const t=e.get(oV,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(hn),o=e.get(dE);(function s(r){e.get(hn).events.pipe(ni(o=>o instanceof Zi||o instanceof Nh||o instanceof AT),ee(o=>o instanceof Zi||o instanceof Nh&&(0===o.code||1===o.code)&&null),ni(o=>null!==o),Gc(1)).subscribe(()=>{r()})})(()=>{r(!0)}),i.afterPreactivation=()=>(r(!0),o.closed?Z(void 0):o),i.initialNavigation()}))}}]).\u0275providers:[]]}const mE=new Q("");class Hh{static#e=this.\u0275fac=function(t){return new(t||Hh)};static#t=this.\u0275cmp=Vn({type:Hh,selectors:[["app-navbar"]],standalone:!0,features:[ss],decls:22,vars:0,consts:[[1,"navbar","navbar-expand-sm","navbar-dark","bg-dark","justify-content-between"],[1,"navbar-nav"],["routerLink","/",1,"navbar-brand"],[1,"navbar-nav","align-items-center"],[1,"nav-item"],["routerLink","#",1,"nav-link"],[1,"material-icons"],["routerLink","sketch",1,"nav-link"],["hidden","",1,"material-icons"],["routerLink","piano-roll",1,"nav-link"]],template:function(t,s){1&t&&(H(0,"nav",0)(1,"div",1)(2,"a",2),Ne(3,"Sketched"),q()(),H(4,"ul",3)(5,"li",4)(6,"a",5)(7,"span",6),Ne(8,"queue_music"),q()()(),H(9,"li",4)(10,"a",7)(11,"span",6),Ne(12,"add_circle"),q(),H(13,"span",8),Ne(14,"add_circle_outline"),q()()(),H(15,"li",4)(16,"a",9)(17,"span",6),Ne(18,"piano"),q()()()(),H(19,"div",1)(20,"a",5),Ne(21,"new sketch"),q()()())},dependencies:[Ys,gE,$h],styles:[".navbar[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{vertical-align:middle}.navbar[_ngcontent-%COMP%]:first-child, .navbar[_ngcontent-%COMP%]:last-child{padding-left:1rem;padding-right:1rem}.material-icons[_ngcontent-%COMP%]{font-size:24px}"]})}class Uh{constructor(){this.title="sketched-app"}static#e=this.\u0275fac=function(t){return new(t||Uh)};static#t=this.\u0275cmp=Vn({type:Uh,selectors:[["app-root"]],standalone:!0,features:[ss],decls:4,vars:0,consts:[[1,"content"]],template:function(t,s){1&t&&(H(0,"div"),Gs(1,"app-navbar"),H(2,"div",0),Gs(3,"router-outlet"),q()())},dependencies:[Ys,gE,Nm,Hh],styles:[".content[_ngcontent-%COMP%]{padding:2rem}@media (max-width: 1000px){.content[_ngcontent-%COMP%]{padding:.5rem}}"]})}let _E=(()=>{class n{constructor(t,s){this._renderer=t,this._elementRef=s,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(t,s){this._renderer.setProperty(this._elementRef.nativeElement,t,s)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(E(_r),E(qn))},n.\u0275dir=ce({type:n}),n})(),Yi=(()=>{class n extends _E{}return n.\u0275fac=function(){let e;return function(s){return(e||(e=Jt(n)))(s||n)}}(),n.\u0275dir=ce({type:n,features:[He]}),n})();const Ks=new Q("NgValueAccessor"),D$={provide:Ks,useExisting:Ke(()=>Um),multi:!0},b$=new Q("CompositionEventMode");let Um=(()=>{class n extends _E{constructor(t,s,r){super(t,s),this._compositionMode=r,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function C$(){const n=Zs()?Zs().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(E(_r),E(qn),E(b$,8))},n.\u0275dir=ce({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,s){1&t&&Ge("input",function(i){return s._handleInput(i.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(i){return s._compositionEnd(i.target.value)})},features:[ut([D$]),He]}),n})();const dn=new Q("NgValidators"),ai=new Q("NgAsyncValidators");function xE(n){return null!=n}function ME(n){return xc(n)?It(n):n}function IE(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function NE(n,e){return e.map(t=>t(n))}function OE(n){return n.map(e=>function E$(n){return!n.validate}(e)?e:t=>e.validate(t))}function qm(n){return null!=n?function RE(n){if(!n)return null;const e=n.filter(xE);return 0==e.length?null:function(t){return IE(NE(t,e))}}(OE(n)):null}function Gm(n){return null!=n?function kE(n){if(!n)return null;const e=n.filter(xE);return 0==e.length?null:function(t){return function v$(...n){const e=Jd(n),{args:t,keys:s}=eT(n),r=new at(i=>{const{length:o}=t;if(!o)return void i.complete();const a=new Array(o);let c=o,u=o;for(let l=0;l<o;l++){let h=!1;Yn(t[l]).subscribe(U(i,d=>{h||(h=!0,u--),a[l]=d},()=>c--,void 0,()=>{(!c||!h)&&(u||i.next(s?nT(s,a):a),i.complete())}))}});return e?r.pipe(tT(e)):r}(NE(t,e).map(ME)).pipe(ee(IE))}}(OE(n)):null}function FE(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function Wm(n){return n?Array.isArray(n)?n:[n]:[]}function Gh(n,e){return Array.isArray(n)?n.includes(e):n===e}function LE(n,e){const t=Wm(e);return Wm(n).forEach(r=>{Gh(t,r)||t.push(r)}),t}function jE(n,e){return Wm(e).filter(t=>!Gh(n,t))}class BE{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=qm(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Gm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Dn extends BE{get formDirective(){return null}get path(){return null}}class ci extends BE{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class $E{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let zm=(()=>{class n extends $E{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(E(ci,2))},n.\u0275dir=ce({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,s){2&t&&ji("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[He]}),n})();const ou="VALID",zh="INVALID",ya="PENDING",au="DISABLED";function Qh(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class GE{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ou}get invalid(){return this.status===zh}get pending(){return this.status==ya}get disabled(){return this.status===au}get enabled(){return this.status!==au}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(LE(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(LE(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(jE(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(jE(e,this._rawAsyncValidators))}hasValidator(e){return Gh(this._rawValidators,e)}hasAsyncValidator(e){return Gh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ya,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=au,this.errors=null,this._forEachChild(s=>{s.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(s=>s(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ou,this._forEachChild(s=>{s.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(s=>s(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ou||this.status===ya)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?au:ou}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ya,this._hasOwnPendingAsyncValidator=!0;const t=ME(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(s=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(s,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((s,r)=>s&&s._find(r),this)}getError(e,t){const s=t?this.get(t):this;return s&&s.errors?s.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Dt,this.statusChanges=new Dt}_calculateStatus(){return this._allControlsDisabled()?au:this.errors?zh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ya)?ya:this._anyControlsHaveStatus(zh)?zh:ou}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Qh(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function k$(n){return Array.isArray(n)?qm(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function F$(n){return Array.isArray(n)?Gm(n):n||null}(this._rawAsyncValidators)}}const cu=new Q("CallSetDisabledState",{providedIn:"root",factory:()=>e_}),e_="always";function uu(n,e,t=e_){(function t_(n,e){const t=function PE(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(FE(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const s=function VE(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(FE(s,e.asyncValidator)):"function"==typeof s&&n.setAsyncValidators([s]);const r=()=>n.updateValueAndValidity();Xh(e._rawValidators,r),Xh(e._rawAsyncValidators,r)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function L$(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&WE(n,e)})}(n,e),function B$(n,e){const t=(s,r)=>{e.valueAccessor.writeValue(s),r&&e.viewToModelUpdate(s)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function j$(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&WE(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function V$(n,e){if(e.valueAccessor.setDisabledState){const t=s=>{e.valueAccessor.setDisabledState(s)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Xh(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function WE(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function ZE(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function YE(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const XE=class extends GE{constructor(e=null,t,s){super(function Xm(n){return(Qh(n)?n.validators:n)||null}(t),function Km(n,e){return(Qh(e)?e.asyncValidators:n)||null}(s,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Qh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=YE(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(s=>s(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ZE(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ZE(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){YE(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Q$={provide:ci,useExisting:Ke(()=>Jh)},eA=(()=>Promise.resolve())();let Jh=(()=>{class n extends ci{constructor(t,s,r,i,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new XE,this._registered=!1,this.update=new Dt,this._parent=t,this._setValidators(s),this._setAsyncValidators(r),this.valueAccessor=function r_(n,e){if(!e)return null;let t,s,r;return Array.isArray(e),e.forEach(i=>{i.constructor===Um?t=i:function U$(n){return Object.getPrototypeOf(n.constructor)===Yi}(i)?s=i:r=i}),r||s||t||null}(0,i)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const s=t.name.previousValue;this.formDirective.removeControl({name:s,path:this._getPath(s)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function s_(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){uu(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){eA.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const s=t.isDisabled.currentValue,r=0!==s&&oa(s);eA.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Zh(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(E(Dn,9),E(dn,10),E(ai,10),E(Ks,10),E(nh,8),E(cu,8))},n.\u0275dir=ce({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ut([Q$]),He,Jn]}),n})(),nA=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ei({type:n}),n.\u0275inj=Wr({}),n})();const iH={provide:Ks,useExisting:Ke(()=>hu),multi:!0};function uA(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let hu=(()=>{class n extends Yi{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const r=uA(this._getOptionId(t),t);this.setProperty("value",r)}registerOnChange(t){this.onChange=s=>{this.value=this._getOptionValue(s),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const s of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(s),t))return s;return null}_getOptionValue(t){const s=function oH(n){return n.split(":")[0]}(t);return this._optionMap.has(s)?this._optionMap.get(s):t}}return n.\u0275fac=function(){let e;return function(s){return(e||(e=Jt(n)))(s||n)}}(),n.\u0275dir=ce({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,s){1&t&&Ge("change",function(i){return s.onChange(i.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[ut([iH]),He]}),n})(),u_=(()=>{class n{constructor(t,s,r){this._element=t,this._renderer=s,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(uA(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(E(qn),E(_r),E(hu,9))},n.\u0275dir=ce({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const aH={provide:Ks,useExisting:Ke(()=>l_),multi:!0};function lA(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let l_=(()=>{class n extends Yi{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let s;if(this.value=t,Array.isArray(t)){const r=t.map(i=>this._getOptionId(i));s=(i,o)=>{i._setSelected(r.indexOf(o.toString())>-1)}}else s=(r,i)=>{r._setSelected(!1)};this._optionMap.forEach(s)}registerOnChange(t){this.onChange=s=>{const r=[],i=s.selectedOptions;if(void 0!==i){const o=i;for(let a=0;a<o.length;a++){const u=this._getOptionValue(o[a].value);r.push(u)}}else{const o=s.options;for(let a=0;a<o.length;a++){const c=o[a];if(c.selected){const u=this._getOptionValue(c.value);r.push(u)}}}this.value=r,t(r)}}_registerOption(t){const s=(this._idCounter++).toString();return this._optionMap.set(s,t),s}_getOptionId(t){for(const s of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(s)._value,t))return s;return null}_getOptionValue(t){const s=function cH(n){return n.split(":")[0]}(t);return this._optionMap.has(s)?this._optionMap.get(s)._value:t}}return n.\u0275fac=function(){let e;return function(s){return(e||(e=Jt(n)))(s||n)}}(),n.\u0275dir=ce({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,s){1&t&&Ge("change",function(i){return s.onChange(i.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[ut([aH]),He]}),n})(),h_=(()=>{class n{constructor(t,s,r){this._element=t,this._renderer=s,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(lA(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(lA(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(E(qn),E(_r),E(l_,9))},n.\u0275dir=ce({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),_H=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ei({type:n}),n.\u0275inj=Wr({imports:[nA]}),n})(),ed=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:cu,useValue:t.callSetDisabledState??e_}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=Ei({type:n}),n.\u0275inj=Wr({imports:[_H]}),n})();var We=(()=>{return(n=We||(We={})).C="C",n.C_SHARP="C_SHARP",n.D="D",n.D_SHARP="D_SHARP",n.E="E",n.F="F",n.F_SHARP="F_SHARP",n.G="G",n.G_SHARP="G_SHARP",n.A="A",n.A_SHARP="A_SHARP",n.B="B",We;var n})();const ui=n=>({position:n.position+12,name:n.name,frequency:2*n.frequency,octave:n.octave+1}),wA=[{position:0,name:We.C,frequency:16.35,octave:0},{position:1,name:We.C_SHARP,frequency:17.32,octave:0},{position:2,name:We.D,frequency:18.35,octave:0},{position:3,name:We.D_SHARP,frequency:19.45,octave:0},{position:4,name:We.E,frequency:20.6,octave:0},{position:5,name:We.F,frequency:21.83,octave:0},{position:6,name:We.F_SHARP,frequency:23.12,octave:0},{position:7,name:We.G,frequency:24.5,octave:0},{position:8,name:We.G_SHARP,frequency:25.96,octave:0},{position:9,name:We.A,frequency:27.5,octave:0},{position:10,name:We.A_SHARP,frequency:29.14,octave:0},{position:11,name:We.B,frequency:30.87,octave:0}],DA=wA.map(n=>ui(n)),CA=DA.map(n=>ui(n)),bA=CA.map(n=>ui(n)),SA=bA.map(n=>ui(n)),TA=SA.map(n=>ui(n)),EA=TA.map(n=>ui(n)),AA=EA.map(n=>ui(n)),vH=AA.map(n=>ui(n)),Ki=[...wA,...DA,...CA,...bA,...SA,...TA,...EA,...AA,...vH];var Y=(()=>{return(n=Y||(Y={})).FIFTH="FIFTH",n.TRIAD="TRIAD",n.SEVENTH="SEVENTH",n.NINTH="NINTH",n.ELEVENTH="ELEVENTH",n.THIRTEENTH="THIRTEENTH",n.ADDED_NINTH="ADDED_NINTH",n.SUS="SUS",n.SUS_SEVENTH="SUS_SEVENTH",n.SIXTH="SIXTH",n.SIXTH_NINTH="SIXTH_NINTH",n.ADDED_ELEVENTH="ADDED_ELEVENTH",Y;var n})();class td{constructor(){this.chordTypeMap={[Y.FIFTH]:"Fifth",[Y.TRIAD]:"Triad",[Y.SEVENTH]:"Seventh",[Y.NINTH]:"Ninth",[Y.ELEVENTH]:"Eleventh",[Y.THIRTEENTH]:"Thirteenth",[Y.ADDED_NINTH]:"Added Ninth",[Y.SUS]:"Suspended",[Y.SUS_SEVENTH]:"Suspended Seventh",[Y.SIXTH]:"Sixth",[Y.SIXTH_NINTH]:"Sixth/Ninth",[Y.ADDED_ELEVENTH]:"Added Eleventh"}}transform(e){return this.chordTypeMap[e]}static#e=this.\u0275fac=function(t){return new(t||td)};static#t=this.\u0275pipe=Xt({name:"chordtype",type:td,pure:!0,standalone:!0})}class nd{constructor(){this.degreeMap={0:"I",1:"II",2:"III",3:"IV",4:"V",5:"VI",6:"VII"}}transform(e){return this.degreeMap[e]}static#e=this.\u0275fac=function(t){return new(t||nd)};static#t=this.\u0275pipe=Xt({name:"degree",type:nd,pure:!0,standalone:!0})}class va{constructor(){this.nameMap={[We.A]:"A",[We.A_SHARP]:"A\u266f",[We.B]:"B",[We.C]:"C",[We.C_SHARP]:"C\u266f",[We.D]:"D",[We.D_SHARP]:"D\u266f",[We.E]:"E",[We.F]:"F",[We.F_SHARP]:"F\u266f",[We.G]:"G",[We.G_SHARP]:"G\u266f"}}transform(e,t){return this.nameMap[e.name]+(t?.toString()??"")}static#e=this.\u0275fac=function(t){return new(t||va)};static#t=this.\u0275pipe=Xt({name:"note",type:va,pure:!0,standalone:!0})}var tn=(()=>{return(n=tn||(tn={}))[n.I=1]="I",n[n.II=2]="II",n[n.III=3]="III",n[n.IV=4]="IV",n[n.V=5]="V",n[n.VI=6]="VI",n[n.VII=7]="VII",tn;var n})(),as=(()=>{return(n=as||(as={})).IONIAN="Ionian",n.AEOLIAN="Aeolian",n.DORIAN="Dorian",n.PHRYGIAN="Phrygian",n.LYDIAN="Lydian",n.MIXOLYDIAN="Mixolydian",n.LOCRIAN="Locrian",as;var n})(),sd=(()=>{return(n=sd||(sd={})).WHOLE="WHOLE",n.HALF="HALF",sd;var n})();const f_={[as.IONIAN]:[0,2,4,5,7,9,11],[as.AEOLIAN]:[0,2,3,5,7,8,10],[as.DORIAN]:[0,2,3,5,7,9,10],[as.PHRYGIAN]:[0,1,3,5,7,8,10],[as.LYDIAN]:[0,2,4,6,7,9,11],[as.MIXOLYDIAN]:[0,2,4,5,7,9,10],[as.LOCRIAN]:[0,1,3,5,6,8,10]},wH={[tn.I]:0,[tn.II]:1,[tn.III]:2,[tn.IV]:3,[tn.V]:4,[tn.VI]:5,[tn.VII]:6},DH={[Y.FIFTH]:[0,4],[Y.TRIAD]:[0,2,4],[Y.SEVENTH]:[0,2,4,6],[Y.NINTH]:[0,2,4,6,8],[Y.ELEVENTH]:[0,2,4,6,8,10],[Y.THIRTEENTH]:[0,2,4,6,8,10,12],[Y.ADDED_NINTH]:[0,2,4,8],[Y.SUS]:[0,3,4],[Y.SUS_SEVENTH]:[0,3,4,6],[Y.SIXTH]:[0,2,4,5],[Y.SIXTH_NINTH]:[0,2,4,5,8],[Y.ADDED_ELEVENTH]:[0,2,4,10]};class Js{constructor(){this._currentScaleMode=new Ht(as.IONIAN),this._currentRootNote=new Ht(Ki.find(e=>36===e.position)),this.currentScaleMode$=this._currentScaleMode.asObservable(),this.currentRootNote$=this._currentRootNote.asObservable(),this.currentScale$=aa([this.currentRootNote$,this.currentScaleMode$]).pipe(ee(([e,t])=>this.generateScale(e.position,t))),this.currentChords$=this.currentScale$.pipe(ee(e=>this.generateChords(e))),this.allChords$=this.currentScale$.pipe(ee(e=>this.generateAllChords(e))),this.octaveThreeAndFourNotes=Ki.filter(e=>3===e.octave||4===e.octave)}get currentScaleMode(){return this._currentScaleMode.getValue()}get currentRootNote(){return this._currentRootNote.getValue()}setCurrentScaleMode(e){this._currentScaleMode.next(e)}setCurrentRootNote(e){this._currentRootNote.next(e)}getNextStep(e,t){const s=t===sd.HALF?1:2;return Ki.find(r=>r.position===e.position+s)??{position:-1,name:We.C,frequency:0,octave:0}}generateScale(e,t){const s=Ki,r=[];for(const i of f_[t])r.push(s[e+i]);for(const i of f_[t])r.push(s[e+12+i]);for(const i of f_[t])r.push(s[e+24+i]);return r}generateAllChords(e){return{[Y.FIFTH]:this.generateChords(e,Y.FIFTH),[Y.TRIAD]:this.generateChords(e,Y.TRIAD),[Y.SEVENTH]:this.generateChords(e,Y.SEVENTH),[Y.NINTH]:this.generateChords(e,Y.NINTH),[Y.ELEVENTH]:this.generateChords(e,Y.ELEVENTH),[Y.THIRTEENTH]:this.generateChords(e,Y.THIRTEENTH),[Y.ADDED_NINTH]:this.generateChords(e,Y.ADDED_NINTH),[Y.SUS]:this.generateChords(e,Y.SUS),[Y.SUS_SEVENTH]:this.generateChords(e,Y.SUS_SEVENTH),[Y.SIXTH]:this.generateChords(e,Y.SIXTH),[Y.SIXTH_NINTH]:this.generateChords(e,Y.SIXTH_NINTH),[Y.ADDED_ELEVENTH]:this.generateChords(e,Y.ADDED_ELEVENTH)}}generateChords(e,t=Y.TRIAD){return[this.getChord(tn.I,e,t),this.getChord(tn.II,e,t),this.getChord(tn.III,e,t),this.getChord(tn.IV,e,t),this.getChord(tn.V,e,t),this.getChord(tn.VI,e,t),this.getChord(tn.VII,e,t)]}getChord(e,t,s){if(!t.length)return[];const r=DH[s],i=wH[e];let o=[];for(const a of r)o.push(t[(a+i)%21]);return o}static#e=this.\u0275fac=function(t){return new(t||Js)};static#t=this.\u0275prov=re({token:Js,factory:Js.\u0275fac,providedIn:"root"})}const p_="14.7.77";var li=je(21);const wa=new WeakSet,xA=new WeakMap,g_=new WeakMap,MA=new WeakMap,m_=new WeakMap,rd=new WeakMap,IA=new WeakMap,__=new WeakMap,y_=new WeakMap,v_=new WeakMap,NA={construct:()=>NA},OA=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,RA=(n,e)=>{const t=[];let s=n.replace(/^[\s]+/,""),r=s.match(OA);for(;null!==r;){const i=r[1].slice(1,-1),o=r[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());t.push(o),s=s.slice(r[0].length).replace(/^[\s]+/,""),r=s.match(OA)}return[t.join(";"),s]},kA=n=>{if(void 0!==n&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},FA=n=>{if(!(n=>{try{new new Proxy(n,NA)}catch{return!1}return!0})(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===n.prototype||"object"!=typeof n.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},Is=(n,e)=>{const t=n.get(e);if(void 0===t)throw new Error("A value with the given key could not be found.");return t},id=(n,e)=>{const t=Array.from(n).filter(e);if(t.length>1)throw Error("More than one element was found.");if(0===t.length)throw Error("No element was found.");const[s]=t;return n.delete(s),s},PA=(n,e,t,s)=>{const r=Is(n,e),i=id(r,o=>o[0]===t&&o[1]===s);return 0===r.size&&n.delete(e),i},du=n=>Is(IA,n),Da=n=>{if(wa.has(n))throw new Error("The AudioNode is already stored.");wa.add(n),du(n).forEach(e=>e(!0))},VA=n=>"port"in n,fu=n=>{if(!wa.has(n))throw new Error("The AudioNode is not stored.");wa.delete(n),du(n).forEach(e=>e(!1))},w_=(n,e)=>{!VA(n)&&e.every(t=>0===t.size)&&fu(n)},OH={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8};function LA(n,e,t,s,r,i,o){try{var a=n[i](o),c=a.value}catch(u){return void t(u)}a.done?e(c):Promise.resolve(c).then(s,r)}function Re(n){return function(){var e=this,t=arguments;return new Promise(function(s,r){var i=n.apply(e,t);function o(c){LA(i,s,r,o,a,"next",c)}function a(c){LA(i,s,r,o,a,"throw",c)}o(void 0)})}}const fn=(n,e)=>n.context===e,od=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},er=()=>new DOMException("","IndexSizeError"),D_=n=>{var e;n.getChannelData=(e=n.getChannelData,t=>{try{return e.call(n,t)}catch(s){throw 12===s.code?er():s}})},FH={numberOfChannels:1},In=-34028234663852886e22,Cn=-In,Mr=n=>wa.has(n),VH={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},bn=n=>Is(xA,n),pu=n=>Is(MA,n),C_=(n,e)=>{const{activeInputs:t}=bn(n);t.forEach(r=>r.forEach(([i])=>{e.includes(n)||C_(i,[...e,n])}));const s=(n=>"playbackRate"in n)(n)?[n.playbackRate]:VA(n)?Array.from(n.parameters.values()):(n=>"frequency"in n&&"gain"in n)(n)?[n.Q,n.detune,n.frequency,n.gain]:(n=>"offset"in n)(n)?[n.offset]:(n=>!("frequency"in n)&&"gain"in n)(n)?[n.gain]:(n=>"detune"in n&&"frequency"in n)(n)?[n.detune,n.frequency]:(n=>"pan"in n)(n)?[n.pan]:[];for(const r of s){const i=pu(r);void 0!==i&&i.activeInputs.forEach(([o])=>C_(o,e))}Mr(n)&&fu(n)},ad=n=>{C_(n.destination,[])},cd=n=>"context"in n,gu=n=>cd(n[0]),Ji=(n,e,t,s)=>{for(const r of n)if(t(r)){if(s)return!1;throw Error("The set contains at least one similar element.")}return n.add(e),!0},BA=(n,e,[t,s],r)=>{Ji(n,[e,t,s],i=>i[0]===e&&i[1]===t,r)},$A=(n,[e,t,s],r)=>{const i=n.get(e);void 0===i?n.set(e,new Set([[t,s]])):Ji(i,[t,s],o=>o[0]===t,r)},Ca=n=>"inputs"in n,ud=(n,e,t,s)=>{if(Ca(e)){const r=e.inputs[s];return n.connect(r,t,0),[r,t,0]}return n.connect(e,t,s),[e,t,s]},HA=(n,e,t)=>{for(const s of n)if(s[0]===e&&s[1]===t)return n.delete(s),s;return null},UA=(n,e)=>{if(!du(n).delete(e))throw new Error("Missing the expected event listener.")},qA=(n,e,t)=>{const s=Is(n,e),r=id(s,i=>i[0]===t);return 0===s.size&&n.delete(e),r},ld=(n,e,t,s)=>{Ca(e)?n.disconnect(e.inputs[s],t,0):n.disconnect(e,t,s)},it=n=>Is(g_,n),mu=n=>Is(m_,n),eo=n=>__.has(n),hd=n=>!wa.has(n),GA=(n,e)=>new Promise(t=>{if(null!==e)t(!0);else{const s=n.createScriptProcessor(256,1,1),r=n.createGain(),i=n.createBuffer(1,2,44100),o=i.getChannelData(0);o[0]=1,o[1]=1;const a=n.createBufferSource();a.buffer=i,a.loop=!0,a.connect(s).connect(n.destination),a.connect(r),a.disconnect(r),s.onaudioprocess=c=>{const u=c.inputBuffer.getChannelData(0);Array.prototype.some.call(u,l=>1===l)?t(!0):t(!1),a.stop(),s.onaudioprocess=null,a.disconnect(s),s.disconnect(n.destination)},a.start()}}),b_=(n,e)=>{const t=new Map;for(const s of n)for(const r of s){const i=t.get(r);t.set(r,void 0===i?1:i+1)}t.forEach((s,r)=>e(r,s))},dd=n=>"context"in n,S_=(n,e,t,s,r)=>{const[i,o]=((n,e,t,s)=>{const{activeInputs:r,passiveInputs:i}=bn(e),o=HA(r[s],n,t);return null===o?[PA(i,n,t,s)[2],!1]:[o[2],!0]})(n,t,s,r);if(null!==i&&(UA(n,i),o&&!e&&!eo(n)&&ld(it(n),it(t),s,r)),Mr(t)){const{activeInputs:a}=bn(t);w_(t,a)}},T_=(n,e,t,s)=>{const[r,i]=((n,e,t)=>{const{activeInputs:s,passiveInputs:r}=pu(e),i=HA(s,n,t);return null===i?[qA(r,n,t)[1],!1]:[i[2],!0]})(n,t,s);null!==r&&(UA(n,r),i&&!e&&!eo(n)&&it(n).disconnect(mu(t),s))};class WA{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((s,r)=>e.call(t,s,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}const aU={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}};function fd(n,e,t,s,r){if("function"==typeof n.copyFromChannel)0===e[t].byteLength&&(e[t]=new Float32Array(128)),n.copyFromChannel(e[t],s,r);else{const i=n.getChannelData(s);if(0===e[t].byteLength)e[t]=i.slice(r,r+128);else{const o=new Float32Array(i.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(o)}}}const zA=(n,e,t,s,r)=>{"function"==typeof n.copyToChannel?0!==e[t].byteLength&&n.copyToChannel(e[t],s,r):0!==e[t].byteLength&&n.getChannelData(s).set(e[t],r)},pd=(n,e)=>{const t=[];for(let s=0;s<n;s+=1){const r=[],i="number"==typeof e?e:e[s];for(let o=0;o<i;o+=1)r.push(new Float32Array(128));t.push(r)}return t},lU=function(){var n=Re(function*(e,t,s,r,i,o,a){const c=null===t?128*Math.ceil(e.context.length/128):t.length,u=r.channelCount*r.numberOfInputs,l=i.reduce((m,w)=>m+w,0),h=0===l?null:s.createBuffer(l,c,s.sampleRate);if(void 0===o)throw new Error("Missing the processor constructor.");const d=bn(e),f=yield((n,e)=>{const t=Is(v_,n),s=it(e);return Is(t,s)})(s,e),p=pd(r.numberOfInputs,r.channelCount),g=pd(r.numberOfOutputs,i),_=Array.from(e.parameters.keys()).reduce((m,w)=>({...m,[w]:new Float32Array(128)}),{});for(let m=0;m<c;m+=128){if(r.numberOfInputs>0&&null!==t)for(let w=0;w<r.numberOfInputs;w+=1)for(let v=0;v<r.channelCount;v+=1)fd(t,p[w],v,v,m);void 0!==o.parameterDescriptors&&null!==t&&o.parameterDescriptors.forEach(({name:w},v)=>{fd(t,_,w,u+v,m)});for(let w=0;w<r.numberOfInputs;w+=1)for(let v=0;v<i[w];v+=1)0===g[w][v].byteLength&&(g[w][v]=new Float32Array(128));try{const w=p.map((D,y)=>0===d.activeInputs[y].size?[]:D),v=a(m/s.sampleRate,s.sampleRate,()=>f.process(w,g,_));if(null!==h)for(let D=0,y=0;D<r.numberOfOutputs;D+=1){for(let C=0;C<i[D];C+=1)zA(h,g[D],C,y+C,m);y+=i[D]}if(!v)break}catch(w){e.dispatchEvent(new ErrorEvent("processorerror",{colno:w.colno,filename:w.filename,lineno:w.lineno,message:w.message}));break}}return h});return function(t,s,r,i,o,a,c){return n.apply(this,arguments)}}(),fU={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},_U={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},wU={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},EU={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},IU={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},QA=n=>{const{port1:e,port2:t}=new MessageChannel;return new Promise(s=>{const r=()=>{t.onmessage=null,e.close(),t.close(),s()};t.onmessage=()=>r();try{e.postMessage(n,[n])}finally{r()}})},VU={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},gd=(n,e,t)=>{const s=e[t];if(void 0===s)throw n();return s},GU={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},JU={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},Ft=()=>new DOMException("","InvalidStateError"),md=()=>new DOMException("","InvalidAccessError"),hq={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},ZA=(n,e,t,s,r,i,o,a,c,u,l)=>{const h=u.length;let d=a;for(let f=0;f<h;f+=1){let p=t[0]*u[f];for(let g=1;g<r;g+=1){const _=d-g&c-1;p+=t[g]*i[_],p-=n[g]*o[_]}for(let g=r;g<s;g+=1)p+=t[g]*i[d-g&c-1];for(let g=r;g<e;g+=1)p-=n[g]*o[d-g&c-1];i[d]=u[f],o[d]=p,d=d+1&c-1,l[f]=p}return d},Aq={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},to=n=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const t=n.decodeAudioData(e.buffer,()=>{});return void 0!==t&&(t.catch(()=>{}),!0)}catch{}return!1},lt=(n,e,t)=>{const s=e[t];void 0!==s&&s!==n[t]&&(n[t]=s)},Ut=(n,e)=>{lt(n,e,"channelCount"),lt(n,e,"channelCountMode"),lt(n,e,"channelInterpretation")},YA=n=>"function"==typeof n.getFloatTimeDomainData,Ct=(n,e,t)=>{const s=e[t];void 0!==s&&s!==n[t].value&&(n[t].value=s)},E_=n=>{var e;n.start=(e=n.start,(t=0,s=0,r)=>{if("number"==typeof r&&r<0||s<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(n,t,s,r)})},A_=n=>{var e;n.stop=(e=n.stop,(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(n,t)})},XA=(n,e)=>null===n?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*e))))),zq=function(){var n=Re(function*(e,t){const s=yield(n=>new Promise((e,t)=>{const{port1:s,port2:r}=new MessageChannel;s.onmessage=({data:i})=>{s.close(),r.close(),e(i)},s.onmessageerror=({data:i})=>{s.close(),r.close(),t(i)},r.postMessage(n)}))(t);return new e(s)});return function(t,s){return n.apply(this,arguments)}}(),KA=(n,e)=>{const t=n.createBiquadFilter();return Ut(t,e),Ct(t,e,"Q"),Ct(t,e,"detune"),Ct(t,e,"frequency"),Ct(t,e,"gain"),lt(t,e,"type"),t},_u=(n,e)=>{const t=n.createChannelSplitter(e.numberOfOutputs);return Ut(t,e),(n=>{const e=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw Ft()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:t=>{if("explicit"!==t)throw Ft()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:t=>{if("discrete"!==t)throw Ft()}})})(t),t},ba=(n,e)=>(n.connect=e.connect.bind(e),n.disconnect=e.disconnect.bind(e),n),JA=(n,e)=>{const t=n.createDelay(e.maxDelayTime);return Ut(t,e),Ct(t,e,"delayTime"),t},Nn=(n,e)=>{const t=n.createGain();return Ut(t,e),Ct(t,e,"gain"),t};function s3(n,e){const t=e[0]*e[0]+e[1]*e[1];return[(n[0]*e[0]+n[1]*e[1])/t,(n[1]*e[0]-n[0]*e[1])/t]}function r3(n,e){return[n[0]*e[0]-n[1]*e[1],n[0]*e[1]+n[1]*e[0]]}function ex(n,e){let t=[0,0];for(let s=n.length-1;s>=0;s-=1)t=r3(t,e),t[0]+=n[s];return t}const yu=(n,e,t,s)=>n.createScriptProcessor(e,t,s),pn=()=>new DOMException("","NotSupportedError"),v3={numberOfChannels:1},D3={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},S3={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},A3={disableNormalization:!1},P3={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},tx=()=>new DOMException("","UnknownError"),H3={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},nx=(n,e,t)=>void 0===n.copyFromChannel?n.getChannelData(t)[0]:(n.copyFromChannel(e,t),e[0]),sx=n=>{if(null===n)return!1;const e=n.length;return e%2!=0?0!==n[Math.floor(e/2)]:n[e/2-1]+n[e/2]!==0},vu=(n,e,t,s)=>{let r=n;for(;!r.hasOwnProperty(e);)r=Object.getPrototypeOf(r);const{get:i,set:o}=Object.getOwnPropertyDescriptor(r,e);Object.defineProperty(n,e,{get:t(i),set:s(o)})},rx=(n,e,t)=>{try{n.setValueAtTime(e,t)}catch(s){if(9!==s.code)throw s;rx(n,e,t+1e-7)}},x_=n=>{const e=n.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1},ix=n=>{const e=n.createBuffer(1,1,44100),t=n.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}},M_=n=>{const e=n.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1},ox=(n,e)=>{const t=e.createGain();n.connect(t);const s=(r=n.disconnect,()=>{r.call(n,t),n.removeEventListener("ended",s)});var r;n.addEventListener("ended",s),ba(n,t),n.stop=(r=>{let i=!1;return(o=0)=>{if(i)try{r.call(n,o)}catch{t.gain.setValueAtTime(0,o)}else r.call(n,o),i=!0}})(n.stop)},Sa=(n,e)=>t=>{const s={value:n};return Object.defineProperties(t,{currentTarget:s,target:s}),"function"==typeof e?e.call(n,t):e.handleEvent.call(n,t)},rG=(n=Ji,(e,t,[s,r,i],o)=>{n(e[r],[t,s,i],a=>a[0]===t&&a[1]===s,o)}),iG=(n=>(e,t,[s,r,i],o)=>{const a=e.get(s);void 0===a?e.set(s,new Set([[r,t,i]])):n(a,[r,t,i],c=>c[0]===r&&c[1]===t,o)})(Ji),oG=(n=>(e,t,s,r)=>n(e[r],i=>i[0]===t&&i[1]===s))(id),ax=new WeakMap,aG=(n=>e=>{var t;return null!==(t=n.get(e))&&void 0!==t?t:0})(ax),Wn=((n,e)=>(t,s)=>{const r=e.get(t);if(void 0!==r)return r;const i=n.get(t);if(void 0!==i)return i;try{const o=s();return o instanceof Promise?(n.set(t,o),o.catch(()=>!1).then(a=>(n.delete(t),e.set(t,a),a))):(e.set(t,o),o)}catch{return e.set(t,!1),!1}})(new Map,new WeakMap),Ns=typeof window>"u"?null:window,cx=((n,e)=>(t,s)=>{const r=t.createAnalyser();if(Ut(r,s),!(s.maxDecibels>s.minDecibels))throw e();return lt(r,s,"fftSize"),lt(r,s,"maxDecibels"),lt(r,s,"minDecibels"),lt(r,s,"smoothingTimeConstant"),n(YA,()=>YA(r))||(n=>{n.getFloatTimeDomainData=e=>{const t=new Uint8Array(e.length);n.getByteTimeDomainData(t);const s=Math.max(t.length,n.fftSize);for(let r=0;r<s;r+=1)e[r]=.0078125*(t[r]-128);return e}})(r),r})(Wn,er),I_=(n=>e=>{const t=n(e);if(null===t.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer})(bn),nn=((n,e,t)=>function(){var s=Re(function*(r,i,o){const a=n(r);yield Promise.all(a.activeInputs.map((c,u)=>Array.from(c).map(function(){var l=Re(function*([h,d]){const p=yield e(h).render(h,i),g=r.context.destination;!t(h)&&(r!==g||!t(r))&&p.connect(o,d,u)});return function(h){return l.apply(this,arguments)}}())).reduce((c,u)=>[...c,...u],[]))});return function(r,i,o){return s.apply(this,arguments)}}())(bn,I_,eo),cG=((n,e,t)=>()=>{const s=new WeakMap,r=function(){var i=Re(function*(o,a){let c=e(o);return fn(c,a)||(c=n(a,{channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,fftSize:c.fftSize,maxDecibels:c.maxDecibels,minDecibels:c.minDecibels,smoothingTimeConstant:c.smoothingTimeConstant})),s.set(a,c),yield t(o,a,c),c});return function(a,c){return i.apply(this,arguments)}}();return{render(i,o){const a=s.get(o);return void 0!==a?Promise.resolve(a):r(i,o)}}})(cx,it,nn),st=(n=>e=>{const t=n.get(e);if(void 0===t)throw Ft();return t})(rd),Qt=(n=>null===n?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null)(Ns),ze=(n=>e=>null!==n&&e instanceof n)(Qt),ux=new WeakMap,lx=(n=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,s,r){if(null!==s){let i=this._listeners.get(s);void 0===i&&(i=n(this,s),"function"==typeof s&&this._listeners.set(s,i)),this._nativeEventTarget.addEventListener(t,i,r)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,s,r){const i=null===s?void 0:this._listeners.get(s);this._nativeEventTarget.removeEventListener(t,void 0===i?null:i,r)}})(Sa),Ir=(n=>null===n?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null)(Ns),N_=(n=>e=>null!==n&&e instanceof n)(Ir),O_=(n=>e=>null!==n&&"function"==typeof n.AudioNode&&e instanceof n.AudioNode)(Ns),hx=(n=>e=>null!==n&&"function"==typeof n.AudioParam&&e instanceof n.AudioParam)(Ns),Ta=(n=>null===n?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null)(Ns),xt=((n,e,t,s,r,i,o,a,c,u,l,h,d,f,p,g)=>class extends u{constructor(m,w,v,D){super(v),this._context=m,this._nativeAudioNode=v;const y=l(m);h(y)&&!0!==t(GA,()=>GA(y,g))&&(n=>{const e=new Map;var t;n.connect=(t=n.connect.bind(n),(s,r=0,i=0)=>{const o=dd(s)?t(s,r,i):t(s,r),a=e.get(s);return void 0===a?e.set(s,[{input:i,output:r}]):a.every(c=>c.input!==i||c.output!==r)&&a.push({input:i,output:r}),o}),n.disconnect=(t=>(s,r,i)=>{if(t.apply(n),void 0===s)e.clear();else if("number"==typeof s)for(const[o,a]of e){const c=a.filter(u=>u.output!==s);0===c.length?e.delete(o):e.set(o,c)}else if(e.has(s))if(void 0===r)e.delete(s);else{const o=e.get(s);if(void 0!==o){const a=o.filter(c=>c.output!==r&&(c.input!==i||void 0===i));0===a.length?e.delete(s):e.set(s,a)}}for(const[o,a]of e)a.forEach(c=>{dd(o)?n.connect(o,c.output,c.input):n.connect(o,c.output)})})(n.disconnect)})(v),g_.set(this,v),IA.set(this,new Set),"closed"!==m.state&&w&&Da(this),n(this,D,v)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(m){this._nativeAudioNode.channelCount=m}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(m){this._nativeAudioNode.channelCountMode=m}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(m){this._nativeAudioNode.channelInterpretation=m}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(m,w=0,v=0){if(w<0||w>=this._nativeAudioNode.numberOfOutputs)throw r();const D=l(this._context),y=p(D);if(d(m)||f(m))throw i();if(cd(m)){const S=it(m);try{const x=ud(this._nativeAudioNode,S,w,v),R=hd(this);(y||R)&&this._nativeAudioNode.disconnect(...x),"closed"!==this.context.state&&!R&&hd(m)&&Da(m)}catch(x){throw 12===x.code?i():x}if(e(this,m,w,v,y)){const x=c([this],m);b_(x,s(y))}return m}const C=mu(m);if("playbackRate"===C.name&&1024===C.maxValue)throw o();try{this._nativeAudioNode.connect(C,w),(y||hd(this))&&this._nativeAudioNode.disconnect(C,w)}catch(S){throw 12===S.code?i():S}if(((n,e,t,s)=>{const{activeInputs:r,passiveInputs:i}=pu(e),{outputs:o}=bn(n),a=du(n),c=u=>{const l=it(n),h=mu(e);if(u){const d=qA(i,n,t);BA(r,n,d,!1),!s&&!eo(n)&&l.connect(h,t)}else{const d=((n,e,t)=>id(n,s=>s[0]===e&&s[1]===t))(r,n,t);$A(i,d,!1),!s&&!eo(n)&&l.disconnect(h,t)}};return!!Ji(o,[e,t],u=>u[0]===e&&u[1]===t,!0)&&(a.add(c),Mr(n)?BA(r,n,[t,c],!0):$A(i,[n,t,c],!0),!0)})(this,m,w,y)){const S=c([this],m);b_(S,s(y))}}disconnect(m,w,v){let D;const y=l(this._context),C=p(y);if(void 0===m)D=((n,e)=>{const t=bn(n),s=[];for(const r of t.outputs)gu(r)?S_(n,e,...r):T_(n,e,...r),s.push(r[0]);return t.outputs.clear(),s})(this,C);else if("number"==typeof m){if(m<0||m>=this.numberOfOutputs)throw r();D=((n,e,t)=>{const s=bn(n),r=[];for(const i of s.outputs)i[1]===t&&(gu(i)?S_(n,e,...i):T_(n,e,...i),r.push(i[0]),s.outputs.delete(i));return r})(this,C,m)}else{if(void 0!==w&&(w<0||w>=this.numberOfOutputs)||cd(m)&&void 0!==v&&(v<0||v>=m.numberOfInputs))throw r();if(D=((n,e,t,s,r)=>{const i=bn(n);return Array.from(i.outputs).filter(o=>!(o[0]!==t||void 0!==s&&o[1]!==s||void 0!==r&&o[2]!==r)).map(o=>(gu(o)?S_(n,e,...o):T_(n,e,...o),i.outputs.delete(o),o[0]))})(this,C,m,w,v),0===D.length)throw i()}for(const b of D){const S=c([this],b);b_(S,a)}}})((n=>(e,t,s)=>{const r=[];for(let i=0;i<s.numberOfInputs;i+=1)r.push(new Set);n.set(e,{activeInputs:r,outputs:new Set,passiveInputs:new WeakMap,renderer:t})})(xA),((n,e,t,s,r,i,o,a,c,u,l,h,d)=>{const f=new WeakMap;return(p,g,_,m,w)=>{const{activeInputs:v,passiveInputs:D}=i(g),{outputs:y}=i(p),C=a(p),b=S=>{const M=c(g),x=c(p);if(S){const R=PA(D,p,_,m);n(v,p,R,!1),!w&&!h(p)&&t(x,M,_,m),d(g)&&Da(g)}else{const R=s(v,p,_,m);e(D,m,R,!1),!w&&!h(p)&&r(x,M,_,m);const T=o(g);if(0===T)l(g)&&w_(g,v);else{const P=f.get(g);void 0!==P&&clearTimeout(P),f.set(g,setTimeout(()=>{l(g)&&w_(g,v)},1e3*T))}}};return!!u(y,[g,_,m],S=>S[0]===g&&S[1]===_&&S[2]===m,!0)&&(C.add(b),l(p)?n(v,p,[_,m,b],!0):e(D,m,[p,_,b],!0),!0)}})(rG,iG,ud,oG,ld,bn,aG,du,it,Ji,Mr,eo,hd),Wn,((n,e,t,s,r,i)=>o=>(a,c)=>{const u=n.get(a);if(void 0===u){if(!o&&i(a)){const l=s(a),{outputs:h}=t(a);for(const d of h)if(gu(d)){const f=s(d[0]);e(l,f,d[1],d[2])}else{const f=r(d[0]);l.disconnect(f,d[1])}}n.set(a,c)}else n.set(a,u+c)})(__,ld,bn,it,mu,Mr),er,md,pn,((n,e,t,s,r,i,o,a)=>(c,u)=>{const l=e.get(c);if(void 0===l)throw new Error("Missing the expected cycle count.");const h=i(c.context),d=a(h);if(l===u){if(e.delete(c),!d&&o(c)){const f=s(c),{outputs:p}=t(c);for(const g of p)if(gu(g)){const _=s(g[0]);n(f,_,g[1],g[2])}else{const _=r(g[0]);f.connect(_,g[1])}}}else e.set(c,l-u)})(ud,__,bn,it,mu,st,Mr,ze),((n,e,t)=>function s(r,i){const o=cd(i)?i:t(n,i);if((n=>"delayTime"in n)(o))return[];if(r[0]===o)return[r];if(r.includes(o))return[];const{outputs:a}=e(o);return Array.from(a).map(c=>s([...r,o],c[0])).reduce((c,u)=>c.concat(u),[])})(ux,bn,Is),lx,st,N_,O_,hx,ze,Ta),uG=((n,e,t,s,r,i)=>class extends n{constructor(a,c){const u=r(a),l={...OH,...c},h=s(u,l);super(a,!1,h,i(u)?e():null),this._nativeAnalyserNode=h}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){const c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){const c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}})(xt,cG,er,cx,st,ze),R_=new WeakSet,dx=(n=>null===n?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null)(Ns),fx=(n=>e=>(n[0]=e,n[0]))(new Uint32Array(1)),k_=((n,e)=>t=>{t.copyFromChannel=(s,r,i=0)=>{const o=n(i),a=n(r);if(a>=t.numberOfChannels)throw e();const c=t.length,u=t.getChannelData(a),l=s.length;for(let h=o<0?-o:0;h+o<c&&h<l;h+=1)s[h]=u[h+o]},t.copyToChannel=(s,r,i=0)=>{const o=n(i),a=n(r);if(a>=t.numberOfChannels)throw e();const c=t.length,u=t.getChannelData(a),l=s.length;for(let h=o<0?-o:0;h+o<c&&h<l;h+=1)u[h+o]=s[h]}})(fx,er),F_=(n=>e=>{var t;e.copyFromChannel=(t=e.copyFromChannel,(s,r,i=0)=>{const o=n(i),a=n(r);if(o<e.length)return t.call(e,s,a,o)}),e.copyToChannel=(t=>(s,r,i=0)=>{const o=n(i),a=n(r);if(o<e.length)return t.call(e,s,a,o)})(e.copyToChannel)})(fx),lG=((n,e,t,s,r,i,o,a)=>{let c=null;return class oM{constructor(l){if(null===r)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:h,numberOfChannels:d,sampleRate:f}={...FH,...l};null===c&&(c=new r(1,1,44100));const p=null!==s&&e(i,i)?new s({length:h,numberOfChannels:d,sampleRate:f}):c.createBuffer(d,h,f);if(0===p.numberOfChannels)throw t();return"function"!=typeof p.copyFromChannel?(o(p),D_(p)):e(od,()=>od(p))||a(p),n.add(p),p}static[Symbol.hasInstance](l){return null!==l&&"object"==typeof l&&Object.getPrototypeOf(l)===oM.prototype||n.has(l)}}})(R_,Wn,pn,dx,Qt,(n=>()=>{if(null===n)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0})(dx),k_,F_),_d=(n=>(e,t)=>{const s=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(s).connect(e.destination);const r=()=>{t.removeEventListener("ended",r),t.disconnect(s),s.disconnect()};t.addEventListener("ended",r)})(Nn),px=((n,e,t)=>function(){var s=Re(function*(r,i,o){const a=e(r);yield Promise.all(Array.from(a.activeInputs).map(function(){var c=Re(function*([u,l]){const d=yield n(u).render(u,i);t(u)||d.connect(o,l)});return function(u){return c.apply(this,arguments)}}()))});return function(r,i,o){return s.apply(this,arguments)}}())(I_,pu,eo),tr=(n=>(e,t,s)=>n(t,e,s))(px),Ea=((n,e,t,s,r,i,o,a,c,u,l)=>(h,d)=>{const f=h.createBufferSource();return Ut(f,d),Ct(f,d,"playbackRate"),lt(f,d,"buffer"),lt(f,d,"loop"),lt(f,d,"loopEnd"),lt(f,d,"loopStart"),e(t,()=>t(h))||(n=>{n.start=(e=>{let t=!1;return(s=0,r=0,i)=>{if(t)throw Ft();e.call(n,s,r,i),t=!0}})(n.start)})(f),e(s,()=>s(h))||(n=>{var e;n.start=(e=n.start,(t=0,s=0,r)=>{const i=n.buffer,o=null===i?s:Math.min(i.duration,s);null!==i&&o>i.duration-.5/n.context.sampleRate?e.call(n,t,0,0):e.call(n,t,o,r)})})(f),e(r,()=>r(h))||u(f,h),e(i,()=>i(h))||E_(f),e(o,()=>o(h))||l(f,h),e(a,()=>a(h))||A_(f),n(h,f),f})(_d,Wn,n=>{const e=n.createBufferSource();e.start();try{e.start()}catch{return!0}return!1},n=>{const e=n.createBufferSource(),t=n.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0},n=>{const e=n.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0},x_,ix,M_,0,(n=>(e,t)=>{const s=t.createBuffer(1,1,44100);null===e.buffer&&(e.buffer=s),n(e,"buffer",r=>()=>{const i=r.call(e);return i===s?null:i},r=>i=>r.call(e,null===i?s:i))})(vu),ox),nr=((n,e)=>(t,s,r)=>(n(s).replay(r),e(s,t,r)))((n=>e=>{const t=n(e);if(null===t.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer})(pu),px),hG=((n,e,t,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=function(){var u=Re(function*(l,h){let d=t(l);const f=fn(d,h);return f||(d=e(h,{buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,loop:d.loop,loopEnd:d.loopEnd,loopStart:d.loopStart,playbackRate:d.playbackRate.value}),null!==o&&d.start(...o),null!==a&&d.stop(a)),i.set(h,d),f?yield n(h,l.playbackRate,d.playbackRate):yield s(h,l.playbackRate,d.playbackRate),yield r(l,h,d),d});return function(h,d){return u.apply(this,arguments)}}();return{set start(u){o=u},set stop(u){a=u},render(u,l){const h=i.get(l);return void 0!==h?Promise.resolve(h):c(u,l)}}})(tr,Ea,it,nr,nn),Os=((n,e,t,s,r,i,o,a,c,u,l,h,d)=>(f,p,g,_=null,m=null)=>{const w=new li.AutomationEventList(g.defaultValue),v=p?(n=>({replay(e){for(const t of n)if("exponentialRampToValue"===t.type){const{endTime:s,value:r}=t;e.exponentialRampToValueAtTime(r,s)}else if("linearRampToValue"===t.type){const{endTime:s,value:r}=t;e.linearRampToValueAtTime(r,s)}else if("setTarget"===t.type){const{startTime:s,target:r,timeConstant:i}=t;e.setTargetAtTime(r,s,i)}else if("setValue"===t.type){const{startTime:s,value:r}=t;e.setValueAtTime(r,s)}else{if("setValueCurve"!==t.type)throw new Error("Can't apply an unknown automation.");{const{duration:s,startTime:r,values:i}=t;e.setValueCurveAtTime(i,r,s)}}}}))(w):null,D={get defaultValue(){return g.defaultValue},get maxValue(){return null===_?g.maxValue:_},get minValue(){return null===m?g.minValue:m},get value(){return g.value},set value(y){g.value=y,D.setValueAtTime(y,f.context.currentTime)},cancelAndHoldAtTime(y){if("function"==typeof g.cancelAndHoldAtTime)null===v&&w.flush(f.context.currentTime),w.add(r(y)),g.cancelAndHoldAtTime(y);else{const C=Array.from(w).pop();null===v&&w.flush(f.context.currentTime),w.add(r(y));const b=Array.from(w).pop();g.cancelScheduledValues(y),C!==b&&void 0!==b&&("exponentialRampToValue"===b.type?g.exponentialRampToValueAtTime(b.value,b.endTime):"linearRampToValue"===b.type?g.linearRampToValueAtTime(b.value,b.endTime):"setValue"===b.type?g.setValueAtTime(b.value,b.startTime):"setValueCurve"===b.type&&g.setValueCurveAtTime(b.values,b.startTime,b.duration))}return D},cancelScheduledValues:y=>(null===v&&w.flush(f.context.currentTime),w.add(i(y)),g.cancelScheduledValues(y),D),exponentialRampToValueAtTime(y,C){if(0===y)throw new RangeError;if(!Number.isFinite(C)||C<0)throw new RangeError;return null===v&&w.flush(f.context.currentTime),w.add(o(y,C)),g.exponentialRampToValueAtTime(y,C),D},linearRampToValueAtTime:(y,C)=>(null===v&&w.flush(f.context.currentTime),w.add(a(y,C)),g.linearRampToValueAtTime(y,C),D),setTargetAtTime:(y,C,b)=>(null===v&&w.flush(f.context.currentTime),w.add(c(y,C,b)),g.setTargetAtTime(y,C,b),D),setValueAtTime:(y,C)=>(null===v&&w.flush(f.context.currentTime),w.add(u(y,C)),g.setValueAtTime(y,C),D),setValueCurveAtTime(y,C,b){const S=y instanceof Float32Array?y:new Float32Array(y);if(null!==h&&"webkitAudioContext"===h.name){const M=C+b,x=f.context.sampleRate,R=Math.ceil(C*x),T=Math.floor(M*x),P=T-R,B=new Float32Array(P);for(let L=0;L<P;L+=1){const z=(S.length-1)/b*((R+L)/x-C),ue=Math.floor(z),se=Math.ceil(z);B[L]=ue===se?S[ue]:(1-(z-ue))*S[ue]+(1-(se-z))*S[se]}null===v&&w.flush(f.context.currentTime),w.add(l(B,C,b)),g.setValueCurveAtTime(B,C,b);const G=T/x;G<M&&d(D,B[B.length-1],G),d(D,S[S.length-1],M)}else null===v&&w.flush(f.context.currentTime),w.add(l(S,C,b)),g.setValueCurveAtTime(S,C,b);return D}};return t.set(D,g),e.set(D,f),n(D,v),D})((n=>(e,t)=>{n.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})})(MA),ux,m_,0,li.createCancelAndHoldAutomationEvent,li.createCancelScheduledValuesAutomationEvent,li.createExponentialRampToValueAutomationEvent,li.createLinearRampToValueAutomationEvent,li.createSetTargetAutomationEvent,li.createSetValueAutomationEvent,li.createSetValueCurveAutomationEvent,Ir,rx),dG=((n,e,t,s,r,i,o,a)=>class extends n{constructor(u,l){const h=i(u),d={...VH,...l},f=r(h,d),p=o(h),g=p?e():null;super(u,!1,f,g),this._audioBufferSourceNodeRenderer=g,this._isBufferNullified=!1,this._isBufferSet=null!==d.buffer,this._nativeAudioBufferSourceNode=f,this._onended=null,this._playbackRate=t(this,p,f.playbackRate,Cn,In)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(u){if(this._nativeAudioBufferSourceNode.buffer=u,null!==u){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(u){this._nativeAudioBufferSourceNode.loop=u}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(u){this._nativeAudioBufferSourceNode.loopEnd=u}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(u){this._nativeAudioBufferSourceNode.loopStart=u}get onended(){return this._onended}set onended(u){const l="function"==typeof u?a(this,u):null;this._nativeAudioBufferSourceNode.onended=l;const h=this._nativeAudioBufferSourceNode.onended;this._onended=null!==h&&h===l?u:h}get playbackRate(){return this._playbackRate}start(u=0,l=0,h){if(this._nativeAudioBufferSourceNode.start(u,l,h),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.start=void 0===h?[u,l]:[u,l,h]),"closed"!==this.context.state){Da(this);const d=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",d),Mr(this)&&fu(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",d)}}stop(u=0){this._nativeAudioBufferSourceNode.stop(u),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=u)}})(xt,hG,Os,Ft,Ea,st,ze,Sa),fG=((n,e,t,s,r,i,o,a)=>class extends n{constructor(u,l){const h=i(u),d=o(h),f=r(h,l,d);super(u,!1,f,d?e(a):null),this._isNodeOfNativeOfflineAudioContext=d,this._nativeAudioDestinationNode=f}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(u){if(this._isNodeOfNativeOfflineAudioContext)throw s();if(u>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=u}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(u){if(this._isNodeOfNativeOfflineAudioContext)throw s();this._nativeAudioDestinationNode.channelCountMode=u}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}})(xt,n=>{const e=new WeakMap,t=function(){var s=Re(function*(r,i){const o=i.destination;return e.set(i,o),yield n(r,i,o),o});return function(i,o){return s.apply(this,arguments)}}();return{render(s,r){const i=e.get(r);return void 0!==i?Promise.resolve(i):t(s,r)}}},er,Ft,((n,e)=>(t,s,r)=>{const i=t.destination;if(i.channelCount!==s)try{i.channelCount=s}catch{}r&&"explicit"!==i.channelCountMode&&(i.channelCountMode="explicit"),0===i.maxChannelCount&&Object.defineProperty(i,"maxChannelCount",{value:s});const o=n(t,{channelCount:s,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(o,"channelCount",a=>()=>a.call(o),a=>c=>{a.call(o,c);try{i.channelCount=c}catch(u){if(c>i.maxChannelCount)throw u}}),e(o,"channelCountMode",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelCountMode=c}),e(o,"channelInterpretation",a=>()=>a.call(o),a=>c=>{a.call(o,c),i.channelInterpretation=c}),Object.defineProperty(o,"maxChannelCount",{get:()=>i.maxChannelCount}),o.connect(i),o})(Nn,vu),st,ze,nn),pG=((n,e,t,s,r)=>()=>{const i=new WeakMap,o=function(){var a=Re(function*(c,u){let l=t(c);const h=fn(l,u);return h||(l=e(u,{Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type})),i.set(u,l),h?(yield n(u,c.Q,l.Q),yield n(u,c.detune,l.detune),yield n(u,c.frequency,l.frequency),yield n(u,c.gain,l.gain)):(yield s(u,c.Q,l.Q),yield s(u,c.detune,l.detune),yield s(u,c.frequency,l.frequency),yield s(u,c.gain,l.gain)),yield r(c,u,l),l});return function(u,l){return a.apply(this,arguments)}}();return{render(a,c){const u=i.get(c);return void 0!==u?Promise.resolve(u):o(a,c)}}})(tr,KA,it,nr,nn),no=(n=>(e,t)=>n.set(e,t))(ax),gG=((n,e,t,s,r,i,o,a)=>class extends n{constructor(u,l){const h=i(u),d={...fU,...l},f=r(h,d),p=o(h);super(u,!1,f,p?t():null),this._Q=e(this,p,f.Q,Cn,In),this._detune=e(this,p,f.detune,1200*Math.log2(Cn),-1200*Math.log2(Cn)),this._frequency=e(this,p,f.frequency,u.sampleRate/2,0),this._gain=e(this,p,f.gain,40*Math.log10(Cn),In),this._nativeBiquadFilterNode=f,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(u){this._nativeBiquadFilterNode.type=u}getFrequencyResponse(u,l,h){try{this._nativeBiquadFilterNode.getFrequencyResponse(u,l,h)}catch(d){throw 11===d.code?s():d}if(u.length!==l.length||l.length!==h.length)throw s()}})(xt,Os,pG,md,KA,st,ze,no),hi=((n,e)=>(t,s,r)=>{const i=new Set;return t.connect=(o=t.connect,(a,c=0,u=0)=>{const l=0===i.size;if(e(a))return o.call(t,a,c,u),n(i,[a,c,u],h=>h[0]===a&&h[1]===c&&h[2]===u,!0),l&&s(),a;o.call(t,a,c),n(i,[a,c],h=>h[0]===a&&h[1]===c,!0),l&&s()}),t.disconnect=(o=>(a,c,u)=>{const l=i.size>0;if(void 0===a)o.apply(t),i.clear();else if("number"==typeof a){o.call(t,a);for(const d of i)d[1]===a&&i.delete(d)}else{e(a)?o.call(t,a,c,u):o.call(t,a,c);for(const d of i)d[0]===a&&(void 0===c||d[1]===c)&&(void 0===u||d[2]===u)&&i.delete(d)}l&&0===i.size&&r()})(t.disconnect),t;var o})(Ji,O_),mG=((n,e)=>(t,s)=>{s.channelCount=1,s.channelCountMode="explicit",Object.defineProperty(s,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(s,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});const r=t.createBufferSource();e(s,()=>{const a=s.numberOfInputs;for(let c=0;c<a;c+=1)r.connect(s,0,c)},()=>r.disconnect(s))})(Ft,hi),di=((n,e)=>(t,s)=>{const r=t.createChannelMerger(s.numberOfInputs);return null!==n&&"webkitAudioContext"===n.name&&e(t,r),Ut(r,s),r})(Ir,mG),_G=((n,e,t)=>()=>{const s=new WeakMap,r=function(){var i=Re(function*(o,a){let c=e(o);return fn(c,a)||(c=n(a,{channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfInputs:c.numberOfInputs})),s.set(a,c),yield t(o,a,c),c});return function(a,c){return i.apply(this,arguments)}}();return{render(i,o){const a=s.get(o);return void 0!==a?Promise.resolve(a):r(i,o)}}})(di,it,nn),yG=((n,e,t,s,r)=>class extends n{constructor(o,a){const c=s(o),u={..._U,...a};super(o,!1,t(c,u),r(c)?e():null)}})(xt,_G,di,st,ze),vG=((n,e,t)=>()=>{const s=new WeakMap,r=function(){var i=Re(function*(o,a){let c=e(o);return fn(c,a)||(c=n(a,{channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,numberOfOutputs:c.numberOfOutputs})),s.set(a,c),yield t(o,a,c),c});return function(a,c){return i.apply(this,arguments)}}();return{render(i,o){const a=s.get(o);return void 0!==a?Promise.resolve(a):r(i,o)}}})(_u,it,nn),wG=((n,e,t,s,r,i)=>class extends n{constructor(a,c){const u=s(a),l=(n=>({...n,channelCount:n.numberOfOutputs}))({...wU,...c});super(a,!1,t(u,l),r(u)?e():null)}})(xt,vG,_u,st,ze),DG=((n,e,t,s)=>(r,{offset:i,...o})=>{const a=r.createBuffer(1,2,44100),c=e(r,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),u=t(r,{...o,gain:i}),l=a.getChannelData(0);l[0]=1,l[1]=1,c.buffer=a,c.loop=!0;const h={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(p){u.channelCount=p},get channelCountMode(){return u.channelCountMode},set channelCountMode(p){u.channelCountMode=p},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(p){u.channelInterpretation=p},get context(){return u.context},get inputs(){return[]},get numberOfInputs(){return c.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get offset(){return u.gain},get onended(){return c.onended},set onended(p){c.onended=p},addEventListener:(...p)=>c.addEventListener(p[0],p[1],p[2]),dispatchEvent:(...p)=>c.dispatchEvent(p[0]),removeEventListener:(...p)=>c.removeEventListener(p[0],p[1],p[2]),start(p=0){c.start.call(c,p)},stop(p=0){c.stop.call(c,p)}};return n(r,c),s(ba(h,u),()=>c.connect(u),()=>c.disconnect(u))})(_d,Ea,Nn,hi),Aa=((n,e,t,s,r)=>(i,o)=>{if(void 0===i.createConstantSource)return t(i,o);const a=i.createConstantSource();return Ut(a,o),Ct(a,o,"offset"),e(s,()=>s(i))||E_(a),e(r,()=>r(i))||A_(a),n(i,a),a})(_d,Wn,DG,x_,M_),CG=((n,e,t,s,r)=>()=>{const i=new WeakMap;let o=null,a=null;const c=function(){var u=Re(function*(l,h){let d=t(l);const f=fn(d,h);return f||(d=e(h,{channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value}),null!==o&&d.start(o),null!==a&&d.stop(a)),i.set(h,d),f?yield n(h,l.offset,d.offset):yield s(h,l.offset,d.offset),yield r(l,h,d),d});return function(h,d){return u.apply(this,arguments)}}();return{set start(u){o=u},set stop(u){a=u},render(u,l){const h=i.get(l);return void 0!==h?Promise.resolve(h):c(u,l)}}})(tr,Aa,it,nr,nn),bG=((n,e,t,s,r,i,o)=>class extends n{constructor(c,u){const l=r(c),h={...EU,...u},d=s(l,h),f=i(l),p=f?t():null;super(c,!1,d,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=d,this._offset=e(this,f,d.offset,Cn,In),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){const u="function"==typeof c?o(this,c):null;this._nativeConstantSourceNode.onended=u;const l=this._nativeConstantSourceNode.onended;this._onended=null!==l&&l===u?c:l}start(c=0){if(this._nativeConstantSourceNode.start(c),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.start=c),"closed"!==this.context.state){Da(this);const u=()=>{this._nativeConstantSourceNode.removeEventListener("ended",u),Mr(this)&&fu(this)};this._nativeConstantSourceNode.addEventListener("ended",u)}}stop(c=0){this._nativeConstantSourceNode.stop(c),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=c)}})(xt,Os,CG,Aa,st,ze,Sa),gx=((n,e)=>(t,s)=>{const r=t.createConvolver();if(Ut(r,s),s.disableNormalization===r.normalize&&(r.normalize=!s.disableNormalization),lt(r,s,"buffer"),s.channelCount>2||(e(r,"channelCount",i=>()=>i.call(r),i=>o=>{if(o>2)throw n();return i.call(r,o)}),"max"===s.channelCountMode))throw n();return e(r,"channelCountMode",i=>()=>i.call(r),i=>o=>{if("max"===o)throw n();return i.call(r,o)}),r})(pn,vu),SG=((n,e,t)=>()=>{const s=new WeakMap,r=function(){var i=Re(function*(o,a){let c=e(o);return fn(c,a)||(c=n(a,{buffer:c.buffer,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,disableNormalization:!c.normalize})),s.set(a,c),Ca(c)?yield t(o,a,c.inputs[0]):yield t(o,a,c),c});return function(a,c){return i.apply(this,arguments)}}();return{render(i,o){const a=s.get(o);return void 0!==a?Promise.resolve(a):r(i,o)}}})(gx,it,nn),TG=((n,e,t,s,r,i)=>class extends n{constructor(a,c){const u=s(a),l={...IU,...c},h=t(u,l);super(a,!1,h,r(u)?e():null),this._isBufferNullified=!1,this._nativeConvolverNode=h,null!==l.buffer&&i(this,l.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,null===a&&null!==this._nativeConvolverNode.buffer){const c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,null===this._nativeConvolverNode.buffer?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}})(xt,SG,gx,st,ze,no),EG=((n,e,t,s,r)=>i=>{const o=new WeakMap,a=function(){var c=Re(function*(u,l){let h=t(u);const d=fn(h,l);return d||(h=e(l,{channelCount:h.channelCount,channelCountMode:h.channelCountMode,channelInterpretation:h.channelInterpretation,delayTime:h.delayTime.value,maxDelayTime:i})),o.set(l,h),d?yield n(l,u.delayTime,h.delayTime):yield s(l,u.delayTime,h.delayTime),yield r(u,l,h),h});return function(l,h){return c.apply(this,arguments)}}();return{render(c,u){const l=o.get(u);return void 0!==l?Promise.resolve(l):a(c,u)}}})(tr,JA,it,nr,nn),AG=((n,e,t,s,r,i,o)=>class extends n{constructor(c,u){const l=r(c),h={...VU,...u},d=s(l,h),f=i(l);super(c,!1,d,f?t(h.maxDelayTime):null),this._delayTime=e(this,f,d.delayTime),o(this,h.maxDelayTime)}get delayTime(){return this._delayTime}})(xt,Os,EG,JA,st,ze,no),mx=(n=>(e,t)=>{const s=e.createDynamicsCompressor();if(Ut(s,t),t.channelCount>2||"max"===t.channelCountMode)throw n();return Ct(s,t,"attack"),Ct(s,t,"knee"),Ct(s,t,"ratio"),Ct(s,t,"release"),Ct(s,t,"threshold"),s})(pn),xG=((n,e,t,s,r)=>()=>{const i=new WeakMap,o=function(){var a=Re(function*(c,u){let l=t(c);const h=fn(l,u);return h||(l=e(u,{attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value})),i.set(u,l),h?(yield n(u,c.attack,l.attack),yield n(u,c.knee,l.knee),yield n(u,c.ratio,l.ratio),yield n(u,c.release,l.release),yield n(u,c.threshold,l.threshold)):(yield s(u,c.attack,l.attack),yield s(u,c.knee,l.knee),yield s(u,c.ratio,l.ratio),yield s(u,c.release,l.release),yield s(u,c.threshold,l.threshold)),yield r(c,u,l),l});return function(u,l){return a.apply(this,arguments)}}();return{render(a,c){const u=i.get(c);return void 0!==u?Promise.resolve(u):o(a,c)}}})(tr,mx,it,nr,nn),MG=((n,e,t,s,r,i,o,a)=>class extends n{constructor(u,l){const h=i(u),d={...GU,...l},f=s(h,d),p=o(h);super(u,!1,f,p?t():null),this._attack=e(this,p,f.attack),this._knee=e(this,p,f.knee),this._nativeDynamicsCompressorNode=f,this._ratio=e(this,p,f.ratio),this._release=e(this,p,f.release),this._threshold=e(this,p,f.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(u){const l=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=u,u>2)throw this._nativeDynamicsCompressorNode.channelCount=l,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(u){const l=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=u,"max"===u)throw this._nativeDynamicsCompressorNode.channelCountMode=l,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}})(xt,Os,xG,mx,pn,st,ze,no),IG=((n,e,t,s,r)=>()=>{const i=new WeakMap,o=function(){var a=Re(function*(c,u){let l=t(c);const h=fn(l,u);return h||(l=e(u,{channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value})),i.set(u,l),h?yield n(u,c.gain,l.gain):yield s(u,c.gain,l.gain),yield r(c,u,l),l});return function(u,l){return a.apply(this,arguments)}}();return{render(a,c){const u=i.get(c);return void 0!==u?Promise.resolve(u):o(a,c)}}})(tr,Nn,it,nr,nn),NG=((n,e,t,s,r,i)=>class extends n{constructor(a,c){const u=r(a),l={...JU,...c},h=s(u,l),d=i(u);super(a,!1,h,d?t():null),this._gain=e(this,d,h.gain,Cn,In)}get gain(){return this._gain}})(xt,Os,IG,Nn,st,ze),OG=((n,e,t,s)=>(r,i,{channelCount:o,channelCountMode:a,channelInterpretation:c,feedback:u,feedforward:l})=>{const h=XA(i,r.sampleRate),d=u instanceof Float64Array?u:new Float64Array(u),f=l instanceof Float64Array?l:new Float64Array(l),p=d.length,g=f.length,_=Math.min(p,g);if(0===p||p>20)throw s();if(0===d[0])throw e();if(0===g||g>20)throw s();if(0===f[0])throw e();if(1!==d[0]){for(let S=0;S<g;S+=1)f[S]/=d[0];for(let S=1;S<p;S+=1)d[S]/=d[0]}const m=t(r,h,o,o);m.channelCount=o,m.channelCountMode=a,m.channelInterpretation=c;const v=[],D=[],y=[];for(let S=0;S<o;S+=1){v.push(0);const M=new Float32Array(32),x=new Float32Array(32);M.fill(0),x.fill(0),D.push(M),y.push(x)}m.onaudioprocess=S=>{const M=S.inputBuffer,x=S.outputBuffer,R=M.numberOfChannels;for(let T=0;T<R;T+=1){const P=M.getChannelData(T),B=x.getChannelData(T);v[T]=ZA(d,p,f,g,_,D[T],y[T],v[T],32,P,B)}};const C=r.sampleRate/2;return ba({get bufferSize(){return h},get channelCount(){return m.channelCount},set channelCount(S){m.channelCount=S},get channelCountMode(){return m.channelCountMode},set channelCountMode(S){m.channelCountMode=S},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(S){m.channelInterpretation=S},get context(){return m.context},get inputs(){return[m]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},addEventListener:(...S)=>m.addEventListener(S[0],S[1],S[2]),dispatchEvent:(...S)=>m.dispatchEvent(S[0]),getFrequencyResponse(S,M,x){if(S.length!==M.length||M.length!==x.length)throw n();const R=S.length;for(let T=0;T<R;T+=1){const P=-Math.PI*(S[T]/C),B=[Math.cos(P),Math.sin(P)],z=s3(ex(f,B),ex(d,B));M[T]=Math.sqrt(z[0]*z[0]+z[1]*z[1]),x[T]=Math.atan2(z[1],z[0])}},removeEventListener:(...S)=>m.removeEventListener(S[0],S[1],S[2])},m)})(md,Ft,yu,pn),yd=((n,e,t,s)=>r=>n(to,()=>to(r))?Promise.resolve(n(s,s)).then(i=>{if(!i){const o=t(r,512,0,1);r.oncomplete=()=>{o.onaudioprocess=null,o.disconnect()},o.onaudioprocess=()=>r.currentTime,o.connect(r.destination)}return r.startRendering()}):new Promise(i=>{const o=e(r,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});r.oncomplete=a=>{o.disconnect(),i(a.renderedBuffer)},o.connect(r.destination),r.startRendering()}))(Wn,Nn,yu,((n,e)=>()=>{if(null===e)return Promise.resolve(!1);const t=new e(1,1,44100),s=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(r=>{t.oncomplete=()=>{s.disconnect(),r(0!==t.currentTime)},t.startRendering()})})(Nn,Qt)),RG=((n,e,t,s,r)=>(i,o)=>{const a=new WeakMap;let c=null;const u=function(){var l=Re(function*(h,d){let f=null,p=e(h);const g=fn(p,d);if(void 0===d.createIIRFilter?f=n(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):g||(p=d.createIIRFilter(o,i)),a.set(d,null===f?p:f),null!==f){if(null===c){if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");const m=new t(h.context.destination.channelCount,h.context.length,d.sampleRate);c=Re(function*(){return yield s(h,m,m.destination),((n,e,t,s)=>{const r=t instanceof Float64Array?t:new Float64Array(t),i=s instanceof Float64Array?s:new Float64Array(s),o=r.length,a=i.length,c=Math.min(o,a);if(1!==r[0]){for(let p=0;p<o;p+=1)i[p]/=r[0];for(let p=1;p<a;p+=1)r[p]/=r[0]}const l=new Float32Array(32),h=new Float32Array(32),d=e.createBuffer(n.numberOfChannels,n.length,n.sampleRate),f=n.numberOfChannels;for(let p=0;p<f;p+=1){const g=n.getChannelData(p),_=d.getChannelData(p);l.fill(0),h.fill(0),ZA(r,o,i,a,c,l,h,0,32,g,_)}return d})(yield r(m),d,i,o)})()}const _=yield c;return f.buffer=_,f.start(0),f}return yield s(h,d,p),p});return function(d,f){return l.apply(this,arguments)}}();return{render(l,h){const d=a.get(h);return void 0!==d?Promise.resolve(d):u(l,h)}}})(Ea,it,Qt,nn,yd),kG=(n=>(e,t,s)=>{if(void 0===e.createIIRFilter)return n(e,t,s);const r=e.createIIRFilter(s.feedforward,s.feedback);return Ut(r,s),r})(OG),FG=((n,e,t,s,r,i)=>class extends n{constructor(a,c){const u=s(a),l=r(u),h={...hq,...c},d=e(u,l?null:a.baseLatency,h);super(a,!1,d,l?t(h.feedback,h.feedforward):null),(n=>{var e;n.getFrequencyResponse=(e=n.getFrequencyResponse,(t,s,r)=>{if(t.length!==s.length||s.length!==r.length)throw md();return e.call(n,t,s,r)})})(d),this._nativeIIRFilterNode=d,i(this,1)}getFrequencyResponse(a,c,u){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,u)}})(xt,kG,RG,st,ze,no),PG=((n,e,t,s,r,i,o,a)=>(c,u)=>{const l=u.listener,{forwardX:d,forwardY:f,forwardZ:p,positionX:g,positionY:_,positionZ:m,upX:w,upY:v,upZ:D}=void 0===l.forwardX?(()=>{const y=new Float32Array(1),C=e(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),b=o(u);let S=!1,M=[0,0,-1,0,1,0],x=[0,0,0];const R=()=>{if(S)return;S=!0;const G=s(u,256,9,0);G.onaudioprocess=({inputBuffer:L})=>{const z=[i(L,y,0),i(L,y,1),i(L,y,2),i(L,y,3),i(L,y,4),i(L,y,5)];z.some((se,Te)=>se!==M[Te])&&(l.setOrientation(...z),M=z);const ue=[i(L,y,6),i(L,y,7),i(L,y,8)];ue.some((se,Te)=>se!==x[Te])&&(l.setPosition(...ue),x=ue)},C.connect(G)},T=G=>L=>{L!==M[G]&&(M[G]=L,l.setOrientation(...M))},P=G=>L=>{L!==x[G]&&(x[G]=L,l.setPosition(...x))},B=(G,L,z)=>{const ue=t(u,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:L});ue.connect(C,0,G),ue.start(),Object.defineProperty(ue.offset,"defaultValue",{get:()=>L});const se=n({context:c},b,ue.offset,Cn,In);return a(se,"value",Te=>()=>Te.call(se),Te=>De=>{try{Te.call(se,De)}catch(rt){if(9!==rt.code)throw rt}R(),b&&z(De)}),se.cancelAndHoldAtTime=(Te=se.cancelAndHoldAtTime,b?()=>{throw r()}:(...De)=>{const rt=Te.apply(se,De);return R(),rt}),se.cancelScheduledValues=(Te=>b?()=>{throw r()}:(...De)=>{const rt=Te.apply(se,De);return R(),rt})(se.cancelScheduledValues),se.exponentialRampToValueAtTime=(Te=>b?()=>{throw r()}:(...De)=>{const rt=Te.apply(se,De);return R(),rt})(se.exponentialRampToValueAtTime),se.linearRampToValueAtTime=(Te=>b?()=>{throw r()}:(...De)=>{const rt=Te.apply(se,De);return R(),rt})(se.linearRampToValueAtTime),se.setTargetAtTime=(Te=>b?()=>{throw r()}:(...De)=>{const rt=Te.apply(se,De);return R(),rt})(se.setTargetAtTime),se.setValueAtTime=(Te=>b?()=>{throw r()}:(...De)=>{const rt=Te.apply(se,De);return R(),rt})(se.setValueAtTime),se.setValueCurveAtTime=(Te=>b?()=>{throw r()}:(...De)=>{const rt=Te.apply(se,De);return R(),rt})(se.setValueCurveAtTime),se;var Te};return{forwardX:B(0,0,T(0)),forwardY:B(1,0,T(1)),forwardZ:B(2,-1,T(2)),positionX:B(6,0,P(0)),positionY:B(7,0,P(1)),positionZ:B(8,0,P(2)),upX:B(3,0,T(3)),upY:B(4,1,T(4)),upZ:B(5,0,T(5))}})():l;return{get forwardX(){return d},get forwardY(){return f},get forwardZ(){return p},get positionX(){return g},get positionY(){return _},get positionZ(){return m},get upX(){return w},get upY(){return v},get upZ(){return D}}})(Os,di,Aa,yu,pn,nx,ze,vu),_x=new WeakMap,P_=((n,e,t,s,r,i)=>class extends t{constructor(a,c){super(a),this._nativeContext=a,rd.set(this,a),s(a)&&r.set(a,new Set),this._destination=new n(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){const c="function"==typeof a?i(this,a):null;this._nativeContext.onstatechange=c;const u=this._nativeContext.onstatechange;this._onstatechange=null!==u&&u===c?a:u}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}})(fG,PG,lx,ze,_x,Sa),yx=((n,e,t,s,r,i)=>(o,a)=>{const c=o.createOscillator();return Ut(c,a),Ct(c,a,"detune"),Ct(c,a,"frequency"),void 0!==a.periodicWave?c.setPeriodicWave(a.periodicWave):lt(c,a,"type"),e(t,()=>t(o))||E_(c),e(s,()=>s(o))||i(c,o),e(r,()=>r(o))||A_(c),n(o,c),c})(_d,Wn,x_,ix,M_,ox),VG=((n,e,t,s,r)=>()=>{const i=new WeakMap;let o=null,a=null,c=null;const u=function(){var l=Re(function*(h,d){let f=t(h);const p=fn(f,d);return p||(f=e(d,{channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,periodicWave:null===o?void 0:o,type:f.type}),null!==a&&f.start(a),null!==c&&f.stop(c)),i.set(d,f),p?(yield n(d,h.detune,f.detune),yield n(d,h.frequency,f.frequency)):(yield s(d,h.detune,f.detune),yield s(d,h.frequency,f.frequency)),yield r(h,d,f),f});return function(d,f){return l.apply(this,arguments)}}();return{set periodicWave(l){o=l},set start(l){a=l},set stop(l){c=l},render(l,h){const d=i.get(h);return void 0!==d?Promise.resolve(d):u(l,h)}}})(tr,yx,it,nr,nn),LG=((n,e,t,s,r,i,o)=>class extends n{constructor(c,u){const l=r(c),h={...D3,...u},d=t(l,h),f=i(l),p=f?s():null,g=c.sampleRate/2;super(c,!1,d,p),this._detune=e(this,f,d.detune,153600,-153600),this._frequency=e(this,f,d.frequency,g,-g),this._nativeOscillatorNode=d,this._onended=null,this._oscillatorNodeRenderer=p,null!==this._oscillatorNodeRenderer&&void 0!==h.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=h.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){const u="function"==typeof c?o(this,c):null;this._nativeOscillatorNode.onended=u;const l=this._nativeOscillatorNode.onended;this._onended=null!==l&&l===u?c:l}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.start=c),"closed"!==this.context.state){Da(this);const u=()=>{this._nativeOscillatorNode.removeEventListener("ended",u),Mr(this)&&fu(this)};this._nativeOscillatorNode.addEventListener("ended",u)}}stop(c=0){this._nativeOscillatorNode.stop(c),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=c)}})(xt,Os,yx,VG,st,ze,Sa),vx=(n=>(e,t)=>{const s=n(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),r=e.createBuffer(1,2,44100);return s.buffer=r,s.loop=!0,s.connect(t),s.start(),()=>{s.stop(),s.disconnect(t)}})(Ea),jG=((n,e,t,s,r)=>(i,{curve:o,oversample:a,...c})=>{const u=i.createWaveShaper(),l=i.createWaveShaper();Ut(u,c),Ut(l,c);const h=t(i,{...c,gain:1}),d=t(i,{...c,gain:-1}),f=t(i,{...c,gain:1}),p=t(i,{...c,gain:-1});let g=null,_=!1,m=null;const w={get bufferSize(){},get channelCount(){return u.channelCount},set channelCount(y){h.channelCount=y,d.channelCount=y,u.channelCount=y,f.channelCount=y,l.channelCount=y,p.channelCount=y},get channelCountMode(){return u.channelCountMode},set channelCountMode(y){h.channelCountMode=y,d.channelCountMode=y,u.channelCountMode=y,f.channelCountMode=y,l.channelCountMode=y,p.channelCountMode=y},get channelInterpretation(){return u.channelInterpretation},set channelInterpretation(y){h.channelInterpretation=y,d.channelInterpretation=y,u.channelInterpretation=y,f.channelInterpretation=y,l.channelInterpretation=y,p.channelInterpretation=y},get context(){return u.context},get curve(){return m},set curve(y){if(null!==y&&y.length<2)throw e();if(null===y)u.curve=y,l.curve=y;else{const C=y.length,b=new Float32Array(C+2-C%2),S=new Float32Array(C+2-C%2);b[0]=y[0],S[0]=-y[C-1];const M=Math.ceil((C+1)/2),x=(C+1)/2-1;for(let R=1;R<M;R+=1){const T=R/M*x,P=Math.floor(T),B=Math.ceil(T);b[R]=P===B?y[P]:(1-(T-P))*y[P]+(1-(B-T))*y[B],S[R]=P===B?-y[C-1-P]:-(1-(T-P))*y[C-1-P]-(1-(B-T))*y[C-1-B]}b[M]=C%2==1?y[M-1]:(y[M-2]+y[M-1])/2,u.curve=b,l.curve=S}m=y,_&&(s(m)&&null===g?g=n(i,h):null!==g&&(g(),g=null))},get inputs(){return[h]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return u.numberOfOutputs},get oversample(){return u.oversample},set oversample(y){u.oversample=y,l.oversample=y},addEventListener:(...y)=>h.addEventListener(y[0],y[1],y[2]),dispatchEvent:(...y)=>h.dispatchEvent(y[0]),removeEventListener:(...y)=>h.removeEventListener(y[0],y[1],y[2])};return null!==o&&(w.curve=o instanceof Float32Array?o:new Float32Array(o)),a!==w.oversample&&(w.oversample=a),r(ba(w,f),()=>{h.connect(u).connect(f),h.connect(d).connect(l).connect(p).connect(f),_=!0,s(m)&&(g=n(i,h))},()=>{h.disconnect(u),u.disconnect(f),h.disconnect(d),d.disconnect(l),l.disconnect(p),p.disconnect(f),_=!1,null!==g&&(g(),g=null)})})(vx,Ft,Nn,sx,hi),vd=((n,e,t,s,r,i,o)=>(a,c)=>{const u=a.createWaveShaper();if(null!==i&&"webkitAudioContext"===i.name&&void 0===a.createGain().gain.automationRate)return t(a,c);Ut(u,c);const l=null===c.curve||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(null!==l&&l.length<2)throw e();lt(u,{curve:l},"curve"),lt(u,c,"oversample");let h=null,d=!1;return o(u,"curve",g=>()=>g.call(u),g=>_=>(g.call(u,_),d&&(s(_)&&null===h?h=n(a,u):!s(_)&&null!==h&&(h(),h=null)),_)),r(u,()=>{d=!0,s(u.curve)&&(h=n(a,u))},()=>{d=!1,null!==h&&(h(),h=null)})})(vx,Ft,jG,sx,hi,Ir,vu),BG=((n,e,t,s,r,i,o,a,c,u)=>(l,{coneInnerAngle:h,coneOuterAngle:d,coneOuterGain:f,distanceModel:p,maxDistance:g,orientationX:_,orientationY:m,orientationZ:w,panningModel:v,positionX:D,positionY:y,positionZ:C,refDistance:b,rolloffFactor:S,...M})=>{const x=l.createPanner();if(M.channelCount>2||"max"===M.channelCountMode)throw o();Ut(x,M);const R={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},T=t(l,{...R,channelInterpretation:"speakers",numberOfInputs:6}),P=s(l,{...M,gain:1}),B=s(l,{...R,gain:1}),G=s(l,{...R,gain:0}),L=s(l,{...R,gain:0}),z=s(l,{...R,gain:0}),ue=s(l,{...R,gain:0}),se=s(l,{...R,gain:0}),Te=r(l,256,6,1),De=i(l,{...R,curve:new Float32Array([1,1]),oversample:"none"});let rt=[_,m,w],qt=[D,y,C];const Sn=new Float32Array(1);Te.onaudioprocess=({inputBuffer:V})=>{const Gt=[c(V,Sn,0),c(V,Sn,1),c(V,Sn,2)];Gt.some(($a,Ha)=>$a!==rt[Ha])&&(x.setOrientation(...Gt),rt=Gt);const ar=[c(V,Sn,3),c(V,Sn,4),c(V,Sn,5)];ar.some(($a,Ha)=>$a!==qt[Ha])&&(x.setPosition(...ar),qt=ar)},Object.defineProperty(G.gain,"defaultValue",{get:()=>0}),Object.defineProperty(L.gain,"defaultValue",{get:()=>0}),Object.defineProperty(z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ue.gain,"defaultValue",{get:()=>0}),Object.defineProperty(se.gain,"defaultValue",{get:()=>0});const xe={get bufferSize(){},get channelCount(){return x.channelCount},set channelCount(V){if(V>2)throw o();P.channelCount=V,x.channelCount=V},get channelCountMode(){return x.channelCountMode},set channelCountMode(V){if("max"===V)throw o();P.channelCountMode=V,x.channelCountMode=V},get channelInterpretation(){return x.channelInterpretation},set channelInterpretation(V){P.channelInterpretation=V,x.channelInterpretation=V},get coneInnerAngle(){return x.coneInnerAngle},set coneInnerAngle(V){x.coneInnerAngle=V},get coneOuterAngle(){return x.coneOuterAngle},set coneOuterAngle(V){x.coneOuterAngle=V},get coneOuterGain(){return x.coneOuterGain},set coneOuterGain(V){if(V<0||V>1)throw e();x.coneOuterGain=V},get context(){return x.context},get distanceModel(){return x.distanceModel},set distanceModel(V){x.distanceModel=V},get inputs(){return[P]},get maxDistance(){return x.maxDistance},set maxDistance(V){if(V<0)throw new RangeError;x.maxDistance=V},get numberOfInputs(){return x.numberOfInputs},get numberOfOutputs(){return x.numberOfOutputs},get orientationX(){return B.gain},get orientationY(){return G.gain},get orientationZ(){return L.gain},get panningModel(){return x.panningModel},set panningModel(V){x.panningModel=V},get positionX(){return z.gain},get positionY(){return ue.gain},get positionZ(){return se.gain},get refDistance(){return x.refDistance},set refDistance(V){if(V<0)throw new RangeError;x.refDistance=V},get rolloffFactor(){return x.rolloffFactor},set rolloffFactor(V){if(V<0)throw new RangeError;x.rolloffFactor=V},addEventListener:(...V)=>P.addEventListener(V[0],V[1],V[2]),dispatchEvent:(...V)=>P.dispatchEvent(V[0]),removeEventListener:(...V)=>P.removeEventListener(V[0],V[1],V[2])};return h!==xe.coneInnerAngle&&(xe.coneInnerAngle=h),d!==xe.coneOuterAngle&&(xe.coneOuterAngle=d),f!==xe.coneOuterGain&&(xe.coneOuterGain=f),p!==xe.distanceModel&&(xe.distanceModel=p),g!==xe.maxDistance&&(xe.maxDistance=g),_!==xe.orientationX.value&&(xe.orientationX.value=_),m!==xe.orientationY.value&&(xe.orientationY.value=m),w!==xe.orientationZ.value&&(xe.orientationZ.value=w),v!==xe.panningModel&&(xe.panningModel=v),D!==xe.positionX.value&&(xe.positionX.value=D),y!==xe.positionY.value&&(xe.positionY.value=y),C!==xe.positionZ.value&&(xe.positionZ.value=C),b!==xe.refDistance&&(xe.refDistance=b),S!==xe.rolloffFactor&&(xe.rolloffFactor=S),(1!==rt[0]||0!==rt[1]||0!==rt[2])&&x.setOrientation(...rt),(0!==qt[0]||0!==qt[1]||0!==qt[2])&&x.setPosition(...qt),u(ba(xe,x),()=>{P.connect(x),n(P,De,0,0),De.connect(B).connect(T,0,0),De.connect(G).connect(T,0,1),De.connect(L).connect(T,0,2),De.connect(z).connect(T,0,3),De.connect(ue).connect(T,0,4),De.connect(se).connect(T,0,5),T.connect(Te).connect(l.destination)},()=>{P.disconnect(x),a(P,De,0,0),De.disconnect(B),B.disconnect(T),De.disconnect(G),G.disconnect(T),De.disconnect(L),L.disconnect(T),De.disconnect(z),z.disconnect(T),De.disconnect(ue),ue.disconnect(T),De.disconnect(se),se.disconnect(T),T.disconnect(Te),Te.disconnect(l.destination)})})(ud,Ft,di,Nn,yu,vd,pn,ld,nx,hi),wx=(n=>(e,t)=>{const s=e.createPanner();return void 0===s.orientationX?n(e,t):(Ut(s,t),Ct(s,t,"orientationX"),Ct(s,t,"orientationY"),Ct(s,t,"orientationZ"),Ct(s,t,"positionX"),Ct(s,t,"positionY"),Ct(s,t,"positionZ"),lt(s,t,"coneInnerAngle"),lt(s,t,"coneOuterAngle"),lt(s,t,"coneOuterGain"),lt(s,t,"distanceModel"),lt(s,t,"maxDistance"),lt(s,t,"panningModel"),lt(s,t,"refDistance"),lt(s,t,"rolloffFactor"),s)})(BG),$G=((n,e,t,s,r,i,o,a,c,u)=>()=>{const l=new WeakMap;let h=null;const d=function(){var f=Re(function*(p,g){let _=null,m=i(p);const w={channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation},v={...w,coneInnerAngle:m.coneInnerAngle,coneOuterAngle:m.coneOuterAngle,coneOuterGain:m.coneOuterGain,distanceModel:m.distanceModel,maxDistance:m.maxDistance,panningModel:m.panningModel,refDistance:m.refDistance,rolloffFactor:m.rolloffFactor},D=fn(m,g);if("bufferSize"in m)_=s(g,{...w,gain:1});else if(!D){const y={...v,orientationX:m.orientationX.value,orientationY:m.orientationY.value,orientationZ:m.orientationZ.value,positionX:m.positionX.value,positionY:m.positionY.value,positionZ:m.positionZ.value};m=r(g,y)}if(l.set(g,null===_?m:_),null!==_){if(null===h){if(null===o)throw new Error("Missing the native OfflineAudioContext constructor.");const T=new o(6,p.context.length,g.sampleRate),P=e(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});P.connect(T.destination),h=Re(function*(){const B=yield Promise.all([p.orientationX,p.orientationY,p.orientationZ,p.positionX,p.positionY,p.positionZ].map(function(){var G=Re(function*(L,z){const ue=t(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===z?1:0});return yield a(T,L,ue.offset),ue});return function(L,z){return G.apply(this,arguments)}}()));for(let G=0;G<6;G+=1)B[G].connect(P,0,G),B[G].start(0);return u(T)})()}const y=yield h,C=s(g,{...w,gain:1});yield c(p,g,C);const b=[];for(let T=0;T<y.numberOfChannels;T+=1)b.push(y.getChannelData(T));let S=[b[0][0],b[1][0],b[2][0]],M=[b[3][0],b[4][0],b[5][0]],x=s(g,{...w,gain:1}),R=r(g,{...v,orientationX:S[0],orientationY:S[1],orientationZ:S[2],positionX:M[0],positionY:M[1],positionZ:M[2]});C.connect(x).connect(R.inputs[0]),R.connect(_);for(let T=128;T<y.length;T+=128){const P=[b[0][T],b[1][T],b[2][T]],B=[b[3][T],b[4][T],b[5][T]];if(P.some((G,L)=>G!==S[L])||B.some((G,L)=>G!==M[L])){S=P,M=B;const G=T/g.sampleRate;x.gain.setValueAtTime(0,G),x=s(g,{...w,gain:0}),R=r(g,{...v,orientationX:S[0],orientationY:S[1],orientationZ:S[2],positionX:M[0],positionY:M[1],positionZ:M[2]}),x.gain.setValueAtTime(1,G),C.connect(x).connect(R.inputs[0]),R.connect(_)}}return _}return D?(yield n(g,p.orientationX,m.orientationX),yield n(g,p.orientationY,m.orientationY),yield n(g,p.orientationZ,m.orientationZ),yield n(g,p.positionX,m.positionX),yield n(g,p.positionY,m.positionY),yield n(g,p.positionZ,m.positionZ)):(yield a(g,p.orientationX,m.orientationX),yield a(g,p.orientationY,m.orientationY),yield a(g,p.orientationZ,m.orientationZ),yield a(g,p.positionX,m.positionX),yield a(g,p.positionY,m.positionY),yield a(g,p.positionZ,m.positionZ)),Ca(m)?yield c(p,g,m.inputs[0]):yield c(p,g,m),m});return function(g,_){return f.apply(this,arguments)}}();return{render(f,p){const g=l.get(p);return void 0!==g?Promise.resolve(g):d(f,p)}}})(tr,di,Aa,Nn,wx,it,Qt,nr,nn,yd),HG=((n,e,t,s,r,i,o)=>class extends n{constructor(c,u){const l=r(c),h={...S3,...u},d=t(l,h),f=i(l);super(c,!1,d,f?s():null),this._nativePannerNode=d,this._orientationX=e(this,f,d.orientationX,Cn,In),this._orientationY=e(this,f,d.orientationY,Cn,In),this._orientationZ=e(this,f,d.orientationZ,Cn,In),this._positionX=e(this,f,d.positionX,Cn,In),this._positionY=e(this,f,d.positionY,Cn,In),this._positionZ=e(this,f,d.positionZ,Cn,In),o(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}})(xt,Os,wx,$G,st,ze,no),UG=(n=>(e,{disableNormalization:t,imag:s,real:r})=>{const i=s instanceof Float32Array?s:new Float32Array(s),o=r instanceof Float32Array?r:new Float32Array(r),a=e.createPeriodicWave(o,i,{disableNormalization:t});if(Array.from(s).length<2)throw n();return a})(er),qG=((n,e,t,s)=>class aM{constructor(i,o){const a=e(i),c=(n=>{const{imag:e,real:t}=n;return void 0===e?void 0===t?{...n,imag:[0,0],real:[0,0]}:{...n,imag:Array.from(t,()=>0),real:t}:void 0===t?{...n,imag:e,real:Array.from(e,()=>0)}:{...n,imag:e,real:t}})({...A3,...o}),u=n(a,c);return t.add(u),u}static[Symbol.hasInstance](i){return null!==i&&"object"==typeof i&&Object.getPrototypeOf(i)===aM.prototype||t.has(i)}})(UG,st,new WeakSet),GG=((n,e,t,s,r,i)=>{const a=new Float32Array([1,1]),c=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},l={...u,oversample:"none"},f=(p,g,_,m,w)=>{if(1===g)return((p,g,_,m)=>{const w=new Float32Array(16385),v=new Float32Array(16385);for(let M=0;M<16385;M+=1){const x=M/16384*c;w[M]=Math.cos(x),v[M]=Math.sin(x)}const D=t(p,{...u,gain:0}),y=s(p,{...l,curve:w}),C=s(p,{...l,curve:a}),b=t(p,{...u,gain:0}),S=s(p,{...l,curve:v});return{connectGraph(){g.connect(D),g.connect(void 0===C.inputs?C:C.inputs[0]),g.connect(b),C.connect(_),_.connect(void 0===y.inputs?y:y.inputs[0]),_.connect(void 0===S.inputs?S:S.inputs[0]),y.connect(D.gain),S.connect(b.gain),D.connect(m,0,0),b.connect(m,0,1)},disconnectGraph(){g.disconnect(D),g.disconnect(void 0===C.inputs?C:C.inputs[0]),g.disconnect(b),C.disconnect(_),_.disconnect(void 0===y.inputs?y:y.inputs[0]),_.disconnect(void 0===S.inputs?S:S.inputs[0]),y.disconnect(D.gain),S.disconnect(b.gain),D.disconnect(m,0,0),b.disconnect(m,0,1)}}})(p,_,m,w);if(2===g)return((p,g,_,m)=>{const w=new Float32Array(16385),v=new Float32Array(16385),D=new Float32Array(16385),y=new Float32Array(16385),C=Math.floor(8192.5);for(let z=0;z<16385;z+=1)if(z>C){const ue=(z-C)/(16384-C)*c;w[z]=Math.cos(ue),v[z]=Math.sin(ue),D[z]=0,y[z]=1}else{const ue=z/(16384-C)*c;w[z]=1,v[z]=0,D[z]=Math.cos(ue),y[z]=Math.sin(ue)}const b=e(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),S=t(p,{...u,gain:0}),M=s(p,{...l,curve:w}),x=t(p,{...u,gain:0}),R=s(p,{...l,curve:v}),T=s(p,{...l,curve:a}),P=t(p,{...u,gain:0}),B=s(p,{...l,curve:D}),G=t(p,{...u,gain:0}),L=s(p,{...l,curve:y});return{connectGraph(){g.connect(b),g.connect(void 0===T.inputs?T:T.inputs[0]),b.connect(S,0),b.connect(x,0),b.connect(P,1),b.connect(G,1),T.connect(_),_.connect(void 0===M.inputs?M:M.inputs[0]),_.connect(void 0===R.inputs?R:R.inputs[0]),_.connect(void 0===B.inputs?B:B.inputs[0]),_.connect(void 0===L.inputs?L:L.inputs[0]),M.connect(S.gain),R.connect(x.gain),B.connect(P.gain),L.connect(G.gain),S.connect(m,0,0),P.connect(m,0,0),x.connect(m,0,1),G.connect(m,0,1)},disconnectGraph(){g.disconnect(b),g.disconnect(void 0===T.inputs?T:T.inputs[0]),b.disconnect(S,0),b.disconnect(x,0),b.disconnect(P,1),b.disconnect(G,1),T.disconnect(_),_.disconnect(void 0===M.inputs?M:M.inputs[0]),_.disconnect(void 0===R.inputs?R:R.inputs[0]),_.disconnect(void 0===B.inputs?B:B.inputs[0]),_.disconnect(void 0===L.inputs?L:L.inputs[0]),M.disconnect(S.gain),R.disconnect(x.gain),B.disconnect(P.gain),L.disconnect(G.gain),S.disconnect(m,0,0),P.disconnect(m,0,0),x.disconnect(m,0,1),G.disconnect(m,0,1)}}})(p,_,m,w);throw r()};return(p,{channelCount:g,channelCountMode:_,pan:m,...w})=>{if("max"===_)throw r();const v=n(p,{...w,channelCount:1,channelCountMode:_,numberOfInputs:2}),D=t(p,{...w,channelCount:g,channelCountMode:_,gain:1}),y=t(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:m});let{connectGraph:C,disconnectGraph:b}=f(p,g,D,y,v);Object.defineProperty(y.gain,"defaultValue",{get:()=>0}),Object.defineProperty(y.gain,"maxValue",{get:()=>1}),Object.defineProperty(y.gain,"minValue",{get:()=>-1});const S={get bufferSize(){},get channelCount(){return D.channelCount},set channelCount(T){D.channelCount!==T&&(M&&b(),({connectGraph:C,disconnectGraph:b}=f(p,T,D,y,v)),M&&C()),D.channelCount=T},get channelCountMode(){return D.channelCountMode},set channelCountMode(T){if("clamped-max"===T||"max"===T)throw r();D.channelCountMode=T},get channelInterpretation(){return D.channelInterpretation},set channelInterpretation(T){D.channelInterpretation=T},get context(){return D.context},get inputs(){return[D]},get numberOfInputs(){return D.numberOfInputs},get numberOfOutputs(){return D.numberOfOutputs},get pan(){return y.gain},addEventListener:(...T)=>D.addEventListener(T[0],T[1],T[2]),dispatchEvent:(...T)=>D.dispatchEvent(T[0]),removeEventListener:(...T)=>D.removeEventListener(T[0],T[1],T[2])};let M=!1;return i(ba(S,v),()=>{C(),M=!0},()=>{b(),M=!1})}})(di,_u,Nn,vd,pn,hi),Dx=((n,e)=>(t,s)=>{const r=s.channelCountMode;if("clamped-max"===r)throw e();if(void 0===t.createStereoPanner)return n(t,s);const i=t.createStereoPanner();return Ut(i,s),Ct(i,s,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>r,set:o=>{if(o!==r)throw e()}}),i})(GG,pn),WG=((n,e,t,s,r)=>()=>{const i=new WeakMap,o=function(){var a=Re(function*(c,u){let l=t(c);const h=fn(l,u);return h||(l=e(u,{channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value})),i.set(u,l),h?yield n(u,c.pan,l.pan):yield s(u,c.pan,l.pan),Ca(l)?yield r(c,u,l.inputs[0]):yield r(c,u,l),l});return function(u,l){return a.apply(this,arguments)}}();return{render(a,c){const u=i.get(c);return void 0!==u?Promise.resolve(u):o(a,c)}}})(tr,Dx,it,nr,nn),zG=((n,e,t,s,r,i)=>class extends n{constructor(a,c){const u=r(a),l={...P3,...c},h=t(u,l),d=i(u);super(a,!1,h,d?s():null),this._pan=e(this,d,h.pan)}get pan(){return this._pan}})(xt,Os,Dx,WG,st,ze),QG=((n,e,t)=>()=>{const s=new WeakMap,r=function(){var i=Re(function*(o,a){let c=e(o);return fn(c,a)||(c=n(a,{channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,curve:c.curve,oversample:c.oversample})),s.set(a,c),Ca(c)?yield t(o,a,c.inputs[0]):yield t(o,a,c),c});return function(a,c){return i.apply(this,arguments)}}();return{render(i,o){const a=s.get(o);return void 0!==a?Promise.resolve(a):r(i,o)}}})(vd,it,nn),ZG=((n,e,t,s,r,i,o)=>class extends n{constructor(c,u){const l=r(c),h={...H3,...u},d=t(l,h);super(c,!0,d,i(l)?s():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=d,o(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(null===c)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}})(xt,Ft,vd,QG,st,ze,no),Cx=(n=>null!==n&&n.isSecureContext)(Ns),V_=(n=>(e,t,s)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get:()=>Math.round(e*t)},currentTime:{configurable:!0,get:()=>e}});try{return s()}finally{null!==n&&(delete n.currentFrame,delete n.currentTime)}})(Ns),bx=new WeakMap,YG=((n,e)=>t=>{let s=n.get(t);if(void 0!==s)return s;if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");return s=new e(1,1,44100),n.set(t,s),s})(bx,Qt),XG=Cx?((n,e,t,s,r,i,o,a,c,u,l,h,d)=>{let f=0;return(p,g,_={credentials:"omit"})=>{const m=l.get(p);if(void 0!==m&&m.has(g))return Promise.resolve();const w=u.get(p);if(void 0!==w){const y=w.get(g);if(void 0!==y)return y}const v=i(p),D=void 0===v.audioWorklet?r(g).then(([y,C])=>{const[b,S]=RA(y,C);return t(`${b};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${S}\n})})(window,'_AWGS')`)}).then(()=>{const y=d._AWGS.pop();if(void 0===y)throw new SyntaxError;s(v.currentTime,v.sampleRate,()=>y(class{},void 0,(C,b)=>{if(""===C.trim())throw e();const S=y_.get(v);if(void 0!==S){if(S.has(C))throw e();FA(b),kA(b.parameterDescriptors),S.set(C,b)}else FA(b),kA(b.parameterDescriptors),y_.set(v,new Map([[C,b]]))},v.sampleRate,void 0,void 0))}):Promise.all([r(g),Promise.resolve(n(h,h))]).then(([[y,C],b])=>{const S=f+1;f=S;const[M,x]=RA(y,C),G=new Blob([`${M};((AudioWorkletProcessor,registerProcessor)=>{${x}\n})(${b?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${b?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${b?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${S}',class extends AudioWorkletProcessor{process(){return !1}})`],{type:"application/javascript; charset=utf-8"}),L=URL.createObjectURL(G);return v.audioWorklet.addModule(L,_).then(()=>{if(a(v))return v;const z=o(v);return z.audioWorklet.addModule(L,_).then(()=>z)}).then(z=>{if(null===c)throw new SyntaxError;try{new c(z,`__sac${S}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(L))});return void 0===w?u.set(p,new Map([[g,D]])):w.set(g,D),D.then(()=>{const y=l.get(p);void 0===y?l.set(p,new Set([g])):y.add(g)}).finally(()=>{const y=u.get(p);void 0!==y&&y.delete(g)}),D}})(Wn,pn,(n=>e=>new Promise((t,s)=>{if(null===n)return void s(new SyntaxError);const r=n.document.head;if(null===r)s(new SyntaxError);else{const i=n.document.createElement("script"),o=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(o),c=n.onerror,u=()=>{n.onerror=c,URL.revokeObjectURL(a)};n.onerror=(l,h,d,f,p)=>h===a||h===n.location.href&&1===d&&1===f?(u(),s(p),!1):null!==c?c(l,h,d,f,p):void 0,i.onerror=()=>{u(),s(new SyntaxError)},i.onload=()=>{u(),t()},i.src=a,i.type="module",r.appendChild(i)}}))(Ns),V_,function(){var e=Re(function*(t){try{const s=yield fetch(t);if(s.ok)return[yield s.text(),s.url]}catch{}throw new DOMException("","AbortError")});return function(t){return e.apply(this,arguments)}}(),st,YG,ze,Ta,new WeakMap,new WeakMap,((n,e)=>Re(function*(){if(null===n)return!0;if(null===e)return!1;const t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),s=new e(1,128,44100),r=URL.createObjectURL(t);let i=!1,o=!1;try{yield s.audioWorklet.addModule(r);const a=new n(s,"a",{numberOfOutputs:0}),c=s.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>o=!0,c.connect(a),c.start(0),yield s.startRendering()}catch{}finally{URL.revokeObjectURL(r)}return i&&!o}))(Ta,Qt),Ns):void 0,KG=((n,e)=>t=>n(t)||e(t))(N_,ze),JG=((n,e,t,s,r,i,o,a,c,u,l)=>(h,d)=>{const f=o(h)?h:i(h);if(r.has(d)){const p=new DOMException("","DataCloneError");return Promise.reject(p)}try{r.add(d)}catch{}return e(c,()=>c(f))?f.decodeAudioData(d).then(p=>(QA(d).catch(()=>{}),e(a,()=>a(p))||l(p),n.add(p),p)):new Promise((p,g)=>{const _=function(){var w=Re(function*(){try{yield QA(d)}catch{}});return function(){return w.apply(this,arguments)}}(),m=w=>{g(w),_()};try{f.decodeAudioData(d,w=>{"function"!=typeof w.copyFromChannel&&(u(w),D_(w)),n.add(w),_().then(()=>p(w))},w=>{m(null===w?new DOMException("","EncodingError"):w)})}catch(w){m(w)}})})(R_,Wn,0,0,new WeakSet,st,KG,od,to,k_,F_),Sx=((n,e,t,s,r,i,o,a,c,u,l,h,d,f,p,g,_,m,w,v)=>class extends p{constructor(y,C){super(y,C),this._nativeContext=y,this._audioWorklet=void 0===n?void 0:{addModule:(b,S)=>n(this,b,S)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new r(this)}createBuffer(y,C,b){return new t({length:C,numberOfChannels:y,sampleRate:b})}createBufferSource(){return new s(this)}createChannelMerger(y=6){return new i(this,{numberOfInputs:y})}createChannelSplitter(y=6){return new o(this,{numberOfOutputs:y})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(y=1){return new l(this,{maxDelayTime:y})}createDynamicsCompressor(){return new h(this)}createGain(){return new d(this)}createIIRFilter(y,C){return new f(this,{feedback:C,feedforward:y})}createOscillator(){return new g(this)}createPanner(){return new _(this)}createPeriodicWave(y,C,b={disableNormalization:!1}){return new m(this,{...b,imag:C,real:y})}createStereoPanner(){return new w(this)}createWaveShaper(){return new v(this)}decodeAudioData(y,C,b){return u(this._nativeContext,y).then(S=>("function"==typeof C&&C(S),S),S=>{throw"function"==typeof b&&b(S),S})}})(XG,uG,lG,dG,gG,yG,wG,bG,TG,JG,AG,MG,NG,FG,P_,LG,HG,qG,zG,ZG),e4=((n,e,t,s)=>class extends n{constructor(i,o){const a=t(i),c=((n,e)=>n.createMediaElementSource(e.mediaElement))(a,o);if(s(a))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}})(xt,0,st,ze),t4=((n,e,t,s)=>class extends n{constructor(i,o){const a=t(i);if(s(a))throw new TypeError;const u=((n,e)=>{const t=n.createMediaStreamDestination();return Ut(t,e),1===t.numberOfOutputs&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t})(a,{...Aq,...o});super(i,!1,u,null),this._nativeMediaStreamAudioDestinationNode=u}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}})(xt,0,st,ze),n4=((n,e,t,s)=>class extends n{constructor(i,o){const a=t(i),c=((n,{mediaStream:e})=>{const t=e.getAudioTracks();t.sort((i,o)=>i.id<o.id?-1:i.id>o.id?1:0);const s=t.slice(0,1),r=n.createMediaStreamSource(new MediaStream(s));return Object.defineProperty(r,"mediaStream",{value:e}),r})(a,o);if(s(a))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}})(xt,0,st,ze),s4=((n,e)=>(t,{mediaStreamTrack:s})=>{if("function"==typeof t.createMediaStreamTrackSource)return t.createMediaStreamTrackSource(s);const r=new MediaStream([s]),i=t.createMediaStreamSource(r);if("audio"!==s.kind)throw n();if(e(t))throw new TypeError;return i})(Ft,ze),r4=((n,e,t)=>class extends n{constructor(r,i){const o=t(r);super(r,!0,e(o,i),null)}})(xt,s4,st),i4=((n,e,t,s,r,i,o,a,c)=>class extends n{constructor(l={}){if(null===c)throw new Error("Missing the native AudioContext constructor.");let h;try{h=new c(l)}catch(p){throw 12===p.code&&"sampleRate is not in range"===p.message?t():p}if(null===h)throw s();if(!(n=>void 0===n||"number"==typeof n||"string"==typeof n&&("balanced"===n||"interactive"===n||"playback"===n))(l.latencyHint))throw new TypeError(`The provided value '${l.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==l.sampleRate&&h.sampleRate!==l.sampleRate)throw t();super(h,2);const{latencyHint:d}=l,{sampleRate:f}=h;if(this._baseLatency="number"==typeof h.baseLatency?h.baseLatency:"balanced"===d?512/f:"interactive"===d||void 0===d?256/f:"playback"===d?1024/f:128*Math.max(2,Math.min(128,Math.round(d*f/128)))/f,this._nativeAudioContext=h,"webkitAudioContext"===c.name?(this._nativeGainNode=h.createGain(),this._nativeOscillatorNode=h.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(h.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,"running"===h.state){this._state="suspended";const p=()=>{"suspended"===this._state&&(this._state=null),h.removeEventListener("statechange",p)};h.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw e()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close().then(()=>{null!==this._nativeGainNode&&null!==this._nativeOscillatorNode&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),ad(this)}))}createMediaElementSource(l){return new r(this,{mediaElement:l})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(l){return new o(this,{mediaStream:l})}createMediaStreamTrackSource(l){return new a(this,{mediaStreamTrack:l})}resume(){return"suspended"===this._state?new Promise((l,h)=>{const d=()=>{this._nativeAudioContext.removeEventListener("statechange",d),"running"===this._nativeAudioContext.state?l():this.resume().then(l,h)};this._nativeAudioContext.addEventListener("statechange",d)}):this._nativeAudioContext.resume().catch(l=>{throw void 0===l||15===l.code?e():l})}suspend(){return this._nativeAudioContext.suspend().catch(l=>{throw void 0===l?e():l})}})(Sx,Ft,pn,tx,e4,t4,n4,r4,Ir),L_=(n=>e=>{const t=n.get(e);if(void 0===t)throw new Error("The context has no set of AudioWorkletNodes.");return t})(_x),o4=(n=>(e,t)=>{n(e).add(t)})(L_),Tx=(n=>(e,t,s=0,r=0)=>{const i=e[s];if(void 0===i)throw n();return dd(t)?i.connect(t,0,r):i.connect(t,0)})(er),a4=(n=>(e,t)=>{n(e).delete(t)})(L_),Ex=(n=>(e,t,s,r=0)=>void 0===t?e.forEach(i=>i.disconnect()):"number"==typeof t?gd(n,e,t).disconnect():dd(t)?void 0===s?e.forEach(i=>i.disconnect(t)):void 0===r?gd(n,e,s).disconnect(t,0):gd(n,e,s).disconnect(t,0,r):void 0===s?e.forEach(i=>i.disconnect(t)):gd(n,e,s).disconnect(t,0))(er),Ax=new WeakMap,c4=((n,e)=>t=>e(n,t))(Ax,Is),u4=((n,e,t,s,r,i,o,a,c,u,l,h,d)=>(f,p,g,_)=>{if(0===_.numberOfInputs&&0===_.numberOfOutputs)throw c();const m=Array.isArray(_.outputChannelCount)?_.outputChannelCount:Array.from(_.outputChannelCount);if(m.some(j=>j<1))throw c();if(m.length!==_.numberOfOutputs)throw e();if("explicit"!==_.channelCountMode)throw c();const w=_.channelCount*_.numberOfInputs,v=m.reduce((j,le)=>j+le,0),D=void 0===g.parameterDescriptors?0:g.parameterDescriptors.length;if(w+D>6||v>6)throw c();const y=new MessageChannel,C=[],b=[];for(let j=0;j<_.numberOfInputs;j+=1)C.push(o(f,{channelCount:_.channelCount,channelCountMode:_.channelCountMode,channelInterpretation:_.channelInterpretation,gain:1})),b.push(r(f,{channelCount:_.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:_.channelCount}));const S=[];if(void 0!==g.parameterDescriptors)for(const{defaultValue:j,maxValue:le,minValue:Wt,name:_t}of g.parameterDescriptors){const ke=i(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==_.parameterData[_t]?_.parameterData[_t]:void 0===j?0:j});Object.defineProperties(ke.offset,{defaultValue:{get:()=>void 0===j?0:j},maxValue:{get:()=>void 0===le?Cn:le},minValue:{get:()=>void 0===Wt?In:Wt}}),S.push(ke)}const M=s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,w+D)}),x=XA(p,f.sampleRate),R=a(f,x,w+D,Math.max(1,v)),T=r(f,{channelCount:Math.max(1,v),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,v)}),P=[];for(let j=0;j<_.numberOfOutputs;j+=1)P.push(s(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:m[j]}));for(let j=0;j<_.numberOfInputs;j+=1){C[j].connect(b[j]);for(let le=0;le<_.channelCount;le+=1)b[j].connect(M,le,j*_.channelCount+le)}const B=new WA(void 0===g.parameterDescriptors?[]:g.parameterDescriptors.map(({name:j},le)=>{const Wt=S[le];return Wt.connect(M,0,w+le),Wt.start(0),[j,Wt.offset]}));M.connect(R);let G=_.channelInterpretation,L=null;const z=0===_.numberOfOutputs?[R]:P,ue={get bufferSize(){return x},get channelCount(){return _.channelCount},set channelCount(j){throw t()},get channelCountMode(){return _.channelCountMode},set channelCountMode(j){throw t()},get channelInterpretation(){return G},set channelInterpretation(j){for(const le of C)le.channelInterpretation=j;G=j},get context(){return R.context},get inputs(){return C},get numberOfInputs(){return _.numberOfInputs},get numberOfOutputs(){return _.numberOfOutputs},get onprocessorerror(){return L},set onprocessorerror(j){"function"==typeof L&&ue.removeEventListener("processorerror",L),L="function"==typeof j?j:null,"function"==typeof L&&ue.addEventListener("processorerror",L)},get parameters(){return B},get port(){return y.port2},addEventListener:(...j)=>R.addEventListener(j[0],j[1],j[2]),connect:n.bind(null,z),disconnect:u.bind(null,z),dispatchEvent:(...j)=>R.dispatchEvent(j[0]),removeEventListener:(...j)=>R.removeEventListener(j[0],j[1],j[2])},se=new Map;var j;y.port1.addEventListener=(j=y.port1.addEventListener,(...le)=>{if("message"===le[0]){const Wt="function"==typeof le[1]?le[1]:"object"==typeof le[1]&&null!==le[1]&&"function"==typeof le[1].handleEvent?le[1].handleEvent:null;if(null!==Wt){const _t=se.get(le[1]);void 0!==_t?le[1]=_t:(le[1]=ke=>{l(f.currentTime,f.sampleRate,()=>Wt(ke))},se.set(Wt,le[1]))}}return j.call(y.port1,le[0],le[1],le[2])}),y.port1.removeEventListener=(j=>(...le)=>{if("message"===le[0]){const Wt=se.get(le[1]);void 0!==Wt&&(se.delete(le[1]),le[1]=Wt)}return j.call(y.port1,le[0],le[1],le[2])})(y.port1.removeEventListener);let Te=null;Object.defineProperty(y.port1,"onmessage",{get:()=>Te,set:j=>{"function"==typeof Te&&y.port1.removeEventListener("message",Te),Te="function"==typeof j?j:null,"function"==typeof Te&&(y.port1.addEventListener("message",Te),y.port1.start())}}),g.prototype.port=y.port1;let De=null;((n,e,t,s)=>{let r=v_.get(n);void 0===r&&(r=new WeakMap,v_.set(n,r));const i=zq(t,s);return r.set(e,i),i})(f,ue,g,_).then(j=>De=j);const qt=pd(_.numberOfInputs,_.channelCount),Sn=pd(_.numberOfOutputs,m),xe=void 0===g.parameterDescriptors?[]:g.parameterDescriptors.reduce((j,{name:le})=>({...j,[le]:new Float32Array(128)}),{});let $r=!0;const vi=()=>{_.numberOfOutputs>0&&R.disconnect(T);for(let j=0,le=0;j<_.numberOfOutputs;j+=1){const Wt=P[j];for(let _t=0;_t<m[j];_t+=1)T.disconnect(Wt,le+_t,_t);le+=m[j]}},V=new Map;R.onaudioprocess=({inputBuffer:j,outputBuffer:le})=>{if(null!==De){const Wt=h(ue);for(let _t=0;_t<x;_t+=128){for(let ke=0;ke<_.numberOfInputs;ke+=1)for(let bt=0;bt<_.channelCount;bt+=1)fd(j,qt[ke],bt,bt,_t);void 0!==g.parameterDescriptors&&g.parameterDescriptors.forEach(({name:ke},bt)=>{fd(j,xe,ke,w+bt,_t)});for(let ke=0;ke<_.numberOfInputs;ke+=1)for(let bt=0;bt<m[ke];bt+=1)0===Sn[ke][bt].byteLength&&(Sn[ke][bt]=new Float32Array(128));try{const ke=qt.map((fs,wi)=>{if(Wt[wi].size>0)return V.set(wi,x/128),fs;const ov=V.get(wi);return void 0===ov?[]:(fs.every(FW=>FW.every(PW=>0===PW))&&(1===ov?V.delete(wi):V.set(wi,ov-1)),fs)});$r=l(f.currentTime+_t/f.sampleRate,f.sampleRate,()=>De.process(ke,Sn,xe));for(let fs=0,wi=0;fs<_.numberOfOutputs;fs+=1){for(let Hu=0;Hu<m[fs];Hu+=1)zA(le,Sn[fs],Hu,wi+Hu,_t);wi+=m[fs]}}catch(ke){$r=!1,ue.dispatchEvent(new ErrorEvent("processorerror",{colno:ke.colno,filename:ke.filename,lineno:ke.lineno,message:ke.message}))}if(!$r){for(let ke=0;ke<_.numberOfInputs;ke+=1){C[ke].disconnect(b[ke]);for(let bt=0;bt<_.channelCount;bt+=1)b[_t].disconnect(M,bt,ke*_.channelCount+bt)}if(void 0!==g.parameterDescriptors){const ke=g.parameterDescriptors.length;for(let bt=0;bt<ke;bt+=1){const fs=S[bt];fs.disconnect(M,0,w+bt),fs.stop()}}M.disconnect(R),R.onaudioprocess=null,Gt?vi():Ha();break}}}};let Gt=!1;const ar=o(f,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),$a=()=>R.connect(ar).connect(f.destination),Ha=()=>{R.disconnect(ar),ar.disconnect()};return $a(),d(ue,()=>{if($r){Ha(),_.numberOfOutputs>0&&R.connect(T);for(let j=0,le=0;j<_.numberOfOutputs;j+=1){const Wt=P[j];for(let _t=0;_t<m[j];_t+=1)T.connect(Wt,le+_t,_t);le+=m[j]}}Gt=!0},()=>{$r&&($a(),vi()),Gt=!1})})(Tx,er,Ft,di,_u,Aa,Nn,yu,pn,Ex,V_,c4,hi),l4=((n,e,t,s,r)=>(i,o,a,c,u,l)=>{if(null!==a)try{const h=new a(i,c,l),d=new Map;let f=null;if(Object.defineProperties(h,{channelCount:{get:()=>l.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>f,set:p=>{"function"==typeof f&&h.removeEventListener("processorerror",f),f="function"==typeof p?p:null,"function"==typeof f&&h.addEventListener("processorerror",f)}}}),h.addEventListener=(p=h.addEventListener,(...g)=>{if("processorerror"===g[0]){const _="function"==typeof g[1]?g[1]:"object"==typeof g[1]&&null!==g[1]&&"function"==typeof g[1].handleEvent?g[1].handleEvent:null;if(null!==_){const m=d.get(g[1]);void 0!==m?g[1]=m:(g[1]=w=>{"error"===w.type?(Object.defineProperties(w,{type:{value:"processorerror"}}),_(w)):_(new ErrorEvent(g[0],{...w}))},d.set(_,g[1]))}}return p.call(h,"error",g[1],g[2]),p.call(h,...g)}),h.removeEventListener=(p=>(...g)=>{if("processorerror"===g[0]){const _=d.get(g[1]);void 0!==_&&(d.delete(g[1]),g[1]=_)}return p.call(h,"error",g[1],g[2]),p.call(h,g[0],g[1],g[2])})(h.removeEventListener),0!==l.numberOfOutputs){const p=t(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return h.connect(p).connect(i.destination),r(h,()=>p.disconnect(),()=>p.connect(i.destination))}return h}catch(h){throw 11===h.code?s():h}var p;if(void 0===u)throw s();return(n=>{const{port1:e}=new MessageChannel;try{e.postMessage(n)}finally{e.close()}})(l),e(i,o,u,l)})(Ft,u4,Nn,pn,hi),h4=((n,e,t,s,r,i,o,a,c,u,l,h,d,f,p,g)=>(_,m,w)=>{const v=new WeakMap;let D=null;const y=function(){var C=Re(function*(b,S){let M=l(b),x=null;const R=fn(M,S),T=Array.isArray(m.outputChannelCount)?m.outputChannelCount:Array.from(m.outputChannelCount);if(null===h){const P=T.reduce((z,ue)=>z+ue,0),B=r(S,{channelCount:Math.max(1,P),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,P)}),G=[];for(let z=0;z<b.numberOfOutputs;z+=1)G.push(s(S,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:T[z]}));const L=o(S,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:1});L.connect=e.bind(null,G),L.disconnect=c.bind(null,G),x=[B,G,L]}else R||(M=new h(S,_));if(v.set(S,null===x?M:x[2]),null!==x){if(null===D){if(void 0===w)throw new Error("Missing the processor constructor.");if(null===d)throw new Error("Missing the native OfflineAudioContext constructor.");const ue=b.channelCount*b.numberOfInputs,se=void 0===w.parameterDescriptors?0:w.parameterDescriptors.length,Te=ue+se;D=lU(b,0===Te?null:yield function(){var rt=Re(function*(){const qt=new d(Te,128*Math.ceil(b.context.length/128),S.sampleRate),Sn=[],xe=[];for(let V=0;V<m.numberOfInputs;V+=1)Sn.push(o(qt,{channelCount:m.channelCount,channelCountMode:m.channelCountMode,channelInterpretation:m.channelInterpretation,gain:1})),xe.push(r(qt,{channelCount:m.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:m.channelCount}));const $r=yield Promise.all(Array.from(b.parameters.values()).map(function(){var V=Re(function*(Gt){const ar=i(qt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Gt.value});return yield f(qt,Gt,ar.offset),ar});return function(Gt){return V.apply(this,arguments)}}())),vi=s(qt,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,ue+se)});for(let V=0;V<m.numberOfInputs;V+=1){Sn[V].connect(xe[V]);for(let Gt=0;Gt<m.channelCount;Gt+=1)xe[V].connect(vi,Gt,V*m.channelCount+Gt)}for(const[V,Gt]of $r.entries())Gt.connect(vi,0,ue+V),Gt.start(0);return vi.connect(qt.destination),yield Promise.all(Sn.map(V=>p(b,qt,V))),g(qt)});return function(){return rt.apply(this,arguments)}}()(),S,m,T,w,u)}const P=yield D,B=t(S,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[G,L,z]=x;null!==P&&(B.buffer=P,B.start(0)),B.connect(G);for(let ue=0,se=0;ue<b.numberOfOutputs;ue+=1){const Te=L[ue];for(let De=0;De<T[ue];De+=1)G.connect(Te,se+De,De);se+=T[ue]}return z}if(R)for(const[P,B]of b.parameters.entries())yield n(S,B,M.parameters.get(P));else for(const[P,B]of b.parameters.entries())yield f(S,B,M.parameters.get(P));return yield p(b,S,M),M});return function(S,M){return C.apply(this,arguments)}}();return{render(C,b){a(b,C);const S=v.get(b);return void 0!==S?Promise.resolve(S):y(C,b)}}})(tr,Tx,Ea,di,_u,Aa,Nn,a4,Ex,V_,it,Ta,Qt,nr,nn,yd),d4=(n=>e=>n.get(e))(bx),f4=(n=>(e,t)=>{n.set(e,t)})(Ax),xx=Cx?((n,e,t,s,r,i,o,a,c,u,l,h,d,f)=>class extends e{constructor(g,_,m){var w;const v=a(g),D=c(v),y=(n=>({...n,outputChannelCount:void 0!==n.outputChannelCount?n.outputChannelCount:1===n.numberOfInputs&&1===n.numberOfOutputs?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)}))({...aU,...m});(n=>{const{port1:e,port2:t}=new MessageChannel;try{e.postMessage(n)}finally{e.close(),t.close()}})(y);const b=y_.get(v)?.get(_),S=D||"closed"!==v.state?v:null!==(w=o(v))&&void 0!==w?w:v,M=r(S,D?null:g.baseLatency,u,_,b,y);super(g,!0,M,D?s(_,y,b):null);const R=[];M.parameters.forEach((P,B)=>{const G=t(this,D,P);R.push([B,G])}),this._nativeAudioWorkletNode=M,this._onprocessorerror=null,this._parameters=new WA(R),D&&n(v,this);const{activeInputs:T}=i(this);h(M,T)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(g){const _="function"==typeof g?f(this,g):null;this._nativeAudioWorkletNode.onprocessorerror=_;const m=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==m&&m===_?g:m}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}})(o4,xt,Os,h4,l4,bn,d4,st,ze,Ta,0,f4,0,Sa):void 0,Mx=((n,e)=>(t,s,r)=>{if(null===e)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,s,r)}catch(i){throw"SyntaxError"===i.name?n():i}})(pn,Qt),Ix=((n,e,t,s,r,i,o,a)=>(c,u)=>t(c).render(c,u).then(()=>Promise.all(Array.from(s(u)).map(l=>t(l).render(l,u)))).then(()=>r(u)).then(l=>("function"!=typeof l.copyFromChannel?(o(l),D_(l)):e(i,()=>i(l))||a(l),n.add(l),l)))(R_,Wn,I_,L_,yd,od,k_,F_),p4=((n,e,t,s,r)=>class extends n{constructor(o,a,c){let u;if("number"==typeof o&&void 0!==a&&void 0!==c)u={length:a,numberOfChannels:o,sampleRate:c};else{if("object"!=typeof o)throw new Error("The given parameters are not valid.");u=o}const{length:l,numberOfChannels:h,sampleRate:d}={...v3,...u},f=s(h,l,d);e(to,()=>to(f))||f.addEventListener("statechange",(()=>{let p=0;const g=_=>{"running"===this._state&&(p>0?(f.removeEventListener("statechange",g),_.stopImmediatePropagation(),this._waitForThePromiseToSettle(_)):p+=1)};return g})()),super(f,h),this._length=l,this._nativeOfflineAudioContext=f,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(t()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,ad(this)}))}_waitForThePromiseToSettle(o){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(o):setTimeout(()=>this._waitForThePromiseToSettle(o))}})(Sx,Wn,Ft,Mx,Ix),g4=((n,e)=>t=>{const s=n.get(t);return e(s)||e(t)})(rd,N_),m4=((n,e)=>t=>n.has(t)||e(t))(g_,O_),_4=((n,e)=>t=>n.has(t)||e(t))(m_,hx),y4=((n,e)=>t=>{const s=n.get(t);return e(s)||e(t)})(rd,ze);var n;function oe(n,e){if(!n)throw new Error(e)}function Nr(n,e,t=1/0){if(!(e<=n&&n<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${n}`)}function Nx(n){!n.isOffline&&"running"!==n.state&&B_('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let j_=console;function B_(...n){j_.warn(...n)}function cs(n){return typeof n>"u"}function Ae(n){return!cs(n)}function Or(n){return"number"==typeof n}function so(n){return"[object Object]"===Object.prototype.toString.call(n)&&n.constructor===Object}function zn(n){return Array.isArray(n)}function sr(n){return"string"==typeof n}function wd(n){return sr(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function b4(n,e,t){return new p4(n,e,t)}const ro="object"==typeof self?self:null,S4=ro&&(ro.hasOwnProperty("AudioContext")||ro.hasOwnProperty("webkitAudioContext"));class E4{constructor(e,t,s){this._callback=e,this._type=t,this._updateInterval=s,this._createClock()}_createWorker(){const e=new Blob([`\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ${(1e3*this._updateInterval).toFixed(1)};\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t`],{type:"text/javascript"}),t=URL.createObjectURL(e),s=new Worker(t);s.onmessage=this._callback.bind(this),this._worker=s}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},1e3*this._updateInterval)}_createClock(){if("worker"===this._type)try{this._createWorker()}catch{this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){this._updateInterval=Math.max(e,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*e,1))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}}function io(n){return _4(n)}function fi(n){return m4(n)}function Dd(n){return y4(n)}function xa(n){return g4(n)}function Ox(n){return n instanceof AudioBuffer}function A4(n,e){return"value"===n||io(e)||fi(e)||Ox(e)}function oo(n,...e){if(!e.length)return n;const t=e.shift();if(so(n)&&so(t))for(const s in t)A4(s,t[s])?n[s]=t[s]:so(t[s])?(n[s]||Object.assign(n,{[s]:{}}),oo(n[s],t[s])):Object.assign(n,{[s]:t[s]});return oo(n,...e)}function N(n,e,t=[],s){const r={},i=Array.from(e);if(so(i[0])&&s&&!Reflect.has(i[0],s)&&(Object.keys(i[0]).some(a=>Reflect.has(n,a))||(oo(r,{[s]:i[0]}),t.splice(t.indexOf(s),1),i.shift())),1===i.length&&so(i[0]))oo(r,i[0]);else for(let o=0;o<t.length;o++)Ae(i[o])&&(r[t[o]]=i[o]);return oo(n,r)}function Ma(n,e){return cs(n)?e:n}function ao(n,e){return e.forEach(t=>{Reflect.has(n,t)&&delete n[t]}),n}let pi=(()=>{class n{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||ro&&this.toString()===ro.TONE_DEBUG_CLASS)&&function v4(...n){j_.log(...n)}(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}return n.version=p_,n})();const $_=1e-6;function Cd(n,e){return n>e+$_}function H_(n,e){return Cd(n,e)||Rs(n,e)}function Rx(n,e){return n+$_<e}function Rs(n,e){return Math.abs(n-e)<$_}class rr extends pi{constructor(){super(),this.name="Timeline",this._timeline=[];const e=N(rr.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(oe(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length)oe(H_(e.time,this._timeline[this.length-1].time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e);else{const t=this._search(e.time);this._timeline.splice(t+1,0,e)}return this.length>this.memory&&this._timeline.splice(0,this.length-this.memory),this}remove(e){const t=this._timeline.indexOf(e);return-1!==t&&this._timeline.splice(t,1),this}get(e,t="time"){const s=this._search(e,t);return-1!==s?this._timeline[s]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){const s=this._search(e,t);return s+1<this._timeline.length?this._timeline[s+1]:null}getBefore(e){const t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];const s=this._search(e);return s-1>=0?this._timeline[s-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(Rs(this._timeline[t].time,e)){for(let s=t;s>=0&&Rs(this._timeline[s].time,e);s--)t=s;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else 1===this._timeline.length&&H_(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){const t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){const t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(0===this._timeline.length)return-1;let s=0;const r=this._timeline.length;let i=r;if(r>0&&this._timeline[r-1][t]<=e)return r-1;for(;s<i;){let o=Math.floor(s+(i-s)/2);const a=this._timeline[o],c=this._timeline[o+1];if(Rs(a[t],e)){for(let u=o;u<this._timeline.length&&Rs(this._timeline[u][t],e);u++)o=u;return o}if(Rx(a[t],e)&&Cd(c[t],e))return o;Cd(a[t],e)?i=o:s=o+1}return-1}_iterate(e,t=0,s=this._timeline.length-1){this._timeline.slice(t,s+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){const s=this._search(e);return-1!==s&&this._iterate(t,0,s),this}forEachAfter(e,t){const s=this._search(e);return this._iterate(t,s+1),this}forEachBetween(e,t,s){let r=this._search(e),i=this._search(t);return-1!==r&&-1!==i?(this._timeline[r].time!==e&&(r+=1),this._timeline[i].time===t&&(i-=1),this._iterate(s,r,i)):-1===r&&this._iterate(s,0,i),this}forEachFrom(e,t){let s=this._search(e);for(;s>=0&&this._timeline[s].time>=e;)s--;return this._iterate(t,s+1),this}forEachAtTime(e,t){const s=this._search(e);if(-1!==s&&Rs(this._timeline[s].time,e)){let r=s;for(let i=s;i>=0&&Rs(this._timeline[i].time,e);i--)r=i;this._iterate(i=>{t(i)},r,s)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const kx=[];function bd(n){kx.push(n)}const Fx=[];function Sd(n){Fx.push(n)}class wu extends pi{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(r=>{cs(this._events)&&(this._events={}),this._events.hasOwnProperty(r)||(this._events[r]=[]),this._events[r].push(t)}),this}once(e,t){const s=(...r)=>{t(...r),this.off(e,s)};return this.on(e,s),this}off(e,t){return e.split(/\W+/).forEach(r=>{if(cs(this._events)&&(this._events={}),this._events.hasOwnProperty(e))if(cs(t))this._events[e]=[];else{const i=this._events[e];for(let o=i.length-1;o>=0;o--)i[o]===t&&i.splice(o,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){const s=this._events[e].slice(0);for(let r=0,i=s.length;r<i;r++)s[r].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{const s=Object.getOwnPropertyDescriptor(wu.prototype,t);Object.defineProperty(e.prototype,t,s)})}dispose(){return super.dispose(),this._events=void 0,this}}class Px extends wu{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Du extends Px{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new rr,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;const e=N(Du.getDefaults(),arguments,["context"]);this._context=e.context?e.context:function C4(n){return new i4(n)}({latencyHint:e.latencyHint}),this._ticker=new E4(this.emit.bind(this,"tick"),e.clockSource,e.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(e.latencyHint),this.lookAhead=e.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(function N4(n){kx.forEach(e=>e(n))}(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,s){return this._context.createBuffer(e,t,s)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,s){return this._context.createPeriodicWave(e,t,s)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return oe(xa(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return oe(xa(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return oe(xa(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){oe(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){oe(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){oe(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){oe(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return function T4(n,e,t){return oe(Ae(xx),"This node only works in a secure context (https or localhost)"),new xx(n,e,t)}(this.rawContext,e,t)}addAudioWorkletModule(e,t){return St(this,void 0,void 0,function*(){oe(Ae(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(t)||this._workletModules.set(t,this.rawContext.audioWorklet.addModule(e)),yield this._workletModules.get(t)})}workletsAreReady(){return St(this,void 0,void 0,function*(){const e=[];this._workletModules.forEach(t=>e.push(t)),yield Promise.all(e)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get latencyHint(){return this._latencyHint}_setLatencyHint(e){let t=0;if(this._latencyHint=e,sr(e))switch(e){case"interactive":t=.1;break;case"playback":t=.5;break;case"balanced":t=.25}this.lookAhead=t,this.updateInterval=t/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return xa(this._context)?this._context.resume():Promise.resolve()}close(){return St(this,void 0,void 0,function*(){xa(this._context)&&(yield this._context.close()),this._initialized&&function O4(n){Fx.forEach(e=>e(n))}(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{const t=this._context.createBuffer(1,128,this._context.sampleRate),s=t.getChannelData(0);for(let i=0;i<s.length;i++)s[i]=e;const r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=t,r.loop=!0,r.start(0),this._constants.set(e,r),r}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this}_timeoutLoop(){const e=this.now();let t=this._timeouts.peek();for(;this._timeouts.length&&t&&t.time<=e;)t.callback(),this._timeouts.shift(),t=this._timeouts.peek()}setTimeout(e,t){this._timeoutIds++;const s=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:s+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){const s=++this._timeoutIds,r=()=>{const i=this.now();this._timeouts.add({callback:()=>{e(),r()},id:s,time:i+t})};return r(),s}}function ht(n,e){zn(e)?e.forEach(t=>ht(n,t)):Object.defineProperty(n,e,{enumerable:!0,writable:!1})}function U_(n,e){zn(e)?e.forEach(t=>U_(n,t)):Object.defineProperty(n,e,{writable:!0})}const Xe=()=>{};let Rr=(()=>{class n extends pi{constructor(){super(),this.name="ToneAudioBuffer",this.onload=Xe;const t=N(n.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,t.url&&Ox(t.url)||t.url instanceof n?this.set(t.url):sr(t.url)&&this.load(t.url).catch(t.onerror)}static getDefaults(){return{onerror:Xe,onload:Xe,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:us().sampleRate}set(t){return t instanceof n?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return St(this,void 0,void 0,function*(){const s=n.load(t).then(r=>{this.set(r),this.onload(this)});n.downloads.push(s);try{yield s}finally{const r=n.downloads.indexOf(s);n.downloads.splice(r,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){const s=zn(t)&&t[0].length>0,r=s?t.length:1,i=s?t[0].length:t.length,o=us(),a=o.createBuffer(r,i,o.sampleRate),c=s||1!==r?t:[t];for(let u=0;u<r;u++)a.copyToChannel(c[u],u);return this._buffer=a,this}toMono(t){if(Or(t))this.fromArray(this.toArray(t));else{let s=new Float32Array(this.length);const r=this.numberOfChannels;for(let i=0;i<r;i++){const o=this.toArray(i);for(let a=0;a<o.length;a++)s[a]+=o[a]}s=s.map(i=>i/r),this.fromArray(s)}return this}toArray(t){if(Or(t))return this.getChannelData(t);if(1===this.numberOfChannels)return this.toArray(0);{const s=[];for(let r=0;r<this.numberOfChannels;r++)s[r]=this.getChannelData(r);return s}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,s=this.duration){const r=Math.floor(t*this.sampleRate),i=Math.floor(s*this.sampleRate);oe(r<i,"The start time must be less than the end time");const o=i-r,a=us().createBuffer(this.numberOfChannels,o,this.sampleRate);for(let c=0;c<this.numberOfChannels;c++)a.copyToChannel(this.getChannelData(c).subarray(r,i),c);return new n(a)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return(new n).fromArray(t)}static fromUrl(t){return St(this,void 0,void 0,function*(){return yield(new n).load(t)})}static load(t){return St(this,void 0,void 0,function*(){const s=t.match(/\[([^\]\[]+\|.+)\]$/);if(s){const c=s[1].split("|");let u=c[0];for(const l of c)if(n.supportsType(l)){u=l;break}t=t.replace(s[0],u)}const r=""===n.baseUrl||n.baseUrl.endsWith("/")?n.baseUrl:n.baseUrl+"/",i=yield fetch(r+t);if(!i.ok)throw new Error(`could not load url: ${t}`);const o=yield i.arrayBuffer();return yield us().decodeAudioData(o)})}static supportsType(t){const s=t.split("."),r=s[s.length-1];return""!==document.createElement("audio").canPlayType("audio/"+r)}static loaded(){return St(this,void 0,void 0,function*(){for(yield Promise.resolve();n.downloads.length;)yield n.downloads[0]})}}return n.baseUrl="",n.downloads=[],n})();class q_ extends Du{constructor(){super({clockSource:"offline",context:Dd(arguments[0])?arguments[0]:b4(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:Dd(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=Dd(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return St(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;const s=Math.floor(this.sampleRate/128);e&&t%s==0&&(yield new Promise(r=>setTimeout(r,1)))}})}render(e=!0){return St(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);const t=yield this._context.startRendering();return new Rr(t)})}close(){return Promise.resolve()}}const Vx=new class R4 extends Px{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,s){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,s){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e,t){return St(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}};let Ia=Vx;function us(){return Ia===Vx&&S4&&function k4(n){Ia=xa(n)?new Du(n):Dd(n)?new q_(n):n}(new Du),Ia}if(ro&&!ro.TONE_SILENCE_LOGGING){console.log(`%c * Tone.js ${"v"}${p_} * `,"background: #000; color: #fff")}function Lx(n){return Math.pow(2,n/12)}let Td=440;function co(n){return Math.round(jx(n))}function jx(n){return 69+12*Math.log2(n/Td)}function Bx(n){return Td*Math.pow(2,(n-69)/12)}class G_ extends pi{constructor(e,t,s){super(),this.defaultUnits="s",this._val=t,this._units=s,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{const s=parseInt(e,10),r="."===t?1.5:1;return 1===s?this._beatsToUnits(this._getTimeSignature())*r:this._beatsToUnits(4/s)*r},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{const t=parseInt(e,10);return this._beatsToUnits(8/(3*Math.floor(t)))},regexp:/^(\d+)t$/i},tr:{method:(e,t,s)=>{let r=0;return e&&"0"!==e&&(r+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&"0"!==t&&(r+=this._beatsToUnits(parseFloat(t))),s&&"0"!==s&&(r+=this._beatsToUnits(parseFloat(s)/4)),r},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof G_&&this.fromType(this._val),cs(this._val))return this._noArg();if(sr(this._val)&&cs(this._units)){for(const e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(so(this._val)){let e=0;for(const t in this._val)if(Ae(this._val[t])){const s=this._val[t];e+=new this.constructor(this.context,t).valueOf()*s}return e}if(Ae(this._units)){const e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}return sr(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi()}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return 1e3*this.toSeconds()}}class ls extends G_{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{const t=new ls(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){const s=new this.constructor(this.context,e).valueOf(),r=this.valueOf();return r+(Math.round(r/s)*s-r)*t}toNotation(){const e=this.toSeconds(),t=["1m"];for(let i=1;i<9;i++){const o=Math.pow(2,i);t.push(o+"n."),t.push(o+"n"),t.push(o+"t")}t.push("0");let s=t[0],r=new ls(this.context,t[0]).toSeconds();return t.forEach(i=>{const o=new ls(this.context,i).toSeconds();Math.abs(o-e)<Math.abs(r-e)&&(s=i,r=o)}),s}toBarsBeatsSixteenths(){const e=this._beatsToUnits(1);let t=this.valueOf()/e;t=parseFloat(t.toFixed(4));const s=Math.floor(t/this._getTimeSignature());let r=t%1*4;t=Math.floor(t)%this._getTimeSignature();const i=r.toString();return i.length>3&&(r=parseFloat(parseFloat(i).toFixed(3))),[s,t,r].join(":")}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.round(t*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return co(this.toFrequency())}_now(){return this.context.now()}}class On extends ls{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return function V4(){return Td}()}static set A4(e){!function L4(n){Td=n}(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return"midi"===this.defaultUnits?e:On.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(e,t){const r=j4[e.toLowerCase()]+12*(parseInt(t,10)+1);return"midi"===this.defaultUnits?r:On.mtof(r)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,s){let r=1;return e&&"0"!==e&&(r*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&"0"!==t&&(r*=this._beatsToUnits(parseFloat(t))),s&&"0"!==s&&(r*=this._beatsToUnits(parseFloat(s)/4)),r}}})}transpose(e){return new On(this.context,this.valueOf()*Lx(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return co(this.valueOf())}toNote(){const e=this.toFrequency(),t=Math.log2(e/On.A4);let s=Math.round(12*t)+57;const r=Math.floor(s/12);return r<0&&(s+=-12*r),B4[s%12]+r.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(60*e/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return Bx(e)}static ftom(e){return co(e)}}const j4={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},B4=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class Na extends ls{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class Rn extends pi{constructor(){super();const e=N(Rn.getDefaults(),arguments,["context"]);this.context=this.defaultContext?this.defaultContext:e.context}static getDefaults(){return{context:us()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return new ls(this.context,e).toSeconds()}toFrequency(e){return new On(this.context,e).toFrequency()}toTicks(e){return new Na(this.context,e).toTicks()}_getPartialProperties(e){const t=this.get();return Object.keys(t).forEach(s=>{cs(e[s])&&delete t[s]}),t}get(){const e=function M4(n){return n.constructor.getDefaults()}(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){const s=this[t];Ae(s)&&Ae(s.value)&&Ae(s.setValueAtTime)?e[t]=s.value:s instanceof Rn?e[t]=s._getPartialProperties(e[t]):zn(s)||Or(s)||sr(s)||function D4(n){return"boolean"==typeof n}(s)?e[t]=s:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&Ae(this[t])&&(this[t]&&Ae(this[t].value)&&Ae(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof Rn?this[t].set(e[t]):this[t]=e[t])}),this}}class W_ extends rr{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){const t=this.get(e);return null!==t?t.state:this._initial}setStateAtTime(e,t,s){return Nr(t,0),this.add(Object.assign({},s,{state:e,time:t})),this}getLastState(e,t){for(let r=this._search(t);r>=0;r--){const i=this._timeline[r];if(i.state===e)return i}}getNextState(e,t){const s=this._search(t);if(-1!==s)for(let r=s;r<this._timeline.length;r++){const i=this._timeline[r];if(i.state===e)return i}}}class Qe extends Rn{constructor(){super(N(Qe.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;const e=N(Qe.getDefaults(),arguments,["param","units","convert"]);for(oe(Ae(e.param)&&(io(e.param)||e.param instanceof Qe),"param must be an AudioParam");!io(e.param);)e.param=e.param._param;this._swappable=!!Ae(e.swappable)&&e.swappable,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new rr(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,Ae(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Rn.getDefaults(),{convert:!0,units:"number"})}get value(){const e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return Ae(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue}get maxValue(){return Ae(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return Ae(this.maxValue)&&Ae(this.minValue)&&Nr(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?function F4(n){return Math.pow(10,n/20)}(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&"decibels"===this.units?function P4(n){return Math.log(n)/Math.LN10*20}(e):e}setValueAtTime(e,t){const s=this.toSeconds(t),r=this._fromType(e);return oe(isFinite(r)&&isFinite(s),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this.log(this.units,"setValueAtTime",e,s),this._events.add({time:s,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,s),this}getValueAtTime(e){const t=Math.max(this.toSeconds(e),0),s=this._events.getAfter(t),r=this._events.get(t);let i=this._initialValue;if(null===r)i=this._initialValue;else if("setTargetAtTime"!==r.type||null!==s&&"setValueAtTime"!==s.type)if(null===s)i=r.value;else if("linearRampToValueAtTime"===s.type||"exponentialRampToValueAtTime"===s.type){let o=r.value;if("setTargetAtTime"===r.type){const a=this._events.getBefore(r.time);o=null===a?this._initialValue:a.value}i="linearRampToValueAtTime"===s.type?this._linearInterpolate(r.time,o,s.time,s.value,t):this._exponentialInterpolate(r.time,o,s.time,s.value,t)}else i=r.value;else{const o=this._events.getBefore(r.time);let a;a=null===o?this._initialValue:o.value,"setTargetAtTime"===r.type&&(i=this._exponentialApproach(r.time,a,r.value,r.constant,t))}return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),0===this._fromType(t)&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){const s=this._fromType(e),r=this.toSeconds(t);return oe(isFinite(s)&&isFinite(r),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(s),this._events.add({time:r,type:"linearRampToValueAtTime",value:s}),this.log(this.units,"linearRampToValueAtTime",e,r),this._param.linearRampToValueAtTime(s,r),this}exponentialRampToValueAtTime(e,t){let s=this._fromType(e);s=Rs(s,0)?this._minOutput:s,this._assertRange(s);const r=this.toSeconds(t);return oe(isFinite(s)&&isFinite(r),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:r,type:"exponentialRampToValueAtTime",value:s}),this.log(this.units,"exponentialRampToValueAtTime",e,r),this._param.exponentialRampToValueAtTime(s,r),this}exponentialRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialRampToValueAtTime(e,s+this.toSeconds(t)),this}linearRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.linearRampToValueAtTime(e,s+this.toSeconds(t)),this}targetRampTo(e,t,s){return s=this.toSeconds(s),this.setRampPoint(s),this.exponentialApproachValueAtTime(e,s,t),this}exponentialApproachValueAtTime(e,t,s){t=this.toSeconds(t),s=this.toSeconds(s);const r=Math.log(s+1)/Math.log(200);return this.setTargetAtTime(e,t,r),this.cancelAndHoldAtTime(t+.9*s),this.linearRampToValueAtTime(e,t+s),this}setTargetAtTime(e,t,s){const r=this._fromType(e);oe(isFinite(s)&&s>0,"timeConstant must be a number greater than 0");const i=this.toSeconds(t);return this._assertRange(r),oe(isFinite(r)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:s,time:i,type:"setTargetAtTime",value:r}),this.log(this.units,"setTargetAtTime",e,i,s),this._param.setTargetAtTime(r,i,s),this}setValueCurveAtTime(e,t,s,r=1){s=this.toSeconds(s),t=this.toSeconds(t);const i=this._fromType(e[0])*r;this.setValueAtTime(this._toType(i),t);const o=s/(e.length-1);for(let a=1;a<e.length;a++){const c=this._fromType(e[a])*r;this.linearRampToValueAtTime(this._toType(c),t+a*o)}return this}cancelScheduledValues(e){const t=this.toSeconds(e);return oe(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){const t=this.toSeconds(e),s=this._fromType(this.getValueAtTime(t));oe(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+s);const r=this._events.get(t),i=this._events.getAfter(t);return r&&Rs(r.time,t)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),"linearRampToValueAtTime"===i.type?this.linearRampToValueAtTime(this._toType(s),t):"exponentialRampToValueAtTime"===i.type&&this.exponentialRampToValueAtTime(this._toType(s),t)),this._events.add({time:t,type:"setValueAtTime",value:s}),this._param.setValueAtTime(s,t),this}rampTo(e,t=.1,s){return"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(e,t,s):this.linearRampTo(e,t,s),this}apply(e){const t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);const s=this._events.get(t);if(s&&"setTargetAtTime"===s.type){const r=this._events.getAfter(s.time),i=r?r.time:t+2,o=(i-t)/10;for(let a=t;a<i;a+=o)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,r=>{"cancelScheduledValues"===r.type?e.cancelScheduledValues(r.time):"setTargetAtTime"===r.type?e.setTargetAtTime(r.value,r.time,r.constant):e[r.type](r.value,r.time)}),this}setParam(e){oe(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,s,r,i){return s+(t-s)*Math.exp(-(i-e)/r)}_linearInterpolate(e,t,s,r,i){return t+(i-e)/(s-e)*(r-t)}_exponentialInterpolate(e,t,s,r,i){return t*Math.pow(r/t,(i-e)/(s-e))}}class me extends Rn{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return Ae(this.input)?io(this.input)||this.input instanceof Qe?1:this.input.numberOfInputs:0}get numberOfOutputs(){return Ae(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return Ae(e)&&(e instanceof me||fi(e))}_getInternalNodes(){const e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(s=>{s.channelCount=e.channelCount,s.channelCountMode=e.channelCountMode,s.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){const e=this._getInternalNodes();oe(e.length>0,"ToneAudioNode does not have any internal nodes");const t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){const t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,s=0){return Oa(this,e,t,s),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return B_("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,s=0){return function $4(n,e,t=0,s=0){if(Ae(e))for(;e instanceof me;)e=e.input;for(;!fi(n);)Ae(n.output)&&(n=n.output);io(e)?n.disconnect(e,t):fi(e)?n.disconnect(e,t,s):n.disconnect()}(this,e,t,s),this}chain(...e){return Cu(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),Ae(this.input)&&(this.input instanceof me?this.input.dispose():fi(this.input)&&this.input.disconnect()),Ae(this.output)&&(this.output instanceof me?this.output.dispose():fi(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function Cu(...n){const e=n.shift();n.reduce((t,s)=>(t instanceof me?t.connect(s):fi(t)&&Oa(t,s),s),e)}function Oa(n,e,t=0,s=0){for(oe(Ae(n),"Cannot connect from undefined node"),oe(Ae(e),"Cannot connect to undefined node"),(e instanceof me||fi(e))&&oe(e.numberOfInputs>0,"Cannot connect to node with no inputs"),oe(n.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof me||e instanceof Qe;)Ae(e.input)&&(e=e.input);for(;n instanceof me;)Ae(n.output)&&(n=n.output);io(e)?n.connect(e,t):n.connect(e,t,s)}class Zt extends me{constructor(){super(N(Zt.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;const e=N(Zt.getDefaults(),arguments,["gain","units"]);this.gain=new Qe({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),ht(this,"gain")}static getDefaults(){return Object.assign(me.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class Ra extends me{constructor(e){super(e),this.onended=Xe,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Zt({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){const s=this.toSeconds(t);return-1!==this._startTime&&s>=this._startTime&&(-1===this._stopTime||s<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(me.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:Xe})}_startGain(e,t=1){oe(-1===this._startTime,"Source cannot be started more than once");const s=this.toSeconds(this._fadeIn);return this._startTime=e+s,this._startTime=Math.max(this._startTime,this.context.currentTime),s>0?(this._gainNode.gain.setValueAtTime(0,e),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(t,e+s):this._gainNode.gain.exponentialApproachValueAtTime(t,e,s)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){oe(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();const t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.context.currentTime),t>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const s="exponential"===this._curve?2*t:0;this._stopSource(this.now()+s),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==Xe&&(this.onended(this),this.onended=Xe,!this.context.isOffline)){const e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),oe(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}}class Ed extends Ra{constructor(){super(N(Ed.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();const e=N(Ed.getDefaults(),arguments,["offset"]);Oa(this._source,this._gainNode),this.offset=new Qe({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(Ra.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class ot extends me{constructor(){super(N(ot.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;const e=N(ot.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Ed({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(me.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,s=0){return z_(this,e,t,s),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,s){return this._param.exponentialRampTo(e,t,s),this}linearRampTo(e,t,s){return this._param.linearRampTo(e,t,s),this}targetRampTo(e,t,s){return this._param.targetRampTo(e,t,s),this}exponentialApproachValueAtTime(e,t,s){return this._param.exponentialApproachValueAtTime(e,t,s),this}setTargetAtTime(e,t,s){return this._param.setTargetAtTime(e,t,s),this}setValueCurveAtTime(e,t,s,r){return this._param.setValueCurveAtTime(e,t,s,r),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,s){return this._param.rampTo(e,t,s),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}}function z_(n,e,t,s){(e instanceof Qe||io(e)||e instanceof ot&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof ot&&(e.overridden=!0)),Oa(n,e,t,s)}class Ad extends Qe{constructor(){super(N(Ad.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new rr(1/0),this._multiplier=1;const e=N(Ad.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(Qe.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,s){t=this.toSeconds(t),this.setRampPoint(t);const r=this._fromType(e),i=this._events.get(t),o=Math.round(Math.max(1/s,1));for(let a=0;a<=o;a++){const c=s*a+t,u=this._exponentialApproach(i.time,i.value,r,s,c);this.linearRampToValueAtTime(this._toType(u),c)}return this}setValueAtTime(e,t){const s=this.toSeconds(t);super.setValueAtTime(e,t);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}linearRampToValueAtTime(e,t){const s=this.toSeconds(t);super.linearRampToValueAtTime(e,t);const r=this._events.get(s),i=this._events.previousEvent(r),o=this._getTicksUntilEvent(i,s);return r.ticks=Math.max(o,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);const s=this._fromType(e),r=this._events.get(t),i=Math.round(Math.max(10*(t-r.time),1)),o=(t-r.time)/i;for(let a=0;a<=i;a++){const c=o*a+r.time,u=this._exponentialInterpolate(r.time,r.value,t,s,c);this.linearRampToValueAtTime(this._toType(u),c)}return this}_getTicksUntilEvent(e,t){if(null===e)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(cs(e.ticks)){const o=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(o,e.time)}const s=this._fromType(this.getValueAtTime(e.time));let r=this._fromType(this.getValueAtTime(t));const i=this._events.get(t);return i&&i.time===t&&"setValueAtTime"===i.type&&(r=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(s+r)+e.ticks}getTicksAtTime(e){const t=this.toSeconds(e),s=this._events.get(t);return Math.max(this._getTicksUntilEvent(s,t),0)}getDurationOfTicks(e,t){const s=this.toSeconds(t),r=this.getTicksAtTime(t);return this.getTimeOfTick(r+e)-s}getTimeOfTick(e){const t=this._events.get(e,"ticks"),s=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&s&&"linearRampToValueAtTime"===s.type&&t.value!==s.value){const r=this._fromType(this.getValueAtTime(t.time)),o=(this._fromType(this.getValueAtTime(s.time))-r)/(s.time-t.time),a=Math.sqrt(Math.pow(r,2)-2*o*(t.ticks-e)),c=(-r+a)/o,u=(-r-a)/o;return(c>0?c:u)+t.time}return t?0===t.value?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){const s=this.toSeconds(t),r=this.toSeconds(e),i=this.getTicksAtTime(s);return this.getTicksAtTime(s+r)-i}_fromType(e){return"bpm"===this.units&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return"bpm"===this.units&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){const t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}}class xd extends ot{constructor(){super(N(xd.getDefaults(),arguments,["value"])),this.name="TickSignal";const e=N(xd.getDefaults(),arguments,["value"]);this.input=this._param=new Ad({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(ot.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}}class Md extends Rn{constructor(){super(N(Md.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new W_,this._tickOffset=new rr;const e=N(Md.getDefaults(),arguments,["frequency"]);this.frequency=new xd({context:this.context,units:e.units,value:e.frequency}),ht(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},Rn.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){const s=this.toSeconds(e);return"started"!==this._state.getValueAtTime(s)&&(this._state.setStateAtTime("started",s),Ae(t)&&this.setTicksAtTime(t,s)),this}stop(e){const t=this.toSeconds(e);if("stopped"===this._state.getValueAtTime(t)){const s=this._state.get(t);s&&s.time>0&&(this._tickOffset.cancel(s.time),this._state.cancel(s.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this}pause(e){const t=this.toSeconds(e);return"started"===this._state.getValueAtTime(t)&&this._state.setStateAtTime("paused",t),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this}getTicksAtTime(e){const t=this.toSeconds(e),s=this._state.getLastState("stopped",t),r={state:"paused",time:t};this._state.add(r);let i=s,o=0;return this._state.forEachBetween(s.time,t+this.sampleTime,a=>{let c=i.time;const u=this._tickOffset.get(a.time);u&&u.time>=i.time&&(o=u.ticks,c=u.time),"started"===i.state&&"started"!==a.state&&(o+=this.frequency.getTicksAtTime(a.time)-this.frequency.getTicksAtTime(c)),i=a}),this._state.remove(r),o}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){const t=this.now(),s=this.frequency.timeToTicks(e,t);this.setTicksAtTime(s,t)}getSecondsAtTime(e){e=this.toSeconds(e);const t=this._state.getLastState("stopped",e),s={state:"paused",time:e};this._state.add(s);let r=t,i=0;return this._state.forEachBetween(t.time,e+this.sampleTime,o=>{let a=r.time;const c=this._tickOffset.get(o.time);c&&c.time>=r.time&&(i=c.seconds,a=c.time),"started"===r.state&&"started"!==o.state&&(i+=o.time-a),r=o}),this._state.remove(s),i}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){const s=this._tickOffset.get(t),r=this._state.get(t),i=Math.max(s.time,r.time),o=this.frequency.getTicksAtTime(i)+e-s.ticks;return this.frequency.getTimeOfTick(o)}forEachTickBetween(e,t,s){let r=this._state.get(e);this._state.forEachBetween(e,t,o=>{r&&"started"===r.state&&"started"!==o.state&&this.forEachTickBetween(Math.max(r.time,e),o.time-this.sampleTime,s),r=o});let i=null;if(r&&"started"===r.state){const o=Math.max(r.time,e),a=this.frequency.getTicksAtTime(o),u=a-this.frequency.getTicksAtTime(r.time);let l=Math.ceil(u)-u;l=Rs(l,1)?0:l;let h=this.frequency.getTimeOfTick(a+l);for(;h<t;){try{s(h,Math.round(this.getTicksAtTime(h)))}catch(d){i=d;break}h+=this.frequency.getDurationOfTicks(1,h)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}}class bu extends Rn{constructor(){super(N(bu.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=Xe,this._lastUpdate=0,this._state=new W_("stopped"),this._boundLoop=this._loop.bind(this);const e=N(bu.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new Md({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,ht(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(Rn.getDefaults(),{callback:Xe,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){Nx(this.context);const s=this.toSeconds(e);return this.log("start",s),"started"!==this._state.getValueAtTime(s)&&(this._state.setStateAtTime("started",s),this._tickSource.start(s,t),s<this._lastUpdate&&this.emit("start",s,t)),this}stop(e){const t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){const t=this.toSeconds(e);return"started"===this._state.getValueAtTime(t)&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){const s=this.toSeconds(t),r=this.getTicksAtTime(s);return this._tickSource.getTimeOfTick(r+e,s)}_loop(){const e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,s=>{switch(s.state){case"started":const r=this._tickSource.getTicksAtTime(s.time);this.emit("start",s.time,r);break;case"stopped":0!==s.time&&this.emit("stop",s.time);break;case"paused":this.emit("pause",s.time)}}),this._tickSource.forEachTickBetween(e,t,(s,r)=>{this.callback(s,r)}))}getStateAtTime(e){const t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}wu.mixin(bu);class Z_ extends pi{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const e=N(Z_.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++,this.add(t,e.urls[t],this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:Xe,onload:Xe,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return oe(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,0===this._loadingCount&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,s=Xe,r=Xe){return sr(t)?this._buffers.set(e.toString(),new Rr(this.baseUrl+t,s,r)):this._buffers.set(e.toString(),new Rr(t,s,r)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}}class Su extends On{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return co(super._frequencyToUnits(e))}_ticksToUnits(e){return co(super._ticksToUnits(e))}_beatsToUnits(e){return co(super._beatsToUnits(e))}_secondsToUnits(e){return co(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return Bx(this.toMidi())}transpose(e){return new Su(this.context,this.toMidi()+e)}}class ir extends Na{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class H4 extends Rn{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new rr,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){const e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){const t=this._events.shift();t&&e-t.time<=this.expiration&&t.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}bd(n=>{n.draw=new H4({context:n})}),Sd(n=>{n.draw.dispose()});class U4 extends pi{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){oe(Ae(e.time),"Events must have a time property"),oe(Ae(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new q4(e.time,e.time+e.duration,e);for(null===this._root?this._root=t:this._root.insert(t),this._length++;null!==t;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(null!==this._root){const t=[];this._root.search(e.time,t);for(const s of t)if(s.event===e){this._removeNode(s),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,null!==this._root&&(this._root.parent=null)}_replaceNodeInParent(e,t){null!==e.parent?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(null===e.left&&null===e.right)this._replaceNodeInParent(e,null);else if(null===e.right)this._replaceNodeInParent(e,e.left);else if(null===e.left)this._replaceNodeInParent(e,e.right);else{let s,r=null;if(e.getBalance()>0)if(null===e.left.right)s=e.left,s.right=e.right,r=s;else{for(s=e.left.right;null!==s.right;)s=s.right;s.parent&&(s.parent.right=s.left,r=s.parent,s.left=e.left,s.right=e.right)}else if(null===e.right.left)s=e.right,s.left=e.left,r=s;else{for(s=e.right.left;null!==s.left;)s=s.left;s.parent&&(s.parent.left=s.right,r=s.parent,s.left=e.left,s.right=e.right)}null!==e.parent?e.isLeftChild()?e.parent.left=s:e.parent.right=s:this._setRoot(s),r&&this._rebalance(r)}e.dispose()}_rotateLeft(e){const t=e.parent,s=e.isLeftChild(),r=e.right;r&&(e.right=r.left,r.left=e),null!==t?s?t.left=r:t.right=r:this._setRoot(r)}_rotateRight(e){const t=e.parent,s=e.isLeftChild(),r=e.left;r&&(e.left=r.right,r.right=e),null!==t?s?t.left=r:t.right=r:this._setRoot(r)}_rebalance(e){const t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(null!==this._root){const t=[];if(this._root.search(e,t),t.length>0){let s=t[0];for(let r=1;r<t.length;r++)t[r].low>s.low&&(s=t[r]);return s.event}}return null}forEach(e){if(null!==this._root){const t=[];this._root.traverse(s=>t.push(s)),t.forEach(s=>{s.event&&e(s.event)})}return this}forEachAtTime(e,t){if(null!==this._root){const s=[];this._root.search(e,s),s.forEach(r=>{r.event&&t(r.event)})}return this}forEachFrom(e,t){if(null!==this._root){const s=[];this._root.searchAfter(e,s),s.forEach(r=>{r.event&&t(r.event)})}return this}dispose(){return super.dispose(),null!==this._root&&this._root.traverse(e=>e.dispose()),this._root=null,this}}class q4{constructor(e,t,s){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=s,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?null===this.left?this.left=e:this.left.insert(e):null===this.right?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(null!==this.left&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&null!==this.right&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),null!==this.left&&this.left.searchAfter(e,t)),null!==this.right&&this.right.searchAfter(e,t)}traverse(e){e(this),null!==this.left&&this.left.traverse(e),null!==this.right&&this.right.traverse(e)}updateHeight(){this.height=null!==this.left&&null!==this.right?Math.max(this.left.height,this.right.height)+1:null!==this.right?this.right.height+1:null!==this.left?this.left.height+1:0}updateMax(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return null!==this.left&&null!==this.right?e=this.left.height-this.right.height:null!==this.left?e=this.left.height+1:null!==this.right&&(e=-(this.right.height+1)),e}isLeftChild(){return null!==this.parent&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,null!==e&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,null!==e&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class uo extends me{constructor(){super(N(uo.getDefaults(),arguments,["volume"])),this.name="Volume";const e=N(uo.getDefaults(),arguments,["volume"]);this.input=this.output=new Zt({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,ht(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(me.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class Id extends me{constructor(){super(N(Id.getDefaults(),arguments)),this.name="Destination",this.input=new uo({context:this.context}),this.output=new Zt({context:this.context}),this.volume=this.input.volume;const e=N(Id.getDefaults(),arguments);Cu(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(me.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Cu(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}bd(n=>{n.destination=new Id({context:n})}),Sd(n=>{n.destination.dispose()});class G4 extends pi{constructor(e){super(),this.name="TimelineValue",this._timeline=new rr({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){const t=this._timeline.get(e);return t?t.value:this._initialValue}}let Nd=(()=>{class n{constructor(t,s){this.id=n._eventId++;const r=Object.assign(n.getDefaults(),s);this.transport=t,this.callback=r.callback,this._once=r.once,this.time=r.time}static getDefaults(){return{callback:Xe,once:!1,time:0}}invoke(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}return n._eventId=0,n})();class Y_ extends Nd{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const s=Object.assign(Y_.getDefaults(),t);this.duration=new ir(e.context,s.duration).valueOf(),this._interval=new ir(e.context,s.interval).valueOf(),this._nextTick=s.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},Nd.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvents(e){const t=this.transport.getTicksAtTime(e);t>=this.time&&t>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ir(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;const t=this.transport.getTicksAtTime(e);t>this.time&&(this._nextTick=this.time+Math.ceil((t-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new ir(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new ir(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}}class Tu extends Rn{constructor(){super(N(Tu.getDefaults(),arguments)),this.name="Transport",this._loop=new G4(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new rr,this._repeatedEvents=new U4,this._syncedSignals=[],this._swingAmount=0;const e=N(Tu.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new bu({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),ht(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(Rn.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!=0&&t%(2*this._swingTicks)!=0){const r=Math.sin(t%(2*this._swingTicks)/(2*this._swingTicks)*Math.PI)*this._swingAmount;e+=new ir(this.context,2*this._swingTicks/3).toSeconds()*r}this._timeline.forEachAtTime(t,s=>s.invoke(e))}schedule(e,t){const s=new Nd(this,{callback:e,time:new Na(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}scheduleRepeat(e,t,s,r=1/0){const i=new Y_(this,{callback:e,duration:new ls(this.context,r).toTicks(),interval:new ls(this.context,t).toTicks(),time:new Na(this.context,s).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,t){const s=new Nd(this,{callback:e,once:!0,time:new Na(this.context,t).toTicks()});return this._addEvent(s,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){const t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){const t=this.toTicks(e);return this._timeline.forEachFrom(t,s=>this.clear(s.id)),this._repeatedEvents.forEachFrom(t,s=>this.clear(s.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new ir(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){let s;return Ae(t)&&(s=this.toTicks(t)),this._clock.start(e,s),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),"started"!==this._clock.getStateAtTime(e)?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){zn(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new ls(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new ls(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new ir(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){const e=this.now(),t=this._clock.getTicksAtTime(e);return new ir(this.context,t).toBarsBeatsSixteenths()}set position(e){const t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){const t=this.now(),s=this._clock.frequency.timeToTicks(e,t);this.ticks=s}get progress(){if(this.loop){const e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){const t=this.now();if("started"===this.state){const s=this._clock.getTicksAtTime(t),i=t+this._clock.frequency.getDurationOfTicks(Math.ceil(s)-s,t);this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return Math.round(this._clock.getTicksAtTime(e))}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),"started"!==this.state)return 0;{const t=this.now(),s=this.getTicksAtTime(t);return this._clock.nextTickTime(e-s%e,t)}}syncSignal(e,t){if(!t){const r=this.now();if(0!==e.getValueAtTime(r)){const o=1/(60/this.bpm.getValueAtTime(r)/this.PPQ);t=e.getValueAtTime(r)/o}else t=0}const s=new Zt(t);return this.bpm.connect(s),s.connect(e._param),this._syncedSignals.push({initial:e.value,ratio:s,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){const s=this._syncedSignals[t];s.signal===e&&(s.ratio.dispose(),s.signal.value=s.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),U_(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}wu.mixin(Tu),bd(n=>{n.transport=new Tu({context:n})}),Sd(n=>{n.transport.dispose()});class kn extends me{constructor(e){super(e),this.input=void 0,this._state=new W_("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=Xe,this._syncedStop=Xe,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new uo({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,ht(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(me.getDefaults(),{mute:!1,onstop:Xe,volume:0})}get state(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,s){let r=cs(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(r=this._clampToCurrentTime(r),this._synced||"started"!==this._state.getValueAtTime(r))if(this.log("start",r),this._state.setStateAtTime("started",r),this._synced){const i=this._state.get(r);i&&(i.offset=this.toSeconds(Ma(t,0)),i.duration=s?this.toSeconds(s):void 0);const o=this.context.transport.schedule(a=>{this._start(a,t,s)},r);this._scheduled.push(o),"started"===this.context.transport.state&&this.context.transport.getSecondsAtTime(this.immediate())>r&&this._syncedStart(this.now(),this.context.transport.seconds)}else Nx(this.context),this._start(r,t,s);else oe(Cd(r,this._state.get(r).time),"Start time must be strictly greater than previous start time"),this._state.cancel(r),this._state.setStateAtTime("started",r),this.log("restart",r),this.restart(r,t,s);return this}stop(e){let t=cs(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),"started"===this._state.getValueAtTime(t)||Ae(this._state.getNextState("started",t))){if(this.log("stop",t),this._synced){const s=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(s)}else this._stop(t);this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,s){return e=this.toSeconds(e),"started"===this._state.getValueAtTime(e)&&(this._state.cancel(e),this._restart(e,t,s)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(t>0){const s=this._state.get(t);if(s&&"started"===s.state&&s.time!==t){const r=t-this.toSeconds(s.time);let i;s.duration&&(i=this.toSeconds(s.duration)-r),this._start(e,this.toSeconds(s.offset)+r,i)}}},this._syncedStop=e=>{const t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));"started"===this._state.getValueAtTime(t)&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=Xe,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class Eu extends Ra{constructor(){super(N(Eu.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;const e=N(Eu.getDefaults(),arguments,["url","onload"]);Oa(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Qe({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new Rr(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(Ra.getDefaults(),{url:new Rr,loop:!1,loopEnd:0,loopStart:0,onload:Xe,onerror:Xe,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,s,r=1){oe(this.buffer.loaded,"buffer is either not set or not loaded");const i=this.toSeconds(e);this._startGain(i,r),t=Ma(t,this.loop?this.loopStart:0);let o=Math.max(this.toSeconds(t),0);if(this.loop){const a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),u=a-c;H_(o,a)&&(o=(o-c)%u+c),Rs(o,this.buffer.duration)&&(o=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,Rx(o,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,o)),Ae(s)){let a=this.toSeconds(s);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}function lo(n,e){return St(this,void 0,void 0,function*(){const t=e/n.context.sampleRate,s=new q_(1,t,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/t,detune:0,context:s})).toDestination().start(0),(yield s.render()).getChannelData(0)})}class Od extends Ra{constructor(){super(N(Od.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];const e=N(Od.getDefaults(),arguments,["frequency","type"]);Oa(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new Qe({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new Qe({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),ht(this,["frequency","detune"])}static getDefaults(){return Object.assign(Ra.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){const t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}let hs=(()=>{class n extends kn{constructor(){super(N(n.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;const t=N(n.getDefaults(),arguments,["frequency","type"]);this.frequency=new ot({context:this.context,units:"frequency",value:t.frequency}),ht(this,"frequency"),this.detune=new ot({context:this.context,units:"cents",value:t.detune}),ht(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&"custom"!==t.type&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(kn.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){const s=this.toSeconds(t),r=new Od({context:this.context,onended:()=>this.onstop(this)});this._oscillator=r,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(s)}_stop(t){const s=this.toSeconds(t);this._oscillator&&this._oscillator.stop(s)}_restart(t){const s=this.toSeconds(t);return this.log("restart",s),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(s),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if("custom"===this._type)return n._periodicWaveCache.find(s=>s.phase===this._phase&&function x4(n,e){return n.length===e.length&&n.every((t,s)=>e[s]===t)}(s.partials,this._partials));{const t=n._periodicWaveCache.find(s=>s.type===this._type&&s.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;const s=-1!==["sine","square","sawtooth","triangle"].indexOf(t);if(0===this._phase&&s)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=t);else{const r=this._getCachedPeriodicWave();if(Ae(r)){const{partials:i,wave:o}=r;this._wave=o,this._partials=i,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{const[i,o]=this._getRealImaginary(t,this._phase),a=this.context.createPeriodicWave(i,o);this._wave=a,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),n._periodicWaveCache.push({imag:o,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:i,type:this._type,wave:this._wave}),n._periodicWaveCache.length>100&&n._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.type=this.partialCount&&"custom"!==this._type&&"custom"!==t?t+this.partialCount:t}get partialCount(){return this._partialCount}set partialCount(t){Nr(t,0);let s=this._type;const r=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(r&&(s=r[1]),"custom"!==this._type)this.type=0===t?s:s+t.toString();else{const i=new Float32Array(t);this._partials.forEach((o,a)=>i[a]=o),this._partials=Array.from(i),this.type=this._type}}_getRealImaginary(t,s){let i=2048;const o=new Float32Array(i),a=new Float32Array(i);let c=1;if("custom"===t){if(c=this._partials.length+1,this._partialCount=this._partials.length,i=c,0===this._partials.length)return[o,a]}else{const u=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);u?(c=parseInt(u[2],10)+1,this._partialCount=parseInt(u[2],10),t=u[1],c=Math.max(c,2),i=c):this._partialCount=0,this._partials=[]}for(let u=1;u<i;++u){const l=2/(u*Math.PI);let h;switch(t){case"sine":h=u<=c?1:0,this._partials[u-1]=h;break;case"square":h=1&u?2*l:0,this._partials[u-1]=h;break;case"sawtooth":h=l*(1&u?1:-1),this._partials[u-1]=h;break;case"triangle":h=1&u?l*l*2*(u-1>>1&1?-1:1):0,this._partials[u-1]=h;break;case"custom":h=this._partials[u-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}0!==h?(o[u]=-h*Math.sin(s*u),a[u]=h*Math.cos(s*u)):(o[u]=0,a[u]=0)}return[o,a]}_inverseFFT(t,s,r){let i=0;const o=t.length;for(let a=0;a<o;a++)i+=t[a]*Math.cos(a*r)+s[a]*Math.sin(a*r);return i}getInitialValue(){const[t,s]=this._getRealImaginary(this._type,0);let r=0;const i=2*Math.PI;for(let a=0;a<32;a++)r=Math.max(this._inverseFFT(t,s,a/32*i),r);return function I4(n,e,t){return Math.max(Math.min(n,t),e)}(-this._inverseFFT(t,s,this._phase)/r,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(t=1024){return St(this,void 0,void 0,function*(){return lo(this,t)})}dispose(){return super.dispose(),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}return n._periodicWaveCache=[],n})();class gi extends me{constructor(){super(Object.assign(N(gi.getDefaults(),arguments,["context"])))}connect(e,t=0,s=0){return z_(this,e,t,s),this}}class Fa extends gi{constructor(){super(Object.assign(N(Fa.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;const e=N(Fa.getDefaults(),arguments,["mapping","length"]);zn(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):function w4(n){return"function"==typeof n}(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(ot.getDefaults(),{length:1024})}setMap(e,t=1024){const s=new Float32Array(t);for(let r=0,i=t;r<i;r++)s[r]=e(r/(i-1)*2-1,r);return this.curve=s,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){oe(["none","2x","4x"].some(s=>s.includes(e)),"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class W4 extends gi{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Fa({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class mi extends ot{constructor(){super(Object.assign(N(mi.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;const e=N(mi.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new Zt({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(ot.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class xu extends kn{constructor(){super(N(xu.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new W4({context:this.context}),this._modulationNode=new Zt({context:this.context});const e=N(xu.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new hs({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new hs({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new mi({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),ht(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(hs.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return St(this,void 0,void 0,function*(){return lo(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class Mu extends kn{constructor(){super(N(Mu.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new Zt({context:this.context,gain:0});const e=N(Mu.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new hs({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new ot({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new hs({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new mi({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new mi({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),ht(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(hs.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return St(this,void 0,void 0,function*(){return lo(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class Pa extends kn{constructor(){super(N(Pa.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new Zt({context:this.context,gain:0}),this._thresh=new Fa({context:this.context,mapping:t=>t<=0?-1:1});const e=N(Pa.getDefaults(),arguments,["frequency","width"]);this.width=new ot({context:this.context,units:"audioRange",value:e.width}),this._triangle=new hs({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),ht(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(kn.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return St(this,void 0,void 0,function*(){return lo(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class Iu extends kn{constructor(){super(N(Iu.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];const e=N(Iu.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new ot({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ot({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,ht(this,["frequency","detune"])}static getDefaults(){return Object.assign(hs.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){const t=-e/2,s=e/(this._oscillators.length-1);this._forEach((r,i)=>r.detune.value=t+s*i)}}get count(){return this._oscillators.length}set count(e){if(Nr(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){const s=new hs({context:this.context,volume:-6-1.1*e,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:0===t?()=>this.onstop(this):Xe});"custom"===this.type&&(s.partials=this._partials),this.frequency.connect(s.frequency),this.detune.connect(s.detune),s.detune.overridden=!1,s.connect(this.output),this._oscillators[t]=s}this.spread=this._spread,"started"===this.state&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,s)=>t.phase=this._phase+s/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return St(this,void 0,void 0,function*(){return lo(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}}class Nu extends kn{constructor(){super(N(Nu.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new mi({context:this.context,value:2});const e=N(Nu.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Pa({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new hs({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),ht(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(kn.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return St(this,void 0,void 0,function*(){return lo(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const Hx={am:xu,fat:Iu,fm:Mu,oscillator:hs,pulse:Pa,pwm:Nu};class ho extends kn{constructor(){super(N(ho.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";const e=N(ho.getDefaults(),arguments,["frequency","type"]);this.frequency=new ot({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ot({context:this.context,units:"cents",value:e.detune}),ht(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(hs.getDefaults(),Mu.getDefaults(),xu.getDefaults(),Iu.getDefaults(),Pa.getDefaults(),Nu.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){"fm"===e.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):"am"===e.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):"fat"===e.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):"pwm"===e?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===e?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;const t=Hx[e],s=this.now();if(this._oscillator){const r=this._oscillator;r.stop(s),this.context.setTimeout(()=>r.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),"started"===this.state&&this._oscillator.start(s)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(t=this._oscillator.type),"fm"===e?this.type="fm"+t:"am"===e?this.type="am"+t:"fat"===e?this.type="fat"+t:"oscillator"===e?this.type=t:"pulse"===e?this.type="pulse":"pwm"===e&&(this.type="pwm")}_getOscType(e,t){return e instanceof Hx[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&"pulse"!==e&&"pwm"!==e&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Or(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Or(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&sr(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return St(this,void 0,void 0,function*(){return lo(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class J_ extends ot{constructor(){super(Object.assign(N(J_.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new Zt({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,Cu(this._constantSource,this._sum)}static getDefaults(){return Object.assign(ot.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Rd extends gi{constructor(){super(Object.assign(N(Rd.getDefaults(),arguments,["min","max"]))),this.name="Scale";const e=N(Rd.getDefaults(),arguments,["min","max"]);this._mult=this.input=new mi({context:this.context,value:e.max-e.min}),this._add=this.output=new J_({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(gi.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}function qx(n,e=1/0){const t=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){Nr(i,n,e),t.set(this,i)}})}}function Fr(n,e=1/0){const t=new WeakMap;return function(s,r){Reflect.defineProperty(s,r,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){Nr(this.toSeconds(i),n,e),t.set(this,i)}})}}class or extends kn{constructor(){super(N(or.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;const e=N(or.getDefaults(),arguments,["url","onload"]);this._buffer=new Rr({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(kn.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:Xe,onerror:Xe,playbackRate:1,reverse:!1})}load(e){return St(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=Xe){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),0===this._activeSources.size&&!this._synced&&"started"===this._state.getValueAtTime(this.now())&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,s){return super.start(e,t,s),this}_start(e,t,s){t=Ma(t,this._loop?this._loopStart:0);const r=this.toSeconds(t),i=s;s=Ma(s,Math.max(this._buffer.duration-r,0));let o=this.toSeconds(s);o/=this._playbackRate,e=this.toSeconds(e);const a=new Eu({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+o),this._state.setStateAtTime("stopped",e+o,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&cs(i)?a.start(e,r):a.start(e,r,o-this.toSeconds(this.fadeOut))}_stop(e){const t=this.toSeconds(e);this._activeSources.forEach(s=>s.stop(t))}restart(e,t,s){return super.restart(e,t,s),this}_restart(e,t,s){this._stop(e),this._start(e,t,s)}seek(e,t){const s=this.toSeconds(t);if("started"===this._state.getValueAtTime(s)){const r=this.toSeconds(e);this._stop(s),this._start(s,r)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Nr(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Nr(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){const t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;const t=this.now(),s=this._state.getNextState("stopped",t);s&&s.implicitEnd&&(this._state.cancel(s.time),this._activeSources.forEach(r=>r.cancelStop())),this._activeSources.forEach(r=>{r.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}sn([Fr(0)],or.prototype,"fadeIn",void 0),sn([Fr(0)],or.prototype,"fadeOut",void 0);class kd extends gi{constructor(){super(Object.assign(N(kd.getDefaults(),arguments,["value"]))),this.name="Pow";const e=N(kd.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new Fa({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(gi.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class ds extends me{constructor(){super(N(ds.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new ot({context:this.context,value:0}),this.output=this._sig,this.input=void 0;const e=N(ds.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(me.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(sr(e))return e;{let s;for(s in Fd)if(Fd[s][t]===e)return s;return e}}_setCurve(e,t,s){if(sr(s)&&Reflect.has(Fd,s)){const r=Fd[s];so(r)?"_decayCurve"!==e&&(this[e]=r[t]):this[e]=r}else{if(!zn(s)||"_decayCurve"===e)throw new Error("Envelope: invalid curve: "+s);this[e]=s}}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._decayCurve}set decayCurve(e){oe(["linear","exponential"].some(t=>t===e),`Invalid envelope curve: ${e}`),this._decayCurve=e}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let r=this.toSeconds(this.attack);const i=this.toSeconds(this.decay),o=this.getValueAtTime(e);if(o>0&&(r=(1-o)/(1/r)),r<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if("linear"===this._attackCurve)this._sig.linearRampTo(t,r,e);else if("exponential"===this._attackCurve)this._sig.targetRampTo(t,r,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=o&&o<=a[c]){a=this._attackCurve.slice(c),a[0]=o;break}this._sig.setValueCurveAtTime(a,e,r,t)}if(i&&this.sustain<1){const a=t*this.sustain,c=e+r;this.log("decay",c),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(a,i+c):this._sig.exponentialApproachValueAtTime(a,c,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);const t=this.getValueAtTime(e);if(t>0){const s=this.toSeconds(this.release);s<this.sampleTime?this._sig.setValueAtTime(0,e):"linear"===this._releaseCurve?this._sig.linearRampTo(0,s,e):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,s,e):(oe(zn(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,s,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,s=1){return t=this.toSeconds(t),this.triggerAttack(t,s),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,s=0){return z_(this,e,t,s),this}asArray(e=1024){return St(this,void 0,void 0,function*(){const t=e/this.context.sampleRate,s=new q_(1,t,this.context.sampleRate),r=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=r+this.toSeconds(this.release),o=.1*i,a=i+o,c=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/a,decay:t*this.toSeconds(this.decay)/a,release:t*this.toSeconds(this.release)/a,context:s}));return c._sig.toDestination(),c.triggerAttackRelease(t*(r+o)/a,0),(yield s.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}sn([Fr(0)],ds.prototype,"attack",void 0),sn([Fr(0)],ds.prototype,"decay",void 0),sn([qx(0,1)],ds.prototype,"sustain",void 0),sn([Fr(0)],ds.prototype,"release",void 0);const Fd=(()=>{let e,t;const s=[];for(e=0;e<128;e++)s[e]=Math.sin(e/127*(Math.PI/2));const r=[];for(e=0;e<127;e++){t=e/127;const d=Math.sin(t*(2*Math.PI)*6.4-Math.PI/2)+1;r[e]=d/10+.83*t}r[127]=1;const o=[];for(e=0;e<128;e++)o[e]=Math.ceil(e/127*5)/5;const c=[];for(e=0;e<128;e++)t=e/127,c[e]=.5*(1-Math.cos(Math.PI*t));const u=[];for(e=0;e<128;e++){t=e/127;const d=4*Math.pow(t,3)+.2,f=Math.cos(d*Math.PI*2*t);u[e]=Math.abs(f*(1-t))}function l(d){const f=new Array(d.length);for(let p=0;p<d.length;p++)f[p]=1-d[p];return f}return{bounce:{In:l(u),Out:u},cosine:{In:s,Out:function h(d){return d.slice(0).reverse()}(s)},exponential:"exponential",linear:"linear",ripple:{In:r,Out:l(r)},sine:{In:c,Out:l(c)},step:{In:o,Out:l(o)}}})();class Pr extends me{constructor(){super(N(Pr.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;const e=N(Pr.getDefaults(),arguments);this._volume=this.output=new uo({context:this.context,volume:e.volume}),this.volume=this._volume.volume,ht(this,"volume")}static getDefaults(){return Object.assign(me.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){const s=this["_original_"+e]=this[e];this[e]=(...r)=>{const o=this.context.transport.schedule(a=>{r[t]=a,s.apply(this,r)},r[t]);this._scheduledEvents.push(o)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(e,t,s,r){const i=this.toSeconds(s),o=this.toSeconds(t);return this.triggerAttack(e,i,r),this.triggerRelease(i+o),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Vr extends Pr{constructor(){super(N(Vr.getDefaults(),arguments));const e=N(Vr.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Pr.getDefaults(),{detune:0,onsilence:Xe,portamento:0})}triggerAttack(e,t,s=1){this.log("triggerAttack",e,t,s);const r=this.toSeconds(t);return this._triggerEnvelopeAttack(r,s),this.setNote(e,r),this}triggerRelease(e){this.log("triggerRelease",e);const t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){const s=this.toSeconds(t),r=e instanceof On?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(s)>.05){const i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(r,i,s)}else this.frequency.setValueAtTime(r,s);return this}}sn([Fr(0)],Vr.prototype,"portamento",void 0);class Pd extends ds{constructor(){super(N(Pd.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Zt({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Lr extends Vr{constructor(){super(N(Lr.getDefaults(),arguments)),this.name="Synth";const e=N(Lr.getDefaults(),arguments);this.oscillator=new ho(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new Pd(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),ht(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Vr.getDefaults(),{envelope:Object.assign(ao(ds.getDefaults(),Object.keys(me.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(ao(ho.getDefaults(),[...Object.keys(kn.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),0===this.envelope.sustain){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class Ou extends me{constructor(){super(N(Ou.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";const e=N(Ou.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Qe({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new Qe({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new Qe({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new Qe({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(me.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){oe(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e),`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){const t=new Float32Array(e);for(let o=0;o<e;o++){const c=19980*Math.pow(o/e,2)+20;t[o]=c}const s=new Float32Array(e),r=new Float32Array(e),i=this.context.createBiquadFilter();return i.type=this.type,i.Q.value=this.Q.value,i.frequency.value=this.frequency.value,i.gain.value=this.gain.value,i.getFrequencyResponse(t,s,r),s}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Ru extends me{constructor(){super(N(Ru.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new Zt({context:this.context}),this.output=new Zt({context:this.context}),this._filters=[];const e=N(Ru.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new ot({context:this.context,units:"positive",value:e.Q}),this.frequency=new ot({context:this.context,units:"frequency",value:e.frequency}),this.detune=new ot({context:this.context,units:"cents",value:e.detune}),this.gain=new ot({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,ht(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(me.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){oe(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e),`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(s=>s.type=e)}get rolloff(){return this._rolloff}set rolloff(e){const t=Or(e)?e:parseInt(e,10),s=[-12,-24,-48,-96];let r=s.indexOf(t);oe(-1!==r,`rolloff can only be ${s.join(", ")}`),r+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(i=>i.disconnect()),this._filters=new Array(r);for(let i=0;i<r;i++){const o=new Ou({context:this.context});o.type=this._type,this.frequency.connect(o.frequency),this.detune.connect(o.detune),this.Q.connect(o.Q),this.gain.connect(o.gain),this._filters[i]=o}this._internalChannels=this._filters,Cu(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){const t=new Ou({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),s=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((i,o)=>s[o]*=i)}),t.dispose(),s}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),U_(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class ku extends ds{constructor(){super(N(ku.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";const e=N(ku.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new kd({context:this.context,value:e.exponent}),this._scale=this.output=new Rd({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(ds.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){const t=this.toFrequency(e);Nr(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}}class fo extends Vr{constructor(){super(N(fo.getDefaults(),arguments)),this.name="MonoSynth";const e=N(fo.getDefaults(),arguments);this.oscillator=new ho(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new Ru(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new ku(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new Pd(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),ht(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(Vr.getDefaults(),{envelope:Object.assign(ao(ds.getDefaults(),Object.keys(me.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(ao(Ru.getDefaults(),Object.keys(me.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(ao(ku.getDefaults(),Object.keys(me.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(ao(ho.getDefaults(),Object.keys(kn.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,t=1){if(this.envelope.triggerAttack(e,t),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),0===this.envelope.sustain){const s=this.toSeconds(this.envelope.attack),r=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+s+r)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}}class Fu extends Lr{constructor(){super(N(Fu.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;const e=N(Fu.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,ht(this,["oscillator","envelope"])}static getDefaults(){return oo(Vr.getDefaults(),Lr.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){const s=this.toSeconds(t),r=this.toFrequency(e instanceof On?e.toFrequency():e);return this.oscillator.frequency.setValueAtTime(r*this.octaves,s),this.oscillator.frequency.exponentialRampToValueAtTime(r,s+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}sn([qx(0)],Fu.prototype,"octaves",void 0),sn([Fr(0)],Fu.prototype,"pitchDecay",void 0);const ly=new Set;function hy(n){ly.add(n)}function Zx(n,e){ly.add(`registerProcessor("${n}", ${e})`)}hy('\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it\'s disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === "dispose") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n'),hy("\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n"),hy("\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n"),Zx("feedback-comb-filter",'\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: "delayTime",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}, {\n\t\t\t\tname: "feedback",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: "k-rate"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n');class Va extends Pr{constructor(){super(N(Va.getDefaults(),arguments,["voice","options"])),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0;const e=N(Va.getDefaults(),arguments,["voice","options"]);oe(!Or(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const t=e.voice.getDefaults();this.options=Object.assign(t,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const s=this._voices.indexOf(this._dummyVoice);this._voices.splice(s,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Pr.getDefaults(),{maxPolyphony:32,options:{},voice:Lr})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);const t=this._activeVoices.findIndex(s=>s.voice===e);this._activeVoices.splice(t,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return e.connect(this.output),this._voices.push(e),e}B_("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,t,s){e.forEach(r=>{const i=new Su(this.context,r).toMidi(),o=this._getNextAvailableVoice();o&&(o.triggerAttack(r,t,s),this._activeVoices.push({midi:i,voice:o,released:!1}),this.log("triggerAttack",r,t))})}_triggerRelease(e,t){e.forEach(s=>{const r=new Su(this.context,s).toMidi(),i=this._activeVoices.find(({midi:o,released:a})=>o===r&&!a);i&&(i.voice.triggerRelease(t),i.released=!0,this.log("triggerRelease",s,t))})}_scheduleEvent(e,t,s,r){oe(!this.disposed,"Synth was already disposed"),s<=this.now()?"attack"===e?this._triggerAttack(t,s,r):this._triggerRelease(t,s):this.context.setTimeout(()=>{this._scheduleEvent(e,t,s,r)},s-this.now())}triggerAttack(e,t,s){Array.isArray(e)||(e=[e]);const r=this.toSeconds(t);return this._scheduleEvent("attack",e,r,s),this}triggerRelease(e,t){Array.isArray(e)||(e=[e]);const s=this.toSeconds(t);return this._scheduleEvent("release",e,s),this}triggerAttackRelease(e,t,s,r){const i=this.toSeconds(s);if(this.triggerAttack(e,i,r),zn(t)){oe(zn(e),"If the duration is an array, the notes must also be an array");for(let o=0;o<e.length;o++){const a=t[Math.min(o,t.length-1)],c=this.toSeconds(a);oe(c>0,"The duration must be greater than 0"),this.triggerRelease(e[o],i+c)}}else{const o=this.toSeconds(t);oe(o>0,"The duration must be greater than 0"),this.triggerRelease(e,i+o)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}set(e){const t=ao(e,["onsilence","context"]);return this.options=oo(this.options,t),this._voices.forEach(s=>s.set(t)),this._dummyVoice.set(t),this}get(){return this._dummyVoice.get()}releaseAll(e){const t=this.toSeconds(e);return this._activeVoices.forEach(({voice:s})=>{s.triggerRelease(t)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Pu extends Pr{constructor(){super(N(Pu.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;const e=N(Pu.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),t={};Object.keys(e.urls).forEach(s=>{const r=parseInt(s,10);if(oe(wd(s)||Or(r)&&isFinite(r),`url key is neither a note or midi pitch: ${s}`),wd(s)){const i=new On(this.context,s).toMidi();t[i]=e.urls[s]}else Or(r)&&isFinite(r)&&(t[r]=e.urls[r])}),this._buffers=new Z_({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Pr.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:Xe,onerror:Xe,release:.1,urls:{}})}_findClosest(e){let s=0;for(;s<96;){if(this._buffers.has(e+s))return-s;if(this._buffers.has(e-s))return s;s++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,s=1){return this.log("triggerAttack",e,t,s),Array.isArray(e)||(e=[e]),e.forEach(r=>{const i=jx(new On(this.context,r).toFrequency()),o=Math.round(i),a=i-o,c=this._findClosest(o),l=this._buffers.get(o-c),h=Lx(c+a),d=new Eu({url:l,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:h}).connect(this.output);d.start(t,0,l.duration/h,s),zn(this._activeSources.get(o))||this._activeSources.set(o,[]),this._activeSources.get(o).push(d),d.onended=()=>{if(this._activeSources&&this._activeSources.has(o)){const f=this._activeSources.get(o),p=f.indexOf(d);-1!==p&&f.splice(p,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(s=>{const r=new On(this.context,s).toMidi();if(this._activeSources.has(r)&&this._activeSources.get(r).length){const i=this._activeSources.get(r);t=this.toSeconds(t),i.forEach(o=>{o.stop(t)}),this._activeSources.set(r,[])}}),this}releaseAll(e){const t=this.toSeconds(e);return this._activeSources.forEach(s=>{for(;s.length;)s.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,s,r=1){const i=this.toSeconds(s);return this.triggerAttack(e,i,r),zn(t)?(oe(zn(e),"notes must be an array when duration is array"),e.forEach((o,a)=>{const c=t[Math.min(a,t.length-1)];this.triggerRelease(o,i+this.toSeconds(c))})):this.triggerRelease(e,i+this.toSeconds(t)),this}add(e,t,s){if(oe(wd(e)||isFinite(e),`note must be a pitch or midi: ${e}`),wd(e)){const r=new On(this.context,e).toMidi();this._buffers.add(r,t,s)}else this._buffers.add(e,t,s);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}}sn([Fr(0)],Pu.prototype,"attack",void 0),sn([Fr(0)],Pu.prototype,"release",void 0);class Ld extends me{constructor(){super(Object.assign(N(Ld.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;const e=N(Ld.getDefaults(),arguments,["pan"]);this.pan=new Qe({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",ht(this,"pan")}static getDefaults(){return Object.assign(me.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}Zx("bit-crusher","\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n");class Mt extends me{constructor(){super(N(Mt.getDefaults(),arguments,["solo"])),this.name="Solo";const e=N(Mt.getDefaults(),arguments,["solo"]);this.input=this.output=new Zt({context:this.context}),Mt._allSolos.has(this.context)||Mt._allSolos.set(this.context,new Set),Mt._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(me.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),Mt._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return 0===this.input.gain.value}_addSolo(){Mt._soloed.has(this.context)||Mt._soloed.set(this.context,new Set),Mt._soloed.get(this.context).add(this)}_removeSolo(){Mt._soloed.has(this.context)&&Mt._soloed.get(this.context).delete(this)}_isSoloed(){return Mt._soloed.has(this.context)&&Mt._soloed.get(this.context).has(this)}_noSolos(){return!Mt._soloed.has(this.context)||Mt._soloed.has(this.context)&&0===Mt._soloed.get(this.context).size}_updateSolo(){this.input.gain.value=this._isSoloed()||this._noSolos()?1:0}dispose(){return super.dispose(),Mt._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Mt._allSolos=new Map,Mt._soloed=new Map;class Bd extends me{constructor(){super(N(Bd.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";const e=N(Bd.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new Ld({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new uo({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,ht(this,["pan","volume"])}static getDefaults(){return Object.assign(me.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class po extends me{constructor(){super(N(po.getDefaults(),arguments,["volume","pan"])),this.name="Channel";const e=N(po.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new Mt({solo:e.solo,context:this.context}),this._panVol=this.output=new Bd({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),ht(this,["pan","volume"])}static getDefaults(){return Object.assign(me.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return po.buses.has(e)||po.buses.set(e,new Zt({context:this.context})),po.buses.get(e)}send(e,t=0){const s=this._getBus(e),r=new Zt({context:this.context,units:"decibels",gain:t});return this.connect(r),r.connect(s),r}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}po.buses=new Map;class nW extends me{constructor(){super(...arguments),this.name="Listener",this.positionX=new Qe({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Qe({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Qe({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Qe({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Qe({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Qe({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Qe({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Qe({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Qe({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(me.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}function tv(){return us().now()}bd(n=>{n.listener=new nW({context:n})}),Sd(n=>{n.listener.dispose()}),us(),us(),us(),us(),us(),us();var dt=(()=>(function(n){n.WHOLE="WHOLE",n.HALF="HALF",n.QUARTER="QUARTER",n.EIGHTH="EIGHTH",n.SIXTEENTH="SIXTEENTH"}(dt||(dt={})),dt))();const nv=new Map([[1,dt.WHOLE],[2,dt.HALF],[4,dt.QUARTER],[8,dt.EIGHTH],[16,dt.SIXTEENTH]]),sW={[dt.WHOLE]:4,[dt.HALF]:2,[dt.QUARTER]:1,[dt.EIGHTH]:.5,[dt.SIXTEENTH]:.25},sv=n=>({[dt.WHOLE]:dt.HALF,[dt.HALF]:dt.QUARTER,[dt.QUARTER]:dt.EIGHTH,[dt.EIGHTH]:dt.SIXTEENTH,[dt.SIXTEENTH]:dt.SIXTEENTH}[n]),_i=new at(Ci);function iM(...n){const e=Jd(n);return ae((t,s)=>{const r=n.length,i=new Array(r);let o=n.map(()=>!1),a=!1;for(let c=0;c<r;c++)Yn(n[c]).subscribe(U(s,u=>{i[c]=u,!a&&!o[c]&&(o[c]=!0,(a=o.every(Vs))&&(o=null))},Ci));t.subscribe(U(s,c=>{if(a){const u=[c,...i];s.next(e?e(...u):u)}}))})}class rW extends $e{constructor(e,t){super()}schedule(e,t=0){return this}}const Hd={setInterval(n,e,...t){const{delegate:s}=Hd;return s?.setInterval?s.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){const{delegate:e}=Hd;return(e?.clearInterval||clearInterval)(n)},delegate:void 0},rv={now:()=>(rv.delegate||Date).now(),delegate:void 0};class Lu{constructor(e,t=Lu.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,s){return new this.schedulerActionCtor(this,e).schedule(s,t)}}Lu.now=rv.now;const aW=new class oW extends Lu{constructor(e,t=Lu.now){super(e,t),this.actions=[],this._active=!1}flush(e){const{actions:t}=this;if(this._active)return void t.push(e);let s;this._active=!0;do{if(s=e.execute(e.state,e.delay))break}while(e=t.shift());if(this._active=!1,s){for(;e=t.shift();)e.unsubscribe();throw s}}}(class iW extends rW{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var s;if(this.closed)return this;this.state=e;const r=this.id,i=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(i,r,t)),this.pending=!0,this.delay=t,this.id=null!==(s=this.id)&&void 0!==s?s:this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,s=0){return Hd.setInterval(e.flush.bind(e,this),s)}recycleAsyncId(e,t,s=0){if(null!=s&&this.delay===s&&!1===this.pending)return t;null!=t&&Hd.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const s=this._execute(e,t);if(s)return s;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r,s=!1;try{this.work(e)}catch(i){s=!0,r=i||new Error("Scheduled action threw falsy error")}if(s)return this.unsubscribe(),r}unsubscribe(){if(!this.closed){const{id:e,scheduler:t}=this,{actions:s}=t;this.work=this.state=this.scheduler=null,this.pending=!1,ft(s,this),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}});var jr=(()=>(function(n){n.TIP="TIP",n.TAP="TAP",n.HALF_TIP="HALF_TIP",n.QUARTER_TIP="QUARTER_TIP"}(jr||(jr={})),jr))();class ja{constructor(){this._isMetronomeOn=new Ht(!0),this._isPlaying=new Ht(!1),this._bpm=new Ht(120),this._numBeatsPerBar=new Ht(4),this._beatValue=new Ht(4),this._loopDuration=new Ht(2),this.isMetronomeOn$=this._isMetronomeOn.asObservable(),this.isPlaying$=this._isPlaying.asObservable(),this.bpm$=this._bpm.asObservable(),this.numBeatsPerBar$=this._numBeatsPerBar.asObservable(),this.beatValue$=this._beatValue.asObservable(),this.loopDuration$=this._loopDuration.asObservable(),this.beatCounter$=aa([this.isPlaying$,this.bpm$,this.beatValue$]).pipe(ln(([e,t,s])=>{const r=nv.get(s);return e?this.buildTimer(t,r):_i}),ln(e=>this.discardFirstTick(e))),this.beatTick$=this.beatCounter$.pipe(iM(this.numBeatsPerBar$,this.beatValue$,this.loopDuration$),ee(([e,t,s,r])=>{if(e>t){if(e>r*t){const i=e%(r*t);return 0===i?r*t:i}return e}return e%t==0?t:e%t}),At(e=>console.log("beat tick: ",e))),this.halfTick$=aa([this.isPlaying$,this.beatCounter$,this.bpm$,this.beatValue$]).pipe(ln(([e,t,s,r])=>{const i=nv.get(r);return e?this.buildTimer(s,sv(i)):_i})),this.quarterTick$=aa([this.beatTick$,this.isPlaying$,this.bpm$,this.beatValue$]).pipe(ln(([e,t,s,r])=>{const i=nv.get(r),o=sv(i),a=sv(o);return t?this.buildTimer(s,a):_i}),ee(e=>e+1),At(e=>console.log("quarter tick: ",e))),this.metronomeClick$=this.beatTick$.pipe(iM(this.numBeatsPerBar$,this.isMetronomeOn$),ln(([e,t,s])=>s?Z(e%t==1?jr.TIP:jr.TAP):_i))}get isMetronomeOn(){return this._isMetronomeOn.getValue()}get isPlaying(){return this._isPlaying.getValue()}get bpm(){return this._bpm.getValue()}get numBeatsPerBar(){return this._numBeatsPerBar.getValue()}get noteDurationPerBeat(){return this._beatValue.getValue()}get loopDuration(){return this._loopDuration.getValue()}toggleIsMetronomeOn(){this._isMetronomeOn.next(!this.isMetronomeOn)}toggleIsPlaying(){this._isPlaying.next(!this.isPlaying)}setBpm(e){this._bpm.next(e)}setNumBeatsPerBar(e){this._numBeatsPerBar.next(e)}setNoteDurationPerBeat(e){this._beatValue.next(e)}setLoopDuration(e){this._loopDuration.next(e)}buildTimer(e,t=dt.QUARTER){return function uW(n=0,e,t=aW){let s=-1;return null!=e&&(wv(e)?t=e:s=e),new at(r=>{let i=function cW(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;i<0&&(i=0);let o=0;return t.schedule(function(){r.closed||(r.next(o++),0<=s?this.schedule(void 0,s):r.complete())},i)})}(0,60/e*1e3*sW[t])}discardFirstTick(e,t=1){return 0===e?_i:Z(e)}static#e=this.\u0275fac=function(t){return new(t||ja)};static#t=this.\u0275prov=re({token:ja,factory:ja.\u0275fac,providedIn:"root"})}class Br{constructor(){this.metronomePlayers={[jr.TIP]:new or("./assets/audio/metronome_tip.wav").toDestination(),[jr.TAP]:new or("./assets/audio/metronome_tap.wav").toDestination(),[jr.HALF_TIP]:new or("./assets/audio/metronome_half_tip.wav").toDestination(),[jr.QUARTER_TIP]:new or("./assets/audio/metronome_quarter_tip.wav").toDestination()},this.samples={snare:new or("./assets/audio/clap_basic.wav").toDestination()},this.polySynths=[new Va(Lr).toDestination(),new Va(Lr).toDestination(),new Va(Lr).toDestination()],this.synthSetups=[{id:1,octave:3,synth:new fo({oscillator:{type:"sine"}}).toDestination()},{id:2,octave:3,synth:new fo({oscillator:{type:"sine"}}).toDestination()},{id:3,octave:3,synth:new fo({oscillator:{type:"sine"}}).toDestination()}]}getPolySynths(){return this.polySynths}getSynthSetups(){return this.synthSetups}setOscillatorType(e,t){this.replaceSynth(e,this.buildMonoSynth(t))}setOscillatorOctave(e,t){}playMetronomeClick(e){this.metronomePlayers[e].start()}playSample(e){this.samples[e].start()}playMonoSynth(e){const t=tv();e?.triggerAttackRelease("C3","2n",t)}playNote(e){const t=tv();this.synthSetups[0].synth?.triggerAttackRelease(e.frequency,"4n",t)}playNotes(e){const t=tv(),s=this.polySynths[0],r=e.map(i=>i.frequency);s?.triggerAttackRelease(r,"4n",t)}replaceSynth(e,t){let s=this.getSynthSetups().findIndex(r=>r.synth==e);this.synthSetups[s].synth.disconnect(),this.synthSetups[s].synth=t.toDestination()}buildMonoSynth(e){return new fo({oscillator:{type:e}})}static#e=this.\u0275fac=function(t){return new(t||Br)};static#t=this.\u0275prov=re({token:Br,factory:Br.\u0275fac,providedIn:"root"})}function lW(n,e){if(1&n&&(H(0,"div",12),Ne(1),tt(2,"note"),q()),2&n){const t=e.$implicit;be(1),Qs(" ",zl(2,1,t,t.octave)," ")}}function hW(n,e){if(1&n){const t=bs();H(0,"button",8),Ge("click",function(){const i=vs(t).$implicit;return ws(vt(3).playChord(i))}),H(1,"div",9),Tt(2,lW,3,4,"div",10),q(),H(3,"div",11),Ne(4),tt(5,"degree"),q()()}if(2&n){const t=e.$implicit,s=e.index;be(2),qe("ngForOf",t),be(2),Qs(" ",gt(5,2,s)," ")}}function dW(n,e){if(1&n&&(H(0,"div")(1,"div",4)(2,"div",5),Ne(3),tt(4,"chordtype"),q(),H(5,"div",6),Tt(6,hW,6,4,"button",7),q()()()),2&n){const t=e.$implicit;be(3),Dr(gt(4,2,t.key)),be(3),qe("ngForOf",t.value)}}function fW(n,e){if(1&n&&(H(0,"div",2),Tt(1,dW,7,4,"div",3),tt(2,"keyvalue"),tt(3,"async"),q()),2&n){const t=vt();be(1),qe("ngForOf",zl(2,1,gt(3,4,t.allChords$),t.keepOriginalOrder))}}class Ud{constructor(e,t){this.musicService=e,this.toneService=t,this.chords$=this.musicService.currentChords$,this.allChords$=this.musicService.allChords$,this.ChordType=Y}playChord(e){this.toneService.playNotes(e)}keepOriginalOrder(e,t){return 0}static#e=this.\u0275fac=function(t){return new(t||Ud)(E(Js),E(Br))};static#t=this.\u0275cmp=Vn({type:Ud,selectors:[["app-chords-view"]],standalone:!0,features:[ss],decls:3,vars:3,consts:[[1,"chords-view"],["class","d-flex flex-column overflow-auto",4,"ngIf"],[1,"d-flex","flex-column","overflow-auto"],[4,"ngFor","ngForOf"],[1,"row"],[1,"col-lg-1","d-flex","align-items-center"],[1,"col-lg-11","col-12","d-flex"],["class","card p-1 m-1 w-100 square d-flex flex-column justify-content-center align-items-center",3,"click",4,"ngFor","ngForOf"],[1,"card","p-1","m-1","w-100","square","d-flex","flex-column","justify-content-center","align-items-center",3,"click"],[1,"d-flex","flex-row","flex-wrap","justify-content-center"],["class","fs-6","style","padding: 1px",4,"ngFor","ngForOf"],[1,"chord-degree","fs-5"],[1,"fs-6",2,"padding","1px"]],template:function(t,s){1&t&&(H(0,"div",0),Tt(1,fW,4,6,"div",1),tt(2,"async"),q()),2&t&&(be(1),qe("ngIf",gt(2,1,s.allChords$)))},dependencies:[Ys,qi,tm,mh,NS,td,va,nd],styles:[".chords-container[_ngcontent-%COMP%]{margin-left:24px}"]})}function pW(n,e){if(1&n){const t=bs();H(0,"button",8),Ge("click",function(){const i=vs(t).$implicit,o=vt().$implicit;return ws(vt().changeOscillatorType(o.synth,i))}),Ne(1),tt(2,"uppercase"),q()}if(2&n){const t=e.$implicit;be(1),Qs(" ",gt(2,1,t)," ")}}function gW(n,e){if(1&n){const t=bs();H(0,"div",2)(1,"div",3)(2,"div"),Ne(3,"Synth"),q(),H(4,"div"),Ne(5),q()(),H(6,"div",4)(7,"button",5),Ge("click",function(){const i=vs(t).$implicit;return ws(vt().playSynth(i.synth))}),H(8,"span",6),Ne(9,"play_arrow"),q()(),Tt(10,pW,3,3,"button",7),q()()}if(2&n){const t=e.$implicit,s=vt();be(5),Dr(t.synth.oscillator.type),be(5),qe("ngForOf",s.oscillatorTypes)}}class qd{constructor(e){this.toneService=e,this.oscillatorTypes=["sine","sawtooth","square","triangle"],this.synthSetups=[],this.synths=[]}ngOnInit(){this.synths=this.toneService.getPolySynths(),this.synthSetups=this.toneService.getSynthSetups()}playSynth(e){this.toneService.playMonoSynth(e)}changeOscillatorOctave(e,t){this.toneService.setOscillatorOctave(e,t)}changeOscillatorType(e,t){this.toneService.setOscillatorType(e,t)}static#e=this.\u0275fac=function(t){return new(t||qd)(E(Br))};static#t=this.\u0275cmp=Vn({type:qd,selectors:[["app-synth-view"]],standalone:!0,features:[ss],decls:2,vars:1,consts:[[1,"synth-view","d-flex","flex-row","overflow-auto"],["class","card",4,"ngFor","ngForOf"],[1,"card"],[1,"card-header","d-flex","justify-content-between"],[1,"d-flex","flex-column"],[1,"btn","btn-primary","m-2","align",3,"click"],[1,"material-icons"],["class","btn btn-secondary m-2",3,"click",4,"ngFor","ngForOf"],[1,"btn","btn-secondary","m-2",3,"click"]],template:function(t,s){1&t&&(H(0,"div",0),Tt(1,gW,11,2,"div",1),q()),2&t&&(be(1),qe("ngForOf",s.synthSetups))},dependencies:[Ys,qi,IS],styles:[".synth-view[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{min-width:250px}"]})}function mW(n,e){if(1&n&&(H(0,"option",2),Ne(1),tt(2,"note"),q()),2&n){const t=e.$implicit;qe("value",t.name),be(1),Qs(" ",gt(2,2,t)," ")}}class ju{constructor(e){this.musicService=e,this.rootNoteName=this.musicService.currentRootNote.name,this.octaveThreeNotes=Ki.filter(t=>3===t.octave)}updateRootNote(){this.musicService.setCurrentRootNote(this.octaveThreeNotes.find(e=>e.name===this.rootNoteName))}static#e=this.\u0275fac=function(t){return new(t||ju)(E(Js))};static#t=this.\u0275cmp=Vn({type:ju,selectors:[["app-root-note-selector"]],standalone:!0,features:[ss],decls:2,vars:2,consts:[["name","selectRootNote",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,s){1&t&&(H(0,"select",0),Ge("ngModelChange",function(i){return s.rootNoteName=i})("change",function(){return s.updateRootNote()}),Tt(1,mW,3,4,"option",1),q()),2&t&&(qe("ngModel",s.rootNoteName),be(1),qe("ngForOf",s.octaveThreeNotes))},dependencies:[Ys,qi,va,ed,u_,h_,hu,zm,Jh]})}function _W(n,e){if(1&n&&(H(0,"option",2),Ne(1),q()),2&n){const t=e.$implicit;qe("value",t),be(1),Qs(" ",t," ")}}class Bu{constructor(e){this.musicService=e,this.scaleMode=this.musicService.currentScaleMode,this.modes=Object.values(as)}updateMode(){this.musicService.setCurrentScaleMode(this.scaleMode)}static#e=this.\u0275fac=function(t){return new(t||Bu)(E(Js))};static#t=this.\u0275cmp=Vn({type:Bu,selectors:[["app-scale-mode-selector"]],standalone:!0,features:[ss],decls:2,vars:2,consts:[["name","selectedScaleMode",3,"ngModel","ngModelChange","change"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,s){1&t&&(H(0,"select",0),Ge("ngModelChange",function(i){return s.scaleMode=i})("change",function(){return s.updateMode()}),Tt(1,_W,2,2,"option",1),q()),2&t&&(qe("ngModel",s.scaleMode),be(1),qe("ngForOf",s.modes))},dependencies:[Ys,qi,ed,u_,h_,hu,zm,Jh],encapsulation:2})}function yW(n,e){if(1&n){const t=bs();H(0,"div",3),Ge("click",function(){const i=vs(t).$implicit;return ws(vt().playNote(i))}),H(1,"div",4)(2,"div"),Ne(3),tt(4,"note"),q()()()}if(2&n){const t=e.$implicit;be(3),Dr(gt(4,1,t))}}function vW(n,e){if(1&n){const t=bs();H(0,"div",3),Ge("click",function(){const i=vs(t).$implicit;return ws(vt().playNote(i))}),H(1,"div",5)(2,"div",6),Ne(3),tt(4,"note"),q()(),H(5,"div",7)(6,"div",8),Ne(7),q()()()}if(2&n){const t=e.$implicit;be(3),Dr(zl(4,2,t,t.octave)),be(4),Dr(t.position)}}class Gd{constructor(e,t){this.musicService=e,this.toneService=t,this.scaleNotes$=this.musicService.currentScale$,this.chords$=this.musicService.currentChords$,this.notes=Ki}playNote(e){this.toneService.playNote(e)}static#e=this.\u0275fac=function(t){return new(t||Gd)(E(Js),E(Br))};static#t=this.\u0275cmp=Vn({type:Gd,selectors:[["app-notes-player-view"]],standalone:!0,features:[ss],decls:6,vars:4,consts:[[1,"notes-player-view"],[1,"d-flex","overflow-auto"],["class","card",3,"click",4,"ngFor","ngForOf"],[1,"card",3,"click"],[1,"d-flex","flex-row","justify-content-center"],[1,"d-flex","flex-row","justify-content-center","fs-5"],[1,"note-name"],[1,"d-flex","flex-row","justify-content-center","fs-6"],[1,"note-position"]],template:function(t,s){1&t&&(H(0,"div",0)(1,"div",1),Tt(2,yW,5,3,"div",2),tt(3,"async"),q(),H(4,"div",1),Tt(5,vW,8,5,"div",2),q()()),2&t&&(be(2),qe("ngForOf",gt(3,2,s.scaleNotes$)),be(3),qe("ngForOf",s.notes))},dependencies:[Ys,qi,mh,va],styles:[".notes-player-view[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{min-width:60px}"]})}class Wd{constructor(e,t){this.musicService=e,this.toneService=t,this.scaleNotes$=this.musicService.currentScale$,this.chords$=this.musicService.currentChords$,this.notes=Ki}static#e=this.\u0275fac=function(t){return new(t||Wd)(E(Js),E(Br))};static#t=this.\u0275cmp=Vn({type:Wd,selectors:[["app-player-view"]],standalone:!0,features:[ss],decls:10,vars:0,consts:[[1,"player-view","container"],[1,"row"]],template:function(t,s){1&t&&(H(0,"div",0)(1,"div",1),Gs(2,"app-root-note-selector")(3,"app-scale-mode-selector"),q(),H(4,"div",1),Gs(5,"app-chords-view"),q(),H(6,"div",1),Gs(7,"app-notes-player-view"),q(),H(8,"div",1),Gs(9,"app-synth-view"),q()())},dependencies:[Ys,ed,Ud,qd,ju,Bu,Gd],styles:[".player-view[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin-bottom:1rem}"]})}class zd{static#e=this.\u0275fac=function(t){return new(t||zd)};static#t=this.\u0275cmp=Vn({type:zd,selectors:[["ng-component"]],standalone:!0,features:[ss],decls:0,vars:0,template:function(t,s){},dependencies:[Ys],encapsulation:2})}class wW extends O{constructor(e=1/0,t=1/0,s=rv){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=s,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:s,_infiniteTimeWindow:r,_timestampProvider:i,_windowTime:o}=this;t||(s.push(e),!r&&s.push(i.now()+o)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:s,_buffer:r}=this,i=r.slice();for(let o=0;o<i.length&&!e.closed;o+=s?1:2)e.next(i[o]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:s,_infiniteTimeWindow:r}=this,i=(r?1:2)*e;if(e<1/0&&i<s.length&&s.splice(0,s.length-i),!r){const o=t.now();let a=0;for(let c=1;c<s.length&&s[c]<=o;c+=2)a=c;a&&s.splice(0,a+1)}}}var yi=(()=>(function(n){n.WHOLE="WHOLE",n.HALF="HALF",n.QUARTER="QUARTER"}(yi||(yi={})),yi))(),Ba=(()=>(function(n){n.REGISTER="REGISTER",n.DEREGISTER="DEREGISTER"}(Ba||(Ba={})),Ba))(),Qd=(()=>(function(n){n.HIT="HIT"}(Qd||(Qd={})),Qd))();class $u{constructor(e){this.timeService=e,this.subscriptions=[],this._observableEmitter=new wW,this.observableEmitter$=this._observableEmitter.asObservable(),this.ticks={[yi.WHOLE]:this.timeService.beatTick$,[yi.HALF]:this.timeService.halfTick$,[yi.QUARTER]:this.timeService.quarterTick$}}registerHit(e,t,s=yi.QUARTER){const i=this.buildHitStream(e,this.timeService.beatTick$);this._observableEmitter.next({instrument:t,onTick:e,action:Ba.REGISTER,stream:i})}deregisterHit(e,t,s=yi.QUARTER){this._observableEmitter.next({instrument:t,onTick:e,action:Ba.DEREGISTER,stream:_i})}buildHitStream(e,t=this.timeService.quarterTick$){return t.pipe(ee(s=>s===e&&(console.log("HIT",s,e),!0)),ln(s=>s?Z(Qd.HIT):_i))}static#e=this.\u0275fac=function(t){return new(t||$u)(K(ja))};static#t=this.\u0275prov=re({token:$u,factory:$u.\u0275fac,providedIn:"root"})}function DW(n,e){if(1&n){const t=bs();Ec(0),H(1,"button",13),Ge("click",function(){return vs(t),ws(vt().toggleIsMetronomeOn())}),Ne(2,"toggle_on"),q(),Ac()}}function CW(n,e){if(1&n){const t=bs();H(0,"button",13),Ge("click",function(){return vs(t),ws(vt().toggleIsMetronomeOn())}),Ne(1,"toggle_off"),q()}}function bW(n,e){if(1&n){const t=bs();Ec(0),H(1,"button",13),Ge("click",function(){return vs(t),ws(vt().toggleIsPlaying())}),Ne(2,"pause_circle"),q(),Ac()}}function SW(n,e){if(1&n){const t=bs();H(0,"button",13),Ge("click",function(){return vs(t),ws(vt().toggleIsPlaying())}),Ne(1,"play_circle"),q()}}function TW(n,e){if(1&n&&(H(0,"button",17)(1,"span"),tt(2,"async"),Ne(3),q()()),2&n){const t=e.index,s=vt().ngIf,r=vt();be(1),ji("text-bg-secondary",(t+1)%s==1)("text-bg-warning",gt(2,5,r.beatTick$)===t+1),be(2),Qs(" ",t%s+1," ")}}const iv=function(){return[]};function EW(n,e){if(1&n&&(H(0,"div",1)(1,"div",14),Ne(2,"#"),q(),H(3,"div",15),Tt(4,TW,4,7,"button",16),tt(5,"async"),q()()),2&n){const t=e.ngIf,s=vt();let r;be(4),qe("ngForOf",Wl(3,iv).constructor(t*(null!==(r=gt(5,1,s.loopDuration$))&&void 0!==r?r:1)))}}function AW(n,e){if(1&n){const t=bs();H(0,"button",19),Ge("click",function(){const i=vs(t).index;return ws(vt(2).toggleHit(i+1,"snare"))}),H(1,"span",20),Ne(2),q()()}if(2&n){const t=e.index,s=vt().ngIf;ji("bg-success",!!vt().getRegisteredHit(t+1,"snare")),be(2),Dr(t%s+1)}}function xW(n,e){if(1&n&&(H(0,"div",1)(1,"div",14),Ne(2,"Snare"),q(),H(3,"div",15),Tt(4,AW,3,3,"button",18),tt(5,"async"),q()()),2&n){const t=e.ngIf,s=vt();let r;be(4),qe("ngForOf",Wl(3,iv).constructor(t*(null!==(r=gt(5,1,s.loopDuration$))&&void 0!==r?r:1)))}}function MW(n,e){if(1&n&&(H(0,"button",22)(1,"span",20),Ne(2),q()()),2&n){const t=e.index,s=vt().ngIf;ji("bg-success",!1),be(2),Dr(t%s+1)}}function IW(n,e){if(1&n&&(H(0,"div",1)(1,"div",14),Ne(2,"Hat"),q(),H(3,"div",15),Tt(4,MW,3,3,"button",21),tt(5,"async"),q()()),2&n){const t=e.ngIf,s=vt();let r;be(4),qe("ngForOf",Wl(3,iv).constructor(2*t*(null!==(r=gt(5,1,s.loopDuration$))&&void 0!==r?r:1)))}}class Zd{constructor(e,t,s,r){this.musicService=e,this.toneService=t,this.timeService=s,this.sequencerService=r,this.subscriptions=[],this.hitSubscriptions=[],this.isMetronomeOn$=this.timeService.isMetronomeOn$,this.isPlaying$=this.timeService.isPlaying$,this.bpm$=this.timeService.bpm$,this.numBeatsPerBar$=this.timeService.numBeatsPerBar$,this.noteDurationPerBeat$=this.timeService.beatValue$,this.beatTick$=this.timeService.beatTick$,this.metronomeClick$=this.timeService.metronomeClick$,this.loopDuration$=this.timeService.loopDuration$}ngOnInit(){this.subscriptions.push(this.metronomeClick$.pipe(At(e=>this.toneService.playMetronomeClick(e))).subscribe(),this.timeService.halfTick$.pipe(ee(e=>1===e)).subscribe(),this.timeService.quarterTick$.pipe(ee(e=>1===e||3===e)).subscribe(),this.sequencerService.observableEmitter$.pipe(At(e=>this.subscribeToNewObservable(e))).subscribe())}getRegisteredHit(e,t="snare"){return this.hitSubscriptions.find(s=>s.instrument===t&&s.onTick===e)}toggleHit(e,t){this.getRegisteredHit(e,t)?this.sequencerService.deregisterHit(e,t):this.sequencerService.registerHit(e,t)}ngOnDestroy(){this.subscriptions.forEach(e=>e.unsubscribe())}toggleIsMetronomeOn(){this.timeService.toggleIsMetronomeOn()}toggleIsPlaying(){this.timeService.toggleIsPlaying()}setBpm(e){e.target.value&&this.timeService.setBpm(Number(e.target.value))}setNumBeatsPerBar(e){e.target.value&&this.timeService.setNumBeatsPerBar(Number(e.target.value))}setNoteDurationPerBeat(e){e.target.value&&this.timeService.setNoteDurationPerBeat(Number(e.target.value))}setLoopDuration(e){e.target.value&&this.timeService.setLoopDuration(Number(e.target.value))}subscribeToNewObservable(e){if(e.action===Ba.REGISTER)this.hitSubscriptions.push({instrument:e.instrument,onTick:e.onTick,subscription:this.timeService.beatTick$.pipe(At(t=>{t%(this.timeService.numBeatsPerBar*this.timeService.loopDuration)===e.onTick&&this.toneService.playSample(e.instrument)})).subscribe()});else{const t=this.getRegisteredHit(e.onTick,e.instrument);t?(t.subscription.unsubscribe(),this.hitSubscriptions=this.hitSubscriptions.filter(s=>s!==t)):console.log("should not happen !")}}static#e=this.\u0275fac=function(t){return new(t||Zd)(E(Js),E(Br),E(ja),E($u))};static#t=this.\u0275cmp=Vn({type:Zd,selectors:[["ng-component"]],standalone:!0,features:[ss],decls:46,vars:32,consts:[[1,"sketch-view","container"],[1,"row"],[1,"col"],[1,"d-flex","flex-row"],["for","bpm"],["type","number","name","bpm","id","bpm","step","1",3,"value","change"],["type","number","name","numBeatsPerBar","id","numBeatsPerBar",3,"value","change"],["type","number","name","noteDurationPerBeat","id","noteDurationPerBeat",3,"value","change"],["type","number","name","loopDuration","id","loopDuration",3,"value","change"],[4,"ngIf","ngIfElse"],["offState",""],["pauseIcon",""],["class","row",4,"ngIf"],[1,"material-icons",3,"click"],[1,"col-lg-1","d-flex","align-items-center"],[1,"col-lg-11","col-12","d-flex"],["class","card p-1 m-1 square d-flex flex-column justify-content-center align-items-center",4,"ngFor","ngForOf"],[1,"card","p-1","m-1","square","d-flex","flex-column","justify-content-center","align-items-center"],["class","card p-1 m-1 square d-flex flex-column justify-content-center align-items-center",3,"bg-success","click",4,"ngFor","ngForOf"],[1,"card","p-1","m-1","square","d-flex","flex-column","justify-content-center","align-items-center",3,"click"],[1,"hidden"],["class","card pad-card p-1 m-1 square d-flex flex-column justify-content-center align-items-center",3,"bg-success",4,"ngFor","ngForOf"],[1,"card","pad-card","p-1","m-1","square","d-flex","flex-column","justify-content-center","align-items-center"]],template:function(t,s){if(1&t&&(H(0,"div",0)(1,"div",1),Gs(2,"app-root-note-selector")(3,"app-scale-mode-selector"),q(),H(4,"div",1)(5,"div",2)(6,"div",3)(7,"label",4),Ne(8,"BPM"),q(),H(9,"input",5),Ge("change",function(i){return s.setBpm(i)}),tt(10,"async"),q()()()(),H(11,"div",1)(12,"div"),Ne(13,"Time Signature"),q(),H(14,"input",6),Ge("change",function(i){return s.setNumBeatsPerBar(i)}),tt(15,"async"),q(),H(16,"input",7),Ge("change",function(i){return s.setNoteDurationPerBeat(i)}),tt(17,"async"),q()(),H(18,"div",1)(19,"div"),Ne(20,"Loop Duration"),q(),H(21,"input",8),Ge("change",function(i){return s.setLoopDuration(i)}),tt(22,"async"),q()(),H(23,"div",1)(24,"div",2)(25,"div"),Ne(26,"Metronome"),q(),Tt(27,DW,3,0,"ng-container",9),tt(28,"async"),Tt(29,CW,2,0,"ng-template",null,10,Dg),q()(),H(31,"div",1)(32,"div",2),Tt(33,bW,3,0,"ng-container",9),tt(34,"async"),Tt(35,SW,2,0,"ng-template",null,11,Dg),q()(),H(37,"div",1),Ne(38),tt(39,"async"),q(),Tt(40,EW,6,4,"div",12),tt(41,"async"),Tt(42,xW,6,4,"div",12),tt(43,"async"),Tt(44,IW,6,4,"div",12),tt(45,"async"),q()),2&t){const r=eg(30),i=eg(36);be(9),qe("value",gt(10,12,s.bpm$)),be(5),qe("value",gt(15,14,s.numBeatsPerBar$)),be(2),qe("value",gt(17,16,s.noteDurationPerBeat$)),be(5),qe("value",gt(22,18,s.loopDuration$)),be(6),qe("ngIf",gt(28,20,s.isMetronomeOn$))("ngIfElse",r),be(6),qe("ngIf",gt(34,22,s.isPlaying$))("ngIfElse",i),be(5),Qs(" ",gt(39,24,s.metronomeClick$)," "),be(2),qe("ngIf",gt(41,26,s.numBeatsPerBar$)),be(2),qe("ngIf",gt(43,28,s.numBeatsPerBar$)),be(2),qe("ngIf",gt(45,30,s.numBeatsPerBar$))}},dependencies:[Ys,qi,tm,mh,ju,Bu,ed],styles:[".card[_ngcontent-%COMP%]{width:60px;height:60px;flex-shrink:0}.card.pad-card[_ngcontent-%COMP%]{width:6px}.hidden[_ngcontent-%COMP%]{visibility:hidden}"]})}!function D2(n,e){jP({rootComponent:n,...YS(e)})}(Uh,{providers:[function i$(n,...e){return function _N(n){return{\u0275providers:n}}([{provide:ga,multi:!0,useValue:n},[],{provide:da,useFactory:lE,deps:[hn]},{provide:xg,multi:!0,useFactory:hE},e.map(t=>t.\u0275providers)])}([{path:"",component:Wd},{path:"piano-roll",component:zd},{path:"sketch",component:Zd}]),{provide:qg,useValue:"/sketched/"}]})},21:function(de,Pt,je){!function(W,Be,Fe,ft){"use strict";function $e(Me){return Me&&"object"==typeof Me&&"default"in Me?Me:{default:Me}}var Qn=$e(Be),ks=$e(Fe),go=$e(ft),Fs=function($,_e,O){return{endTime:_e,insertTime:O,type:"exponentialRampToValue",value:$}},Di=function($,_e,O){return{endTime:_e,insertTime:O,type:"linearRampToValue",value:$}},mo=function($,_e){return{startTime:_e,type:"setValue",value:$}},Ci=function($,_e,O){return{duration:O,startTime:_e,type:"setValueCurve",values:$}},Uu=function($,_e,O){var X=O.target;return X+(_e-X)*Math.exp((O.startTime-$)/O.timeConstant)},Hr=function($){return"exponentialRampToValue"===$.type},_o=function($){return"linearRampToValue"===$.type},Zn=function($){return Hr($)||_o($)},ps=function($){return"setValue"===$.type},Tn=function($){return"setValueCurve"===$.type},Ua=function Me($,_e,O,fe){var X=$[_e];return void 0===X?fe:Zn(X)||ps(X)?X.value:Tn(X)?X.values[X.values.length-1]:Uu(O,Me($,_e-1,X.startTime,fe),X)},yo=function($,_e,O,fe,X){return void 0===O?[fe.insertTime,X]:Zn(O)?[O.endTime,O.value]:ps(O)?[O.startTime,O.value]:Tn(O)?[O.startTime+O.duration,O.values[O.values.length-1]]:[O.startTime,Ua($,_e-1,O.startTime,X)]},qa=function($){return"cancelAndHold"===$.type},bi=function($){return"cancelScheduledValues"===$.type},Ps=function($){return qa($)||bi($)?$.cancelTime:Hr($)||_o($)?$.endTime:$.startTime},Ur=function($,_e,O,fe){var ae=fe.value;return O===ae?ae:0<O&&0<ae||O<0&&ae<0?O*Math.pow(ae/O,($-_e)/(fe.endTime-_e)):0},Si=function($,_e,O,fe){return O+($-_e)/(fe.endTime-_e)*(fe.value-O)},Ga=function($,_e){var X=_e.values;return function($,_e){var O=Math.floor(_e),fe=Math.ceil(_e);return O===fe?$[O]:(1-(_e-O))*$[O]+(1-(fe-_e))*$[fe]}(X,($-_e.startTime)/_e.duration*(X.length-1))},vo=function($){return"setTarget"===$.type},Wa=function(Me){function $(_e){ks.default(this,$),this._automationEvents=[],this._currenTime=0,this._defaultValue=_e}return go.default($,[{key:Me,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(O){var fe=Ps(O);if(qa(O)||bi(O)){var X=this._automationEvents.findIndex(function(cr){return bi(O)&&Tn(cr)?cr.startTime+cr.duration>=fe:Ps(cr)>=fe}),ae=this._automationEvents[X];if(-1!==X&&(this._automationEvents=this._automationEvents.slice(0,X)),qa(O)){var U=this._automationEvents[this._automationEvents.length-1];if(void 0!==ae&&Zn(ae)){if(vo(U))throw new Error("The internal list is malformed.");var wo=Tn(U)?U.startTime+U.duration:Ps(U),ee=Tn(U)?U.values[U.values.length-1]:U.value,qr=Hr(ae)?Ur(fe,wo,ee,ae):Si(fe,wo,ee,ae),Wu=Hr(ae)?Fs(qr,fe,this._currenTime):Di(qr,fe,this._currenTime);this._automationEvents.push(Wu)}void 0!==U&&vo(U)&&this._automationEvents.push(mo(this.getValue(fe),fe)),void 0!==U&&Tn(U)&&U.startTime+U.duration>fe&&(this._automationEvents[this._automationEvents.length-1]=Ci(new Float32Array([6,7]),U.startTime,fe-U.startTime))}}else{var Ls=this._automationEvents.findIndex(function(cr){return Ps(cr)>fe}),Gr=-1===Ls?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[Ls-1];if(void 0!==Gr&&Tn(Gr)&&Ps(Gr)+Gr.duration>fe)return!1;var sn=Hr(O)?Fs(O.value,O.endTime,this._currenTime):_o(O)?Di(O.value,fe,this._currenTime):O;if(-1===Ls)this._automationEvents.push(sn);else{if(Tn(O)&&fe+O.duration>Ps(this._automationEvents[Ls]))return!1;this._automationEvents.splice(Ls,0,sn)}}return!0}},{key:"flush",value:function(O){var fe=this._automationEvents.findIndex(function(U){return Ps(U)>O});if(fe>1){var X=this._automationEvents.slice(fe-1),ae=X[0];vo(ae)&&X.unshift(mo(Ua(this._automationEvents,fe-2,ae.startTime,this._defaultValue),ae.startTime)),this._automationEvents=X}}},{key:"getValue",value:function(O){if(0===this._automationEvents.length)return this._defaultValue;var fe=this._automationEvents.findIndex(function(av){return Ps(av)>O}),X=this._automationEvents[fe],ae=(-1===fe?this._automationEvents.length:fe)-1,U=this._automationEvents[ae];if(void 0!==U&&vo(U)&&(void 0===X||!Zn(X)||X.insertTime>O))return Uu(O,Ua(this._automationEvents,ae-1,U.startTime,this._defaultValue),U);if(void 0!==U&&ps(U)&&(void 0===X||!Zn(X)))return U.value;if(void 0!==U&&Tn(U)&&(void 0===X||!Zn(X)||U.startTime+U.duration>O))return O<U.startTime+U.duration?Ga(O,U):U.values[U.values.length-1];if(void 0!==U&&Zn(U)&&(void 0===X||!Zn(X)))return U.value;if(void 0!==X&&Hr(X)){var wo=yo(this._automationEvents,ae,U,X,this._defaultValue),ee=Qn.default(wo,2);return Ur(O,ee[0],ee[1],X)}if(void 0!==X&&_o(X)){var Ls=yo(this._automationEvents,ae,U,X,this._defaultValue),Gr=Qn.default(Ls,2);return Si(O,Gr[0],Gr[1],X)}return this._defaultValue}}]),$}(Symbol.iterator);W.AutomationEventList=Wa,W.createCancelAndHoldAutomationEvent=function($){return{cancelTime:$,type:"cancelAndHold"}},W.createCancelScheduledValuesAutomationEvent=function($){return{cancelTime:$,type:"cancelScheduledValues"}},W.createExponentialRampToValueAutomationEvent=function($,_e){return{endTime:_e,type:"exponentialRampToValue",value:$}},W.createLinearRampToValueAutomationEvent=function($,_e){return{endTime:_e,type:"linearRampToValue",value:$}},W.createSetTargetAutomationEvent=function($,_e,O){return{startTime:_e,target:$,timeConstant:O,type:"setTarget"}},W.createSetValueAutomationEvent=mo,W.createSetValueCurveAutomationEvent=Ci,Object.defineProperty(W,"__esModule",{value:!0})}(Pt,je(424),je(690),je(728))},897:de=>{de.exports=function Pt(je,W){(null==W||W>je.length)&&(W=je.length);for(var Be=0,Fe=new Array(W);Be<W;Be++)Fe[Be]=je[Be];return Fe},de.exports.__esModule=!0,de.exports.default=de.exports},372:de=>{de.exports=function Pt(je){if(Array.isArray(je))return je},de.exports.__esModule=!0,de.exports.default=de.exports},690:de=>{de.exports=function Pt(je,W){if(!(je instanceof W))throw new TypeError("Cannot call a class as a function")},de.exports.__esModule=!0,de.exports.default=de.exports},728:de=>{function Pt(W,Be){for(var Fe=0;Fe<Be.length;Fe++){var ft=Be[Fe];ft.enumerable=ft.enumerable||!1,ft.configurable=!0,"value"in ft&&(ft.writable=!0),Object.defineProperty(W,ft.key,ft)}}de.exports=function je(W,Be,Fe){return Be&&Pt(W.prototype,Be),Fe&&Pt(W,Fe),Object.defineProperty(W,"prototype",{writable:!1}),W},de.exports.__esModule=!0,de.exports.default=de.exports},872:de=>{de.exports=function Pt(je,W){var Be=null==je?null:typeof Symbol<"u"&&je[Symbol.iterator]||je["@@iterator"];if(null!=Be){var Qn,ks,Fe=[],ft=!0,$e=!1;try{for(Be=Be.call(je);!(ft=(Qn=Be.next()).done)&&(Fe.push(Qn.value),!W||Fe.length!==W);ft=!0);}catch(go){$e=!0,ks=go}finally{try{!ft&&null!=Be.return&&Be.return()}finally{if($e)throw ks}}return Fe}},de.exports.__esModule=!0,de.exports.default=de.exports},218:de=>{de.exports=function Pt(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},de.exports.__esModule=!0,de.exports.default=de.exports},424:(de,Pt,je)=>{var W=je(372),Be=je(872),Fe=je(116),ft=je(218);de.exports=function $e(Qn,ks){return W(Qn)||Be(Qn,ks)||Fe(Qn,ks)||ft()},de.exports.__esModule=!0,de.exports.default=de.exports},116:(de,Pt,je)=>{var W=je(897);de.exports=function Be(Fe,ft){if(Fe){if("string"==typeof Fe)return W(Fe,ft);var $e=Object.prototype.toString.call(Fe).slice(8,-1);if("Object"===$e&&Fe.constructor&&($e=Fe.constructor.name),"Map"===$e||"Set"===$e)return Array.from(Fe);if("Arguments"===$e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($e))return W(Fe,ft)}},de.exports.__esModule=!0,de.exports.default=de.exports}},de=>{de(de.s=123)}]);