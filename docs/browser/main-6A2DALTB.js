var KT=Object.create;var Ph=Object.defineProperty,JT=Object.defineProperties,eE=Object.getOwnPropertyDescriptor,tE=Object.getOwnPropertyDescriptors,nE=Object.getOwnPropertyNames,fl=Object.getOwnPropertySymbols,rE=Object.getPrototypeOf,Vh=Object.prototype.hasOwnProperty,wv=Object.prototype.propertyIsEnumerable;var xv=(n,e,t)=>e in n?Ph(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,y=(n,e)=>{for(var t in e||={})Vh.call(e,t)&&xv(n,t,e[t]);if(fl)for(var t of fl(e))wv.call(e,t)&&xv(n,t,e[t]);return n},O=(n,e)=>JT(n,tE(e));var xo=(n,e)=>{var t={};for(var r in n)Vh.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&fl)for(var r of fl(n))e.indexOf(r)<0&&wv.call(n,r)&&(t[r]=n[r]);return t};var jn=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var oE=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of nE(e))!Vh.call(n,o)&&o!==t&&Ph(n,o,{get:()=>e[o],enumerable:!(r=eE(e,o))||r.enumerable});return n};var Cv=(n,e,t)=>(t=n!=null?KT(rE(n)):{},oE(e||!n||!n.__esModule?Ph(t,"default",{value:n,enumerable:!0}):t,n));var te=(n,e,t)=>new Promise((r,o)=>{var i=c=>{try{a(t.next(c))}catch(l){o(l)}},s=c=>{try{a(t.throw(c))}catch(l){o(l)}},a=c=>c.done?r(c.value):Promise.resolve(c.value).then(i,s);a((t=t.apply(n,e)).next())});var kw=jn((h3,Nc)=>{"use strict";function _R(n){if(Array.isArray(n))return n}Nc.exports=_R,Nc.exports.__esModule=!0,Nc.exports.default=Nc.exports});var Rw=jn((f3,Oc)=>{"use strict";function xR(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,o,i,s,a=[],c=!0,l=!1;try{if(i=(t=t.call(n)).next,e===0){if(Object(t)!==t)return;c=!1}else for(;!(c=(r=i.call(t)).done)&&(a.push(r.value),a.length!==e);c=!0);}catch(u){l=!0,o=u}finally{try{if(!c&&t.return!=null&&(s=t.return(),Object(s)!==s))return}finally{if(l)throw o}}return a}}Oc.exports=xR,Oc.exports.__esModule=!0,Oc.exports.default=Oc.exports});var Fw=jn((p3,kc)=>{"use strict";function wR(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}kc.exports=wR,kc.exports.__esModule=!0,kc.exports.default=kc.exports});var Vw=jn((m3,Rc)=>{"use strict";var Pw=Fw();function CR(n,e){if(n){if(typeof n=="string")return Pw(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Pw(n,e):void 0}}Rc.exports=CR,Rc.exports.__esModule=!0,Rc.exports.default=Rc.exports});var Lw=jn((g3,Fc)=>{"use strict";function DR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}Fc.exports=DR,Fc.exports.__esModule=!0,Fc.exports.default=Fc.exports});var jw=jn((v3,Pc)=>{"use strict";var bR=kw(),SR=Rw(),TR=Vw(),ER=Lw();function IR(n,e){return bR(n)||SR(n,e)||TR(n,e)||ER()}Pc.exports=IR,Pc.exports.__esModule=!0,Pc.exports.default=Pc.exports});var Bw=jn((y3,Vc)=>{"use strict";function MR(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}Vc.exports=MR,Vc.exports.__esModule=!0,Vc.exports.default=Vc.exports});var gg=jn((_3,ho)=>{"use strict";function mg(n){"@babel/helpers - typeof";return ho.exports=mg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ho.exports.__esModule=!0,ho.exports.default=ho.exports,mg(n)}ho.exports=mg,ho.exports.__esModule=!0,ho.exports.default=ho.exports});var Hw=jn((x3,Lc)=>{"use strict";var $w=gg().default;function AR(n,e){if($w(n)!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if($w(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}Lc.exports=AR,Lc.exports.__esModule=!0,Lc.exports.default=Lc.exports});var Uw=jn((w3,jc)=>{"use strict";var NR=gg().default,OR=Hw();function kR(n){var e=OR(n,"string");return NR(e)=="symbol"?e:e+""}jc.exports=kR,jc.exports.__esModule=!0,jc.exports.default=jc.exports});var Ww=jn((C3,Bc)=>{"use strict";var RR=Uw();function qw(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,RR(r.key),r)}}function FR(n,e,t){return e&&qw(n.prototype,e),t&&qw(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}Bc.exports=FR,Bc.exports.__esModule=!0,Bc.exports.default=Bc.exports});var vg=jn((Rd,zw)=>{"use strict";(function(n,e){typeof Rd=="object"&&typeof zw<"u"?e(Rd,jw(),Bw(),Ww()):typeof define=="function"&&define.amd?define(["exports","@babel/runtime/helpers/slicedToArray","@babel/runtime/helpers/classCallCheck","@babel/runtime/helpers/createClass"],e):(n=typeof globalThis<"u"?globalThis:n||self,e(n.automationEvents={},n._slicedToArray,n._classCallCheck,n._createClass))})(Rd,function(n,e,t,r){"use strict";function o(H){return H&&typeof H=="object"&&"default"in H?H:{default:H}}var i=o(e),s=o(t),a=o(r),c=function(E,L,M){return{endTime:L,insertTime:M,type:"exponentialRampToValue",value:E}},l=function(E,L,M){return{endTime:L,insertTime:M,type:"linearRampToValue",value:E}},u=function(E,L){return{startTime:L,type:"setValue",value:E}},d=function(E,L,M){return{duration:M,startTime:L,type:"setValueCurve",values:E}},f=function(E,L,M){var G=M.startTime,z=M.target,xe=M.timeConstant;return z+(L-z)*Math.exp((G-E)/xe)},h=function(E){return E.type==="exponentialRampToValue"},p=function(E){return E.type==="linearRampToValue"},m=function(E){return h(E)||p(E)},g=function(E){return E.type==="setValue"},v=function(E){return E.type==="setValueCurve"},C=function H(E,L,M,G){var z=E[L];return z===void 0?G:m(z)||g(z)?z.value:v(z)?z.values[z.values.length-1]:f(M,H(E,L-1,z.startTime,G),z)},I=function(E,L,M,G,z){return M===void 0?[G.insertTime,z]:m(M)?[M.endTime,M.value]:g(M)?[M.startTime,M.value]:v(M)?[M.startTime+M.duration,M.values[M.values.length-1]]:[M.startTime,C(E,L-1,M.startTime,z)]},A=function(E){return E.type==="cancelAndHold"},D=function(E){return E.type==="cancelScheduledValues"},w=function(E){return A(E)||D(E)?E.cancelTime:h(E)||p(E)?E.endTime:E.startTime},x=function(E,L,M,G){var z=G.endTime,xe=G.value;return M===xe?xe:0<M&&0<xe||M<0&&xe<0?M*Math.pow(xe/M,(E-L)/(z-L)):0},b=function(E,L,M,G){var z=G.endTime,xe=G.value;return M+(E-L)/(z-L)*(xe-M)},V=function(E,L){var M=Math.floor(L),G=Math.ceil(L);return M===G?E[M]:(1-(L-M))*E[M]+(1-(G-L))*E[G]},Y=function(E,L){var M=L.duration,G=L.startTime,z=L.values,xe=(E-G)/M*(z.length-1);return V(z,xe)},R=function(E){return E.type==="setTarget"},k=function(H){function E(L){s.default(this,E),this._automationEvents=[],this._currenTime=0,this._defaultValue=L}return a.default(E,[{key:H,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(M){var G=w(M);if(A(M)||D(M)){var z=this._automationEvents.findIndex(function(_n){return D(M)&&v(_n)?_n.startTime+_n.duration>=G:w(_n)>=G}),xe=this._automationEvents[z];if(z!==-1&&(this._automationEvents=this._automationEvents.slice(0,z)),A(M)){var oe=this._automationEvents[this._automationEvents.length-1];if(xe!==void 0&&m(xe)){if(R(oe))throw new Error("The internal list is malformed.");var Fe=v(oe)?oe.startTime+oe.duration:w(oe),fe=v(oe)?oe.values[oe.values.length-1]:oe.value,tr=h(xe)?x(G,Fe,fe,xe):b(G,Fe,fe,xe),qr=h(xe)?c(tr,G,this._currenTime):l(tr,G,this._currenTime);this._automationEvents.push(qr)}oe!==void 0&&R(oe)&&this._automationEvents.push(u(this.getValue(G),G)),oe!==void 0&&v(oe)&&oe.startTime+oe.duration>G&&(this._automationEvents[this._automationEvents.length-1]=d(new Float32Array([6,7]),oe.startTime,G-oe.startTime))}}else{var ee=this._automationEvents.findIndex(function(_n){return w(_n)>G}),yn=ee===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[ee-1];if(yn!==void 0&&v(yn)&&w(yn)+yn.duration>G)return!1;var nr=h(M)?c(M.value,M.endTime,this._currenTime):p(M)?l(M.value,G,this._currenTime):M;if(ee===-1)this._automationEvents.push(nr);else{if(v(M)&&G+M.duration>w(this._automationEvents[ee]))return!1;this._automationEvents.splice(ee,0,nr)}}return!0}},{key:"flush",value:function(M){var G=this._automationEvents.findIndex(function(oe){return w(oe)>M});if(G>1){var z=this._automationEvents.slice(G-1),xe=z[0];R(xe)&&z.unshift(u(C(this._automationEvents,G-2,xe.startTime,this._defaultValue),xe.startTime)),this._automationEvents=z}}},{key:"getValue",value:function(M){if(this._automationEvents.length===0)return this._defaultValue;var G=this._automationEvents.findIndex(function(di){return w(di)>M}),z=this._automationEvents[G],xe=(G===-1?this._automationEvents.length:G)-1,oe=this._automationEvents[xe];if(oe!==void 0&&R(oe)&&(z===void 0||!m(z)||z.insertTime>M))return f(M,C(this._automationEvents,xe-1,oe.startTime,this._defaultValue),oe);if(oe!==void 0&&g(oe)&&(z===void 0||!m(z)))return oe.value;if(oe!==void 0&&v(oe)&&(z===void 0||!m(z)||oe.startTime+oe.duration>M))return M<oe.startTime+oe.duration?Y(M,oe):oe.values[oe.values.length-1];if(oe!==void 0&&m(oe)&&(z===void 0||!m(z)))return oe.value;if(z!==void 0&&h(z)){var Fe=I(this._automationEvents,xe,oe,z,this._defaultValue),fe=i.default(Fe,2),tr=fe[0],qr=fe[1];return x(M,tr,qr,z)}if(z!==void 0&&p(z)){var ee=I(this._automationEvents,xe,oe,z,this._defaultValue),yn=i.default(ee,2),nr=yn[0],_n=yn[1];return b(M,nr,_n,z)}return this._defaultValue}}]),E}(Symbol.iterator),X=function(E){return{cancelTime:E,type:"cancelAndHold"}},N=function(E){return{cancelTime:E,type:"cancelScheduledValues"}},K=function(E,L){return{endTime:L,type:"exponentialRampToValue",value:E}},W=function(E,L){return{endTime:L,type:"linearRampToValue",value:E}},ne=function(E,L,M){return{startTime:L,target:E,timeConstant:M,type:"setTarget"}};n.AutomationEventList=k,n.createCancelAndHoldAutomationEvent=X,n.createCancelScheduledValuesAutomationEvent=N,n.createExponentialRampToValueAutomationEvent=K,n.createLinearRampToValueAutomationEvent=W,n.createSetTargetAutomationEvent=ne,n.createSetValueAutomationEvent=u,n.createSetValueCurveAutomationEvent=d,Object.defineProperty(n,"__esModule",{value:!0})})});function Dv(n,e){return Object.is(n,e)}var Et=null,pl=!1,ml=1,Wr=Symbol("SIGNAL");function Ee(n){let e=Et;return Et=n,e}function bv(){return Et}var Ra={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Bh(n){if(pl)throw new Error("");if(Et===null)return;Et.consumerOnSignalRead(n);let e=Et.nextProducerIndex++;if(_l(Et),e<Et.producerNode.length&&Et.producerNode[e]!==n&&ka(Et)){let t=Et.producerNode[e];yl(t,Et.producerIndexOfThis[e])}Et.producerNode[e]!==n&&(Et.producerNode[e]=n,Et.producerIndexOfThis[e]=ka(Et)?Iv(n,Et,e):0),Et.producerLastReadVersion[e]=n.version}function iE(){ml++}function Sv(n){if(!(ka(n)&&!n.dirty)&&!(!n.dirty&&n.lastCleanEpoch===ml)){if(!n.producerMustRecompute(n)&&!Hh(n)){n.dirty=!1,n.lastCleanEpoch=ml;return}n.producerRecomputeValue(n),n.dirty=!1,n.lastCleanEpoch=ml}}function Tv(n){if(n.liveConsumerNode===void 0)return;let e=pl;pl=!0;try{for(let t of n.liveConsumerNode)t.dirty||sE(t)}finally{pl=e}}function Ev(){return Et?.consumerAllowSignalWrites!==!1}function sE(n){n.dirty=!0,Tv(n),n.consumerMarkedDirty?.(n)}function vl(n){return n&&(n.nextProducerIndex=0),Ee(n)}function $h(n,e){if(Ee(e),!(!n||n.producerNode===void 0||n.producerIndexOfThis===void 0||n.producerLastReadVersion===void 0)){if(ka(n))for(let t=n.nextProducerIndex;t<n.producerNode.length;t++)yl(n.producerNode[t],n.producerIndexOfThis[t]);for(;n.producerNode.length>n.nextProducerIndex;)n.producerNode.pop(),n.producerLastReadVersion.pop(),n.producerIndexOfThis.pop()}}function Hh(n){_l(n);for(let e=0;e<n.producerNode.length;e++){let t=n.producerNode[e],r=n.producerLastReadVersion[e];if(r!==t.version||(Sv(t),r!==t.version))return!0}return!1}function Uh(n){if(_l(n),ka(n))for(let e=0;e<n.producerNode.length;e++)yl(n.producerNode[e],n.producerIndexOfThis[e]);n.producerNode.length=n.producerLastReadVersion.length=n.producerIndexOfThis.length=0,n.liveConsumerNode&&(n.liveConsumerNode.length=n.liveConsumerIndexOfThis.length=0)}function Iv(n,e,t){if(Mv(n),n.liveConsumerNode.length===0&&Av(n))for(let r=0;r<n.producerNode.length;r++)n.producerIndexOfThis[r]=Iv(n.producerNode[r],n,r);return n.liveConsumerIndexOfThis.push(t),n.liveConsumerNode.push(e)-1}function yl(n,e){if(Mv(n),n.liveConsumerNode.length===1&&Av(n))for(let r=0;r<n.producerNode.length;r++)yl(n.producerNode[r],n.producerIndexOfThis[r]);let t=n.liveConsumerNode.length-1;if(n.liveConsumerNode[e]=n.liveConsumerNode[t],n.liveConsumerIndexOfThis[e]=n.liveConsumerIndexOfThis[t],n.liveConsumerNode.length--,n.liveConsumerIndexOfThis.length--,e<n.liveConsumerNode.length){let r=n.liveConsumerIndexOfThis[e],o=n.liveConsumerNode[e];_l(o),o.producerIndexOfThis[r]=e}}function ka(n){return n.consumerIsAlwaysLive||(n?.liveConsumerNode?.length??0)>0}function _l(n){n.producerNode??=[],n.producerIndexOfThis??=[],n.producerLastReadVersion??=[]}function Mv(n){n.liveConsumerNode??=[],n.liveConsumerIndexOfThis??=[]}function Av(n){return n.producerNode!==void 0}function Nv(n){let e=Object.create(aE);e.computation=n;let t=()=>{if(Sv(e),Bh(e),e.value===gl)throw e.error;return e.value};return t[Wr]=e,t}var Lh=Symbol("UNSET"),jh=Symbol("COMPUTING"),gl=Symbol("ERRORED"),aE=O(y({},Ra),{value:Lh,dirty:!0,error:null,equal:Dv,producerMustRecompute(n){return n.value===Lh||n.value===jh},producerRecomputeValue(n){if(n.value===jh)throw new Error("Detected cycle in computations.");let e=n.value;n.value=jh;let t=vl(n),r;try{r=n.computation()}catch(o){r=gl,n.error=o}finally{$h(n,t)}if(e!==Lh&&e!==gl&&r!==gl&&n.equal(e,r)){n.value=e;return}n.value=r,n.version++}});function cE(){throw new Error}var Ov=cE;function kv(){Ov()}function Rv(n){Ov=n}var lE=null;function Fv(n){let e=Object.create(Vv);e.value=n;let t=()=>(Bh(e),e.value);return t[Wr]=e,t}function qh(n,e){Ev()||kv(),n.equal(n.value,e)||(n.value=e,uE(n))}function Pv(n,e){Ev()||kv(),qh(n,e(n.value))}var Vv=O(y({},Ra),{equal:Dv,value:void 0});function uE(n){n.version++,iE(),Tv(n),lE?.()}function ye(n){return typeof n=="function"}function Gi(n){let t=n(r=>{Error.call(r),r.stack=new Error().stack});return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}var xl=Gi(n=>function(t){n(this),this.message=t?`${t.length} errors occurred during unsubscription:
${t.map((r,o)=>`${o+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=t});function hi(n,e){if(n){let t=n.indexOf(e);0<=t&&n.splice(t,1)}}var ct=class n{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:t}=this;if(t)if(this._parentage=null,Array.isArray(t))for(let i of t)i.remove(this);else t.remove(this);let{initialTeardown:r}=this;if(ye(r))try{r()}catch(i){e=i instanceof xl?i.errors:[i]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let i of o)try{Lv(i)}catch(s){e=e??[],s instanceof xl?e=[...e,...s.errors]:e.push(s)}}if(e)throw new xl(e)}}add(e){var t;if(e&&e!==this)if(this.closed)Lv(e);else{if(e instanceof n){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(t=this._finalizers)!==null&&t!==void 0?t:[]).push(e)}}_hasParent(e){let{_parentage:t}=this;return t===e||Array.isArray(t)&&t.includes(e)}_addParent(e){let{_parentage:t}=this;this._parentage=Array.isArray(t)?(t.push(e),t):t?[t,e]:e}_removeParent(e){let{_parentage:t}=this;t===e?this._parentage=null:Array.isArray(t)&&hi(t,e)}remove(e){let{_finalizers:t}=this;t&&hi(t,e),e instanceof n&&e._removeParent(this)}};ct.EMPTY=(()=>{let n=new ct;return n.closed=!0,n})();var Wh=ct.EMPTY;function wl(n){return n instanceof ct||n&&"closed"in n&&ye(n.remove)&&ye(n.add)&&ye(n.unsubscribe)}function Lv(n){ye(n)?n():n.unsubscribe()}var rr={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var Zi={setTimeout(n,e,...t){let{delegate:r}=Zi;return r?.setTimeout?r.setTimeout(n,e,...t):setTimeout(n,e,...t)},clearTimeout(n){let{delegate:e}=Zi;return(e?.clearTimeout||clearTimeout)(n)},delegate:void 0};function Cl(n){Zi.setTimeout(()=>{let{onUnhandledError:e}=rr;if(e)e(n);else throw n})}function zr(){}var jv=zh("C",void 0,void 0);function Bv(n){return zh("E",void 0,n)}function $v(n){return zh("N",n,void 0)}function zh(n,e,t){return{kind:n,value:e,error:t}}var fi=null;function Yi(n){if(rr.useDeprecatedSynchronousErrorHandling){let e=!fi;if(e&&(fi={errorThrown:!1,error:null}),n(),e){let{errorThrown:t,error:r}=fi;if(fi=null,t)throw r}}else n()}function Hv(n){rr.useDeprecatedSynchronousErrorHandling&&fi&&(fi.errorThrown=!0,fi.error=n)}var pi=class extends ct{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wl(e)&&e.add(this)):this.destination=fE}static create(e,t,r){return new Qi(e,t,r)}next(e){this.isStopped?Zh($v(e),this):this._next(e)}error(e){this.isStopped?Zh(Bv(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Zh(jv,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},dE=Function.prototype.bind;function Gh(n,e){return dE.call(n,e)}var Yh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:t}=this;if(t.next)try{t.next(e)}catch(r){Dl(r)}}error(e){let{partialObserver:t}=this;if(t.error)try{t.error(e)}catch(r){Dl(r)}else Dl(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(t){Dl(t)}}},Qi=class extends pi{constructor(e,t,r){super();let o;if(ye(e)||!e)o={next:e??void 0,error:t??void 0,complete:r??void 0};else{let i;this&&rr.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&Gh(e.next,i),error:e.error&&Gh(e.error,i),complete:e.complete&&Gh(e.complete,i)}):o=e}this.destination=new Yh(o)}};function Dl(n){rr.useDeprecatedSynchronousErrorHandling?Hv(n):Cl(n)}function hE(n){throw n}function Zh(n,e){let{onStoppedNotification:t}=rr;t&&Zi.setTimeout(()=>t(n,e))}var fE={closed:!0,next:zr,error:hE,complete:zr};var Xi=typeof Symbol=="function"&&Symbol.observable||"@@observable";function nn(n){return n}function Qh(...n){return Xh(n)}function Xh(n){return n.length===0?nn:n.length===1?n[0]:function(t){return n.reduce((r,o)=>o(r),t)}}var Pe=(()=>{class n{constructor(t){t&&(this._subscribe=t)}lift(t){let r=new n;return r.source=this,r.operator=t,r}subscribe(t,r,o){let i=mE(t)?t:new Qi(t,r,o);return Yi(()=>{let{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(t){try{return this._subscribe(t)}catch(r){t.error(r)}}forEach(t,r){return r=Uv(r),new r((o,i)=>{let s=new Qi({next:a=>{try{t(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(t){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(t)}[Xi](){return this}pipe(...t){return Xh(t)(this)}toPromise(t){return t=Uv(t),new t((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return n.create=e=>new n(e),n})();function Uv(n){var e;return(e=n??rr.Promise)!==null&&e!==void 0?e:Promise}function pE(n){return n&&ye(n.next)&&ye(n.error)&&ye(n.complete)}function mE(n){return n&&n instanceof pi||pE(n)&&wl(n)}function Kh(n){return ye(n?.lift)}function Oe(n){return e=>{if(Kh(e))return e.lift(function(t){try{return n(t,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function De(n,e,t,r,o){return new Jh(n,e,t,r,o)}var Jh=class extends pi{constructor(e,t,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=t?function(a){try{t(a)}catch(c){e.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:t}=this;super.unsubscribe(),!t&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};function Ki(){return Oe((n,e)=>{let t=null;n._refCount++;let r=De(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount){t=null;return}let o=n._connection,i=t;t=null,o&&(!i||o===i)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}var Ji=class extends Pe{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,Kh(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){let e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;let{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new ct;let t=this.getSubject();e.add(this.source.subscribe(De(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=ct.EMPTY)}return e}refCount(){return Ki()(this)}};var qv=Gi(n=>function(){n(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var yt=(()=>{class n extends Pe{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(t){let r=new bl(this,this);return r.operator=t,r}_throwIfClosed(){if(this.closed)throw new qv}next(t){Yi(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(t)}})}error(t){Yi(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=t;let{observers:r}=this;for(;r.length;)r.shift().error(t)}})}complete(){Yi(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:t}=this;for(;t.length;)t.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var t;return((t=this.observers)===null||t===void 0?void 0:t.length)>0}_trySubscribe(t){return this._throwIfClosed(),super._trySubscribe(t)}_subscribe(t){return this._throwIfClosed(),this._checkFinalizedStatuses(t),this._innerSubscribe(t)}_innerSubscribe(t){let{hasError:r,isStopped:o,observers:i}=this;return r||o?Wh:(this.currentObservers=null,i.push(t),new ct(()=>{this.currentObservers=null,hi(i,t)}))}_checkFinalizedStatuses(t){let{hasError:r,thrownError:o,isStopped:i}=this;r?t.error(o):i&&t.complete()}asObservable(){let t=new Pe;return t.source=this,t}}return n.create=(e,t)=>new bl(e,t),n})(),bl=class extends yt{constructor(e,t){super(),this.destination=e,this.source=t}next(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.next)===null||r===void 0||r.call(t,e)}error(e){var t,r;(r=(t=this.destination)===null||t===void 0?void 0:t.error)===null||r===void 0||r.call(t,e)}complete(){var e,t;(t=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||t===void 0||t.call(e)}_subscribe(e){var t,r;return(r=(t=this.source)===null||t===void 0?void 0:t.subscribe(e))!==null&&r!==void 0?r:Wh}};var je=class extends yt{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){let{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Fa={now(){return(Fa.delegate||Date).now()},delegate:void 0};var Pa=class extends yt{constructor(e=1/0,t=1/0,r=Fa){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){let{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:i,_windowTime:s}=this;t||(r.push(e),!o&&r.push(i.now()+s)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();let t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,i=o.slice();for(let s=0;s<i.length&&!e.closed;s+=r?1:2)e.next(i[s]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){let{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,i=(o?1:2)*e;if(e<1/0&&i<r.length&&r.splice(0,r.length-i),!o){let s=t.now(),a=0;for(let c=1;c<r.length&&r[c]<=s;c+=2)a=c;a&&r.splice(0,a+1)}}};var Sl=class extends ct{constructor(e,t){super()}schedule(e,t=0){return this}};var Va={setInterval(n,e,...t){let{delegate:r}=Va;return r?.setInterval?r.setInterval(n,e,...t):setInterval(n,e,...t)},clearInterval(n){let{delegate:e}=Va;return(e?.clearInterval||clearInterval)(n)},delegate:void 0};var Tl=class extends Sl{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){var r;if(this.closed)return this;this.state=e;let o=this.id,i=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(i,o,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(i,this.id,t),this}requestAsyncId(e,t,r=0){return Va.setInterval(e.flush.bind(e,this),r)}recycleAsyncId(e,t,r=0){if(r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&Va.clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;let r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let r=!1,o;try{this.work(e)}catch(i){r=!0,o=i||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),o}unsubscribe(){if(!this.closed){let{id:e,scheduler:t}=this,{actions:r}=t;this.work=this.state=this.scheduler=null,this.pending=!1,hi(r,this),e!=null&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null,super.unsubscribe()}}};var es=class n{constructor(e,t=n.now){this.schedulerActionCtor=e,this.now=t}schedule(e,t=0,r){return new this.schedulerActionCtor(this,e).schedule(r,t)}};es.now=Fa.now;var El=class extends es{constructor(e,t=es.now){super(e,t),this.actions=[],this._active=!1}flush(e){let{actions:t}=this;if(this._active){t.push(e);return}let r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}};var gE=new El(Tl),Wv=gE;var En=new Pe(n=>n.complete());function Il(n){return n&&ye(n.schedule)}function zv(n){return n[n.length-1]}function ts(n){return ye(zv(n))?n.pop():void 0}function wo(n){return Il(zv(n))?n.pop():void 0}function Yt(n,e,t,r){var o=arguments.length,i=o<3?e:r===null?r=Object.getOwnPropertyDescriptor(e,t):r,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(n,e,t,r);else for(var a=n.length-1;a>=0;a--)(s=n[a])&&(i=(o<3?s(i):o>3?s(e,t,i):s(e,t))||i);return o>3&&i&&Object.defineProperty(e,t,i),i}function ke(n,e,t,r){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(u){try{l(r.next(u))}catch(d){s(d)}}function c(u){try{l(r.throw(u))}catch(d){s(d)}}function l(u){u.done?i(u.value):o(u.value).then(a,c)}l((r=r.apply(n,e||[])).next())})}function Gv(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],r=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&r>=n.length&&(n=void 0),{value:n&&n[r++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function mi(n){return this instanceof mi?(this.v=n,this):new mi(n)}function Zv(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=t.apply(n,e||[]),o,i=[];return o={},a("next"),a("throw"),a("return",s),o[Symbol.asyncIterator]=function(){return this},o;function s(h){return function(p){return Promise.resolve(p).then(h,d)}}function a(h,p){r[h]&&(o[h]=function(m){return new Promise(function(g,v){i.push([h,m,g,v])>1||c(h,m)})},p&&(o[h]=p(o[h])))}function c(h,p){try{l(r[h](p))}catch(m){f(i[0][3],m)}}function l(h){h.value instanceof mi?Promise.resolve(h.value.v).then(u,d):f(i[0][2],h)}function u(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),i.shift(),i.length&&c(i[0][0],i[0][1])}}function Yv(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Gv=="function"?Gv(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=n[i]&&function(s){return new Promise(function(a,c){s=n[i](s),o(a,c,s.done,s.value)})}}function o(i,s,a,c){Promise.resolve(c).then(function(l){i({value:l,done:a})},s)}}var Ml=n=>n&&typeof n.length=="number"&&typeof n!="function";function Al(n){return ye(n?.then)}function Nl(n){return ye(n[Xi])}function Ol(n){return Symbol.asyncIterator&&ye(n?.[Symbol.asyncIterator])}function kl(n){return new TypeError(`You provided ${n!==null&&typeof n=="object"?"an invalid object":`'${n}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function vE(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Rl=vE();function Fl(n){return ye(n?.[Rl])}function Pl(n){return Zv(this,arguments,function*(){let t=n.getReader();try{for(;;){let{value:r,done:o}=yield mi(t.read());if(o)return yield mi(void 0);yield yield mi(r)}}finally{t.releaseLock()}})}function Vl(n){return ye(n?.getReader)}function lt(n){if(n instanceof Pe)return n;if(n!=null){if(Nl(n))return yE(n);if(Ml(n))return _E(n);if(Al(n))return xE(n);if(Ol(n))return Qv(n);if(Fl(n))return wE(n);if(Vl(n))return CE(n)}throw kl(n)}function yE(n){return new Pe(e=>{let t=n[Xi]();if(ye(t.subscribe))return t.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function _E(n){return new Pe(e=>{for(let t=0;t<n.length&&!e.closed;t++)e.next(n[t]);e.complete()})}function xE(n){return new Pe(e=>{n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,Cl)})}function wE(n){return new Pe(e=>{for(let t of n)if(e.next(t),e.closed)return;e.complete()})}function Qv(n){return new Pe(e=>{DE(n,e).catch(t=>e.error(t))})}function CE(n){return Qv(Pl(n))}function DE(n,e){var t,r,o,i;return ke(this,void 0,void 0,function*(){try{for(t=Yv(n);r=yield t.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=t.return)&&(yield i.call(t))}finally{if(o)throw o.error}}e.complete()})}function xn(n,e,t,r=0,o=!1){let i=e.schedule(function(){t(),o?n.add(this.schedule(null,r)):this.unsubscribe()},r);if(n.add(i),!o)return i}function Ll(n,e=0){return Oe((t,r)=>{t.subscribe(De(r,o=>xn(r,n,()=>r.next(o),e),()=>xn(r,n,()=>r.complete(),e),o=>xn(r,n,()=>r.error(o),e)))})}function jl(n,e=0){return Oe((t,r)=>{r.add(n.schedule(()=>t.subscribe(r),e))})}function Xv(n,e){return lt(n).pipe(jl(e),Ll(e))}function Kv(n,e){return lt(n).pipe(jl(e),Ll(e))}function Jv(n,e){return new Pe(t=>{let r=0;return e.schedule(function(){r===n.length?t.complete():(t.next(n[r++]),t.closed||this.schedule())})})}function ey(n,e){return new Pe(t=>{let r;return xn(t,e,()=>{r=n[Rl](),xn(t,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){t.error(s);return}i?t.complete():t.next(o)},0,!0)}),()=>ye(r?.return)&&r.return()})}function Bl(n,e){if(!n)throw new Error("Iterable cannot be null");return new Pe(t=>{xn(t,e,()=>{let r=n[Symbol.asyncIterator]();xn(t,e,()=>{r.next().then(o=>{o.done?t.complete():t.next(o.value)})},0,!0)})})}function ty(n,e){return Bl(Pl(n),e)}function ny(n,e){if(n!=null){if(Nl(n))return Xv(n,e);if(Ml(n))return Jv(n,e);if(Al(n))return Kv(n,e);if(Ol(n))return Bl(n,e);if(Fl(n))return ey(n,e);if(Vl(n))return ty(n,e)}throw kl(n)}function it(n,e){return e?ny(n,e):lt(n)}function ue(...n){let e=wo(n);return it(n,e)}function ns(n,e){let t=ye(n)?n:()=>n,r=o=>o.error(t());return new Pe(e?o=>e.schedule(r,0,o):r)}function ef(n){return!!n&&(n instanceof Pe||ye(n.lift)&&ye(n.subscribe))}var Gr=Gi(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function ry(n){return n instanceof Date&&!isNaN(n)}function ae(n,e){return Oe((t,r)=>{let o=0;t.subscribe(De(r,i=>{r.next(n.call(e,i,o++))}))})}var{isArray:bE}=Array;function SE(n,e){return bE(e)?n(...e):n(e)}function $l(n){return ae(e=>SE(n,e))}var{isArray:TE}=Array,{getPrototypeOf:EE,prototype:IE,keys:ME}=Object;function Hl(n){if(n.length===1){let e=n[0];if(TE(e))return{args:e,keys:null};if(AE(e)){let t=ME(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}function AE(n){return n&&typeof n=="object"&&EE(n)===IE}function Ul(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}function It(...n){let e=wo(n),t=ts(n),{args:r,keys:o}=Hl(n);if(r.length===0)return it([],e);let i=new Pe(NE(r,e,o?s=>Ul(o,s):nn));return t?i.pipe($l(t)):i}function NE(n,e,t=nn){return r=>{oy(e,()=>{let{length:o}=n,i=new Array(o),s=o,a=o;for(let c=0;c<o;c++)oy(e,()=>{let l=it(n[c],e),u=!1;l.subscribe(De(r,d=>{i[c]=d,u||(u=!0,a--),a||r.next(t(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}function oy(n,e,t){n?xn(t,n,e):e()}function iy(n,e,t,r,o,i,s,a){let c=[],l=0,u=0,d=!1,f=()=>{d&&!c.length&&!l&&e.complete()},h=m=>l<r?p(m):c.push(m),p=m=>{i&&e.next(m),l++;let g=!1;lt(t(m,u++)).subscribe(De(e,v=>{o?.(v),i?h(v):e.next(v)},()=>{g=!0},void 0,()=>{if(g)try{for(l--;c.length&&l<r;){let v=c.shift();s?xn(e,s,()=>p(v)):p(v)}f()}catch(v){e.error(v)}}))};return n.subscribe(De(e,h,()=>{d=!0,f()})),()=>{a?.()}}function _t(n,e,t=1/0){return ye(e)?_t((r,o)=>ae((i,s)=>e(r,i,o,s))(lt(n(r,o))),t):(typeof e=="number"&&(t=e),Oe((r,o)=>iy(r,o,n,t)))}function rs(n=1/0){return _t(nn,n)}function sy(){return rs(1)}function os(...n){return sy()(it(n,wo(n)))}function ql(n){return new Pe(e=>{lt(n()).subscribe(e)})}function tf(...n){let e=ts(n),{args:t,keys:r}=Hl(n),o=new Pe(i=>{let{length:s}=t;if(!s){i.complete();return}let a=new Array(s),c=s,l=s;for(let u=0;u<s;u++){let d=!1;lt(t[u]).subscribe(De(i,f=>{d||(d=!0,l--),a[u]=f},()=>c--,void 0,()=>{(!c||!d)&&(l||i.next(r?Ul(r,a):a),i.complete())}))}});return e?o.pipe($l(e)):o}function nf(n=0,e,t=Wv){let r=-1;return e!=null&&(Il(e)?t=e:r=e),new Pe(o=>{let i=ry(n)?+n-t.now():n;i<0&&(i=0);let s=0;return t.schedule(function(){o.closed||(o.next(s++),0<=r?this.schedule(void 0,r):o.complete())},i)})}var _r=new Pe(zr);function rn(n,e){return Oe((t,r)=>{let o=0;t.subscribe(De(r,i=>n.call(e,i,o++)&&r.next(i)))})}function Co(n){return Oe((e,t)=>{let r=null,o=!1,i;r=e.subscribe(De(t,void 0,void 0,s=>{i=lt(n(s,Co(n)(e))),r?(r.unsubscribe(),r=null,i.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(t))})}function ay(n,e,t,r,o){return(i,s)=>{let a=t,c=e,l=0;i.subscribe(De(s,u=>{let d=l++;c=a?n(c,u,d):(a=!0,u),r&&s.next(c)},o&&(()=>{a&&s.next(c),s.complete()})))}}function gi(n,e){return ye(e)?_t(n,e,1):_t(n,1)}function Do(n){return Oe((e,t)=>{let r=!1;e.subscribe(De(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function Zr(n){return n<=0?()=>En:Oe((e,t)=>{let r=0;e.subscribe(De(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function rf(n){return ae(()=>n)}function Wl(n=OE){return Oe((e,t)=>{let r=!1;e.subscribe(De(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function OE(){return new Gr}function La(n){return Oe((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}function xr(n,e){let t=arguments.length>=2;return r=>r.pipe(n?rn((o,i)=>n(o,i,r)):nn,Zr(1),t?Do(e):Wl(()=>new Gr))}function is(n){return n<=0?()=>En:Oe((e,t)=>{let r=[];e.subscribe(De(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(let o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function of(n,e){let t=arguments.length>=2;return r=>r.pipe(n?rn((o,i)=>n(o,i,r)):nn,is(1),t?Do(e):Wl(()=>new Gr))}function sf(n,e){return Oe(ay(n,e,arguments.length>=2,!0))}function af(...n){let e=wo(n);return Oe((t,r)=>{(e?os(n,t,e):os(n,t)).subscribe(r)})}function ht(n,e){return Oe((t,r)=>{let o=null,i=0,s=!1,a=()=>s&&!o&&r.complete();t.subscribe(De(r,c=>{o?.unsubscribe();let l=0,u=i++;lt(n(c,u)).subscribe(o=De(r,d=>r.next(e?e(c,d,u,l++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function cf(n){return Oe((e,t)=>{lt(n).subscribe(De(t,()=>t.complete(),zr)),!t.closed&&e.subscribe(t)})}function Ge(n,e,t){let r=ye(n)||e||t?{next:n,error:e,complete:t}:n;return r?Oe((o,i)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let a=!0;o.subscribe(De(i,c=>{var l;(l=r.next)===null||l===void 0||l.call(r,c),i.next(c)},()=>{var c;a=!1,(c=r.complete)===null||c===void 0||c.call(r),i.complete()},c=>{var l;a=!1,(l=r.error)===null||l===void 0||l.call(r,c),i.error(c)},()=>{var c,l;a&&((c=r.unsubscribe)===null||c===void 0||c.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):nn}function zl(...n){let e=ts(n);return Oe((t,r)=>{let o=n.length,i=new Array(o),s=n.map(()=>!1),a=!1;for(let c=0;c<o;c++)lt(n[c]).subscribe(De(r,l=>{i[c]=l,!a&&!s[c]&&(s[c]=!0,(a=s.every(nn))&&(s=null))},zr));t.subscribe(De(r,c=>{if(a){let l=[c,...i];r.next(e?e(...l):l)}}))})}var Gy="https://g.co/ng/security#xss",ie=class extends Error{constructor(e,t){super(Cp(e,t)),this.code=e}};function Cp(n,e){return`${`NG0${Math.abs(n)}`}${e?": "+e:""}`}function Xa(n){return{toString:n}.toString()}var Gl="__parameters__";function kE(n){return function(...t){if(n){let r=n(...t);for(let o in r)this[o]=r[o]}}}function Zy(n,e,t){return Xa(()=>{let r=kE(e);function o(...i){if(this instanceof o)return r.apply(this,i),this;let s=new o(...i);return a.annotation=s,a;function a(c,l,u){let d=c.hasOwnProperty(Gl)?c[Gl]:Object.defineProperty(c,Gl,{value:[]})[Gl];for(;d.length<=u;)d.push(null);return(d[u]=d[u]||[]).push(s),c}}return t&&(o.prototype=Object.create(t.prototype)),o.prototype.ngMetadataName=n,o.annotationCls=o,o})}var Df=globalThis;function Ke(n){for(let e in n)if(n[e]===Ke)return e;throw Error("Could not find renamed property on target object.")}function RE(n,e){for(let t in e)e.hasOwnProperty(t)&&!n.hasOwnProperty(t)&&(n[t]=e[t])}function sn(n){if(typeof n=="string")return n;if(Array.isArray(n))return"["+n.map(sn).join(", ")+"]";if(n==null)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;let e=n.toString();if(e==null)return""+e;let t=e.indexOf(`
`);return t===-1?e:e.substring(0,t)}function cy(n,e){return n==null||n===""?e===null?"":e:e==null||e===""?n:n+" "+e}var FE=Ke({__forward_ref__:Ke});function ko(n){return n.__forward_ref__=ko,n.toString=function(){return sn(this())},n}function on(n){return Yy(n)?n():n}function Yy(n){return typeof n=="function"&&n.hasOwnProperty(FE)&&n.__forward_ref__===ko}function $(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Ro(n){return{providers:n.providers||[],imports:n.imports||[]}}function Mu(n){return ly(n,Xy)||ly(n,Ky)}function Qy(n){return Mu(n)!==null}function ly(n,e){return n.hasOwnProperty(e)?n[e]:null}function PE(n){let e=n&&(n[Xy]||n[Ky]);return e||null}function uy(n){return n&&(n.hasOwnProperty(dy)||n.hasOwnProperty(VE))?n[dy]:null}var Xy=Ke({\u0275prov:Ke}),dy=Ke({\u0275inj:Ke}),Ky=Ke({ngInjectableDef:Ke}),VE=Ke({ngInjectorDef:Ke}),pe=class{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof t=="number"?this.__NG_ELEMENT_ID__=t:t!==void 0&&(this.\u0275prov=$({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Jy(n){return n&&!!n.\u0275providers}var LE=Ke({\u0275cmp:Ke}),jE=Ke({\u0275dir:Ke}),BE=Ke({\u0275pipe:Ke}),$E=Ke({\u0275mod:Ke}),ru=Ke({\u0275fac:Ke}),Ba=Ke({__NG_ELEMENT_ID__:Ke}),hy=Ke({__NG_ENV_ID__:Ke});function Au(n){return typeof n=="string"?n:n==null?"":String(n)}function HE(n){return typeof n=="function"?n.name||n.toString():typeof n=="object"&&n!=null&&typeof n.type=="function"?n.type.name||n.type.toString():Au(n)}function UE(n,e){let t=e?`. Dependency path: ${e.join(" > ")} > ${n}`:"";throw new ie(-200,n)}function Dp(n,e){throw new ie(-201,!1)}var be=function(n){return n[n.Default=0]="Default",n[n.Host=1]="Host",n[n.Self=2]="Self",n[n.SkipSelf=4]="SkipSelf",n[n.Optional=8]="Optional",n}(be||{}),bf;function e_(){return bf}function wn(n){let e=bf;return bf=n,e}function t_(n,e,t){let r=Mu(n);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(t&be.Optional)return null;if(e!==void 0)return e;Dp(n,"Injector")}var qE={},$a=qE,Sf="__NG_DI_FLAG__",ou="ngTempTokenPath",WE="ngTokenPath",zE=/\n/gm,GE="\u0275",fy="__source",us;function ZE(){return us}function bo(n){let e=us;return us=n,e}function YE(n,e=be.Default){if(us===void 0)throw new ie(-203,!1);return us===null?t_(n,void 0,e):us.get(n,e&be.Optional?null:void 0,e)}function ce(n,e=be.Default){return(e_()||YE)(on(n),e)}function F(n,e=be.Default){return ce(n,Nu(e))}function Nu(n){return typeof n>"u"||typeof n=="number"?n:0|(n.optional&&8)|(n.host&&1)|(n.self&&2)|(n.skipSelf&&4)}function Tf(n){let e=[];for(let t=0;t<n.length;t++){let r=on(n[t]);if(Array.isArray(r)){if(r.length===0)throw new ie(900,!1);let o,i=be.Default;for(let s=0;s<r.length;s++){let a=r[s],c=QE(a);typeof c=="number"?c===-1?o=a.token:i|=c:o=a}e.push(ce(o,i))}else e.push(ce(r))}return e}function n_(n,e){return n[Sf]=e,n.prototype[Sf]=e,n}function QE(n){return n[Sf]}function XE(n,e,t,r){let o=n[ou];throw e[fy]&&o.unshift(e[fy]),n.message=KE(`
`+n.message,o,t,r),n[WE]=o,n[ou]=null,n}function KE(n,e,t,r=null){n=n&&n.charAt(0)===`
`&&n.charAt(1)==GE?n.slice(2):n;let o=sn(e);if(Array.isArray(e))o=e.map(sn).join(" -> ");else if(typeof e=="object"){let i=[];for(let s in e)if(e.hasOwnProperty(s)){let a=e[s];i.push(s+":"+(typeof a=="string"?JSON.stringify(a):sn(a)))}o=`{${i.join(", ")}}`}return`${t}${r?"("+r+")":""}[${o}]: ${n.replace(zE,`
  `)}`}var Ka=n_(Zy("Optional"),8);var Ou=n_(Zy("SkipSelf"),4);function yi(n,e){let t=n.hasOwnProperty(ru);return t?n[ru]:null}function bp(n,e){n.forEach(t=>Array.isArray(t)?bp(t,e):e(t))}function r_(n,e,t){e>=n.length?n.push(t):n.splice(e,0,t)}function iu(n,e){return e>=n.length-1?n.pop():n.splice(e,1)[0]}function JE(n,e,t,r){let o=n.length;if(o==e)n.push(t,r);else if(o===1)n.push(r,n[0]),n[0]=t;else{for(o--,n.push(n[o-1],n[o]);o>e;){let i=o-2;n[o]=n[i],o--}n[e]=t,n[e+1]=r}}function eI(n,e,t){let r=Ja(n,e);return r>=0?n[r|1]=t:(r=~r,JE(n,r,e,t)),r}function lf(n,e){let t=Ja(n,e);if(t>=0)return n[t|1]}function Ja(n,e){return tI(n,e,1)}function tI(n,e,t){let r=0,o=n.length>>t;for(;o!==r;){let i=r+(o-r>>1),s=n[i<<t];if(e===s)return i<<t;s>e?o=i:r=i+1}return~(o<<t)}var hs={},Bn=[],fs=new pe(""),o_=new pe("",-1),i_=new pe(""),su=class{get(e,t=$a){if(t===$a){let r=new Error(`NullInjectorError: No provider for ${sn(e)}!`);throw r.name="NullInjectorError",r}return t}},s_=function(n){return n[n.OnPush=0]="OnPush",n[n.Default=1]="Default",n}(s_||{}),Dr=function(n){return n[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",n}(Dr||{}),Eo=function(n){return n[n.None=0]="None",n[n.SignalBased=1]="SignalBased",n[n.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",n}(Eo||{});function nI(n,e,t){let r=n.length;for(;;){let o=n.indexOf(e,t);if(o===-1)return o;if(o===0||n.charCodeAt(o-1)<=32){let i=e.length;if(o+i===r||n.charCodeAt(o+i)<=32)return o}t=o+1}}function Ef(n,e,t){let r=0;for(;r<t.length;){let o=t[r];if(typeof o=="number"){if(o!==0)break;r++;let i=t[r++],s=t[r++],a=t[r++];n.setAttribute(e,s,a,i)}else{let i=o,s=t[++r];rI(i)?n.setProperty(e,i,s):n.setAttribute(e,i,s),r++}}return r}function a_(n){return n===3||n===4||n===6}function rI(n){return n.charCodeAt(0)===64}function Ha(n,e){if(!(e===null||e.length===0))if(n===null||n.length===0)n=e.slice();else{let t=-1;for(let r=0;r<e.length;r++){let o=e[r];typeof o=="number"?t=o:t===0||(t===-1||t===2?py(n,t,o,null,e[++r]):py(n,t,o,null,null))}}return n}function py(n,e,t,r,o){let i=0,s=n.length;if(e===-1)s=-1;else for(;i<n.length;){let a=n[i++];if(typeof a=="number"){if(a===e){s=-1;break}else if(a>e){s=i-1;break}}}for(;i<n.length;){let a=n[i];if(typeof a=="number")break;if(a===t){if(r===null){o!==null&&(n[i+1]=o);return}else if(r===n[i+1]){n[i+2]=o;return}}i++,r!==null&&i++,o!==null&&i++}s!==-1&&(n.splice(s,0,e),i=s+1),n.splice(i++,0,t),r!==null&&n.splice(i++,0,r),o!==null&&n.splice(i++,0,o)}var c_="ng-template";function oI(n,e,t,r){let o=0;if(r){for(;o<e.length&&typeof e[o]=="string";o+=2)if(e[o]==="class"&&nI(e[o+1].toLowerCase(),t,0)!==-1)return!0}else if(Sp(n))return!1;if(o=e.indexOf(1,o),o>-1){let i;for(;++o<e.length&&typeof(i=e[o])=="string";)if(i.toLowerCase()===t)return!0}return!1}function Sp(n){return n.type===4&&n.value!==c_}function iI(n,e,t){let r=n.type===4&&!t?c_:n.value;return e===r}function sI(n,e,t){let r=4,o=n.attrs,i=o!==null?lI(o):0,s=!1;for(let a=0;a<e.length;a++){let c=e[a];if(typeof c=="number"){if(!s&&!or(r)&&!or(c))return!1;if(s&&or(c))continue;s=!1,r=c|r&1;continue}if(!s)if(r&4){if(r=2|r&1,c!==""&&!iI(n,c,t)||c===""&&e.length===1){if(or(r))return!1;s=!0}}else if(r&8){if(o===null||!oI(n,o,c,t)){if(or(r))return!1;s=!0}}else{let l=e[++a],u=aI(c,o,Sp(n),t);if(u===-1){if(or(r))return!1;s=!0;continue}if(l!==""){let d;if(u>i?d="":d=o[u+1].toLowerCase(),r&2&&l!==d){if(or(r))return!1;s=!0}}}}return or(r)||s}function or(n){return(n&1)===0}function aI(n,e,t,r){if(e===null)return-1;let o=0;if(r||!t){let i=!1;for(;o<e.length;){let s=e[o];if(s===n)return o;if(s===3||s===6)i=!0;else if(s===1||s===2){let a=e[++o];for(;typeof a=="string";)a=e[++o];continue}else{if(s===4)break;if(s===0){o+=4;continue}}o+=i?1:2}return-1}else return uI(e,n)}function cI(n,e,t=!1){for(let r=0;r<e.length;r++)if(sI(n,e[r],t))return!0;return!1}function lI(n){for(let e=0;e<n.length;e++){let t=n[e];if(a_(t))return e}return n.length}function uI(n,e){let t=n.indexOf(4);if(t>-1)for(t++;t<n.length;){let r=n[t];if(typeof r=="number")return-1;if(r===e)return t;t++}return-1}function my(n,e){return n?":not("+e.trim()+")":e}function dI(n){let e=n[0],t=1,r=2,o="",i=!1;for(;t<n.length;){let s=n[t];if(typeof s=="string")if(r&2){let a=n[++t];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else r&8?o+="."+s:r&4&&(o+=" "+s);else o!==""&&!or(s)&&(e+=my(i,o),o=""),r=s,i=i||!or(r);t++}return o!==""&&(e+=my(i,o)),e}function hI(n){return n.map(dI).join(",")}function fI(n){let e=[],t=[],r=1,o=2;for(;r<n.length;){let i=n[r];if(typeof i=="string")o===2?i!==""&&e.push(i,n[++r]):o===8&&t.push(i);else{if(!or(o))break;o=i}r++}return{attrs:e,classes:t}}function Ze(n){return Xa(()=>{let e=f_(n),t=O(y({},e),{decls:n.decls,vars:n.vars,template:n.template,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,onPush:n.changeDetection===s_.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&n.dependencies||null,getStandaloneInjector:null,signals:n.signals??!1,data:n.data||{},encapsulation:n.encapsulation||Dr.Emulated,styles:n.styles||Bn,_:null,schemas:n.schemas||null,tView:null,id:""});p_(t);let r=n.dependencies;return t.directiveDefs=vy(r,!1),t.pipeDefs=vy(r,!0),t.id=gI(t),t})}function pI(n){return Io(n)||l_(n)}function mI(n){return n!==null}function Fo(n){return Xa(()=>({type:n.type,bootstrap:n.bootstrap||Bn,declarations:n.declarations||Bn,imports:n.imports||Bn,exports:n.exports||Bn,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function gy(n,e){if(n==null)return hs;let t={};for(let r in n)if(n.hasOwnProperty(r)){let o=n[r],i,s,a=Eo.None;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i):(i=o,s=o),e?(t[i]=a!==Eo.None?[r,a]:r,e[i]=s):t[i]=r}return t}function Bt(n){return Xa(()=>{let e=f_(n);return p_(e),e})}function Er(n){return{type:n.type,name:n.name,factory:null,pure:n.pure!==!1,standalone:n.standalone===!0,onDestroy:n.type.prototype.ngOnDestroy||null}}function Io(n){return n[LE]||null}function l_(n){return n[jE]||null}function u_(n){return n[BE]||null}function d_(n){let e=Io(n)||l_(n)||u_(n);return e!==null?e.standalone:!1}function h_(n,e){let t=n[$E]||null;if(!t&&e===!0)throw new Error(`Type ${sn(n)} does not have '\u0275mod' property.`);return t}function f_(n){let e={};return{type:n.type,providersResolver:null,factory:null,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:n.inputs||hs,exportAs:n.exportAs||null,standalone:n.standalone===!0,signals:n.signals===!0,selectors:n.selectors||Bn,viewQuery:n.viewQuery||null,features:n.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:gy(n.inputs,e),outputs:gy(n.outputs),debugInfo:null}}function p_(n){n.features?.forEach(e=>e(n))}function vy(n,e){if(!n)return null;let t=e?u_:pI;return()=>(typeof n=="function"?n():n).map(r=>t(r)).filter(mI)}function gI(n){let e=0,t=[n.selectors,n.ngContentSelectors,n.hostVars,n.hostAttrs,n.consts,n.vars,n.decls,n.encapsulation,n.standalone,n.signals,n.exportAs,JSON.stringify(n.inputs),JSON.stringify(n.outputs),Object.getOwnPropertyNames(n.type.prototype),!!n.contentQueries,!!n.viewQuery].join("|");for(let o of t)e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Tp(n){return{\u0275providers:n}}function vI(...n){return{\u0275providers:m_(!0,n),\u0275fromNgModule:!0}}function m_(n,...e){let t=[],r=new Set,o,i=s=>{t.push(s)};return bp(e,s=>{let a=s;If(a,i,[],r)&&(o||=[],o.push(a))}),o!==void 0&&g_(o,i),t}function g_(n,e){for(let t=0;t<n.length;t++){let{ngModule:r,providers:o}=n[t];Ep(o,i=>{e(i,r)})}}function If(n,e,t,r){if(n=on(n),!n)return!1;let o=null,i=uy(n),s=!i&&Io(n);if(!i&&!s){let c=n.ngModule;if(i=uy(c),i)o=c;else return!1}else{if(s&&!s.standalone)return!1;o=n}let a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){let c=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of c)If(l,e,t,r)}}else if(i){if(i.imports!=null&&!a){r.add(o);let l;try{bp(i.imports,u=>{If(u,e,t,r)&&(l||=[],l.push(u))})}finally{}l!==void 0&&g_(l,e)}if(!a){let l=yi(o)||(()=>new o);e({provide:o,useFactory:l,deps:Bn},o),e({provide:i_,useValue:o,multi:!0},o),e({provide:fs,useValue:()=>ce(o),multi:!0},o)}let c=i.providers;if(c!=null&&!a){let l=n;Ep(c,u=>{e(u,l)})}}else return!1;return o!==n&&n.providers!==void 0}function Ep(n,e){for(let t of n)Jy(t)&&(t=t.\u0275providers),Array.isArray(t)?Ep(t,e):e(t)}var yI=Ke({provide:String,useValue:Ke});function v_(n){return n!==null&&typeof n=="object"&&yI in n}function _I(n){return!!(n&&n.useExisting)}function xI(n){return!!(n&&n.useFactory)}function ps(n){return typeof n=="function"}function wI(n){return!!n.useClass}var ku=new pe(""),Kl={},CI={},uf;function Ip(){return uf===void 0&&(uf=new su),uf}var In=class{},Ua=class extends In{get destroyed(){return this._destroyed}constructor(e,t,r,o){super(),this.parent=t,this.source=r,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Af(e,s=>this.processProvider(s)),this.records.set(o_,ss(void 0,this)),o.has("environment")&&this.records.set(In,ss(void 0,this));let i=this.records.get(ku);i!=null&&typeof i.value=="string"&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(i_,Bn,be.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=Ee(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let t=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of t)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Ee(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let t=bo(this),r=wn(void 0),o;try{return e()}finally{bo(t),wn(r)}}get(e,t=$a,r=be.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(hy))return e[hy](this);r=Nu(r);let o,i=bo(this),s=wn(void 0);try{if(!(r&be.SkipSelf)){let c=this.records.get(e);if(c===void 0){let l=EI(e)&&Mu(e);l&&this.injectableDefInScope(l)?c=ss(Mf(e),Kl):c=null,this.records.set(e,c)}if(c!=null)return this.hydrate(e,c)}let a=r&be.Self?Ip():this.parent;return t=r&be.Optional&&t===$a?null:t,a.get(e,t)}catch(a){if(a.name==="NullInjectorError"){if((a[ou]=a[ou]||[]).unshift(sn(e)),i)throw a;return XE(a,e,"R3InjectorError",this.source)}else throw a}finally{wn(s),bo(i)}}resolveInjectorInitializers(){let e=Ee(null),t=bo(this),r=wn(void 0),o;try{let i=this.get(fs,Bn,be.Self);for(let s of i)s()}finally{bo(t),wn(r),Ee(e)}}toString(){let e=[],t=this.records;for(let r of t.keys())e.push(sn(r));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ie(205,!1)}processProvider(e){e=on(e);let t=ps(e)?e:on(e&&e.provide),r=bI(e);if(!ps(e)&&e.multi===!0){let o=this.records.get(t);o||(o=ss(void 0,Kl,!0),o.factory=()=>Tf(o.multi),this.records.set(t,o)),t=e,o.multi.push(e)}this.records.set(t,r)}hydrate(e,t){let r=Ee(null);try{return t.value===Kl&&(t.value=CI,t.value=t.factory()),typeof t.value=="object"&&t.value&&TI(t.value)&&this._ngOnDestroyHooks.add(t.value),t.value}finally{Ee(r)}}injectableDefInScope(e){if(!e.providedIn)return!1;let t=on(e.providedIn);return typeof t=="string"?t==="any"||this.scopes.has(t):this.injectorDefTypes.has(t)}removeOnDestroy(e){let t=this._onDestroyHooks.indexOf(e);t!==-1&&this._onDestroyHooks.splice(t,1)}};function Mf(n){let e=Mu(n),t=e!==null?e.factory:yi(n);if(t!==null)return t;if(n instanceof pe)throw new ie(204,!1);if(n instanceof Function)return DI(n);throw new ie(204,!1)}function DI(n){if(n.length>0)throw new ie(204,!1);let t=PE(n);return t!==null?()=>t.factory(n):()=>new n}function bI(n){if(v_(n))return ss(void 0,n.useValue);{let e=y_(n);return ss(e,Kl)}}function y_(n,e,t){let r;if(ps(n)){let o=on(n);return yi(o)||Mf(o)}else if(v_(n))r=()=>on(n.useValue);else if(xI(n))r=()=>n.useFactory(...Tf(n.deps||[]));else if(_I(n))r=()=>ce(on(n.useExisting));else{let o=on(n&&(n.useClass||n.provide));if(SI(n))r=()=>new o(...Tf(n.deps));else return yi(o)||Mf(o)}return r}function ss(n,e,t=!1){return{factory:n,value:e,multi:t?[]:void 0}}function SI(n){return!!n.deps}function TI(n){return n!==null&&typeof n=="object"&&typeof n.ngOnDestroy=="function"}function EI(n){return typeof n=="function"||typeof n=="object"&&n instanceof pe}function Af(n,e){for(let t of n)Array.isArray(t)?Af(t,e):t&&Jy(t)?Af(t.\u0275providers,e):e(t)}function Ir(n,e){n instanceof Ua&&n.assertNotDestroyed();let t,r=bo(n),o=wn(void 0);try{return e()}finally{bo(r),wn(o)}}function __(){return e_()!==void 0||ZE()!=null}function II(n){if(!__())throw new ie(-203,!1)}function MI(n){return typeof n=="function"}var Xr=0,we=1,ve=2,cn=3,ir=4,cr=5,qa=6,au=7,Qt=8,ms=9,br=10,xt=11,Wa=12,yy=13,bs=14,sr=15,gs=16,as=17,vs=18,Ru=19,x_=20,So=21,df=22,$n=23,ln=25,w_=1;var _i=7,cu=8,lu=9,an=10,uu=function(n){return n[n.None=0]="None",n[n.HasTransplantedViews=2]="HasTransplantedViews",n}(uu||{});function To(n){return Array.isArray(n)&&typeof n[w_]=="object"}function Kr(n){return Array.isArray(n)&&n[w_]===!0}function Mp(n){return(n.flags&4)!==0}function Fu(n){return n.componentOffset>-1}function Pu(n){return(n.flags&1)===1}function Mo(n){return!!n.template}function Nf(n){return(n[ve]&512)!==0}var Of=class{constructor(e,t,r){this.previousValue=e,this.currentValue=t,this.firstChange=r}isFirstChange(){return this.firstChange}};function C_(n,e,t,r){e!==null?e.applyValueToInputSignal(e,r):n[t]=r}function Si(){return D_}function D_(n){return n.type.prototype.ngOnChanges&&(n.setInput=NI),AI}Si.ngInherit=!0;function AI(){let n=S_(this),e=n?.current;if(e){let t=n.previous;if(t===hs)n.previous=e;else for(let r in e)t[r]=e[r];n.current=null,this.ngOnChanges(e)}}function NI(n,e,t,r,o){let i=this.declaredInputs[r],s=S_(n)||OI(n,{previous:hs,current:null}),a=s.current||(s.current={}),c=s.previous,l=c[i];a[i]=new Of(l&&l.currentValue,t,c===hs),C_(n,e,o,t)}var b_="__ngSimpleChanges__";function S_(n){return n[b_]||null}function OI(n,e){return n[b_]=e}var _y=null;var wr=function(n,e,t){_y?.(n,e,t)},kI="svg",RI="math";function Sr(n){for(;Array.isArray(n);)n=n[Xr];return n}function T_(n,e){return Sr(e[n])}function Hn(n,e){return Sr(e[n.index])}function Ap(n,e){return n.data[e]}function E_(n,e){return n[e]}function Po(n,e){let t=e[n];return To(t)?t:t[Xr]}function Np(n){return(n[ve]&128)===128}function FI(n){return Kr(n[cn])}function Ao(n,e){return e==null?null:n[e]}function I_(n){n[as]=0}function M_(n){n[ve]&1024||(n[ve]|=1024,Np(n)&&Lu(n))}function PI(n,e){for(;n>0;)e=e[bs],n--;return e}function Vu(n){return!!(n[ve]&9216||n[$n]?.dirty)}function kf(n){n[br].changeDetectionScheduler?.notify(8),n[ve]&64&&(n[ve]|=1024),Vu(n)&&Lu(n)}function Lu(n){n[br].changeDetectionScheduler?.notify(0);let e=xi(n);for(;e!==null&&!(e[ve]&8192||(e[ve]|=8192,!Np(e)));)e=xi(e)}function A_(n,e){if((n[ve]&256)===256)throw new ie(911,!1);n[So]===null&&(n[So]=[]),n[So].push(e)}function VI(n,e){if(n[So]===null)return;let t=n[So].indexOf(e);t!==-1&&n[So].splice(t,1)}function xi(n){let e=n[cn];return Kr(e)?e[cn]:e}var Ie={lFrame:j_(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var N_=!1;function LI(){return Ie.lFrame.elementDepthCount}function jI(){Ie.lFrame.elementDepthCount++}function BI(){Ie.lFrame.elementDepthCount--}function O_(){return Ie.bindingsEnabled}function $I(){return Ie.skipHydrationRootTNode!==null}function HI(n){return Ie.skipHydrationRootTNode===n}function UI(){Ie.skipHydrationRootTNode=null}function Ve(){return Ie.lFrame.lView}function $t(){return Ie.lFrame.tView}function Se(n){return Ie.lFrame.contextLView=n,n[Qt]}function Te(n){return Ie.lFrame.contextLView=null,n}function Xt(){let n=k_();for(;n!==null&&n.type===64;)n=n.parent;return n}function k_(){return Ie.lFrame.currentTNode}function qI(){let n=Ie.lFrame,e=n.currentTNode;return n.isParent?e:e.parent}function Ti(n,e){let t=Ie.lFrame;t.currentTNode=n,t.isParent=e}function Op(){return Ie.lFrame.isParent}function R_(){Ie.lFrame.isParent=!1}function F_(){return N_}function xy(n){N_=n}function kp(){let n=Ie.lFrame,e=n.bindingRootIndex;return e===-1&&(e=n.bindingRootIndex=n.tView.bindingStartIndex),e}function WI(n){return Ie.lFrame.bindingIndex=n}function Ss(){return Ie.lFrame.bindingIndex++}function zI(n){let e=Ie.lFrame,t=e.bindingIndex;return e.bindingIndex=e.bindingIndex+n,t}function GI(){return Ie.lFrame.inI18n}function ZI(n,e){let t=Ie.lFrame;t.bindingIndex=t.bindingRootIndex=n,Rf(e)}function YI(){return Ie.lFrame.currentDirectiveIndex}function Rf(n){Ie.lFrame.currentDirectiveIndex=n}function QI(n){let e=Ie.lFrame.currentDirectiveIndex;return e===-1?null:n[e]}function P_(n){Ie.lFrame.currentQueryIndex=n}function XI(n){let e=n[we];return e.type===2?e.declTNode:e.type===1?n[cr]:null}function V_(n,e,t){if(t&be.SkipSelf){let o=e,i=n;for(;o=o.parent,o===null&&!(t&be.Host);)if(o=XI(i),o===null||(i=i[bs],o.type&10))break;if(o===null)return!1;e=o,n=i}let r=Ie.lFrame=L_();return r.currentTNode=e,r.lView=n,!0}function Rp(n){let e=L_(),t=n[we];Ie.lFrame=e,e.currentTNode=t.firstChild,e.lView=n,e.tView=t,e.contextLView=n,e.bindingIndex=t.bindingStartIndex,e.inI18n=!1}function L_(){let n=Ie.lFrame,e=n===null?null:n.child;return e===null?j_(n):e}function j_(n){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return n!==null&&(n.child=e),e}function B_(){let n=Ie.lFrame;return Ie.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}var $_=B_;function Fp(){let n=B_();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function KI(n){return(Ie.lFrame.contextLView=PI(n,Ie.lFrame.contextLView))[Qt]}function Ei(){return Ie.lFrame.selectedIndex}function wi(n){Ie.lFrame.selectedIndex=n}function Pp(){let n=Ie.lFrame;return Ap(n.tView,n.selectedIndex)}function JI(){return Ie.lFrame.currentNamespace}var H_=!0;function ju(){return H_}function Bu(n){H_=n}function eM(n,e,t){let{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){let s=D_(e);(t.preOrderHooks??=[]).push(n,s),(t.preOrderCheckHooks??=[]).push(n,s)}o&&(t.preOrderHooks??=[]).push(0-n,o),i&&((t.preOrderHooks??=[]).push(n,i),(t.preOrderCheckHooks??=[]).push(n,i))}function $u(n,e){for(let t=e.directiveStart,r=e.directiveEnd;t<r;t++){let i=n.data[t].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:l,ngOnDestroy:u}=i;s&&(n.contentHooks??=[]).push(-t,s),a&&((n.contentHooks??=[]).push(t,a),(n.contentCheckHooks??=[]).push(t,a)),c&&(n.viewHooks??=[]).push(-t,c),l&&((n.viewHooks??=[]).push(t,l),(n.viewCheckHooks??=[]).push(t,l)),u!=null&&(n.destroyHooks??=[]).push(t,u)}}function Jl(n,e,t){U_(n,e,3,t)}function eu(n,e,t,r){(n[ve]&3)===t&&U_(n,e,t,r)}function hf(n,e){let t=n[ve];(t&3)===e&&(t&=16383,t+=1,n[ve]=t)}function U_(n,e,t,r){let o=r!==void 0?n[as]&65535:0,i=r??-1,s=e.length-1,a=0;for(let c=o;c<s;c++)if(typeof e[c+1]=="number"){if(a=e[c],r!=null&&a>=r)break}else e[c]<0&&(n[as]+=65536),(a<i||i==-1)&&(tM(n,t,e,c),n[as]=(n[as]&4294901760)+c+2),c++}function wy(n,e){wr(4,n,e);let t=Ee(null);try{e.call(n)}finally{Ee(t),wr(5,n,e)}}function tM(n,e,t,r){let o=t[r]<0,i=t[r+1],s=o?-t[r]:t[r],a=n[s];o?n[ve]>>14<n[as]>>16&&(n[ve]&3)===e&&(n[ve]+=16384,wy(a,i)):wy(a,i)}var ds=-1,Ci=class{constructor(e,t,r){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=r}};function nM(n){return n instanceof Ci}function rM(n){return(n.flags&8)!==0}function oM(n){return(n.flags&16)!==0}var ff={},Ff=class{constructor(e,t){this.injector=e,this.parentInjector=t}get(e,t,r){r=Nu(r);let o=this.injector.get(e,ff,r);return o!==ff||t===ff?o:this.parentInjector.get(e,t,r)}};function q_(n){return n!==ds}function du(n){return n&32767}function iM(n){return n>>16}function hu(n,e){let t=iM(n),r=e;for(;t>0;)r=r[bs],t--;return r}var Pf=!0;function fu(n){let e=Pf;return Pf=n,e}var sM=256,W_=sM-1,z_=5,aM=0,Cr={};function cM(n,e,t){let r;typeof t=="string"?r=t.charCodeAt(0)||0:t.hasOwnProperty(Ba)&&(r=t[Ba]),r==null&&(r=t[Ba]=aM++);let o=r&W_,i=1<<o;e.data[n+(o>>z_)]|=i}function pu(n,e){let t=G_(n,e);if(t!==-1)return t;let r=e[we];r.firstCreatePass&&(n.injectorIndex=e.length,pf(r.data,n),pf(e,null),pf(r.blueprint,null));let o=Vp(n,e),i=n.injectorIndex;if(q_(o)){let s=du(o),a=hu(o,e),c=a[we].data;for(let l=0;l<8;l++)e[i+l]=a[s+l]|c[s+l]}return e[i+8]=o,i}function pf(n,e){n.push(0,0,0,0,0,0,0,0,e)}function G_(n,e){return n.injectorIndex===-1||n.parent&&n.parent.injectorIndex===n.injectorIndex||e[n.injectorIndex+8]===null?-1:n.injectorIndex}function Vp(n,e){if(n.parent&&n.parent.injectorIndex!==-1)return n.parent.injectorIndex;let t=0,r=null,o=e;for(;o!==null;){if(r=K_(o),r===null)return ds;if(t++,o=o[bs],r.injectorIndex!==-1)return r.injectorIndex|t<<16}return ds}function Vf(n,e,t){cM(n,e,t)}function lM(n,e){if(e==="class")return n.classes;if(e==="style")return n.styles;let t=n.attrs;if(t){let r=t.length,o=0;for(;o<r;){let i=t[o];if(a_(i))break;if(i===0)o=o+2;else if(typeof i=="number")for(o++;o<r&&typeof t[o]=="string";)o++;else{if(i===e)return t[o+1];o=o+2}}}return null}function Z_(n,e,t){if(t&be.Optional||n!==void 0)return n;Dp(e,"NodeInjector")}function Y_(n,e,t,r){if(t&be.Optional&&r===void 0&&(r=null),!(t&(be.Self|be.Host))){let o=n[ms],i=wn(void 0);try{return o?o.get(e,r,t&be.Optional):t_(e,r,t&be.Optional)}finally{wn(i)}}return Z_(r,e,t)}function Q_(n,e,t,r=be.Default,o){if(n!==null){if(e[ve]&2048&&!(r&be.Self)){let s=pM(n,e,t,r,Cr);if(s!==Cr)return s}let i=X_(n,e,t,r,Cr);if(i!==Cr)return i}return Y_(e,t,r,o)}function X_(n,e,t,r,o){let i=hM(t);if(typeof i=="function"){if(!V_(e,n,r))return r&be.Host?Z_(o,t,r):Y_(e,t,r,o);try{let s;if(s=i(r),s==null&&!(r&be.Optional))Dp(t);else return s}finally{$_()}}else if(typeof i=="number"){let s=null,a=G_(n,e),c=ds,l=r&be.Host?e[sr][cr]:null;for((a===-1||r&be.SkipSelf)&&(c=a===-1?Vp(n,e):e[a+8],c===ds||!Dy(r,!1)?a=-1:(s=e[we],a=du(c),e=hu(c,e)));a!==-1;){let u=e[we];if(Cy(i,a,u.data)){let d=uM(a,e,t,s,r,l);if(d!==Cr)return d}c=e[a+8],c!==ds&&Dy(r,e[we].data[a+8]===l)&&Cy(i,a,e)?(s=u,a=du(c),e=hu(c,e)):a=-1}}return o}function uM(n,e,t,r,o,i){let s=e[we],a=s.data[n+8],c=r==null?Fu(a)&&Pf:r!=s&&(a.type&3)!==0,l=o&be.Host&&i===a,u=dM(a,s,t,c,l);return u!==null?ys(e,s,u,a):Cr}function dM(n,e,t,r,o){let i=n.providerIndexes,s=e.data,a=i&1048575,c=n.directiveStart,l=n.directiveEnd,u=i>>20,d=r?a:a+u,f=o?a+u:l;for(let h=d;h<f;h++){let p=s[h];if(h<c&&t===p||h>=c&&p.type===t)return h}if(o){let h=s[c];if(h&&Mo(h)&&h.type===t)return c}return null}function ys(n,e,t,r){let o=n[t],i=e.data;if(nM(o)){let s=o;s.resolving&&UE(HE(i[t]));let a=fu(s.canSeeViewProviders);s.resolving=!0;let c,l=s.injectImpl?wn(s.injectImpl):null,u=V_(n,r,be.Default);try{o=n[t]=s.factory(void 0,i,n,r),e.firstCreatePass&&t>=r.directiveStart&&eM(t,i[t],e)}finally{l!==null&&wn(l),fu(a),s.resolving=!1,$_()}}return o}function hM(n){if(typeof n=="string")return n.charCodeAt(0)||0;let e=n.hasOwnProperty(Ba)?n[Ba]:void 0;return typeof e=="number"?e>=0?e&W_:fM:e}function Cy(n,e,t){let r=1<<n;return!!(t[e+(n>>z_)]&r)}function Dy(n,e){return!(n&be.Self)&&!(n&be.Host&&e)}var vi=class{constructor(e,t){this._tNode=e,this._lView=t}get(e,t,r){return Q_(this._tNode,this._lView,e,Nu(r),t)}};function fM(){return new vi(Xt(),Ve())}function Vo(n){return Xa(()=>{let e=n.prototype.constructor,t=e[ru]||Lf(e),r=Object.prototype,o=Object.getPrototypeOf(n.prototype).constructor;for(;o&&o!==r;){let i=o[ru]||Lf(o);if(i&&i!==t)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function Lf(n){return Yy(n)?()=>{let e=Lf(on(n));return e&&e()}:yi(n)}function pM(n,e,t,r,o){let i=n,s=e;for(;i!==null&&s!==null&&s[ve]&2048&&!(s[ve]&512);){let a=X_(i,s,t,r|be.Self,Cr);if(a!==Cr)return a;let c=i.parent;if(!c){let l=s[x_];if(l){let u=l.get(t,Cr,r);if(u!==Cr)return u}c=K_(s),s=s[bs]}i=c}return o}function K_(n){let e=n[we],t=e.type;return t===2?e.declTNode:t===1?n[cr]:null}function Lp(n){return lM(Xt(),n)}function by(n,e=null,t=null,r){let o=J_(n,e,t,r);return o.resolveInjectorInitializers(),o}function J_(n,e=null,t=null,r,o=new Set){let i=[t||Bn,vI(n)];return r=r||(typeof n=="object"?void 0:sn(n)),new Ua(i,e||Ip(),r||null,o)}var ar=class n{static{this.THROW_IF_NOT_FOUND=$a}static{this.NULL=new su}static create(e,t){if(Array.isArray(e))return by({name:""},t,e,"");{let r=e.name??"";return by({name:r},e.parent,e.providers,r)}}static{this.\u0275prov=$({token:n,providedIn:"any",factory:()=>ce(o_)})}static{this.__NG_ELEMENT_ID__=-1}};var mM=new pe("");mM.__NG_ELEMENT_ID__=n=>{let e=Xt();if(e===null)throw new ie(204,!1);if(e.type&2)return e.value;if(n&be.Optional)return null;throw new ie(204,!1)};var gM="ngOriginalError";function mf(n){return n[gM]}var ex=!0,jp=(()=>{class n{static{this.__NG_ELEMENT_ID__=vM}static{this.__NG_ENV_ID__=t=>t}}return n})(),jf=class extends jp{constructor(e){super(),this._lView=e}onDestroy(e){return A_(this._lView,e),()=>VI(this._lView,e)}};function vM(){return new jf(Ve())}var Ts=(()=>{class n{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new je(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let t=this.taskId++;return this.pendingTasks.add(t),t}remove(t){this.pendingTasks.delete(t),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}}return n})();var Bf=class extends yt{constructor(e=!1){super(),this.destroyRef=void 0,this.pendingTasks=void 0,this.__isAsync=e,__()&&(this.destroyRef=F(jp,{optional:!0})??void 0,this.pendingTasks=F(Ts,{optional:!0})??void 0)}emit(e){let t=Ee(null);try{super.next(e)}finally{Ee(t)}}subscribe(e,t,r){let o=e,i=t||(()=>null),s=r;if(e&&typeof e=="object"){let c=e;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));let a=super.subscribe({next:o,error:i,complete:s});return e instanceof ct&&e.add(a),a}wrapInTimeout(e){return t=>{let r=this.pendingTasks?.add();setTimeout(()=>{e(t),r!==void 0&&this.pendingTasks?.remove(r)})}}},Mt=Bf;function mu(...n){}function tx(n){let e,t;function r(){n=mu;try{t!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(t),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{n(),r()}),typeof requestAnimationFrame=="function"&&(t=requestAnimationFrame(()=>{n(),r()})),()=>r()}function Sy(n){return queueMicrotask(()=>n()),()=>{n=mu}}var Bp="isAngularZone",gu=Bp+"_ID",yM=0,ft=class n{constructor(e){this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Mt(!1),this.onMicrotaskEmpty=new Mt(!1),this.onStable=new Mt(!1),this.onError=new Mt(!1);let{enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:i=ex}=e;if(typeof Zone>"u")throw new ie(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&r,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=i,wM(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(Bp)===!0}static assertInAngularZone(){if(!n.isInAngularZone())throw new ie(909,!1)}static assertNotInAngularZone(){if(n.isInAngularZone())throw new ie(909,!1)}run(e,t,r){return this._inner.run(e,t,r)}runTask(e,t,r,o){let i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,_M,mu,mu);try{return i.runTask(s,t,r)}finally{i.cancelTask(s)}}runGuarded(e,t,r){return this._inner.runGuarded(e,t,r)}runOutsideAngular(e){return this._outer.run(e)}},_M={};function $p(n){if(n._nesting==0&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function xM(n){if(n.isCheckStableRunning||n.callbackScheduled)return;n.callbackScheduled=!0;function e(){tx(()=>{n.callbackScheduled=!1,$f(n),n.isCheckStableRunning=!0,$p(n),n.isCheckStableRunning=!1})}n.scheduleInRootZone?Zone.root.run(()=>{e()}):n._outer.run(()=>{e()}),$f(n)}function wM(n){let e=()=>{xM(n)},t=yM++;n._inner=n._inner.fork({name:"angular",properties:{[Bp]:!0,[gu]:t,[gu+t]:!0},onInvokeTask:(r,o,i,s,a,c)=>{if(CM(c))return r.invokeTask(i,s,a,c);try{return Ty(n),r.invokeTask(i,s,a,c)}finally{(n.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||n.shouldCoalesceRunChangeDetection)&&e(),Ey(n)}},onInvoke:(r,o,i,s,a,c,l)=>{try{return Ty(n),r.invoke(i,s,a,c,l)}finally{n.shouldCoalesceRunChangeDetection&&!n.callbackScheduled&&!DM(c)&&e(),Ey(n)}},onHasTask:(r,o,i,s)=>{r.hasTask(i,s),o===i&&(s.change=="microTask"?(n._hasPendingMicrotasks=s.microTask,$f(n),$p(n)):s.change=="macroTask"&&(n.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,o,i,s)=>(r.handleError(i,s),n.runOutsideAngular(()=>n.onError.emit(s)),!1)})}function $f(n){n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&n.callbackScheduled===!0?n.hasPendingMicrotasks=!0:n.hasPendingMicrotasks=!1}function Ty(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function Ey(n){n._nesting--,$p(n)}var Hf=class{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Mt,this.onMicrotaskEmpty=new Mt,this.onStable=new Mt,this.onError=new Mt}run(e,t,r){return e.apply(t,r)}runGuarded(e,t,r){return e.apply(t,r)}runOutsideAngular(e){return e()}runTask(e,t,r,o){return e.apply(t,r)}};function CM(n){return nx(n,"__ignore_ng_zone__")}function DM(n){return nx(n,"__scheduler_tick__")}function nx(n,e){return!Array.isArray(n)||n.length!==1?!1:n[0]?.data?.[e]===!0}var Yr=class{constructor(){this._console=console}handleError(e){let t=this._findOriginalError(e);this._console.error("ERROR",e),t&&this._console.error("ORIGINAL ERROR",t)}_findOriginalError(e){let t=e&&mf(e);for(;t&&mf(t);)t=mf(t);return t||null}},bM=new pe("",{providedIn:"root",factory:()=>{let n=F(ft),e=F(Yr);return t=>n.runOutsideAngular(()=>e.handleError(t))}});function SM(){return Hu(Xt(),Ve())}function Hu(n,e){return new Mr(Hn(n,e))}var Mr=(()=>{class n{constructor(t){this.nativeElement=t}static{this.__NG_ELEMENT_ID__=SM}}return n})();function rx(n){return(n.flags&128)===128}var ox=new Map,TM=0;function EM(){return TM++}function IM(n){ox.set(n[Ru],n)}function Uf(n){ox.delete(n[Ru])}var Iy="__ngContext__";function No(n,e){To(e)?(n[Iy]=e[Ru],IM(e)):n[Iy]=e}function ix(n){return ax(n[Wa])}function sx(n){return ax(n[ir])}function ax(n){for(;n!==null&&!Kr(n);)n=n[ir];return n}var qf;function cx(n){qf=n}function MM(){if(qf!==void 0)return qf;if(typeof document<"u")return document;throw new ie(210,!1)}var Hp=new pe("",{providedIn:"root",factory:()=>AM}),AM="ng",Up=new pe(""),Lo=new pe("",{providedIn:"platform",factory:()=>"unknown"});var qp=new pe("",{providedIn:"root",factory:()=>MM().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var NM="h",OM="b";var kM=()=>null;function Wp(n,e,t=!1){return kM(n,e,t)}var lx=!1,RM=new pe("",{providedIn:"root",factory:()=>lx});var Zl;function FM(){if(Zl===void 0&&(Zl=null,Df.trustedTypes))try{Zl=Df.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return Zl}function My(n){return FM()?.createScriptURL(n)||n}var vu=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Gy})`}};function ec(n){return n instanceof vu?n.changingThisBreaksApplicationSecurity:n}function zp(n,e){let t=PM(n);if(t!=null&&t!==e){if(t==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${t} (see ${Gy})`)}return t===e}function PM(n){return n instanceof vu&&n.getTypeName()||null}var VM=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function ux(n){return n=String(n),n.match(VM)?n:"unsafe:"+n}var Uu=function(n){return n[n.NONE=0]="NONE",n[n.HTML=1]="HTML",n[n.STYLE=2]="STYLE",n[n.SCRIPT=3]="SCRIPT",n[n.URL=4]="URL",n[n.RESOURCE_URL=5]="RESOURCE_URL",n}(Uu||{});function LM(n){let e=hx();return e?e.sanitize(Uu.URL,n)||"":zp(n,"URL")?ec(n):ux(Au(n))}function jM(n){let e=hx();if(e)return My(e.sanitize(Uu.RESOURCE_URL,n)||"");if(zp(n,"ResourceURL"))return My(ec(n));throw new ie(904,!1)}function BM(n,e){return e==="src"&&(n==="embed"||n==="frame"||n==="iframe"||n==="media"||n==="script")||e==="href"&&(n==="base"||n==="link")?jM:LM}function dx(n,e,t){return BM(e,t)(n)}function hx(){let n=Ve();return n&&n[br].sanitizer}var $M=/^>|^->|<!--|-->|--!>|<!-$/g,HM=/(<|>)/g,UM="\u200B$1\u200B";function qM(n){return n.replace($M,e=>e.replace(HM,UM))}function fx(n){return n.ownerDocument}function px(n){return n instanceof Function?n():n}function WM(n){return(n??F(ar)).get(Lo)==="browser"}var Qr=function(n){return n[n.Important=1]="Important",n[n.DashCase=2]="DashCase",n}(Qr||{}),zM;function Gp(n,e){return zM(n,e)}function cs(n,e,t,r,o){if(r!=null){let i,s=!1;Kr(r)?i=r:To(r)&&(s=!0,r=r[Xr]);let a=Sr(r);n===0&&t!==null?o==null?yx(e,t,a):yu(e,t,a,o||null,!0):n===1&&t!==null?yu(e,t,a,o||null,!0):n===2?cA(e,a,s):n===3&&e.destroyNode(a),i!=null&&uA(e,n,i,t,o)}}function GM(n,e){return n.createText(e)}function ZM(n,e,t){n.setValue(e,t)}function YM(n,e){return n.createComment(qM(e))}function mx(n,e,t){return n.createElement(e,t)}function QM(n,e){gx(n,e),e[Xr]=null,e[cr]=null}function XM(n,e,t,r,o,i){r[Xr]=o,r[cr]=e,zu(n,r,t,1,o,i)}function gx(n,e){e[br].changeDetectionScheduler?.notify(9),zu(n,e,e[xt],2,null,null)}function KM(n){let e=n[Wa];if(!e)return gf(n[we],n);for(;e;){let t=null;if(To(e))t=e[Wa];else{let r=e[an];r&&(t=r)}if(!t){for(;e&&!e[ir]&&e!==n;)To(e)&&gf(e[we],e),e=e[cn];e===null&&(e=n),To(e)&&gf(e[we],e),t=e&&e[ir]}e=t}}function JM(n,e,t,r){let o=an+r,i=t.length;r>0&&(t[o-1][ir]=e),r<i-an?(e[ir]=t[o],r_(t,an+r,e)):(t.push(e),e[ir]=null),e[cn]=t;let s=e[gs];s!==null&&t!==s&&vx(s,e);let a=e[vs];a!==null&&a.insertView(n),kf(e),e[ve]|=128}function vx(n,e){let t=n[lu],r=e[cn];if(To(r))n[ve]|=uu.HasTransplantedViews;else{let o=r[cn][sr];e[sr]!==o&&(n[ve]|=uu.HasTransplantedViews)}t===null?n[lu]=[e]:t.push(e)}function Zp(n,e){let t=n[lu],r=t.indexOf(e);t.splice(r,1)}function za(n,e){if(n.length<=an)return;let t=an+e,r=n[t];if(r){let o=r[gs];o!==null&&o!==n&&Zp(o,r),e>0&&(n[t-1][ir]=r[ir]);let i=iu(n,an+e);QM(r[we],r);let s=i[vs];s!==null&&s.detachView(i[we]),r[cn]=null,r[ir]=null,r[ve]&=-129}return r}function qu(n,e){if(!(e[ve]&256)){let t=e[xt];t.destroyNode&&zu(n,e,t,3,null,null),KM(e)}}function gf(n,e){if(e[ve]&256)return;let t=Ee(null);try{e[ve]&=-129,e[ve]|=256,e[$n]&&Uh(e[$n]),tA(n,e),eA(n,e),e[we].type===1&&e[xt].destroy();let r=e[gs];if(r!==null&&Kr(e[cn])){r!==e[cn]&&Zp(r,e);let o=e[vs];o!==null&&o.detachView(n)}Uf(e)}finally{Ee(t)}}function eA(n,e){let t=n.cleanup,r=e[au];if(t!==null)for(let i=0;i<t.length-1;i+=2)if(typeof t[i]=="string"){let s=t[i+3];s>=0?r[s]():r[-s].unsubscribe(),i+=2}else{let s=r[t[i+1]];t[i].call(s)}r!==null&&(e[au]=null);let o=e[So];if(o!==null){e[So]=null;for(let i=0;i<o.length;i++){let s=o[i];s()}}}function tA(n,e){let t;if(n!=null&&(t=n.destroyHooks)!=null)for(let r=0;r<t.length;r+=2){let o=e[t[r]];if(!(o instanceof Ci)){let i=t[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){let a=o[i[s]],c=i[s+1];wr(4,a,c);try{c.call(a)}finally{wr(5,a,c)}}else{wr(4,o,i);try{i.call(o)}finally{wr(5,o,i)}}}}}function nA(n,e,t){return rA(n,e.parent,t)}function rA(n,e,t){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return t[Xr];{let{componentOffset:o}=r;if(o>-1){let{encapsulation:i}=n.data[r.directiveStart+o];if(i===Dr.None||i===Dr.Emulated)return null}return Hn(r,t)}}function yu(n,e,t,r,o){n.insertBefore(e,t,r,o)}function yx(n,e,t){n.appendChild(e,t)}function Ay(n,e,t,r,o){r!==null?yu(n,e,t,r,o):yx(n,e,t)}function _x(n,e){return n.parentNode(e)}function oA(n,e){return n.nextSibling(e)}function iA(n,e,t){return aA(n,e,t)}function sA(n,e,t){return n.type&40?Hn(n,t):null}var aA=sA,Ny;function Wu(n,e,t,r){let o=nA(n,r,e),i=e[xt],s=r.parent||e[cr],a=iA(s,r,e);if(o!=null)if(Array.isArray(t))for(let c=0;c<t.length;c++)Ay(i,o,t[c],a,!1);else Ay(i,o,t,a,!1);Ny!==void 0&&Ny(i,r,e,t,o)}function ja(n,e){if(e!==null){let t=e.type;if(t&3)return Hn(e,n);if(t&4)return Wf(-1,n[e.index]);if(t&8){let r=e.child;if(r!==null)return ja(n,r);{let o=n[e.index];return Kr(o)?Wf(-1,o):Sr(o)}}else{if(t&128)return ja(n,e.next);if(t&32)return Gp(e,n)()||Sr(n[e.index]);{let r=xx(n,e);if(r!==null){if(Array.isArray(r))return r[0];let o=xi(n[sr]);return ja(o,r)}else return ja(n,e.next)}}}return null}function xx(n,e){if(e!==null){let r=n[sr][cr],o=e.projection;return r.projection[o]}return null}function Wf(n,e){let t=an+n+1;if(t<e.length){let r=e[t],o=r[we].firstChild;if(o!==null)return ja(r,o)}return e[_i]}function cA(n,e,t){n.removeChild(null,e,t)}function Yp(n,e,t,r,o,i,s){for(;t!=null;){if(t.type===128){t=t.next;continue}let a=r[t.index],c=t.type;if(s&&e===0&&(a&&No(Sr(a),r),t.flags|=2),(t.flags&32)!==32)if(c&8)Yp(n,e,t.child,r,o,i,!1),cs(e,n,o,a,i);else if(c&32){let l=Gp(t,r),u;for(;u=l();)cs(e,n,o,u,i);cs(e,n,o,a,i)}else c&16?lA(n,e,r,t,o,i):cs(e,n,o,a,i);t=s?t.projectionNext:t.next}}function zu(n,e,t,r,o,i){Yp(t,r,n.firstChild,e,o,i,!1)}function lA(n,e,t,r,o,i){let s=t[sr],c=s[cr].projection[r.projection];if(Array.isArray(c))for(let l=0;l<c.length;l++){let u=c[l];cs(e,n,o,u,i)}else{let l=c,u=s[cn];rx(r)&&(l.flags|=128),Yp(n,e,l,u,o,i,!0)}}function uA(n,e,t,r,o){let i=t[_i],s=Sr(t);i!==s&&cs(e,n,r,i,o);for(let a=an;a<t.length;a++){let c=t[a];zu(c[we],c,n,e,r,i)}}function dA(n,e,t,r,o){if(e)o?n.addClass(t,r):n.removeClass(t,r);else{let i=r.indexOf("-")===-1?void 0:Qr.DashCase;o==null?n.removeStyle(t,r,i):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=Qr.Important),n.setStyle(t,r,o,i))}}function hA(n,e,t){n.setAttribute(e,"style",t)}function wx(n,e,t){t===""?n.removeAttribute(e,"class"):n.setAttribute(e,"class",t)}function Cx(n,e,t){let{mergedAttrs:r,classes:o,styles:i}=t;r!==null&&Ef(n,e,r),o!==null&&wx(n,e,o),i!==null&&hA(n,e,i)}var Jr={};function j(n=1){Dx($t(),Ve(),Ei()+n,!1)}function Dx(n,e,t,r){if(!r)if((e[ve]&3)===3){let i=n.preOrderCheckHooks;i!==null&&Jl(e,i,t)}else{let i=n.preOrderHooks;i!==null&&eu(e,i,0,t)}wi(t)}function Q(n,e=be.Default){let t=Ve();if(t===null)return ce(n,e);let r=Xt();return Q_(r,t,on(n),e)}function bx(){let n="invalid";throw new Error(n)}function Sx(n,e,t,r,o,i){let s=Ee(null);try{let a=null;o&Eo.SignalBased&&(a=e[r][Wr]),a!==null&&a.transformFn!==void 0&&(i=a.transformFn(i)),o&Eo.HasDecoratorInputTransform&&(i=n.inputTransforms[r].call(e,i)),n.setInput!==null?n.setInput(e,a,i,t,r):C_(e,a,r,i)}finally{Ee(s)}}function fA(n,e){let t=n.hostBindingOpCodes;if(t!==null)try{for(let r=0;r<t.length;r++){let o=t[r];if(o<0)wi(~o);else{let i=o,s=t[++r],a=t[++r];ZI(s,i);let c=e[i];a(2,c)}}}finally{wi(-1)}}function Gu(n,e,t,r,o,i,s,a,c,l,u){let d=e.blueprint.slice();return d[Xr]=o,d[ve]=r|4|128|8|64,(l!==null||n&&n[ve]&2048)&&(d[ve]|=2048),I_(d),d[cn]=d[bs]=n,d[Qt]=t,d[br]=s||n&&n[br],d[xt]=a||n&&n[xt],d[ms]=c||n&&n[ms]||null,d[cr]=i,d[Ru]=EM(),d[qa]=u,d[x_]=l,d[sr]=e.type==2?n[sr]:d,d}function tc(n,e,t,r,o){let i=n.data[e];if(i===null)i=pA(n,e,t,r,o),GI()&&(i.flags|=32);else if(i.type&64){i.type=t,i.value=r,i.attrs=o;let s=qI();i.injectorIndex=s===null?-1:s.injectorIndex}return Ti(i,!0),i}function pA(n,e,t,r,o){let i=k_(),s=Op(),a=s?i:i&&i.parent,c=n.data[e]=_A(n,a,t,e,r,o);return n.firstChild===null&&(n.firstChild=c),i!==null&&(s?i.child==null&&c.parent!==null&&(i.child=c):i.next===null&&(i.next=c,c.prev=i)),c}function Tx(n,e,t,r){if(t===0)return-1;let o=e.length;for(let i=0;i<t;i++)e.push(r),n.blueprint.push(r),n.data.push(null);return o}function Ex(n,e,t,r,o){let i=Ei(),s=r&2;try{wi(-1),s&&e.length>ln&&Dx(n,e,ln,!1),wr(s?2:0,o),t(r,o)}finally{wi(i),wr(s?3:1,o)}}function Qp(n,e,t){if(Mp(e)){let r=Ee(null);try{let o=e.directiveStart,i=e.directiveEnd;for(let s=o;s<i;s++){let a=n.data[s];if(a.contentQueries){let c=t[s];a.contentQueries(1,c,s)}}}finally{Ee(r)}}}function Xp(n,e,t){O_()&&(SA(n,e,t,Hn(t,e)),(t.flags&64)===64&&Nx(n,e,t))}function Kp(n,e,t=Hn){let r=e.localNames;if(r!==null){let o=e.index+1;for(let i=0;i<r.length;i+=2){let s=r[i+1],a=s===-1?t(e,n):n[s];n[o++]=a}}}function Ix(n){let e=n.tView;return e===null||e.incompleteFirstPass?n.tView=Jp(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts,n.id):e}function Jp(n,e,t,r,o,i,s,a,c,l,u){let d=ln+r,f=d+o,h=mA(d,f),p=typeof l=="function"?l():l;return h[we]={type:n,blueprint:h,template:t,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof i=="function"?i():i,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:u}}function mA(n,e){let t=[];for(let r=0;r<e;r++)t.push(r<n?null:Jr);return t}function gA(n,e,t,r){let i=r.get(RM,lx)||t===Dr.ShadowDom,s=n.selectRootElement(e,i);return vA(s),s}function vA(n){yA(n)}var yA=()=>null;function _A(n,e,t,r,o,i){let s=e?e.injectorIndex:-1,a=0;return $I()&&(a|=128),{type:t,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Oy(n,e,t,r,o){for(let i in e){if(!e.hasOwnProperty(i))continue;let s=e[i];if(s===void 0)continue;r??={};let a,c=Eo.None;Array.isArray(s)?(a=s[0],c=s[1]):a=s;let l=i;if(o!==null){if(!o.hasOwnProperty(i))continue;l=o[i]}n===0?ky(r,t,l,a,c):ky(r,t,l,a)}return r}function ky(n,e,t,r,o){let i;n.hasOwnProperty(t)?(i=n[t]).push(e,r):i=n[t]=[e,r],o!==void 0&&i.push(o)}function xA(n,e,t){let r=e.directiveStart,o=e.directiveEnd,i=n.data,s=e.attrs,a=[],c=null,l=null;for(let u=r;u<o;u++){let d=i[u],f=t?t.get(d):null,h=f?f.inputs:null,p=f?f.outputs:null;c=Oy(0,d.inputs,u,c,h),l=Oy(1,d.outputs,u,l,p);let m=c!==null&&s!==null&&!Sp(e)?PA(c,u,s):null;a.push(m)}c!==null&&(c.hasOwnProperty("class")&&(e.flags|=8),c.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=a,e.inputs=c,e.outputs=l}function wA(n){return n==="class"?"className":n==="for"?"htmlFor":n==="formaction"?"formAction":n==="innerHtml"?"innerHTML":n==="readonly"?"readOnly":n==="tabindex"?"tabIndex":n}function Mx(n,e,t,r,o,i,s,a){let c=Hn(e,t),l=e.inputs,u;!a&&l!=null&&(u=l[r])?(tm(n,t,u,r,o),Fu(e)&&CA(t,e.index)):e.type&3?(r=wA(r),o=s!=null?s(o,e.value||"",r):o,i.setProperty(c,r,o)):e.type&12}function CA(n,e){let t=Po(e,n);t[ve]&16||(t[ve]|=64)}function em(n,e,t,r){if(O_()){let o=r===null?null:{"":-1},i=EA(n,t),s,a;i===null?s=a=null:[s,a]=i,s!==null&&Ax(n,e,t,s,o,a),o&&IA(t,r,o)}t.mergedAttrs=Ha(t.mergedAttrs,t.attrs)}function Ax(n,e,t,r,o,i){for(let l=0;l<r.length;l++)Vf(pu(t,e),n,r[l].type);AA(t,n.data.length,r.length);for(let l=0;l<r.length;l++){let u=r[l];u.providersResolver&&u.providersResolver(u)}let s=!1,a=!1,c=Tx(n,e,r.length,null);for(let l=0;l<r.length;l++){let u=r[l];t.mergedAttrs=Ha(t.mergedAttrs,u.hostAttrs),NA(n,t,e,c,u),MA(c,u,o),u.contentQueries!==null&&(t.flags|=4),(u.hostBindings!==null||u.hostAttrs!==null||u.hostVars!==0)&&(t.flags|=64);let d=u.type.prototype;!s&&(d.ngOnChanges||d.ngOnInit||d.ngDoCheck)&&((n.preOrderHooks??=[]).push(t.index),s=!0),!a&&(d.ngOnChanges||d.ngDoCheck)&&((n.preOrderCheckHooks??=[]).push(t.index),a=!0),c++}xA(n,t,i)}function DA(n,e,t,r,o){let i=o.hostBindings;if(i){let s=n.hostBindingOpCodes;s===null&&(s=n.hostBindingOpCodes=[]);let a=~e.index;bA(s)!=a&&s.push(a),s.push(t,r,i)}}function bA(n){let e=n.length;for(;e>0;){let t=n[--e];if(typeof t=="number"&&t<0)return t}return 0}function SA(n,e,t,r){let o=t.directiveStart,i=t.directiveEnd;Fu(t)&&OA(e,t,n.data[o+t.componentOffset]),n.firstCreatePass||pu(t,e),No(r,e);let s=t.initialInputs;for(let a=o;a<i;a++){let c=n.data[a],l=ys(e,n,a,t);if(No(l,e),s!==null&&FA(e,a-o,l,c,t,s),Mo(c)){let u=Po(t.index,e);u[Qt]=ys(e,n,a,t)}}}function Nx(n,e,t){let r=t.directiveStart,o=t.directiveEnd,i=t.index,s=YI();try{wi(i);for(let a=r;a<o;a++){let c=n.data[a],l=e[a];Rf(a),(c.hostBindings!==null||c.hostVars!==0||c.hostAttrs!==null)&&TA(c,l)}}finally{wi(-1),Rf(s)}}function TA(n,e){n.hostBindings!==null&&n.hostBindings(1,e)}function EA(n,e){let t=n.directiveRegistry,r=null,o=null;if(t)for(let i=0;i<t.length;i++){let s=t[i];if(cI(e,s.selectors,!1))if(r||(r=[]),Mo(s))if(s.findHostDirectiveDefs!==null){let a=[];o=o||new Map,s.findHostDirectiveDefs(s,a,o),r.unshift(...a,s);let c=a.length;zf(n,e,c)}else r.unshift(s),zf(n,e,0);else o=o||new Map,s.findHostDirectiveDefs?.(s,r,o),r.push(s)}return r===null?null:[r,o]}function zf(n,e,t){e.componentOffset=t,(n.components??=[]).push(e.index)}function IA(n,e,t){if(e){let r=n.localNames=[];for(let o=0;o<e.length;o+=2){let i=t[e[o+1]];if(i==null)throw new ie(-301,!1);r.push(e[o],i)}}}function MA(n,e,t){if(t){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)t[e.exportAs[r]]=n;Mo(e)&&(t[""]=n)}}function AA(n,e,t){n.flags|=1,n.directiveStart=e,n.directiveEnd=e+t,n.providerIndexes=e}function NA(n,e,t,r,o){n.data[r]=o;let i=o.factory||(o.factory=yi(o.type,!0)),s=new Ci(i,Mo(o),Q);n.blueprint[r]=s,t[r]=s,DA(n,e,r,Tx(n,t,o.hostVars,Jr),o)}function OA(n,e,t){let r=Hn(e,n),o=Ix(t),i=n[br].rendererFactory,s=16;t.signals?s=4096:t.onPush&&(s=64);let a=Zu(n,Gu(n,o,null,s,r,e,null,i.createRenderer(r,t),null,null,null));n[e.index]=a}function kA(n,e,t,r,o,i){let s=Hn(n,e);RA(e[xt],s,i,n.value,t,r,o)}function RA(n,e,t,r,o,i,s){if(i==null)n.removeAttribute(e,o,t);else{let a=s==null?Au(i):s(i,r||"",o);n.setAttribute(e,o,a,t)}}function FA(n,e,t,r,o,i){let s=i[e];if(s!==null)for(let a=0;a<s.length;){let c=s[a++],l=s[a++],u=s[a++],d=s[a++];Sx(r,t,c,l,u,d)}}function PA(n,e,t){let r=null,o=0;for(;o<t.length;){let i=t[o];if(i===0){o+=4;continue}else if(i===5){o+=2;continue}if(typeof i=="number")break;if(n.hasOwnProperty(i)){r===null&&(r=[]);let s=n[i];for(let a=0;a<s.length;a+=3)if(s[a]===e){r.push(i,s[a+1],s[a+2],t[o+1]);break}}o+=2}return r}function Ox(n,e,t,r){return[n,!0,0,e,null,r,null,t,null,null]}function kx(n,e){let t=n.contentQueries;if(t!==null){let r=Ee(null);try{for(let o=0;o<t.length;o+=2){let i=t[o],s=t[o+1];if(s!==-1){let a=n.data[s];P_(i),a.contentQueries(2,e[s],s)}}}finally{Ee(r)}}}function Zu(n,e){return n[Wa]?n[yy][ir]=e:n[Wa]=e,n[yy]=e,e}function Gf(n,e,t){P_(0);let r=Ee(null);try{e(n,t)}finally{Ee(r)}}function VA(n){return n[au]??=[]}function LA(n){return n.cleanup??=[]}function Rx(n,e){let t=n[ms],r=t?t.get(Yr,null):null;r&&r.handleError(e)}function tm(n,e,t,r,o){for(let i=0;i<t.length;){let s=t[i++],a=t[i++],c=t[i++],l=e[s],u=n.data[s];Sx(u,l,r,a,c,o)}}function jA(n,e,t){let r=T_(e,n);ZM(n[xt],r,t)}function BA(n,e){let t=Po(e,n),r=t[we];$A(r,t);let o=t[Xr];o!==null&&t[qa]===null&&(t[qa]=Wp(o,t[ms])),nm(r,t,t[Qt])}function $A(n,e){for(let t=e.length;t<n.blueprint.length;t++)e.push(n.blueprint[t])}function nm(n,e,t){Rp(e);try{let r=n.viewQuery;r!==null&&Gf(1,r,t);let o=n.template;o!==null&&Ex(n,e,o,1,t),n.firstCreatePass&&(n.firstCreatePass=!1),e[vs]?.finishViewCreation(n),n.staticContentQueries&&kx(n,e),n.staticViewQueries&&Gf(2,n.viewQuery,t);let i=n.components;i!==null&&HA(e,i)}catch(r){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),r}finally{e[ve]&=-5,Fp()}}function HA(n,e){for(let t=0;t<e.length;t++)BA(n,e[t])}function Yu(n,e,t,r){let o=Ee(null);try{let i=e.tView,a=n[ve]&4096?4096:16,c=Gu(n,i,t,a,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=n[e.index];c[gs]=l;let u=n[vs];return u!==null&&(c[vs]=u.createEmbeddedView(i)),nm(i,c,t),c}finally{Ee(o)}}function Fx(n,e){let t=an+e;if(t<n.length)return n[t]}function Ga(n,e){return!e||e.firstChild===null||rx(n)}function Qu(n,e,t,r=!0){let o=e[we];if(JM(o,e,n,t),r){let s=Wf(t,n),a=e[xt],c=_x(a,n[_i]);c!==null&&XM(o,n[cr],a,e,c,s)}let i=e[qa];i!==null&&i.firstChild!==null&&(i.firstChild=null)}function Px(n,e){let t=za(n,e);return t!==void 0&&qu(t[we],t),t}function _u(n,e,t,r,o=!1){for(;t!==null;){if(t.type===128){t=o?t.projectionNext:t.next;continue}let i=e[t.index];i!==null&&r.push(Sr(i)),Kr(i)&&UA(i,r);let s=t.type;if(s&8)_u(n,e,t.child,r);else if(s&32){let a=Gp(t,e),c;for(;c=a();)r.push(c)}else if(s&16){let a=xx(e,t);if(Array.isArray(a))r.push(...a);else{let c=xi(e[sr]);_u(c[we],c,a,r,!0)}}t=o?t.projectionNext:t.next}return r}function UA(n,e){for(let t=an;t<n.length;t++){let r=n[t],o=r[we].firstChild;o!==null&&_u(r[we],r,o,e)}n[_i]!==n[Xr]&&e.push(n[_i])}var Vx=[];function qA(n){return n[$n]??WA(n)}function WA(n){let e=Vx.pop()??Object.create(GA);return e.lView=n,e}function zA(n){n.lView[$n]!==n&&(n.lView=null,Vx.push(n))}var GA=O(y({},Ra),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{Lu(n.lView)},consumerOnSignalRead(){this.lView[$n]=this}});function ZA(n){let e=n[$n]??Object.create(YA);return e.lView=n,e}var YA=O(y({},Ra),{consumerIsAlwaysLive:!0,consumerMarkedDirty:n=>{let e=xi(n.lView);for(;e&&!Lx(e[we]);)e=xi(e);e&&M_(e)},consumerOnSignalRead(){this.lView[$n]=this}});function Lx(n){return n.type!==2}var QA=100;function jx(n,e=!0,t=0){let r=n[br],o=r.rendererFactory,i=!1;i||o.begin?.();try{XA(n,t)}catch(s){throw e&&Rx(n,s),s}finally{i||(o.end?.(),r.inlineEffectRunner?.flush())}}function XA(n,e){let t=F_();try{xy(!0),Zf(n,e);let r=0;for(;Vu(n);){if(r===QA)throw new ie(103,!1);r++,Zf(n,1)}}finally{xy(t)}}function KA(n,e,t,r){let o=e[ve];if((o&256)===256)return;let i=!1,s=!1;!i&&e[br].inlineEffectRunner?.flush(),Rp(e);let a=!0,c=null,l=null;i||(Lx(n)?(l=qA(e),c=vl(l)):bv()===null?(a=!1,l=ZA(e),c=vl(l)):e[$n]&&(Uh(e[$n]),e[$n]=null));try{I_(e),WI(n.bindingStartIndex),t!==null&&Ex(n,e,t,2,r);let u=(o&3)===3;if(!i)if(u){let h=n.preOrderCheckHooks;h!==null&&Jl(e,h,null)}else{let h=n.preOrderHooks;h!==null&&eu(e,h,0,null),hf(e,0)}if(s||JA(e),Bx(e,0),n.contentQueries!==null&&kx(n,e),!i)if(u){let h=n.contentCheckHooks;h!==null&&Jl(e,h)}else{let h=n.contentHooks;h!==null&&eu(e,h,1),hf(e,1)}fA(n,e);let d=n.components;d!==null&&Hx(e,d,0);let f=n.viewQuery;if(f!==null&&Gf(2,f,r),!i)if(u){let h=n.viewCheckHooks;h!==null&&Jl(e,h)}else{let h=n.viewHooks;h!==null&&eu(e,h,2),hf(e,2)}if(n.firstUpdatePass===!0&&(n.firstUpdatePass=!1),e[df]){for(let h of e[df])h();e[df]=null}i||(e[ve]&=-73)}catch(u){throw i||Lu(e),u}finally{l!==null&&($h(l,c),a&&zA(l)),Fp()}}function Bx(n,e){for(let t=ix(n);t!==null;t=sx(t))for(let r=an;r<t.length;r++){let o=t[r];$x(o,e)}}function JA(n){for(let e=ix(n);e!==null;e=sx(e)){if(!(e[ve]&uu.HasTransplantedViews))continue;let t=e[lu];for(let r=0;r<t.length;r++){let o=t[r];M_(o)}}}function eN(n,e,t){let r=Po(e,n);$x(r,t)}function $x(n,e){Np(n)&&Zf(n,e)}function Zf(n,e){let r=n[we],o=n[ve],i=n[$n],s=!!(e===0&&o&16);if(s||=!!(o&64&&e===0),s||=!!(o&1024),s||=!!(i?.dirty&&Hh(i)),s||=!1,i&&(i.dirty=!1),n[ve]&=-9217,s)KA(r,n,r.template,n[Qt]);else if(o&8192){Bx(n,1);let a=r.components;a!==null&&Hx(n,a,1)}}function Hx(n,e,t){for(let r=0;r<e.length;r++)eN(n,e[r],t)}function rm(n,e){let t=F_()?64:1088;for(n[br].changeDetectionScheduler?.notify(e);n;){n[ve]|=t;let r=xi(n);if(Nf(n)&&!r)return n;n=r}return null}var Di=class{get rootNodes(){let e=this._lView,t=e[we];return _u(t,e,t.firstChild,[])}constructor(e,t,r=!0){this._lView=e,this._cdRefInjectingView=t,this.notifyErrorHandler=r,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Qt]}set context(e){this._lView[Qt]=e}get destroyed(){return(this._lView[ve]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[cn];if(Kr(e)){let t=e[cu],r=t?t.indexOf(this):-1;r>-1&&(za(e,r),iu(t,r))}this._attachedToViewContainer=!1}qu(this._lView[we],this._lView)}onDestroy(e){A_(this._lView,e)}markForCheck(){rm(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ve]&=-129}reattach(){kf(this._lView),this._lView[ve]|=128}detectChanges(){this._lView[ve]|=1024,jx(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ie(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=Nf(this._lView),t=this._lView[gs];t!==null&&!e&&Zp(t,this._lView),gx(this._lView[we],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new ie(902,!1);this._appRef=e;let t=Nf(this._lView),r=this._lView[gs];r!==null&&!t&&vx(r,this._lView),kf(this._lView)}},Xu=(()=>{class n{static{this.__NG_ELEMENT_ID__=rN}}return n})(),tN=Xu,nN=class extends tN{constructor(e,t,r){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=r}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,t){return this.createEmbeddedViewImpl(e,t)}createEmbeddedViewImpl(e,t,r){let o=Yu(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:t,dehydratedView:r});return new Di(o)}};function rN(){return oN(Xt(),Ve())}function oN(n,e){return n.type&4?new nN(e,n,Hu(n,e)):null}var HU=new RegExp(`^(\\d+)*(${OM}|${NM})*(.*)`);var iN=()=>null;function Za(n,e){return iN(n,e)}var _s=class{},om=new pe("",{providedIn:"root",factory:()=>!1});var Ux=new pe(""),qx=new pe(""),Yf=class{},xu=class{};function sN(n){let e=Error(`No component factory found for ${sn(n)}.`);return e[aN]=n,e}var aN="ngComponent";var Qf=class{resolveComponentFactory(e){throw sN(e)}},xs=class{static{this.NULL=new Qf}},ws=class{},eo=(()=>{class n{constructor(){this.destroyNode=null}static{this.__NG_ELEMENT_ID__=()=>cN()}}return n})();function cN(){let n=Ve(),e=Xt(),t=Po(e.index,n);return(To(t)?t:n)[xt]}var lN=(()=>{class n{static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>null})}}return n})();function wu(n,e,t){let r=t?n.styles:null,o=t?n.classes:null,i=0;if(e!==null)for(let s=0;s<e.length;s++){let a=e[s];if(typeof a=="number")i=a;else if(i==1)o=cy(o,a);else if(i==2){let c=a,l=e[++s];r=cy(r,c+": "+l+";")}}t?n.styles=r:n.stylesWithoutHost=r,t?n.classes=o:n.classesWithoutHost=o}var Cu=class extends xs{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let t=Io(e);return new Cs(t,this.ngModule)}};function Ry(n,e){let t=[];for(let r in n){if(!n.hasOwnProperty(r))continue;let o=n[r];if(o===void 0)continue;let i=Array.isArray(o),s=i?o[0]:o,a=i?o[1]:Eo.None;e?t.push({propName:s,templateName:r,isSignal:(a&Eo.SignalBased)!==0}):t.push({propName:s,templateName:r})}return t}function uN(n){let e=n.toLowerCase();return e==="svg"?kI:e==="math"?RI:null}var Cs=class extends xu{get inputs(){let e=this.componentDef,t=e.inputTransforms,r=Ry(e.inputs,!0);if(t!==null)for(let o of r)t.hasOwnProperty(o.propName)&&(o.transform=t[o.propName]);return r}get outputs(){return Ry(this.componentDef.outputs,!1)}constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=hI(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}create(e,t,r,o){let i=Ee(null);try{o=o||this.ngModule;let s=o instanceof In?o:o?.injector;s&&this.componentDef.getStandaloneInjector!==null&&(s=this.componentDef.getStandaloneInjector(s)||s);let a=s?new Ff(e,s):e,c=a.get(ws,null);if(c===null)throw new ie(407,!1);let l=a.get(lN,null),u=a.get(_s,null),d={rendererFactory:c,sanitizer:l,inlineEffectRunner:null,changeDetectionScheduler:u},f=c.createRenderer(null,this.componentDef),h=this.componentDef.selectors[0][0]||"div",p=r?gA(f,r,this.componentDef.encapsulation,a):mx(f,h,uN(h)),m=512;this.componentDef.signals?m|=4096:this.componentDef.onPush||(m|=16);let g=null;p!==null&&(g=Wp(p,a,!0));let v=Jp(0,null,null,1,0,null,null,null,null,null,null),C=Gu(null,v,null,m,null,null,d,f,a,null,g);Rp(C);let I,A,D=null;try{let w=this.componentDef,x,b=null;w.findHostDirectiveDefs?(x=[],b=new Map,w.findHostDirectiveDefs(w,x,b),x.push(w)):x=[w];let V=dN(C,p);D=hN(V,p,w,x,C,d,f),A=Ap(v,ln),p&&mN(f,w,p,r),t!==void 0&&gN(A,this.ngContentSelectors,t),I=pN(D,w,x,b,C,[vN]),nm(v,C,null)}catch(w){throw D!==null&&Uf(D),Uf(C),w}finally{Fp()}return new Xf(this.componentType,I,Hu(A,C),C,A)}finally{Ee(i)}}},Xf=class extends Yf{constructor(e,t,r,o,i){super(),this.location=r,this._rootLView=o,this._tNode=i,this.previousInputValues=null,this.instance=t,this.hostView=this.changeDetectorRef=new Di(o,void 0,!1),this.componentType=e}setInput(e,t){let r=this._tNode.inputs,o;if(r!==null&&(o=r[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),t))return;let i=this._rootLView;tm(i[we],i,o,e,t),this.previousInputValues.set(e,t);let s=Po(this._tNode.index,i);rm(s,1)}}get injector(){return new vi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function dN(n,e){let t=n[we],r=ln;return n[r]=e,tc(t,r,2,"#host",null)}function hN(n,e,t,r,o,i,s){let a=o[we];fN(r,n,e,s);let c=null;e!==null&&(c=Wp(e,o[ms]));let l=i.rendererFactory.createRenderer(e,t),u=16;t.signals?u=4096:t.onPush&&(u=64);let d=Gu(o,Ix(t),null,u,o[n.index],n,i,l,null,null,c);return a.firstCreatePass&&zf(a,n,r.length-1),Zu(o,d),o[n.index]=d}function fN(n,e,t,r){for(let o of n)e.mergedAttrs=Ha(e.mergedAttrs,o.hostAttrs);e.mergedAttrs!==null&&(wu(e,e.mergedAttrs,!0),t!==null&&Cx(r,t,e))}function pN(n,e,t,r,o,i){let s=Xt(),a=o[we],c=Hn(s,o);Ax(a,o,s,t,null,r);for(let u=0;u<t.length;u++){let d=s.directiveStart+u,f=ys(o,a,d,s);No(f,o)}Nx(a,o,s),c&&No(c,o);let l=ys(o,a,s.directiveStart+s.componentOffset,s);if(n[Qt]=o[Qt]=l,i!==null)for(let u of i)u(l,e);return Qp(a,s,o),l}function mN(n,e,t,r){if(r)Ef(n,t,["ng-version","18.2.10"]);else{let{attrs:o,classes:i}=fI(e.selectors[0]);o&&Ef(n,t,o),i&&i.length>0&&wx(n,t,i.join(" "))}}function gN(n,e,t){let r=n.projection=[];for(let o=0;o<e.length;o++){let i=t[o];r.push(i!=null?Array.from(i):null)}}function vN(){let n=Xt();$u(Ve()[we],n)}var Es=(()=>{class n{static{this.__NG_ELEMENT_ID__=yN}}return n})();function yN(){let n=Xt();return xN(n,Ve())}var _N=Es,Wx=class extends _N{constructor(e,t,r){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=r}get element(){return Hu(this._hostTNode,this._hostLView)}get injector(){return new vi(this._hostTNode,this._hostLView)}get parentInjector(){let e=Vp(this._hostTNode,this._hostLView);if(q_(e)){let t=hu(e,this._hostLView),r=du(e),o=t[we].data[r+8];return new vi(o,t)}else return new vi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let t=Fy(this._lContainer);return t!==null&&t[e]||null}get length(){return this._lContainer.length-an}createEmbeddedView(e,t,r){let o,i;typeof r=="number"?o=r:r!=null&&(o=r.index,i=r.injector);let s=Za(this._lContainer,e.ssrId),a=e.createEmbeddedViewImpl(t||{},i,s);return this.insertImpl(a,o,Ga(this._hostTNode,s)),a}createComponent(e,t,r,o,i){let s=e&&!MI(e),a;if(s)a=t;else{let p=t||{};a=p.index,r=p.injector,o=p.projectableNodes,i=p.environmentInjector||p.ngModuleRef}let c=s?e:new Cs(Io(e)),l=r||this.parentInjector;if(!i&&c.ngModule==null){let m=(s?l:this.parentInjector).get(In,null);m&&(i=m)}let u=Io(c.componentType??{}),d=Za(this._lContainer,u?.id??null),f=d?.firstChild??null,h=c.create(l,o,f,i);return this.insertImpl(h.hostView,a,Ga(this._hostTNode,d)),h}insert(e,t){return this.insertImpl(e,t,!0)}insertImpl(e,t,r){let o=e._lView;if(FI(o)){let a=this.indexOf(e);if(a!==-1)this.detach(a);else{let c=o[cn],l=new Wx(c,c[cr],c[cn]);l.detach(l.indexOf(e))}}let i=this._adjustIndex(t),s=this._lContainer;return Qu(s,o,i,r),e.attachToViewContainerRef(),r_(vf(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){let t=Fy(this._lContainer);return t!==null?t.indexOf(e):-1}remove(e){let t=this._adjustIndex(e,-1),r=za(this._lContainer,t);r&&(iu(vf(this._lContainer),t),qu(r[we],r))}detach(e){let t=this._adjustIndex(e,-1),r=za(this._lContainer,t);return r&&iu(vf(this._lContainer),t)!=null?new Di(r):null}_adjustIndex(e,t=0){return e??this.length+t}};function Fy(n){return n[cu]}function vf(n){return n[cu]||(n[cu]=[])}function xN(n,e){let t,r=e[n.index];return Kr(r)?t=r:(t=Ox(r,e,null,n),e[n.index]=t,Zu(e,t)),CN(t,e,n,r),new Wx(t,n,e)}function wN(n,e){let t=n[xt],r=t.createComment(""),o=Hn(e,n),i=_x(t,o);return yu(t,i,r,oA(t,o),!1),r}var CN=SN,DN=()=>!1;function bN(n,e,t){return DN(n,e,t)}function SN(n,e,t,r){if(n[_i])return;let o;t.type&8?o=Sr(r):o=wN(e,t),n[_i]=o}var Py=new Set;function Ii(n){Py.has(n)||(Py.add(n),performance?.mark?.("mark_feature_usage",{detail:{feature:n}}))}function TN(n){return typeof n=="function"&&n[Wr]!==void 0}function Ku(n,e){Ii("NgSignals");let t=Fv(n),r=t[Wr];return e?.equal&&(r.equal=e.equal),t.set=o=>qh(r,o),t.update=o=>Pv(r,o),t.asReadonly=EN.bind(t),t}function EN(){let n=this[Wr];if(n.readonlyFn===void 0){let e=()=>this();e[Wr]=n,n.readonlyFn=e}return n.readonlyFn}function zx(n){return TN(n)&&typeof n.set=="function"}function IN(n){return Object.getPrototypeOf(n.prototype).constructor}function to(n){let e=IN(n.type),t=!0,r=[n];for(;e;){let o;if(Mo(n))o=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new ie(903,!1);o=e.\u0275dir}if(o){if(t){r.push(o);let s=n;s.inputs=Yl(n.inputs),s.inputTransforms=Yl(n.inputTransforms),s.declaredInputs=Yl(n.declaredInputs),s.outputs=Yl(n.outputs);let a=o.hostBindings;a&&kN(n,a);let c=o.viewQuery,l=o.contentQueries;if(c&&NN(n,c),l&&ON(n,l),MN(n,o),RE(n.outputs,o.outputs),Mo(o)&&o.data.animation){let u=n.data;u.animation=(u.animation||[]).concat(o.data.animation)}}let i=o.features;if(i)for(let s=0;s<i.length;s++){let a=i[s];a&&a.ngInherit&&a(n),a===to&&(t=!1)}}e=Object.getPrototypeOf(e)}AN(r)}function MN(n,e){for(let t in e.inputs){if(!e.inputs.hasOwnProperty(t)||n.inputs.hasOwnProperty(t))continue;let r=e.inputs[t];if(r!==void 0&&(n.inputs[t]=r,n.declaredInputs[t]=e.declaredInputs[t],e.inputTransforms!==null)){let o=Array.isArray(r)?r[0]:r;if(!e.inputTransforms.hasOwnProperty(o))continue;n.inputTransforms??={},n.inputTransforms[o]=e.inputTransforms[o]}}}function AN(n){let e=0,t=null;for(let r=n.length-1;r>=0;r--){let o=n[r];o.hostVars=e+=o.hostVars,o.hostAttrs=Ha(o.hostAttrs,t=Ha(t,o.hostAttrs))}}function Yl(n){return n===hs?{}:n===Bn?[]:n}function NN(n,e){let t=n.viewQuery;t?n.viewQuery=(r,o)=>{e(r,o),t(r,o)}:n.viewQuery=e}function ON(n,e){let t=n.contentQueries;t?n.contentQueries=(r,o,i)=>{e(r,o,i),t(r,o,i)}:n.contentQueries=e}function kN(n,e){let t=n.hostBindings;t?n.hostBindings=(r,o)=>{e(r,o),t(r,o)}:n.hostBindings=e}function im(n){let e=n.inputConfig,t={};for(let r in e)if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)&&o[3]&&(t[r]=o[3])}n.inputTransforms=t}var Oo=class{},Ya=class{};var Kf=class extends Oo{constructor(e,t,r,o=!0){super(),this.ngModuleType=e,this._parent=t,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Cu(this);let i=h_(e);this._bootstrapComponents=px(i.bootstrap),this._r3Injector=J_(e,t,[{provide:Oo,useValue:this},{provide:xs,useValue:this.componentFactoryResolver},...r],sn(e),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},Jf=class extends Ya{constructor(e){super(),this.moduleType=e}create(e){return new Kf(this.moduleType,e,[])}};var Du=class extends Oo{constructor(e){super(),this.componentFactoryResolver=new Cu(this),this.instance=null;let t=new Ua([...e.providers,{provide:Oo,useValue:this},{provide:xs,useValue:this.componentFactoryResolver}],e.parent||Ip(),e.debugName,new Set(["environment"]));this.injector=t,e.runEnvironmentInitializers&&t.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function Ju(n,e,t=null){return new Du({providers:n,parent:e,debugName:t,runEnvironmentInitializers:!0}).injector}function Gx(n){return sm(n)?Array.isArray(n)||!(n instanceof Map)&&Symbol.iterator in n:!1}function RN(n,e){if(Array.isArray(n))for(let t=0;t<n.length;t++)e(n[t]);else{let t=n[Symbol.iterator](),r;for(;!(r=t.next()).done;)e(r.value)}}function sm(n){return n!==null&&(typeof n=="function"||typeof n=="object")}function am(n,e,t){return n[e]=t}function FN(n,e){return n[e]}function Tr(n,e,t){let r=n[e];return Object.is(r,t)?!1:(n[e]=t,!0)}function PN(n,e,t,r){let o=Tr(n,e,t);return Tr(n,e+1,r)||o}function VN(n){return(n.flags&32)===32}function LN(n,e,t,r,o,i,s,a,c){let l=e.consts,u=tc(e,n,4,s||null,a||null);em(e,t,u,Ao(l,c)),$u(e,u);let d=u.tView=Jp(2,u,r,o,i,e.directiveRegistry,e.pipeRegistry,null,e.schemas,l,null);return e.queries!==null&&(e.queries.template(e,u),d.queries=e.queries.embeddedTView(u)),u}function ep(n,e,t,r,o,i,s,a,c,l){let u=t+ln,d=e.firstCreatePass?LN(u,e,n,r,o,i,s,a,c):e.data[u];Ti(d,!1);let f=jN(e,n,d,t);ju()&&Wu(e,n,f,d),No(f,n);let h=Ox(f,n,f,d);return n[u]=h,Zu(n,h),bN(h,d,n),Pu(d)&&Xp(e,n,d),c!=null&&Kp(n,d,l),d}function Je(n,e,t,r,o,i,s,a){let c=Ve(),l=$t(),u=Ao(l.consts,i);return ep(c,l,n,e,t,r,o,u,s,a),Je}var jN=BN;function BN(n,e,t,r){return Bu(!0),e[xt].createComment("")}var ls=function(n){return n[n.EarlyRead=0]="EarlyRead",n[n.Write=1]="Write",n[n.MixedReadWrite=2]="MixedReadWrite",n[n.Read=3]="Read",n}(ls||{}),Zx=(()=>{class n{constructor(){this.impl=null}execute(){this.impl?.execute()}static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}}return n})(),tp=class n{constructor(){this.ngZone=F(ft),this.scheduler=F(_s),this.errorHandler=F(Yr,{optional:!0}),this.sequences=new Set,this.deferredRegistrations=new Set,this.executing=!1}static{this.PHASES=[ls.EarlyRead,ls.Write,ls.MixedReadWrite,ls.Read]}execute(){this.executing=!0;for(let e of n.PHASES)for(let t of this.sequences)if(!(t.erroredOrDestroyed||!t.hooks[e]))try{t.pipelinedValue=this.ngZone.runOutsideAngular(()=>t.hooks[e](t.pipelinedValue))}catch(r){t.erroredOrDestroyed=!0,this.errorHandler?.handleError(r)}this.executing=!1;for(let e of this.sequences)e.afterRun(),e.once&&(this.sequences.delete(e),e.destroy());for(let e of this.deferredRegistrations)this.sequences.add(e);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear()}register(e){this.executing?this.deferredRegistrations.add(e):(this.sequences.add(e),this.scheduler.notify(6))}unregister(e){this.executing&&this.sequences.has(e)?(e.erroredOrDestroyed=!0,e.pipelinedValue=void 0,e.once=!0):(this.sequences.delete(e),this.deferredRegistrations.delete(e))}static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>new n})}},np=class{constructor(e,t,r,o){this.impl=e,this.hooks=t,this.once=r,this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.unregisterOnDestroy=o?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.()}};function cm(n,e){!e?.injector&&II(cm);let t=e?.injector??F(ar);return WM(t)?(Ii("NgAfterNextRender"),HN(n,t,e,!0)):UN}function $N(n,e){if(n instanceof Function){let t=[void 0,void 0,void 0,void 0];return t[e]=n,t}else return[n.earlyRead,n.write,n.mixedReadWrite,n.read]}function HN(n,e,t,r){let o=e.get(Zx);o.impl??=e.get(tp);let i=t?.phase??ls.MixedReadWrite,s=t?.manualCleanup!==!0?e.get(jp):null,a=new np(o.impl,$N(n,i),r,s);return o.impl.register(a),a}var UN={destroy(){}};function ed(n,e,t,r){let o=Ve(),i=Ss();if(Tr(o,i,e)){let s=$t(),a=Pp();kA(a,o,n,e,t,r)}return ed}function qN(n,e,t,r){return Tr(n,Ss(),t)?e+Au(t)+r:Jr}function Ql(n,e){return n<<17|e<<2}function bi(n){return n>>17&32767}function WN(n){return(n&2)==2}function zN(n,e){return n&131071|e<<17}function rp(n){return n|2}function Ds(n){return(n&131068)>>2}function yf(n,e){return n&-131069|e<<2}function GN(n){return(n&1)===1}function op(n){return n|1}function ZN(n,e,t,r,o,i){let s=i?e.classBindings:e.styleBindings,a=bi(s),c=Ds(s);n[r]=t;let l=!1,u;if(Array.isArray(t)){let d=t;u=d[1],(u===null||Ja(d,u)>0)&&(l=!0)}else u=t;if(o)if(c!==0){let f=bi(n[a+1]);n[r+1]=Ql(f,a),f!==0&&(n[f+1]=yf(n[f+1],r)),n[a+1]=zN(n[a+1],r)}else n[r+1]=Ql(a,0),a!==0&&(n[a+1]=yf(n[a+1],r)),a=r;else n[r+1]=Ql(c,0),a===0?a=r:n[c+1]=yf(n[c+1],r),c=r;l&&(n[r+1]=rp(n[r+1])),Vy(n,u,r,!0),Vy(n,u,r,!1),YN(e,u,n,r,i),s=Ql(a,c),i?e.classBindings=s:e.styleBindings=s}function YN(n,e,t,r,o){let i=o?n.residualClasses:n.residualStyles;i!=null&&typeof e=="string"&&Ja(i,e)>=0&&(t[r+1]=op(t[r+1]))}function Vy(n,e,t,r){let o=n[t+1],i=e===null,s=r?bi(o):Ds(o),a=!1;for(;s!==0&&(a===!1||i);){let c=n[s],l=n[s+1];QN(c,e)&&(a=!0,n[s+1]=r?op(l):rp(l)),s=r?bi(l):Ds(l)}a&&(n[t+1]=r?rp(o):op(o))}function QN(n,e){return n===null||e==null||(Array.isArray(n)?n[1]:n)===e?!0:Array.isArray(n)&&typeof e=="string"?Ja(n,e)>=0:!1}function Me(n,e,t){let r=Ve(),o=Ss();if(Tr(r,o,e)){let i=$t(),s=Pp();Mx(i,s,r,n,e,r[xt],t,!1)}return Me}function Ly(n,e,t,r,o){let i=e.inputs,s=o?"class":"style";tm(n,t,i[s],s,r)}function nc(n,e,t){return Yx(n,e,t,!1),nc}function Ot(n,e){return Yx(n,e,null,!0),Ot}function Yx(n,e,t,r){let o=Ve(),i=$t(),s=zI(2);if(i.firstUpdatePass&&KN(i,n,s,r),e!==Jr&&Tr(o,s,e)){let a=i.data[Ei()];r1(i,a,o,o[xt],n,o[s+1]=o1(e,t),r,s)}}function XN(n,e){return e>=n.expandoStartIndex}function KN(n,e,t,r){let o=n.data;if(o[t+1]===null){let i=o[Ei()],s=XN(n,t);i1(i,r)&&e===null&&!s&&(e=!1),e=JN(o,i,e,r),ZN(o,i,e,t,s,r)}}function JN(n,e,t,r){let o=QI(n),i=r?e.residualClasses:e.residualStyles;if(o===null)(r?e.classBindings:e.styleBindings)===0&&(t=_f(null,n,e,t,r),t=Qa(t,e.attrs,r),i=null);else{let s=e.directiveStylingLast;if(s===-1||n[s]!==o)if(t=_f(o,n,e,t,r),i===null){let c=e1(n,e,r);c!==void 0&&Array.isArray(c)&&(c=_f(null,n,e,c[1],r),c=Qa(c,e.attrs,r),t1(n,e,r,c))}else i=n1(n,e,r)}return i!==void 0&&(r?e.residualClasses=i:e.residualStyles=i),t}function e1(n,e,t){let r=t?e.classBindings:e.styleBindings;if(Ds(r)!==0)return n[bi(r)]}function t1(n,e,t,r){let o=t?e.classBindings:e.styleBindings;n[bi(o)]=r}function n1(n,e,t){let r,o=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<o;i++){let s=n[i].hostAttrs;r=Qa(r,s,t)}return Qa(r,e.attrs,t)}function _f(n,e,t,r,o){let i=null,s=t.directiveEnd,a=t.directiveStylingLast;for(a===-1?a=t.directiveStart:a++;a<s&&(i=e[a],r=Qa(r,i.hostAttrs,o),i!==n);)a++;return n!==null&&(t.directiveStylingLast=a),r}function Qa(n,e,t){let r=t?1:2,o=-1;if(e!==null)for(let i=0;i<e.length;i++){let s=e[i];typeof s=="number"?o=s:o===r&&(Array.isArray(n)||(n=n===void 0?[]:["",n]),eI(n,s,t?!0:e[++i]))}return n===void 0?null:n}function r1(n,e,t,r,o,i,s,a){if(!(e.type&3))return;let c=n.data,l=c[a+1],u=GN(l)?jy(c,e,t,o,Ds(l),s):void 0;if(!bu(u)){bu(i)||WN(l)&&(i=jy(c,null,t,o,a,s));let d=T_(Ei(),t);dA(r,s,d,o,i)}}function jy(n,e,t,r,o,i){let s=e===null,a;for(;o>0;){let c=n[o],l=Array.isArray(c),u=l?c[1]:c,d=u===null,f=t[o+1];f===Jr&&(f=d?Bn:void 0);let h=d?lf(f,r):u===r?f:void 0;if(l&&!bu(h)&&(h=lf(c,r)),bu(h)&&(a=h,s))return a;let p=n[o+1];o=s?bi(p):Ds(p)}if(e!==null){let c=i?e.residualClasses:e.residualStyles;c!=null&&(a=lf(c,r))}return a}function bu(n){return n!==void 0}function o1(n,e){return n==null||n===""||(typeof e=="string"?n=n+e:typeof n=="object"&&(n=sn(ec(n)))),n}function i1(n,e){return(n.flags&(e?8:16))!==0}var ip=class{destroy(e){}updateValue(e,t){}swap(e,t){let r=Math.min(e,t),o=Math.max(e,t),i=this.detach(o);if(o-r>1){let s=this.detach(r);this.attach(r,i),this.attach(o,s)}else this.attach(r,i)}move(e,t){this.attach(t,this.detach(e))}};function xf(n,e,t,r,o){return n===t&&Object.is(e,r)?1:Object.is(o(n,e),o(t,r))?-1:0}function s1(n,e,t){let r,o,i=0,s=n.length-1,a=void 0;if(Array.isArray(e)){let c=e.length-1;for(;i<=s&&i<=c;){let l=n.at(i),u=e[i],d=xf(i,l,i,u,t);if(d!==0){d<0&&n.updateValue(i,u),i++;continue}let f=n.at(s),h=e[c],p=xf(s,f,c,h,t);if(p!==0){p<0&&n.updateValue(s,h),s--,c--;continue}let m=t(i,l),g=t(s,f),v=t(i,u);if(Object.is(v,g)){let C=t(c,h);Object.is(C,m)?(n.swap(i,s),n.updateValue(s,h),c--,s--):n.move(s,i),n.updateValue(i,u),i++;continue}if(r??=new Su,o??=$y(n,i,s,t),sp(n,r,i,v))n.updateValue(i,u),i++,s++;else if(o.has(v))r.set(m,n.detach(i)),s--;else{let C=n.create(i,e[i]);n.attach(i,C),i++,s++}}for(;i<=c;)By(n,r,t,i,e[i]),i++}else if(e!=null){let c=e[Symbol.iterator](),l=c.next();for(;!l.done&&i<=s;){let u=n.at(i),d=l.value,f=xf(i,u,i,d,t);if(f!==0)f<0&&n.updateValue(i,d),i++,l=c.next();else{r??=new Su,o??=$y(n,i,s,t);let h=t(i,d);if(sp(n,r,i,h))n.updateValue(i,d),i++,s++,l=c.next();else if(!o.has(h))n.attach(i,n.create(i,d)),i++,s++,l=c.next();else{let p=t(i,u);r.set(p,n.detach(i)),s--}}}for(;!l.done;)By(n,r,t,n.length,l.value),l=c.next()}for(;i<=s;)n.destroy(n.detach(s--));r?.forEach(c=>{n.destroy(c)})}function sp(n,e,t,r){return e!==void 0&&e.has(r)?(n.attach(t,e.get(r)),e.delete(r),!0):!1}function By(n,e,t,r,o){if(sp(n,e,r,t(r,o)))n.updateValue(r,o);else{let i=n.create(r,o);n.attach(r,i)}}function $y(n,e,t,r){let o=new Set;for(let i=e;i<=t;i++)o.add(r(i,n.at(i)));return o}var Su=class{constructor(){this.kvMap=new Map,this._vMap=void 0}has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let t=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(t)?(this.kvMap.set(e,this._vMap.get(t)),this._vMap.delete(t)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,t){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let o=this._vMap;for(;o.has(r);)r=o.get(r);o.set(r,t)}else this.kvMap.set(e,t)}forEach(e){for(let[t,r]of this.kvMap)if(e(r,t),this._vMap!==void 0){let o=this._vMap;for(;o.has(r);)r=o.get(r),e(r,t)}}};function jo(n,e){Ii("NgControlFlow");let t=Ve(),r=Ss(),o=t[r]!==Jr?t[r]:-1,i=o!==-1?Tu(t,ln+o):void 0,s=0;if(Tr(t,r,n)){let a=Ee(null);try{if(i!==void 0&&Px(i,s),n!==-1){let c=ln+n,l=Tu(t,c),u=up(t[we],c),d=Za(l,u.tView.ssrId),f=Yu(t,u,e,{dehydratedView:d});Qu(l,f,s,Ga(u,d))}}finally{Ee(a)}}else if(i!==void 0){let a=Fx(i,s);a!==void 0&&(a[Qt]=e)}}var ap=class{constructor(e,t,r){this.lContainer=e,this.$implicit=t,this.$index=r}get $count(){return this.lContainer.length-an}};function kt(n,e){return e}var cp=class{constructor(e,t,r){this.hasEmptyBlock=e,this.trackByFn=t,this.liveCollection=r}};function Rt(n,e,t,r,o,i,s,a,c,l,u,d,f){Ii("NgControlFlow");let h=Ve(),p=$t(),m=c!==void 0,g=Ve(),v=a?s.bind(g[sr][Qt]):s,C=new cp(m,v);g[ln+n]=C,ep(h,p,n+1,e,t,r,o,Ao(p.consts,i)),m&&ep(h,p,n+2,c,l,u,d,Ao(p.consts,f))}var lp=class extends ip{constructor(e,t,r){super(),this.lContainer=e,this.hostLView=t,this.templateTNode=r,this.operationsCounter=void 0,this.needsIndexUpdate=!1}get length(){return this.lContainer.length-an}at(e){return this.getLView(e)[Qt].$implicit}attach(e,t){let r=t[qa];this.needsIndexUpdate||=e!==this.length,Qu(this.lContainer,t,e,Ga(this.templateTNode,r))}detach(e){return this.needsIndexUpdate||=e!==this.length-1,a1(this.lContainer,e)}create(e,t){let r=Za(this.lContainer,this.templateTNode.tView.ssrId),o=Yu(this.hostLView,this.templateTNode,new ap(this.lContainer,t,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),o}destroy(e){qu(e[we],e),this.operationsCounter?.recordDestroy()}updateValue(e,t){this.getLView(e)[Qt].$implicit=t}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Qt].$index=e}getLView(e){return c1(this.lContainer,e)}};function Ft(n){let e=Ee(null),t=Ei();try{let r=Ve(),o=r[we],i=r[t],s=t+1,a=Tu(r,s);if(i.liveCollection===void 0){let l=up(o,s);i.liveCollection=new lp(a,r,l)}else i.liveCollection.reset();let c=i.liveCollection;if(s1(c,n,i.trackByFn),c.updateIndexes(),i.hasEmptyBlock){let l=Ss(),u=c.length===0;if(Tr(r,l,u)){let d=t+2,f=Tu(r,d);if(u){let h=up(o,d),p=Za(f,h.tView.ssrId),m=Yu(r,h,void 0,{dehydratedView:p});Qu(f,m,0,Ga(h,p))}else Px(f,0)}}}finally{Ee(e)}}function Tu(n,e){return n[e]}function a1(n,e){return za(n,e)}function c1(n,e){return Fx(n,e)}function up(n,e){return Ap(n,e)}function l1(n,e,t,r,o,i){let s=e.consts,a=Ao(s,o),c=tc(e,n,2,r,a);return em(e,t,c,Ao(s,i)),c.attrs!==null&&wu(c,c.attrs,!1),c.mergedAttrs!==null&&wu(c,c.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,c),c}function S(n,e,t,r){let o=Ve(),i=$t(),s=ln+n,a=o[xt],c=i.firstCreatePass?l1(s,i,o,e,t,r):i.data[s],l=u1(i,o,c,a,e,n);o[s]=l;let u=Pu(c);return Ti(c,!0),Cx(a,l,c),!VN(c)&&ju()&&Wu(i,o,l,c),LI()===0&&No(l,o),jI(),u&&(Xp(i,o,c),Qp(i,c,o)),r!==null&&Kp(o,c),S}function T(){let n=Xt();Op()?R_():(n=n.parent,Ti(n,!1));let e=n;HI(e)&&UI(),BI();let t=$t();return t.firstCreatePass&&($u(t,n),Mp(n)&&t.queries.elementEnd(n)),e.classesWithoutHost!=null&&rM(e)&&Ly(t,e,Ve(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&oM(e)&&Ly(t,e,Ve(),e.stylesWithoutHost,!1),T}function pt(n,e,t,r){return S(n,e,t,r),T(),pt}var u1=(n,e,t,r,o,i)=>(Bu(!0),mx(r,o,JI()));function d1(n,e,t,r,o){let i=e.consts,s=Ao(i,r),a=tc(e,n,8,"ng-container",s);s!==null&&wu(a,s,!0);let c=Ao(i,o);return em(e,t,a,c),e.queries!==null&&e.queries.elementStart(e,a),a}function rc(n,e,t){let r=Ve(),o=$t(),i=n+ln,s=o.firstCreatePass?d1(i,o,r,e,t):o.data[i];Ti(s,!0);let a=h1(o,r,s,n);return r[i]=a,ju()&&Wu(o,r,a,s),No(a,r),Pu(s)&&(Xp(o,r,s),Qp(o,s,r)),t!=null&&Kp(r,s),rc}function oc(){let n=Xt(),e=$t();return Op()?R_():(n=n.parent,Ti(n,!1)),e.firstCreatePass&&($u(e,n),Mp(n)&&e.queries.elementEnd(n)),oc}var h1=(n,e,t,r)=>(Bu(!0),YM(e[xt],""));function tt(){return Ve()}var Eu="en-US";var f1=Eu;function p1(n){typeof n=="string"&&(f1=n.toLowerCase().replace(/_/g,"-"))}var m1=(n,e,t)=>{};function he(n,e,t,r){let o=Ve(),i=$t(),s=Xt();return Qx(i,o,o[xt],s,n,e,r),he}function g1(n,e,t,r){let o=n.cleanup;if(o!=null)for(let i=0;i<o.length-1;i+=2){let s=o[i];if(s===t&&o[i+1]===r){let a=e[au],c=o[i+2];return a.length>c?a[c]:null}typeof s=="string"&&(i+=2)}return null}function Qx(n,e,t,r,o,i,s){let a=Pu(r),l=n.firstCreatePass&&LA(n),u=e[Qt],d=VA(e),f=!0;if(r.type&3||s){let m=Hn(r,e),g=s?s(m):m,v=d.length,C=s?A=>s(Sr(A[r.index])):r.index,I=null;if(!s&&a&&(I=g1(n,e,o,r.index)),I!==null){let A=I.__ngLastListenerFn__||I;A.__ngNextListenerFn__=i,I.__ngLastListenerFn__=i,f=!1}else{i=Uy(r,e,u,i),m1(m,o,i);let A=t.listen(g,o,i);d.push(i,A),l&&l.push(o,C,v,v+1)}}else i=Uy(r,e,u,i);let h=r.outputs,p;if(f&&h!==null&&(p=h[o])){let m=p.length;if(m)for(let g=0;g<m;g+=2){let v=p[g],C=p[g+1],D=e[v][C].subscribe(i),w=d.length;d.push(i,D),l&&l.push(o,r.index,w,-(w+1))}}}function Hy(n,e,t,r){let o=Ee(null);try{return wr(6,e,t),t(r)!==!1}catch(i){return Rx(n,i),!1}finally{wr(7,e,t),Ee(o)}}function Uy(n,e,t,r){return function o(i){if(i===Function)return r;let s=n.componentOffset>-1?Po(n.index,e):e;rm(s,5);let a=Hy(e,t,r,i),c=o.__ngNextListenerFn__;for(;c;)a=Hy(e,t,c,i)&&a,c=c.__ngNextListenerFn__;return a}}function J(n=1){return KI(n)}function v1(n,e,t,r){t>=n.data.length&&(n.data[t]=null,n.blueprint[t]=null),e[t]=r}function U(n,e=""){let t=Ve(),r=$t(),o=n+ln,i=r.firstCreatePass?tc(r,o,1,e,null):r.data[o],s=y1(r,t,i,e,n);t[o]=s,ju()&&Wu(r,t,s,i),Ti(i,!1)}var y1=(n,e,t,r,o)=>(Bu(!0),GM(e[xt],r));function un(n){return wt("",n,""),un}function wt(n,e,t){let r=Ve(),o=qN(r,n,e,t);return o!==Jr&&jA(r,Ei(),o),wt}function no(n,e,t){zx(e)&&(e=e());let r=Ve(),o=Ss();if(Tr(r,o,e)){let i=$t(),s=Pp();Mx(i,s,r,n,e,r[xt],t,!1)}return no}function Bo(n,e){let t=zx(n);return t&&n.set(e),t}function ro(n,e){let t=Ve(),r=$t(),o=Xt();return Qx(r,t,t[xt],o,n,e),ro}function _1(n,e,t){let r=$t();if(r.firstCreatePass){let o=Mo(n);dp(t,r.data,r.blueprint,o,!0),dp(e,r.data,r.blueprint,o,!1)}}function dp(n,e,t,r,o){if(n=on(n),Array.isArray(n))for(let i=0;i<n.length;i++)dp(n[i],e,t,r,o);else{let i=$t(),s=Ve(),a=Xt(),c=ps(n)?n:on(n.provide),l=y_(n),u=a.providerIndexes&1048575,d=a.directiveStart,f=a.providerIndexes>>20;if(ps(n)||!n.multi){let h=new Ci(l,o,Q),p=Cf(c,e,o?u:u+f,d);p===-1?(Vf(pu(a,s),i,c),wf(i,n,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),t.push(h),s.push(h)):(t[p]=h,s[p]=h)}else{let h=Cf(c,e,u+f,d),p=Cf(c,e,u,u+f),m=h>=0&&t[h],g=p>=0&&t[p];if(o&&!g||!o&&!m){Vf(pu(a,s),i,c);let v=C1(o?w1:x1,t.length,o,r,l);!o&&g&&(t[p].providerFactory=v),wf(i,n,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),t.push(v),s.push(v)}else{let v=Xx(t[o?p:h],l,!o&&r);wf(i,n,h>-1?h:p,v)}!o&&r&&g&&t[p].componentProviders++}}}function wf(n,e,t,r){let o=ps(e),i=wI(e);if(o||i){let c=(i?on(e.useClass):e).prototype.ngOnDestroy;if(c){let l=n.destroyHooks||(n.destroyHooks=[]);if(!o&&e.multi){let u=l.indexOf(t);u===-1?l.push(t,[r,c]):l[u+1].push(r,c)}else l.push(t,c)}}}function Xx(n,e,t){return t&&n.componentProviders++,n.multi.push(e)-1}function Cf(n,e,t,r){for(let o=t;o<r;o++)if(e[o]===n)return o;return-1}function x1(n,e,t,r){return hp(this.multi,[])}function w1(n,e,t,r){let o=this.multi,i;if(this.providerFactory){let s=this.providerFactory.componentProviders,a=ys(t,t[we],this.providerFactory.index,r);i=a.slice(0,s),hp(o,i);for(let c=s;c<a.length;c++)i.push(a[c])}else i=[],hp(o,i);return i}function hp(n,e){for(let t=0;t<n.length;t++){let r=n[t];e.push(r())}return e}function C1(n,e,t,r,o){let i=new Ci(n,t,Q);return i.multi=[],i.index=e,i.componentProviders=0,Xx(i,o,r&&!t),i}function Is(n,e=[]){return t=>{t.providersResolver=(r,o)=>_1(r,o?o(n):n,e)}}var D1=(()=>{class n{constructor(t){this._injector=t,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(t){if(!t.standalone)return null;if(!this.cachedInjectors.has(t)){let r=m_(!1,t.type),o=r.length>0?Ju([r],this._injector,`Standalone[${t.type.name}]`):null;this.cachedInjectors.set(t,o)}return this.cachedInjectors.get(t)}ngOnDestroy(){try{for(let t of this.cachedInjectors.values())t!==null&&t.destroy()}finally{this.cachedInjectors.clear()}}static{this.\u0275prov=$({token:n,providedIn:"environment",factory:()=>new n(ce(In))})}}return n})();function Ye(n){Ii("NgStandalone"),n.getStandaloneInjector=e=>e.get(D1).getOrCreateStandaloneInjector(n)}function td(n,e,t){let r=kp()+n,o=Ve();return o[r]===Jr?am(o,r,t?e.call(t):e()):FN(o,r)}function Kx(n,e){let t=n[e];return t===Jr?void 0:t}function b1(n,e,t,r,o,i){let s=e+t;return Tr(n,s,o)?am(n,s+1,i?r.call(i,o):r(o)):Kx(n,s+1)}function S1(n,e,t,r,o,i,s){let a=e+t;return PN(n,a,o,i)?am(n,a+2,s?r.call(s,o,i):r(o,i)):Kx(n,a+2)}function Ae(n,e){let t=$t(),r,o=n+ln;t.firstCreatePass?(r=T1(e,t.pipeRegistry),t.data[o]=r,r.onDestroy&&(t.destroyHooks??=[]).push(o,r.onDestroy)):r=t.data[o];let i=r.factory||(r.factory=yi(r.type,!0)),s,a=wn(Q);try{let c=fu(!1),l=i();return fu(c),v1(t,Ve(),o,l),l}finally{wn(a)}}function T1(n,e){if(e)for(let t=e.length-1;t>=0;t--){let r=e[t];if(n===r.name)return r}}function Le(n,e,t){let r=n+ln,o=Ve(),i=E_(o,r);return Jx(o,r)?b1(o,kp(),e,i.transform,t,i):i.transform(t)}function ic(n,e,t,r){let o=n+ln,i=Ve(),s=E_(i,o);return Jx(i,o)?S1(i,kp(),e,s.transform,t,r,s):s.transform(t,r)}function Jx(n,e){return n[we].data[e].pure}var nd=(()=>{class n{log(t){console.log(t)}warn(t){console.warn(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"platform"})}}return n})();var e0=new pe("");function $o(n){return!!n&&typeof n.then=="function"}function lm(n){return!!n&&typeof n.subscribe=="function"}var rd=new pe(""),t0=(()=>{class n{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,r)=>{this.resolve=t,this.reject=r}),this.appInits=F(rd,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let t=[];for(let o of this.appInits){let i=o();if($o(i))t.push(i);else if(lm(i)){let s=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});t.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(t).then(()=>{r()}).catch(o=>{this.reject(o)}),t.length===0&&r(),this.initialized=!0}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),od=new pe("");function E1(){Rv(()=>{throw new ie(600,!1)})}function I1(n){return n.isBoundToModule}var M1=10;function A1(n,e,t){try{let r=t();return $o(r)?r.catch(o=>{throw e.runOutsideAngular(()=>n.handleError(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>n.handleError(r)),r}}var Mi=(()=>{class n{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=F(bM),this.afterRenderManager=F(Zx),this.zonelessEnabled=F(om),this.dirtyFlags=0,this.deferredDirtyFlags=0,this.externalTestViews=new Set,this.beforeRender=new yt,this.afterTick=new yt,this.componentTypes=[],this.components=[],this.isStable=F(Ts).hasPendingTasks.pipe(ae(t=>!t)),this._injector=F(In)}get allViews(){return[...this.externalTestViews.keys(),...this._views]}get destroyed(){return this._destroyed}whenStable(){let t;return new Promise(r=>{t=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{t.unsubscribe()})}get injector(){return this._injector}bootstrap(t,r){let o=t instanceof xu;if(!this._injector.get(t0).done){let f=!o&&d_(t),h=!1;throw new ie(405,h)}let s;o?s=t:s=this._injector.get(xs).resolveComponentFactory(t),this.componentTypes.push(s.componentType);let a=I1(s)?void 0:this._injector.get(Oo),c=r||s.selector,l=s.create(ar.NULL,[],c,a),u=l.location.nativeElement,d=l.injector.get(e0,null);return d?.registerApplication(u),l.onDestroy(()=>{this.detachView(l.hostView),tu(this.components,l),d?.unregisterApplication(u)}),this._loadComponent(l),l}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){if(this._runningTick)throw new ie(101,!1);let t=Ee(null);try{this._runningTick=!0,this.synchronize()}catch(r){this.internalErrorHandler(r)}finally{this._runningTick=!1,Ee(t),this.afterTick.next()}}synchronize(){let t=null;this._injector.destroyed||(t=this._injector.get(ws,null,{optional:!0})),this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0;let r=0;for(;this.dirtyFlags!==0&&r++<M1;)this.synchronizeOnce(t)}synchronizeOnce(t){if(this.dirtyFlags|=this.deferredDirtyFlags,this.deferredDirtyFlags=0,this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8,this.beforeRender.next(r);for(let{_lView:o,notifyErrorHandler:i}of this._views)N1(o,i,r,this.zonelessEnabled);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&7)return}else t?.begin?.(),t?.end?.();this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:t})=>Vu(t))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(t){let r=t;this._views.push(r),r.attachToAppRef(this)}detachView(t){let r=t;tu(this._views,r),r.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t);let r=this._injector.get(od,[]);[...this._bootstrapListeners,...r].forEach(o=>o(t))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(t=>t()),this._views.slice().forEach(t=>t.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(t){return this._destroyListeners.push(t),()=>tu(this._destroyListeners,t)}destroy(){if(this._destroyed)throw new ie(406,!1);let t=this._injector;t.destroy&&!t.destroyed&&t.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function tu(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function N1(n,e,t,r){if(!t&&!Vu(n))return;jx(n,e,t&&!r?0:1)}var fp=class{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}},id=(()=>{class n{compileModuleSync(t){return new Jf(t)}compileModuleAsync(t){return Promise.resolve(this.compileModuleSync(t))}compileModuleAndAllComponentsSync(t){let r=this.compileModuleSync(t),o=h_(t),i=px(o.declarations).reduce((s,a)=>{let c=Io(a);return c&&s.push(new Cs(c)),s},[]);return new fp(r,i)}compileModuleAndAllComponentsAsync(t){return Promise.resolve(this.compileModuleAndAllComponentsSync(t))}clearCache(){}clearCacheFor(t){}getModuleId(t){}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var O1=(()=>{class n{constructor(){this.zone=F(ft),this.changeDetectionScheduler=F(_s),this.applicationRef=F(Mi)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.changeDetectionScheduler.runningTick||this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function k1({ngZoneFactory:n,ignoreChangesOutsideZone:e,scheduleInRootZone:t}){return n??=()=>new ft(O(y({},R1()),{scheduleInRootZone:t})),[{provide:ft,useFactory:n},{provide:fs,multi:!0,useFactory:()=>{let r=F(O1,{optional:!0});return()=>r.initialize()}},{provide:fs,multi:!0,useFactory:()=>{let r=F(F1);return()=>{r.initialize()}}},e===!0?{provide:Ux,useValue:!0}:[],{provide:qx,useValue:t??ex}]}function R1(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:n?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:n?.runCoalescing??!1}}var F1=(()=>{class n{constructor(){this.subscription=new ct,this.initialized=!1,this.zone=F(ft),this.pendingTasks=F(Ts)}initialize(){if(this.initialized)return;this.initialized=!0;let t=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(t=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{ft.assertNotInAngularZone(),queueMicrotask(()=>{t!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(t),t=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{ft.assertInAngularZone(),t??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var P1=(()=>{class n{constructor(){this.appRef=F(Mi),this.taskService=F(Ts),this.ngZone=F(ft),this.zonelessEnabled=F(om),this.disableScheduling=F(Ux,{optional:!0})??!1,this.zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run,this.schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}],this.subscriptions=new ct,this.angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(gu):null,this.scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(F(qx,{optional:!0})??!1),this.cancelScheduledCallback=null,this.useMicrotaskScheduler=!1,this.runningTick=!1,this.pendingRenderTaskId=null,this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()})),this.disableScheduling||=!this.zonelessEnabled&&(this.ngZone instanceof Hf||!this.zoneIsDefined)}notify(t){if(!this.zonelessEnabled&&t===5)return;switch(t){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 7:{this.appRef.deferredDirtyFlags|=8;break}case 9:case 8:case 6:case 10:default:this.appRef.dirtyFlags|=8}if(!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Sy:tx;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.disableScheduling||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(gu+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let t=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){throw this.taskService.remove(t),r}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Sy(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(t)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let t=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(t)}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function V1(){return typeof $localize<"u"&&$localize.locale||Eu}var um=new pe("",{providedIn:"root",factory:()=>F(um,be.Optional|be.SkipSelf)||V1()});var pp=new pe("");function Xl(n){return!n.moduleRef}function L1(n){let e=Xl(n)?n.r3Injector:n.moduleRef.injector,t=e.get(ft);return t.run(()=>{Xl(n)?n.r3Injector.resolveInjectorInitializers():n.moduleRef.resolveInjectorInitializers();let r=e.get(Yr,null),o;if(t.runOutsideAngular(()=>{o=t.onError.subscribe({next:i=>{r.handleError(i)}})}),Xl(n)){let i=()=>e.destroy(),s=n.platformInjector.get(pp);s.add(i),e.onDestroy(()=>{o.unsubscribe(),s.delete(i)})}else{let i=()=>n.moduleRef.destroy(),s=n.platformInjector.get(pp);s.add(i),n.moduleRef.onDestroy(()=>{tu(n.allPlatformModules,n.moduleRef),o.unsubscribe(),s.delete(i)})}return A1(r,t,()=>{let i=e.get(t0);return i.runInitializers(),i.donePromise.then(()=>{let s=e.get(um,Eu);if(p1(s||Eu),Xl(n)){let a=e.get(Mi);return n.rootComponent!==void 0&&a.bootstrap(n.rootComponent),a}else return j1(n.moduleRef,n.allPlatformModules),n.moduleRef})})})}function j1(n,e){let t=n.injector.get(Mi);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(r=>t.bootstrap(r));else if(n.instance.ngDoBootstrap)n.instance.ngDoBootstrap(t);else throw new ie(-403,!1);e.push(n)}var nu=null;function B1(n=[],e){return ar.create({name:e,providers:[{provide:ku,useValue:"platform"},{provide:pp,useValue:new Set([()=>nu=null])},...n]})}function $1(n=[]){if(nu)return nu;let e=B1(n);return nu=e,E1(),H1(e),e}function H1(n){n.get(Up,null)?.forEach(t=>t())}var Ho=(()=>{class n{static{this.__NG_ELEMENT_ID__=U1}}return n})();function U1(n){return q1(Xt(),Ve(),(n&16)===16)}function q1(n,e,t){if(Fu(n)&&!t){let r=Po(n.index,e);return new Di(r,r)}else if(n.type&175){let r=e[sr];return new Di(r,e)}return null}var mp=class{constructor(){}supports(e){return Gx(e)}create(e){return new gp(e)}},W1=(n,e)=>e,gp=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||W1}forEachItem(e){let t;for(t=this._itHead;t!==null;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,r=this._removalsHead,o=0,i=null;for(;t||r;){let s=!r||t&&t.currentIndex<qy(r,o,i)?t:r,a=qy(s,o,i),c=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(t=t._next,s.previousIndex==null)o++;else{i||(i=[]);let l=a-o,u=c-o;if(l!=u){for(let f=0;f<l;f++){let h=f<i.length?i[f]:i[f]=0,p=h+f;u<=p&&p<l&&(i[f]=h+1)}let d=s.previousIndex;i[d]=u-l}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;t!==null;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;t!==null;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;t!==null;t=t._nextIdentityChange)e(t)}diff(e){if(e==null&&(e=[]),!Gx(e))throw new ie(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._itHead,r=!1,o,i,s;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)i=e[a],s=this._trackByFn(a,i),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,i,s,a),r=!0):(r&&(t=this._verifyReinsertion(t,i,s,a)),Object.is(t.item,i)||this._addIdentityChange(t,i)),t=t._next}else o=0,RN(e,a=>{s=this._trackByFn(o,a),t===null||!Object.is(t.trackById,s)?(t=this._mismatch(t,a,s,o),r=!0):(r&&(t=this._verifyReinsertion(t,a,s,o)),Object.is(t.item,a)||this._addIdentityChange(t,a)),t=t._next,o++}),this.length=o;return this._truncate(t),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,r,o){let i;return e===null?i=this._itTail:(i=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,o)):(e=this._linkedRecords===null?null:this._linkedRecords.get(r,o),e!==null?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,o)):e=this._addAfter(new vp(t,r),i,o)),e}_verifyReinsertion(e,t,r,o){let i=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return i!==null?e=this._reinsertAfter(i,e._prev,o):e.currentIndex!=o&&(e.currentIndex=o,this._addToMoves(e,o)),e}_truncate(e){for(;e!==null;){let t=e._next;this._addToRemovals(this._unlink(e)),e=t}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let o=e._prevRemoved,i=e._nextRemoved;return o===null?this._removalsHead=i:o._nextRemoved=i,i===null?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(e,t,r),this._addToMoves(e,r),e}_moveAfter(e,t,r){return this._unlink(e),this._insertAfter(e,t,r),this._addToMoves(e,r),e}_addAfter(e,t,r){return this._insertAfter(e,t,r),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,t,r){let o=t===null?this._itHead:t._next;return e._next=o,e._prev=t,o===null?this._itTail=e:o._prev=e,t===null?this._itHead=e:t._next=e,this._linkedRecords===null&&(this._linkedRecords=new Iu),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let t=e._prev,r=e._next;return t===null?this._itHead=r:t._next=r,r===null?this._itTail=t:r._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new Iu),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},vp=class{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},yp=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let r;for(r=this._head;r!==null;r=r._nextDup)if((t===null||t<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){let t=e._prevDup,r=e._nextDup;return t===null?this._head=r:t._nextDup=r,r===null?this._tail=t:r._prevDup=t,this._head===null}},Iu=class{constructor(){this.map=new Map}put(e){let t=e.trackById,r=this.map.get(t);r||(r=new yp,this.map.set(t,r)),r.add(e)}get(e,t){let r=e,o=this.map.get(r);return o?o.get(e,t):null}remove(e){let t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function qy(n,e,t){let r=n.previousIndex;if(r===null)return r;let o=0;return t&&r<t.length&&(o=t[r]),r+e+o}var _p=class{constructor(){}supports(e){return e instanceof Map||sm(e)}create(){return new xp}},xp=class{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return this._additionsHead!==null||this._changesHead!==null||this._removalsHead!==null}forEachItem(e){let t;for(t=this._mapHead;t!==null;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;t!==null;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;t!==null;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;t!==null;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;t!==null;t=t._nextRemoved)e(t)}diff(e){if(!e)e=new Map;else if(!(e instanceof Map||sm(e)))throw new ie(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(r,o)=>{if(t&&t.key===o)this._maybeAddToChanges(t,r),this._appendAfter=t,t=t._next;else{let i=this._getOrCreateRecordForKey(o,r);t=this._insertBeforeOrAppend(t,i)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let r=t;r!==null;r=r._nextRemoved)r===this._mapHead&&(this._mapHead=null),this._records.delete(r.key),r._nextRemoved=r._next,r.previousValue=r.currentValue,r.currentValue=null,r._prev=null,r._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){let r=e._prev;return t._next=e,t._prev=r,e._prev=t,r&&(r._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){let o=this._records.get(e);this._maybeAddToChanges(o,t);let i=o._prev,s=o._next;return i&&(i._next=s),s&&(s._prev=i),o._next=null,o._prev=null,o}let r=new wp(e);return this._records.set(e,r),r.currentValue=t,this._addToAdditions(r),r}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;e!==null;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;e!=null;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){this._additionsHead===null?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){this._changesHead===null?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(r=>t(e[r],r))}},wp=class{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}};function Wy(){return new dm([new mp])}var dm=(()=>{class n{static{this.\u0275prov=$({token:n,providedIn:"root",factory:Wy})}constructor(t){this.factories=t}static create(t,r){if(r!=null){let o=r.factories.slice();t=t.concat(o)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||Wy()),deps:[[n,new Ou,new Ka]]}}find(t){let r=this.factories.find(o=>o.supports(t));if(r!=null)return r;throw new ie(901,!1)}}return n})();function zy(){return new hm([new _p])}var hm=(()=>{class n{static{this.\u0275prov=$({token:n,providedIn:"root",factory:zy})}constructor(t){this.factories=t}static create(t,r){if(r){let o=r.factories.slice();t=t.concat(o)}return new n(t)}static extend(t){return{provide:n,useFactory:r=>n.create(t,r||zy()),deps:[[n,new Ou,new Ka]]}}find(t){let r=this.factories.find(o=>o.supports(t));if(r)return r;throw new ie(901,!1)}}return n})();function n0(n){try{let{rootComponent:e,appProviders:t,platformProviders:r}=n,o=$1(r),i=[k1({}),{provide:_s,useExisting:P1},...t||[]],s=new Du({providers:i,parent:o,debugName:"",runEnvironmentInitializers:!1});return L1({r3Injector:s.injector,platformInjector:o,rootComponent:e})}catch(e){return Promise.reject(e)}}function Ai(n){return typeof n=="boolean"?n:n!=null&&n!=="false"}function sd(n,e){Ii("NgSignals");let t=Nv(n);return e?.equal&&(t[Wr].equal=e.equal),t}function Ar(n){let e=Ee(null);try{return n()}finally{Ee(e)}}function r0(n){let e=Io(n);if(!e)return null;let t=new Cs(e);return{get selector(){return t.selector},get type(){return t.componentType},get inputs(){return t.inputs},get outputs(){return t.outputs},get ngContentSelectors(){return t.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}var l0=null;function io(){return l0}function u0(n){l0??=n}var ad=class{};var Cn=new pe(""),xm=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>F(z1),providedIn:"platform"})}}return n})(),d0=new pe(""),z1=(()=>{class n extends xm{constructor(){super(),this._doc=F(Cn),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return io().getBaseHref(this._doc)}onPopState(t){let r=io().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){let r=io().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,o){this._history.pushState(t,r,o)}replaceState(t,r,o){this._history.replaceState(t,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>new n,providedIn:"platform"})}}return n})();function wm(n,e){if(n.length==0)return e;if(e.length==0)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,t==2?n+e.substring(1):t==1?n+e:n+"/"+e}function o0(n){let e=n.match(/#|\?|$/),t=e&&e.index||n.length,r=t-(n[t-1]==="/"?1:0);return n.slice(0,r)+n.slice(t)}function oo(n){return n&&n[0]!=="?"?"?"+n:n}var so=(()=>{class n{historyGo(t){throw new Error("")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>F(Cm),providedIn:"root"})}}return n})(),ld=new pe(""),Cm=(()=>{class n extends so{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??F(Cn).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return wm(this._baseHref,t)}path(t=!1){let r=this._platformLocation.pathname+oo(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,i){let s=this.prepareExternalUrl(o+oo(i));this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){let s=this.prepareExternalUrl(o+oo(i));this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(ce(xm),ce(ld,8))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),h0=(()=>{class n extends so{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],r!=null&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(t){let r=wm(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,i){let s=this.prepareExternalUrl(o+oo(i));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.pushState(t,r,s)}replaceState(t,r,o,i){let s=this.prepareExternalUrl(o+oo(i));s.length==0&&(s=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}static{this.\u0275fac=function(r){return new(r||n)(ce(xm),ce(ld,8))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),Ms=(()=>{class n{constructor(t){this._subject=new Mt,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;let r=this._locationStrategy.getBaseHref();this._basePath=Y1(o0(i0(r))),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+oo(r))}normalize(t){return n.stripTrailingSlash(Z1(this._basePath,i0(t)))}prepareExternalUrl(t){return t&&t[0]!=="/"&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+oo(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+oo(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}static{this.normalizeQueryParams=oo}static{this.joinWithSlash=wm}static{this.stripTrailingSlash=o0}static{this.\u0275fac=function(r){return new(r||n)(ce(so))}}static{this.\u0275prov=$({token:n,factory:()=>G1(),providedIn:"root"})}}return n})();function G1(){return new Ms(ce(so))}function Z1(n,e){if(!n||!e.startsWith(n))return e;let t=e.substring(n.length);return t===""||["/",";","?","#"].includes(t[0])?t:e}function i0(n){return n.replace(/\/index.html$/,"")}function Y1(n){if(new RegExp("^(https?:)?//").test(n)){let[,t]=n.split(/\/\/[^\/]+/);return t}return n}function f0(n,e){e=encodeURIComponent(e);for(let t of n.split(";")){let r=t.indexOf("="),[o,i]=r==-1?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}var fm=class{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},ud=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let t=this._ngForOf;if(!this._differ&&t)if(0)try{}catch{}else this._differ=this._differs.find(t).create(this.ngForTrackBy)}if(this._differ){let t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){let r=this._viewContainer;t.forEachOperation((o,i,s)=>{if(o.previousIndex==null)r.createEmbeddedView(this._template,new fm(o.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)r.remove(i===null?void 0:i);else if(i!==null){let a=r.get(i);r.move(a,s),s0(a,o)}});for(let o=0,i=r.length;o<i;o++){let a=r.get(o).context;a.index=o,a.count=i,a.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{let i=r.get(o.currentIndex);s0(i,o)})}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Q(Es),Q(Xu),Q(dm))}}static{this.\u0275dir=Bt({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0})}}return n})();function s0(n,e){n.context.$implicit=e.item}var Uo=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new pm,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){a0("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){a0("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}static{this.\u0275fac=function(r){return new(r||n)(Q(Es),Q(Xu))}}static{this.\u0275dir=Bt({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0})}}return n})(),pm=class{constructor(){this.$implicit=null,this.ngIf=null}};function a0(n,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${n} must be a TemplateRef, but received '${sn(e)}'.`)}function p0(n,e){return new ie(2100,!1)}var mm=class{createSubscription(e,t){return Ar(()=>e.subscribe({next:t,error:r=>{throw r}}))}dispose(e){Ar(()=>e.unsubscribe())}},gm=class{createSubscription(e,t){return e.then(t,r=>{throw r})}dispose(e){}},Q1=new gm,X1=new mm,Un=(()=>{class n{constructor(t){this._latestValue=null,this.markForCheckOnValueUpdate=!0,this._subscription=null,this._obj=null,this._strategy=null,this._ref=t}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(t){if(!this._obj){if(t)try{this.markForCheckOnValueUpdate=!1,this._subscribe(t)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return t!==this._obj?(this._dispose(),this.transform(t)):this._latestValue}_subscribe(t){this._obj=t,this._strategy=this._selectStrategy(t),this._subscription=this._strategy.createSubscription(t,r=>this._updateLatestValue(t,r))}_selectStrategy(t){if($o(t))return Q1;if(lm(t))return X1;throw p0(n,t)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(t,r){t===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static{this.\u0275fac=function(r){return new(r||n)(Q(Ho,16))}}static{this.\u0275pipe=Er({name:"async",type:n,pure:!1,standalone:!0})}}return n})();var m0=(()=>{class n{transform(t){if(t==null)return null;if(typeof t!="string")throw p0(n,t);return t.toUpperCase()}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=Er({name:"uppercase",type:n,pure:!0,standalone:!0})}}return n})();function K1(n,e){return{key:n,value:e}}var g0=(()=>{class n{constructor(t){this.differs=t,this.keyValues=[],this.compareFn=c0}transform(t,r=c0){if(!t||!(t instanceof Map)&&typeof t!="object")return null;this.differ??=this.differs.find(t).create();let o=this.differ.diff(t),i=r!==this.compareFn;return o&&(this.keyValues=[],o.forEachItem(s=>{this.keyValues.push(K1(s.key,s.currentValue))})),(o||i)&&(this.keyValues.sort(r),this.compareFn=r),this.keyValues}static{this.\u0275fac=function(r){return new(r||n)(Q(hm,16))}}static{this.\u0275pipe=Er({name:"keyvalue",type:n,pure:!1,standalone:!0})}}return n})();function c0(n,e){let t=n.key,r=e.key;if(t===r)return 0;if(t===void 0)return 1;if(r===void 0)return-1;if(t===null)return 1;if(r===null)return-1;if(typeof t=="string"&&typeof r=="string")return t<r?-1:1;if(typeof t=="number"&&typeof r=="number")return t-r;if(typeof t=="boolean"&&typeof r=="boolean")return t<r?-1:1;let o=String(t),i=String(r);return o==i?0:o<i?-1:1}var Ht=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Fo({type:n})}static{this.\u0275inj=Ro({})}}return n})(),Dm="browser",J1="server";function eO(n){return n===Dm}function bm(n){return n===J1}var v0=(()=>{class n{static{this.\u0275prov=$({token:n,providedIn:"root",factory:()=>eO(F(Lo))?new vm(F(Cn),window):new ym})}}return n})(),vm=class{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){Array.isArray(e)?this.offset=()=>e:this.offset=e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e){this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){let t=tO(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){this.window.history.scrollRestoration=e}scrollToElement(e){let t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(r-i[0],o-i[1])}};function tO(n,e){let t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if(typeof n.createTreeWalker=="function"&&n.body&&typeof n.body.attachShadow=="function"){let r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT),o=r.currentNode;for(;o;){let i=o.shadowRoot;if(i){let s=i.getElementById(e)||i.querySelector(`[name="${e}"]`);if(s)return s}o=r.nextNode()}}return null}var ym=class{setOffset(e){}getScrollPosition(){return[0,0]}scrollToPosition(e){}scrollToAnchor(e){}setHistoryScrollRestoration(e){}},cd=class{};var Em=class extends ad{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Im=class n extends Em{static makeCurrent(){u0(new n)}onAndCancel(e,t,r){return e.addEventListener(t,r),()=>{e.removeEventListener(t,r)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.remove()}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=nO();return t==null?null:rO(t)}resetBaseElement(){sc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return f0(document.cookie,e)}},sc=null;function nO(){return sc=sc||document.querySelector("base"),sc?sc.getAttribute("href"):null}function rO(n){return new URL(n,document.baseURI).pathname}var oO=(()=>{class n{build(){return new XMLHttpRequest}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),Mm=new pe(""),w0=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>{o.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){let r=this._eventNameToPlugin.get(t);if(r)return r;if(r=this._plugins.find(i=>i.supports(t)),!r)throw new ie(5101,!1);return this._eventNameToPlugin.set(t,r),r}static{this.\u0275fac=function(r){return new(r||n)(ce(Mm),ce(ft))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),dd=class{constructor(e){this._doc=e}},Sm="ng-app-id",C0=(()=>{class n{constructor(t,r,o,i={}){this.doc=t,this.appId=r,this.nonce=o,this.platformId=i,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=bm(i),this.resetHostNodes()}addStyles(t){for(let r of t)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(t){for(let r of t)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let t=this.styleNodesInDOM;t&&(t.forEach(r=>r.remove()),t.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(let r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(t){for(let r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){let r=this.styleRef;r.get(t)?.elements?.forEach(o=>o.remove()),r.delete(t)}collectServerRenderedStyles(){let t=this.doc.head?.querySelectorAll(`style[${Sm}="${this.appId}"]`);if(t?.length){let r=new Map;return t.forEach(o=>{o.textContent!=null&&r.set(o.textContent,o)}),r}return null}changeUsageCount(t,r){let o=this.styleRef;if(o.has(t)){let i=o.get(t);return i.usage+=r,i.usage}return o.set(t,{usage:r,elements:[]}),r}getStyleElement(t,r){let o=this.styleNodesInDOM,i=o?.get(r);if(i?.parentNode===t)return o.delete(r),i.removeAttribute(Sm),i;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=r,this.platformIsServer&&s.setAttribute(Sm,this.appId),t.appendChild(s),s}}addStyleToHost(t,r){let o=this.getStyleElement(t,r),i=this.styleRef,s=i.get(r)?.elements;s?s.push(o):i.set(r,{elements:[o],usage:1})}resetHostNodes(){let t=this.hostNodes;t.clear(),t.add(this.doc.head)}static{this.\u0275fac=function(r){return new(r||n)(ce(Cn),ce(Hp),ce(qp,8),ce(Lo))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),Tm={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Nm=/%COMP%/g,D0="%COMP%",iO=`_nghost-${D0}`,sO=`_ngcontent-${D0}`,aO=!0,cO=new pe("",{providedIn:"root",factory:()=>aO});function lO(n){return sO.replace(Nm,n)}function uO(n){return iO.replace(Nm,n)}function b0(n,e){return e.map(t=>t.replace(Nm,n))}var y0=(()=>{class n{constructor(t,r,o,i,s,a,c,l=null){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.platformId=a,this.ngZone=c,this.nonce=l,this.rendererByCompId=new Map,this.platformIsServer=bm(a),this.defaultRenderer=new ac(t,s,c,this.platformIsServer)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Dr.ShadowDom&&(r=O(y({},r),{encapsulation:Dr.Emulated}));let o=this.getOrCreateRenderer(t,r);return o instanceof hd?o.applyToHost(t):o instanceof cc&&o.applyStyles(),o}getOrCreateRenderer(t,r){let o=this.rendererByCompId,i=o.get(r.id);if(!i){let s=this.doc,a=this.ngZone,c=this.eventManager,l=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(r.encapsulation){case Dr.Emulated:i=new hd(c,l,r,this.appId,u,s,a,d);break;case Dr.ShadowDom:return new Am(c,l,t,r,s,a,this.nonce,d);default:i=new cc(c,l,r,u,s,a,d);break}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(r){return new(r||n)(ce(w0),ce(C0),ce(Hp),ce(cO),ce(Cn),ce(Lo),ce(ft),ce(qp))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),ac=class{constructor(e,t,r,o){this.eventManager=e,this.doc=t,this.ngZone=r,this.platformIsServer=o,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Tm[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(_0(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(_0(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){t.remove()}selectRootElement(e,t){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new ie(-5104,!1);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;let i=Tm[o];i?e.setAttributeNS(i,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){let o=Tm[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(Qr.DashCase|Qr.Important)?e.style.setProperty(t,r,o&Qr.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&Qr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e!=null&&(e[t]=r)}setValue(e,t){e.nodeValue=t}listen(e,t,r){if(typeof e=="string"&&(e=io().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(r))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function _0(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Am=class extends ac{constructor(e,t,r,o,i,s,a,c){super(e,i,s,c),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=b0(o.id,o.styles);for(let u of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=u,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(null,t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},cc=class extends ac{constructor(e,t,r,o,i,s,a,c){super(e,i,s,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=o,this.styles=c?b0(c,r.styles):r.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},hd=class extends cc{constructor(e,t,r,o,i,s,a,c){let l=o+"-"+r.id;super(e,t,r,i,s,a,c,l),this.contentAttr=lO(l),this.hostAttr=uO(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}},dO=(()=>{class n extends dd{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}static{this.\u0275fac=function(r){return new(r||n)(ce(Cn))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})(),x0=["alt","control","meta","shift"],hO={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},fO={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},pO=(()=>{class n extends dd{constructor(t){super(t)}supports(t){return n.parseEventName(t)!=null}addEventListener(t,r,o){let i=n.parseEventName(r),s=n.eventCallback(i.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>io().onAndCancel(t,i.domEventName,s))}static parseEventName(t){let r=t.toLowerCase().split("."),o=r.shift();if(r.length===0||!(o==="keydown"||o==="keyup"))return null;let i=n._normalizeKey(r.pop()),s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),x0.forEach(l=>{let u=r.indexOf(l);u>-1&&(r.splice(u,1),s+=l+".")}),s+=i,r.length!=0||i.length===0)return null;let c={};return c.domEventName=o,c.fullKey=s,c}static matchEventFullKeyCode(t,r){let o=hO[t.key]||t.key,i="";return r.indexOf("code.")>-1&&(o=t.code,i="code."),o==null||!o?!1:(o=o.toLowerCase(),o===" "?o="space":o==="."&&(o="dot"),x0.forEach(s=>{if(s!==o){let a=fO[s];a(t)&&(i+=s+".")}}),i+=o,i===r)}static eventCallback(t,r,o){return i=>{n.matchEventFullKeyCode(i,t)&&o.runGuarded(()=>r(i))}}static _normalizeKey(t){return t==="esc"?"escape":t}static{this.\u0275fac=function(r){return new(r||n)(ce(Cn))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})();function S0(n,e){return n0(y({rootComponent:n},mO(e)))}function mO(n){return{appProviders:[...xO,...n?.providers??[]],platformProviders:_O}}function gO(){Im.makeCurrent()}function vO(){return new Yr}function yO(){return cx(document),document}var _O=[{provide:Lo,useValue:Dm},{provide:Up,useValue:gO,multi:!0},{provide:Cn,useFactory:yO,deps:[]}];var xO=[{provide:ku,useValue:"root"},{provide:Yr,useFactory:vO,deps:[]},{provide:Mm,useClass:dO,multi:!0,deps:[Cn,ft,Lo]},{provide:Mm,useClass:pO,multi:!0,deps:[Cn]},y0,C0,w0,{provide:ws,useExisting:y0},{provide:cd,useClass:oO,deps:[]},[]];var T0=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}static{this.\u0275fac=function(r){return new(r||n)(ce(Cn))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ce="primary",Dc=Symbol("RouteTitle"),Pm=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Fs(n){return new Pm(n)}function CO(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let o={};for(let i=0;i<r.length;i++){let s=r[i],a=n[i];if(s[0]===":")o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function DO(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Nr(n[t],e[t]))return!1;return!0}function Nr(n,e){let t=n?Vm(n):void 0,r=e?Vm(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let i=0;i<t.length;i++)if(o=t[i],!V0(n[o],e[o]))return!1;return!0}function Vm(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function V0(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((o,i)=>r[i]===o)}else return n===e}function L0(n){return n.length>0?n[n.length-1]:null}function zo(n){return ef(n)?n:$o(n)?it(Promise.resolve(n)):ue(n)}var bO={exact:B0,subset:$0},j0={exact:SO,subset:TO,ignored:()=>!0};function E0(n,e,t){return bO[t.paths](n.root,e.root,t.matrixParams)&&j0[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function SO(n,e){return Nr(n,e)}function B0(n,e,t){if(!Oi(n.segments,e.segments)||!md(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!B0(n.children[r],e.children[r],t))return!1;return!0}function TO(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>V0(n[t],e[t]))}function $0(n,e,t){return H0(n,e,e.segments,t)}function H0(n,e,t,r){if(n.segments.length>t.length){let o=n.segments.slice(0,t.length);return!(!Oi(o,t)||e.hasChildren()||!md(o,t,r))}else if(n.segments.length===t.length){if(!Oi(n.segments,t)||!md(n.segments,t,r))return!1;for(let o in e.children)if(!n.children[o]||!$0(n.children[o],e.children[o],r))return!1;return!0}else{let o=t.slice(0,n.segments.length),i=t.slice(n.segments.length);return!Oi(n.segments,o)||!md(n.segments,o,r)||!n.children[Ce]?!1:H0(n.children[Ce],e,i,r)}}function md(n,e,t){return e.every((r,o)=>j0[t](n[o].parameters,r.parameters))}var lo=class{constructor(e=new ze([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Fs(this.queryParams),this._queryParamMap}toString(){return MO.serialize(this)}},ze=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return gd(this)}},Ni=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Fs(this.parameters),this._parameterMap}toString(){return q0(this)}};function EO(n,e){return Oi(n,e)&&n.every((t,r)=>Nr(t.parameters,e[r].parameters))}function Oi(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function IO(n,e){let t=[];return Object.entries(n.children).forEach(([r,o])=>{r===Ce&&(t=t.concat(e(o,r)))}),Object.entries(n.children).forEach(([r,o])=>{r!==Ce&&(t=t.concat(e(o,r)))}),t}var bc=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>new Ps,providedIn:"root"})}}return n})(),Ps=class{parse(e){let t=new jm(e);return new lo(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${lc(e.root,!0)}`,r=OO(e.queryParams),o=typeof e.fragment=="string"?`#${AO(e.fragment)}`:"";return`${t}${r}${o}`}},MO=new Ps;function gd(n){return n.segments.map(e=>q0(e)).join("/")}function lc(n,e){if(!n.hasChildren())return gd(n);if(e){let t=n.children[Ce]?lc(n.children[Ce],!1):"",r=[];return Object.entries(n.children).forEach(([o,i])=>{o!==Ce&&r.push(`${o}:${lc(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=IO(n,(r,o)=>o===Ce?[lc(n.children[Ce],!1)]:[`${o}:${lc(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[Ce]!=null?`${gd(n)}/${t[0]}`:`${gd(n)}/(${t.join("//")})`}}function U0(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function fd(n){return U0(n).replace(/%3B/gi,";")}function AO(n){return encodeURI(n)}function Lm(n){return U0(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vd(n){return decodeURIComponent(n)}function I0(n){return vd(n.replace(/\+/g,"%20"))}function q0(n){return`${Lm(n.path)}${NO(n.parameters)}`}function NO(n){return Object.entries(n).map(([e,t])=>`;${Lm(e)}=${Lm(t)}`).join("")}function OO(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(o=>`${fd(t)}=${fd(o)}`).join("&"):`${fd(t)}=${fd(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var kO=/^[^\/()?;#]+/;function Om(n){let e=n.match(kO);return e?e[0]:""}var RO=/^[^\/()?;=#]+/;function FO(n){let e=n.match(RO);return e?e[0]:""}var PO=/^[^=?&#]+/;function VO(n){let e=n.match(PO);return e?e[0]:""}var LO=/^[^&#]+/;function jO(n){let e=n.match(LO);return e?e[0]:""}var jm=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ze([],{}):new ze([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Ce]=new ze(e,t)),r}parseSegment(){let e=Om(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new ie(4009,!1);return this.capture(e),new Ni(vd(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=FO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let o=Om(this.remaining);o&&(r=o,this.capture(r))}e[vd(t)]=vd(r)}parseQueryParam(e){let t=VO(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let s=jO(this.remaining);s&&(r=s,this.capture(r))}let o=I0(t),i=I0(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Om(this.remaining),o=this.remaining[r.length];if(o!=="/"&&o!==")"&&o!==";")throw new ie(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=Ce);let s=this.parseChildren();t[i]=Object.keys(s).length===1?s[Ce]:new ze([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new ie(4011,!1)}};function W0(n){return n.segments.length>0?new ze([],{[Ce]:n}):n}function z0(n){let e={};for(let[r,o]of Object.entries(n.children)){let i=z0(o);if(r===Ce&&i.segments.length===0&&i.hasChildren())for(let[s,a]of Object.entries(i.children))e[s]=a;else(i.segments.length>0||i.hasChildren())&&(e[r]=i)}let t=new ze(n.segments,e);return BO(t)}function BO(n){if(n.numberOfChildren===1&&n.children[Ce]){let e=n.children[Ce];return new ze(n.segments.concat(e.segments),e.children)}return n}function ki(n){return n instanceof lo}function $O(n,e,t=null,r=null){let o=G0(n);return Z0(o,e,t,r)}function G0(n){let e;function t(i){let s={};for(let c of i.children){let l=t(c);s[c.outlet]=l}let a=new ze(i.url,s);return i===n&&(e=a),a}let r=t(n.root),o=W0(r);return e??o}function Z0(n,e,t,r){let o=n;for(;o.parent;)o=o.parent;if(e.length===0)return km(o,o,o,t,r);let i=HO(e);if(i.toRoot())return km(o,o,new ze([],{}),t,r);let s=UO(i,o,n),a=s.processChildren?hc(s.segmentGroup,s.index,i.commands):Q0(s.segmentGroup,s.index,i.commands);return km(o,s.segmentGroup,a,t,r)}function yd(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function mc(n){return typeof n=="object"&&n!=null&&n.outlets}function km(n,e,t,r,o){let i={};r&&Object.entries(r).forEach(([c,l])=>{i[c]=Array.isArray(l)?l.map(u=>`${u}`):`${l}`});let s;n===e?s=t:s=Y0(n,e,t);let a=W0(z0(s));return new lo(a,i,o)}function Y0(n,e,t){let r={};return Object.entries(n.children).forEach(([o,i])=>{i===e?r[o]=t:r[o]=Y0(i,e,t)}),new ze(n.segments,r)}var _d=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&yd(r[0]))throw new ie(4003,!1);let o=r.find(mc);if(o&&o!==L0(r))throw new ie(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function HO(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new _d(!0,0,n);let e=0,t=!1,r=n.reduce((o,i,s)=>{if(typeof i=="object"&&i!=null){if(i.outlets){let a={};return Object.entries(i.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return typeof i!="string"?[...o,i]:s===0?(i.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&o.push(a))}),o):[...o,i]},[]);return new _d(t,e,r)}var Os=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function UO(n,e,t){if(n.isAbsolute)return new Os(e,!0,0);if(!t)return new Os(e,!1,NaN);if(t.parent===null)return new Os(t,!0,0);let r=yd(n.commands[0])?0:1,o=t.segments.length-1+r;return qO(t,o,n.numberOfDoubleDots)}function qO(n,e,t){let r=n,o=e,i=t;for(;i>o;){if(i-=o,r=r.parent,!r)throw new ie(4005,!1);o=r.segments.length}return new Os(r,!1,o-i)}function WO(n){return mc(n[0])?n[0].outlets:{[Ce]:n}}function Q0(n,e,t){if(n??=new ze([],{}),n.segments.length===0&&n.hasChildren())return hc(n,e,t);let r=zO(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let i=new ze(n.segments.slice(0,r.pathIndex),{});return i.children[Ce]=new ze(n.segments.slice(r.pathIndex),n.children),hc(i,0,o)}else return r.match&&o.length===0?new ze(n.segments,{}):r.match&&!n.hasChildren()?Bm(n,e,t):r.match?hc(n,0,o):Bm(n,e,t)}function hc(n,e,t){if(t.length===0)return new ze(n.segments,{});{let r=WO(t),o={};if(Object.keys(r).some(i=>i!==Ce)&&n.children[Ce]&&n.numberOfChildren===1&&n.children[Ce].segments.length===0){let i=hc(n.children[Ce],e,t);return new ze(n.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[i]=Q0(n.children[i],e,s))}),Object.entries(n.children).forEach(([i,s])=>{r[i]===void 0&&(o[i]=s)}),new ze(n.segments,o)}}function zO(n,e,t){let r=0,o=e,i={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return i;let s=n.segments[o],a=t[r];if(mc(a))break;let c=`${a}`,l=r<t.length-1?t[r+1]:null;if(o>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!A0(c,l,s))return i;r+=2}else{if(!A0(c,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}function Bm(n,e,t){let r=n.segments.slice(0,e),o=0;for(;o<t.length;){let i=t[o];if(mc(i)){let c=GO(i.outlets);return new ze(r,c)}if(o===0&&yd(t[0])){let c=n.segments[e];r.push(new Ni(c.path,M0(t[0]))),o++;continue}let s=mc(i)?i.outlets[Ce]:`${i}`,a=o<t.length-1?t[o+1]:null;s&&a&&yd(a)?(r.push(new Ni(s,M0(a))),o+=2):(r.push(new Ni(s,{})),o++)}return new ze(r,{})}function GO(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=Bm(new ze([],{}),0,r))}),e}function M0(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function A0(n,e,t){return n==t.path&&Nr(e,t.parameters)}var fc="imperative",Pt=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Pt||{}),qn=class{constructor(e,t){this.id=e,this.url=t}},Vs=class extends qn{constructor(e,t,r="imperative",o=null){super(e,t),this.type=Pt.NavigationStart,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Or=class extends qn{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=Pt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},An=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(An||{}),xd=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(xd||{}),co=class extends qn{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=Pt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},qo=class extends qn{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=Pt.NavigationSkipped}},gc=class extends qn{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=Pt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},wd=class extends qn{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=Pt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$m=class extends qn{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=Pt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hm=class extends qn{constructor(e,t,r,o,i){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i,this.type=Pt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Um=class extends qn{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=Pt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qm=class extends qn{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=Pt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wm=class{constructor(e){this.route=e,this.type=Pt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},zm=class{constructor(e){this.route=e,this.type=Pt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Gm=class{constructor(e){this.snapshot=e,this.type=Pt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zm=class{constructor(e){this.snapshot=e,this.type=Pt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ym=class{constructor(e){this.snapshot=e,this.type=Pt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qm=class{constructor(e){this.snapshot=e,this.type=Pt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Cd=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=Pt.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},vc=class{},Ls=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function ZO(n,e){return n.providers&&!n._injector&&(n._injector=Ju(n.providers,e,`Route: ${n.path}`)),n._injector??e}function lr(n){return n.outlet||Ce}function YO(n,e){let t=n.filter(r=>lr(r)===e);return t.push(...n.filter(r=>lr(r)!==e)),t}function Sc(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var Xm=class{get injector(){return Sc(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Tc(this.rootInjector),this.attachRef=null}},Tc=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new Xm(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(ce(In))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Dd=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Km(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=Km(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Jm(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return Jm(e,this._root).map(t=>t.value)}};function Km(n,e){if(n===e.value)return e;for(let t of e.children){let r=Km(n,t);if(r)return r}return null}function Jm(n,e){if(n===e.value)return[e];for(let t of e.children){let r=Jm(n,t);if(r.length)return r.unshift(e),r}return[]}var Mn=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Ns(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var bd=class extends Dd{constructor(e,t){super(e),this.snapshot=t,cg(this,e)}toString(){return this.snapshot.toString()}};function X0(n){let e=QO(n),t=new je([new Ni("",{})]),r=new je({}),o=new je({}),i=new je({}),s=new je(""),a=new Wo(t,r,i,s,o,Ce,n,e.root);return a.snapshot=e.root,new bd(new Mn(a,[]),e)}function QO(n){let e={},t={},r={},o="",i=new ks([],e,r,o,t,Ce,n,null,{});return new Td("",new Mn(i,[]))}var Wo=class{constructor(e,t,r,o,i,s,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ae(l=>l[Dc]))??ue(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ae(e=>Fs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ae(e=>Fs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Sd(n,e,t="emptyOnly"){let r,{routeConfig:o}=n;return e!==null&&(t==="always"||o?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:y(y({},e.params),n.params),data:y(y({},e.data),n.data),resolve:y(y(y(y({},n.data),e.data),o?.data),n._resolvedData)}:r={params:y({},n.params),data:y({},n.data),resolve:y(y({},n.data),n._resolvedData??{})},o&&J0(o)&&(r.resolve[Dc]=o.title),r}var ks=class{get title(){return this.data?.[Dc]}constructor(e,t,r,o,i,s,a,c,l){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Fs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Fs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},Td=class extends Dd{constructor(e,t){super(t),this.url=e,cg(this,t)}toString(){return K0(this._root)}};function cg(n,e){e.value._routerState=n,e.children.forEach(t=>cg(n,t))}function K0(n){let e=n.children.length>0?` { ${n.children.map(K0).join(", ")} } `:"";return`${n.value}${e}`}function Rm(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Nr(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Nr(e.params,t.params)||n.paramsSubject.next(t.params),DO(e.url,t.url)||n.urlSubject.next(t.url),Nr(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function eg(n,e){let t=Nr(n.params,e.params)&&EO(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||eg(n.parent,e.parent))}function J0(n){return typeof n.title=="string"||n.title===null}var lg=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=Ce,this.activateEvents=new Mt,this.deactivateEvents=new Mt,this.attachEvents=new Mt,this.detachEvents=new Mt,this.parentContexts=F(Tc),this.location=F(Es),this.changeDetector=F(Ho),this.inputBinder=F(Ad,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:o}=t.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new ie(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new ie(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new ie(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new ie(4013,!1);this._activatedRoute=t;let o=this.location,s=t.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new tg(t,a,o.injector);this.activated=o.createComponent(s,{index:o.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Bt({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Si]})}}return n})(),tg=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Wo?this.route:e===Tc?this.childContexts:this.parent.get(e,t)}},Ad=new pe(""),N0=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,o=It([r.queryParams,r.params,r.data]).pipe(ht(([i,s,a],c)=>(a=y(y(y({},i),s),a),c===0?ue(a):Promise.resolve(a)))).subscribe(i=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let s=r0(r.component);if(!s){this.unsubscribeFromRouteData(t);return}for(let{templateName:a}of s.inputs)t.activatedComponentRef.setInput(a,i[a])});this.outletDataSubscriptions.set(t,o)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})();function XO(n,e,t){let r=yc(n,e._root,t?t._root:void 0);return new bd(r,e)}function yc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let o=KO(n,e,t);return new Mn(r,o)}else{if(n.shouldAttach(e.value)){let i=n.retrieve(e.value);if(i!==null){let s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>yc(n,a)),s}}let r=JO(e.value),o=e.children.map(i=>yc(n,i));return new Mn(r,o)}}function KO(n,e,t){return e.children.map(r=>{for(let o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return yc(n,r,o);return yc(n,r)})}function JO(n){return new Wo(new je(n.url),new je(n.params),new je(n.queryParams),new je(n.fragment),new je(n.data),n.outlet,n.component,n)}var _c=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},ew="ngNavigationCancelingError";function Ed(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=ki(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=tw(!1,An.Redirect);return o.url=t,o.navigationBehaviorOptions=r,o}function tw(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[ew]=!0,t.cancellationCode=e,t}function ek(n){return nw(n)&&ki(n.url)}function nw(n){return!!n&&n[ew]}var tk=(n,e,t,r)=>ae(o=>(new ng(e,o.targetRouterState,o.currentRouterState,t,r).activate(n),o)),ng=class{constructor(e,t,r,o,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Rm(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let o=Ns(t);e.children.forEach(i=>{let s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,t,r){let o=e.value,i=t?t.value:null;if(o===i)if(o.component){let s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,t,s.children)}else this.deactivateChildRoutes(e,t,r);else i&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=Ns(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){let s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,i=Ns(e);for(let s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let o=Ns(t);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new Qm(i.value.snapshot))}),e.children.length&&this.forwardEvent(new Zm(e.value.snapshot))}activateRoutes(e,t,r){let o=e.value,i=t?t.value:null;if(Rm(o),o===i)if(o.component){let s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,s.children)}else this.activateChildRoutes(e,t,r);else if(o.component){let s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Rm(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Id=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Rs=class{constructor(e,t){this.component=e,this.route=t}};function nk(n,e,t){let r=n._root,o=e?e._root:null;return uc(r,o,t,[r.value])}function rk(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Bs(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!Qy(n)?n:e.get(n):r}function uc(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=Ns(e);return n.children.forEach(s=>{ok(s,i[s.value.outlet],t,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>pc(a,t.getContext(s),o)),o}function ok(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){let i=n.value,s=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){let c=ik(s,i,i.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new Id(r)):(i.data=s.data,i._resolvedData=s._resolvedData),i.component?uc(n,e,a?a.children:null,r,o):uc(n,e,t,r,o),c&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new Rs(a.outlet.component,s))}else s&&pc(e,a,o),o.canActivateChecks.push(new Id(r)),i.component?uc(n,null,a?a.children:null,r,o):uc(n,null,t,r,o);return o}function ik(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Oi(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Oi(n.url,e.url)||!Nr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!eg(n,e)||!Nr(n.queryParams,e.queryParams);case"paramsChange":default:return!eg(n,e)}}function pc(n,e,t){let r=Ns(n),o=n.value;Object.entries(r).forEach(([i,s])=>{o.component?e?pc(s,e.children.getContext(i),t):pc(s,null,t):pc(s,e,t)}),o.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Rs(e.outlet.component,o)):t.canDeactivateChecks.push(new Rs(null,o)):t.canDeactivateChecks.push(new Rs(null,o))}function Ec(n){return typeof n=="function"}function sk(n){return typeof n=="boolean"}function ak(n){return n&&Ec(n.canLoad)}function ck(n){return n&&Ec(n.canActivate)}function lk(n){return n&&Ec(n.canActivateChild)}function uk(n){return n&&Ec(n.canDeactivate)}function dk(n){return n&&Ec(n.canMatch)}function rw(n){return n instanceof Gr||n?.name==="EmptyError"}var pd=Symbol("INITIAL_VALUE");function js(){return ht(n=>It(n.map(e=>e.pipe(Zr(1),af(pd)))).pipe(ae(e=>{for(let t of e)if(t!==!0){if(t===pd)return pd;if(t===!1||hk(t))return t}return!0}),rn(e=>e!==pd),Zr(1)))}function hk(n){return ki(n)||n instanceof _c}function fk(n,e){return _t(t=>{let{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:i,canDeactivateChecks:s}}=t;return s.length===0&&i.length===0?ue(O(y({},t),{guardsResult:!0})):pk(s,r,o,n).pipe(_t(a=>a&&sk(a)?mk(r,i,n,e):ue(a)),ae(a=>O(y({},t),{guardsResult:a})))})}function pk(n,e,t,r){return it(n).pipe(_t(o=>xk(o.component,o.route,t,e,r)),xr(o=>o!==!0,!0))}function mk(n,e,t,r){return it(e).pipe(gi(o=>os(vk(o.route.parent,r),gk(o.route,r),_k(n,o.path,t),yk(n,o.route,t))),xr(o=>o!==!0,!0))}function gk(n,e){return n!==null&&e&&e(new Ym(n)),ue(!0)}function vk(n,e){return n!==null&&e&&e(new Gm(n)),ue(!0)}function yk(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ue(!0);let o=r.map(i=>ql(()=>{let s=Sc(e)??t,a=Bs(i,s),c=ck(a)?a.canActivate(e,n):Ir(s,()=>a(e,n));return zo(c).pipe(xr())}));return ue(o).pipe(js())}function _k(n,e,t){let r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(s=>rk(s)).filter(s=>s!==null).map(s=>ql(()=>{let a=s.guards.map(c=>{let l=Sc(s.node)??t,u=Bs(c,l),d=lk(u)?u.canActivateChild(r,n):Ir(l,()=>u(r,n));return zo(d).pipe(xr())});return ue(a).pipe(js())}));return ue(i).pipe(js())}function xk(n,e,t,r,o){let i=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!i||i.length===0)return ue(!0);let s=i.map(a=>{let c=Sc(e)??o,l=Bs(a,c),u=uk(l)?l.canDeactivate(n,e,t,r):Ir(c,()=>l(n,e,t,r));return zo(u).pipe(xr())});return ue(s).pipe(js())}function wk(n,e,t,r){let o=e.canLoad;if(o===void 0||o.length===0)return ue(!0);let i=o.map(s=>{let a=Bs(s,n),c=ak(a)?a.canLoad(e,t):Ir(n,()=>a(e,t));return zo(c)});return ue(i).pipe(js(),ow(r))}function ow(n){return Qh(Ge(e=>{if(typeof e!="boolean")throw Ed(n,e)}),ae(e=>e===!0))}function Ck(n,e,t,r){let o=e.canMatch;if(!o||o.length===0)return ue(!0);let i=o.map(s=>{let a=Bs(s,n),c=dk(a)?a.canMatch(e,t):Ir(n,()=>a(e,t));return zo(c)});return ue(i).pipe(js(),ow(r))}var xc=class{constructor(e){this.segmentGroup=e||null}},wc=class extends Error{constructor(e){super(),this.urlTree=e}};function As(n){return ns(new xc(n))}function Dk(n){return ns(new ie(4e3,!1))}function bk(n){return ns(tw(!1,An.GuardRejected))}var rg=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),o.numberOfChildren===0)return ue(r);if(o.numberOfChildren>1||!o.children[Ce])return Dk(`${e.redirectTo}`);o=o.children[Ce]}}applyRedirectCommands(e,t,r,o,i){if(typeof t!="string"){let a=t,{queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,params:h,data:p,title:m}=o,g=Ir(i,()=>a({params:h,data:p,queryParams:c,fragment:l,routeConfig:u,url:d,outlet:f,title:m}));if(g instanceof lo)throw new wc(g);t=g}let s=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new wc(s);return s}applyRedirectCreateUrlTree(e,t,r,o){let i=this.createSegmentGroup(e,t.root,r,o);return new lo(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([o,i])=>{if(typeof i=="string"&&i[0]===":"){let a=i.substring(1);r[o]=t[a]}else r[o]=i}),r}createSegmentGroup(e,t,r,o){let i=this.createSegments(e,t.segments,r,o),s={};return Object.entries(t.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,o)}),new ze(i,s)}createSegments(e,t,r,o){return t.map(i=>i.path[0]===":"?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,t,r){let o=r[t.path.substring(1)];if(!o)throw new ie(4001,!1);return o}findOrReturn(e,t){let r=0;for(let o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}},og={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Sk(n,e,t,r,o){let i=iw(n,e,t);return i.matched?(r=ZO(e,r),Ck(r,e,t,o).pipe(ae(s=>s===!0?i:y({},og)))):ue(i)}function iw(n,e,t){if(e.path==="**")return Tk(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?y({},og):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let o=(e.matcher||CO)(t,n,e);if(!o)return y({},og);let i={};Object.entries(o.posParams??{}).forEach(([a,c])=>{i[a]=c.path});let s=o.consumed.length>0?y(y({},i),o.consumed[o.consumed.length-1].parameters):i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function Tk(n){return{matched:!0,parameters:n.length>0?L0(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function O0(n,e,t,r){return t.length>0&&Mk(n,t,r)?{segmentGroup:new ze(e,Ik(r,new ze(t,n.children))),slicedSegments:[]}:t.length===0&&Ak(n,t,r)?{segmentGroup:new ze(n.segments,Ek(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new ze(n.segments,n.children),slicedSegments:t}}function Ek(n,e,t,r){let o={};for(let i of t)if(Nd(n,e,i)&&!r[lr(i)]){let s=new ze([],{});o[lr(i)]=s}return y(y({},r),o)}function Ik(n,e){let t={};t[Ce]=e;for(let r of n)if(r.path===""&&lr(r)!==Ce){let o=new ze([],{});t[lr(r)]=o}return t}function Mk(n,e,t){return t.some(r=>Nd(n,e,r)&&lr(r)!==Ce)}function Ak(n,e,t){return t.some(r=>Nd(n,e,r))}function Nd(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function Nk(n,e,t){return e.length===0&&!n.children[t]}var ig=class{};function Ok(n,e,t,r,o,i,s="emptyOnly"){return new sg(n,e,t,r,o,s,i).recognize()}var kk=31,sg=class{constructor(e,t,r,o,i,s,a){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new rg(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new ie(4002,`'${e.segmentGroup}'`)}recognize(){let e=O0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ae(({children:t,rootSnapshot:r})=>{let o=new Mn(r,t),i=new Td("",o),s=$O(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,i.url=this.urlSerializer.serialize(s),{state:i,tree:s}}))}match(e){let t=new ks([],Object.freeze({}),Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Ce,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,Ce,t).pipe(ae(r=>({children:r,rootSnapshot:t})),Co(r=>{if(r instanceof wc)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof xc?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,o,i){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,i):this.processSegment(e,t,r,r.segments,o,!0,i).pipe(ae(s=>s instanceof Mn?[s]:[]))}processChildren(e,t,r,o){let i=[];for(let s of Object.keys(r.children))s==="primary"?i.unshift(s):i.push(s);return it(i).pipe(gi(s=>{let a=r.children[s],c=YO(t,s);return this.processSegmentGroup(e,c,a,s,o)}),sf((s,a)=>(s.push(...a),s)),Do(null),of(),_t(s=>{if(s===null)return As(r);let a=sw(s);return Rk(a),ue(a)}))}processSegment(e,t,r,o,i,s,a){return it(t).pipe(gi(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,r,o,i,s,a).pipe(Co(l=>{if(l instanceof xc)return ue(null);throw l}))),xr(c=>!!c),Co(c=>{if(rw(c))return Nk(r,o,i)?ue(new ig):As(r);throw c}))}processSegmentAgainstRoute(e,t,r,o,i,s,a,c){return lr(r)!==s&&(s===Ce||!Nd(o,i,r))?As(o):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,o,r,i,s,c):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,o,t,r,i,s,c):As(o)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,i,s,a){let{matched:c,parameters:l,consumedSegments:u,positionalParamSegments:d,remainingSegments:f}=iw(t,o,i);if(!c)return As(t);typeof o.redirectTo=="string"&&o.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>kk&&(this.allowRedirects=!1));let h=new ks(i,l,Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,k0(o),lr(o),o.component??o._loadedComponent??null,o,R0(o)),p=Sd(h,a,this.paramsInheritanceStrategy);h.params=Object.freeze(p.params),h.data=Object.freeze(p.data);let m=this.applyRedirects.applyRedirectCommands(u,o.redirectTo,d,h,e);return this.applyRedirects.lineralizeSegments(o,m).pipe(_t(g=>this.processSegment(e,r,t,g.concat(f),s,!1,a)))}matchSegmentAgainstRoute(e,t,r,o,i,s){let a=Sk(t,r,o,e,this.urlSerializer);return r.path==="**"&&(t.children={}),a.pipe(ht(c=>c.matched?(e=r._injector??e,this.getChildConfig(e,r,o).pipe(ht(({routes:l})=>{let u=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:h}=c,p=new ks(f,d,Object.freeze(y({},this.urlTree.queryParams)),this.urlTree.fragment,k0(r),lr(r),r.component??r._loadedComponent??null,r,R0(r)),m=Sd(p,s,this.paramsInheritanceStrategy);p.params=Object.freeze(m.params),p.data=Object.freeze(m.data);let{segmentGroup:g,slicedSegments:v}=O0(t,f,h,l);if(v.length===0&&g.hasChildren())return this.processChildren(u,l,g,p).pipe(ae(I=>new Mn(p,I)));if(l.length===0&&v.length===0)return ue(new Mn(p,[]));let C=lr(r)===i;return this.processSegment(u,l,g,v,C?Ce:i,!0,p).pipe(ae(I=>new Mn(p,I instanceof Mn?[I]:[])))}))):As(t)))}getChildConfig(e,t,r){return t.children?ue({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?ue({routes:t._loadedRoutes,injector:t._loadedInjector}):wk(e,t,r,this.urlSerializer).pipe(_t(o=>o?this.configLoader.loadChildren(e,t).pipe(Ge(i=>{t._loadedRoutes=i.routes,t._loadedInjector=i.injector})):bk(t))):ue({routes:[],injector:e})}};function Rk(n){n.sort((e,t)=>e.value.outlet===Ce?-1:t.value.outlet===Ce?1:e.value.outlet.localeCompare(t.value.outlet))}function Fk(n){let e=n.value.routeConfig;return e&&e.path===""}function sw(n){let e=[],t=new Set;for(let r of n){if(!Fk(r)){e.push(r);continue}let o=e.find(i=>r.value.routeConfig===i.value.routeConfig);o!==void 0?(o.children.push(...r.children),t.add(o)):e.push(r)}for(let r of t){let o=sw(r.children);e.push(new Mn(r.value,o))}return e.filter(r=>!t.has(r))}function k0(n){return n.data||{}}function R0(n){return n.resolve||{}}function Pk(n,e,t,r,o,i){return _t(s=>Ok(n,e,t,r,s.extractedUrl,o,i).pipe(ae(({state:a,tree:c})=>O(y({},s),{targetSnapshot:a,urlAfterRedirects:c}))))}function Vk(n,e){return _t(t=>{let{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return ue(t);let i=new Set(o.map(c=>c.route)),s=new Set;for(let c of i)if(!s.has(c))for(let l of aw(c))s.add(l);let a=0;return it(s).pipe(gi(c=>i.has(c)?Lk(c,r,n,e):(c.data=Sd(c,c.parent,n).resolve,ue(void 0))),Ge(()=>a++),is(1),_t(c=>a===s.size?ue(t):En))})}function aw(n){let e=n.children.map(t=>aw(t)).flat();return[n,...e]}function Lk(n,e,t,r){let o=n.routeConfig,i=n._resolve;return o?.title!==void 0&&!J0(o)&&(i[Dc]=o.title),jk(i,n,e,r).pipe(ae(s=>(n._resolvedData=s,n.data=Sd(n,n.parent,t).resolve,null)))}function jk(n,e,t,r){let o=Vm(n);if(o.length===0)return ue({});let i={};return it(o).pipe(_t(s=>Bk(n[s],e,t,r).pipe(xr(),Ge(a=>{if(a instanceof _c)throw Ed(new Ps,a);i[s]=a}))),is(1),rf(i),Co(s=>rw(s)?En:ns(s)))}function Bk(n,e,t,r){let o=Sc(e)??r,i=Bs(n,o),s=i.resolve?i.resolve(e,t):Ir(o,()=>i(e,t));return zo(s)}function Fm(n){return ht(e=>{let t=n(e);return t?it(t).pipe(ae(()=>e)):ue(e)})}var cw=(()=>{class n{buildTitle(t){let r,o=t.root;for(;o!==void 0;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===Ce);return r}getResolvedTitleForRoute(t){return t.data[Dc]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>F($k),providedIn:"root"})}}return n})(),$k=(()=>{class n extends cw{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(ce(T0))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ic=new pe("",{providedIn:"root",factory:()=>({})}),Hk=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ze({type:n,selectors:[["ng-component"]],standalone:!0,features:[Ye],decls:1,vars:0,template:function(r,o){r&1&&pt(0,"router-outlet")},dependencies:[lg],encapsulation:2})}}return n})();function ug(n){let e=n.children&&n.children.map(ug),t=e?O(y({},n),{children:e}):y({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Ce&&(t.component=Hk),t}var Cc=new pe(""),dg=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=F(id)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ue(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=zo(t.loadComponent()).pipe(ae(lw),Ge(i=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=i}),La(()=>{this.componentLoaders.delete(t)})),o=new Ji(r,()=>new yt).pipe(Ki());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ue({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=Uk(r,this.compiler,t,this.onLoadEndListener).pipe(La(()=>{this.childrenLoaders.delete(r)})),s=new Ji(i,()=>new yt).pipe(Ki());return this.childrenLoaders.set(r,s),s}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Uk(n,e,t,r){return zo(n.loadChildren()).pipe(ae(lw),_t(o=>o instanceof Ya||Array.isArray(o)?ue(o):it(e.compileModuleAsync(o))),ae(o=>{r&&r(n);let i,s,a=!1;return Array.isArray(o)?(s=o,a=!0):(i=o.create(t).injector,s=i.get(Cc,[],{optional:!0,self:!0}).flat()),{routes:s.map(ug),injector:i}}))}function qk(n){return n&&typeof n=="object"&&"default"in n}function lw(n){return qk(n)?n.default:n}var hg=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>F(Wk),providedIn:"root"})}}return n})(),Wk=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),uw=new pe(""),dw=new pe("");function zk(n,e,t){let r=n.get(dw),o=n.get(Cn);return n.get(ft).runOutsideAngular(()=>{if(!o.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(l=>setTimeout(l));let i,s=new Promise(l=>{i=l}),a=o.startViewTransition(()=>(i(),Gk(n))),{onViewTransitionCreated:c}=r;return c&&Ir(n,()=>c({transition:a,from:e,to:t})),s})}function Gk(n){return new Promise(e=>{cm({read:()=>setTimeout(e)},{injector:n})})}var Zk=new pe(""),fg=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new yt,this.transitionAbortSubject=new yt,this.configLoader=F(dg),this.environmentInjector=F(In),this.urlSerializer=F(bc),this.rootContexts=F(Tc),this.location=F(Ms),this.inputBindingEnabled=F(Ad,{optional:!0})!==null,this.titleStrategy=F(cw),this.options=F(Ic,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=F(hg),this.createViewTransition=F(uw,{optional:!0}),this.navigationErrorHandler=F(Zk,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ue(void 0),this.rootComponentType=null;let t=o=>this.events.next(new Wm(o)),r=o=>this.events.next(new zm(o));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(O(y(y({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,o){return this.transitions=new je({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:fc,restoredState:null,currentSnapshot:o.snapshot,targetSnapshot:null,currentRouterState:o,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(rn(i=>i.id!==0),ae(i=>O(y({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),ht(i=>{let s=!1,a=!1;return ue(i).pipe(ht(c=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",An.SupersededByNewNavigation),En;this.currentTransition=i,this.currentNavigation={id:c.id,initialUrl:c.rawUrl,extractedUrl:c.extractedUrl,targetBrowserUrl:typeof c.extras.browserUrl=="string"?this.urlSerializer.parse(c.extras.browserUrl):c.extras.browserUrl,trigger:c.source,extras:c.extras,previousNavigation:this.lastSuccessfulNavigation?O(y({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let l=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=c.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!l&&u!=="reload"){let d="";return this.events.next(new qo(c.id,this.urlSerializer.serialize(c.rawUrl),d,xd.IgnoredSameUrlNavigation)),c.resolve(!1),En}if(this.urlHandlingStrategy.shouldProcessUrl(c.rawUrl))return ue(c).pipe(ht(d=>{let f=this.transitions?.getValue();return this.events.next(new Vs(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),f!==this.transitions?.getValue()?En:Promise.resolve(d)}),Pk(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),Ge(d=>{i.targetSnapshot=d.targetSnapshot,i.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation=O(y({},this.currentNavigation),{finalUrl:d.urlAfterRedirects});let f=new wd(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(l&&this.urlHandlingStrategy.shouldProcessUrl(c.currentRawUrl)){let{id:d,extractedUrl:f,source:h,restoredState:p,extras:m}=c,g=new Vs(d,this.urlSerializer.serialize(f),h,p);this.events.next(g);let v=X0(this.rootComponentType).snapshot;return this.currentTransition=i=O(y({},c),{targetSnapshot:v,urlAfterRedirects:f,extras:O(y({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,ue(i)}else{let d="";return this.events.next(new qo(c.id,this.urlSerializer.serialize(c.extractedUrl),d,xd.IgnoredByUrlHandlingStrategy)),c.resolve(!1),En}}),Ge(c=>{let l=new $m(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(l)}),ae(c=>(this.currentTransition=i=O(y({},c),{guards:nk(c.targetSnapshot,c.currentSnapshot,this.rootContexts)}),i)),fk(this.environmentInjector,c=>this.events.next(c)),Ge(c=>{if(i.guardsResult=c.guardsResult,c.guardsResult&&typeof c.guardsResult!="boolean")throw Ed(this.urlSerializer,c.guardsResult);let l=new Hm(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot,!!c.guardsResult);this.events.next(l)}),rn(c=>c.guardsResult?!0:(this.cancelNavigationTransition(c,"",An.GuardRejected),!1)),Fm(c=>{if(c.guards.canActivateChecks.length)return ue(c).pipe(Ge(l=>{let u=new Um(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}),ht(l=>{let u=!1;return ue(l).pipe(Vk(this.paramsInheritanceStrategy,this.environmentInjector),Ge({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(l,"",An.NoDataFromResolver)}}))}),Ge(l=>{let u=new qm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(u)}))}),Fm(c=>{let l=u=>{let d=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&d.push(this.configLoader.loadComponent(u.routeConfig).pipe(Ge(f=>{u.component=f}),ae(()=>{})));for(let f of u.children)d.push(...l(f));return d};return It(l(c.targetSnapshot.root)).pipe(Do(null),Zr(1))}),Fm(()=>this.afterPreactivation()),ht(()=>{let{currentSnapshot:c,targetSnapshot:l}=i,u=this.createViewTransition?.(this.environmentInjector,c.root,l.root);return u?it(u).pipe(ae(()=>i)):ue(i)}),ae(c=>{let l=XO(t.routeReuseStrategy,c.targetSnapshot,c.currentRouterState);return this.currentTransition=i=O(y({},c),{targetRouterState:l}),this.currentNavigation.targetRouterState=l,i}),Ge(()=>{this.events.next(new vc)}),tk(this.rootContexts,t.routeReuseStrategy,c=>this.events.next(c),this.inputBindingEnabled),Zr(1),Ge({next:c=>{s=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Or(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects))),this.titleStrategy?.updateTitle(c.targetRouterState.snapshot),c.resolve(!0)},complete:()=>{s=!0}}),cf(this.transitionAbortSubject.pipe(Ge(c=>{throw c}))),La(()=>{!s&&!a&&this.cancelNavigationTransition(i,"",An.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation=null,this.currentTransition=null)}),Co(c=>{if(a=!0,nw(c))this.events.next(new co(i.id,this.urlSerializer.serialize(i.extractedUrl),c.message,c.cancellationCode)),ek(c)?this.events.next(new Ls(c.url,c.navigationBehaviorOptions)):i.resolve(!1);else{let l=new gc(i.id,this.urlSerializer.serialize(i.extractedUrl),c,i.targetSnapshot??void 0);try{let u=Ir(this.environmentInjector,()=>this.navigationErrorHandler?.(l));if(u instanceof _c){let{message:d,cancellationCode:f}=Ed(this.urlSerializer,u);this.events.next(new co(i.id,this.urlSerializer.serialize(i.extractedUrl),d,f)),this.events.next(new Ls(u.redirectTo,u.navigationBehaviorOptions))}else{this.events.next(l);let d=t.errorHandler(c);i.resolve(!!d)}}catch(u){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(u)}}return En}))}))}cancelNavigationTransition(t,r,o){let i=new co(t.id,this.urlSerializer.serialize(t.extractedUrl),r,o);this.events.next(i),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Yk(n){return n!==fc}var Qk=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>F(Xk),providedIn:"root"})}}return n})(),ag=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Xk=(()=>{class n extends ag{static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Vo(n)))(o||n)}})()}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),hw=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:()=>F(Kk),providedIn:"root"})}}return n})(),Kk=(()=>{class n extends hw{constructor(){super(...arguments),this.location=F(Ms),this.urlSerializer=F(bc),this.options=F(Ic,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=F(hg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new lo,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=X0(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof Vs)this.stateMemento=this.createStateMemento();else if(t instanceof qo)this.rawUrlTree=r.initialUrl;else if(t instanceof wd){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let o=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??o,r)}}else t instanceof vc?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof co&&(t.code===An.GuardRejected||t.code===An.NoDataFromResolver)?this.restoreHistory(r):t instanceof gc?this.restoreHistory(r,!0):t instanceof Or&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let o=t instanceof lo?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl){let i=this.browserPageId,s=y(y({},r.extras.state),this.generateNgRouterState(r.id,i));this.location.replaceState(o,"",s)}else{let i=y(y({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(o,"",i)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let o=this.browserPageId,i=this.currentPageId-o;i!==0?this.location.historyGo(i):this.currentUrlTree===t.finalUrl&&i===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Vo(n)))(o||n)}})()}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),dc=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(dc||{});function fw(n,e){n.events.pipe(rn(t=>t instanceof Or||t instanceof co||t instanceof gc||t instanceof qo),ae(t=>t instanceof Or||t instanceof qo?dc.COMPLETE:(t instanceof co?t.code===An.Redirect||t.code===An.SupersededByNewNavigation:!1)?dc.REDIRECTING:dc.FAILED),rn(t=>t!==dc.REDIRECTING),Zr(1)).subscribe(()=>{e()})}function Jk(n){throw n}var eR={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},tR={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},uo=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=F(nd),this.stateManager=F(hw),this.options=F(Ic,{optional:!0})||{},this.pendingTasks=F(Ts),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=F(fg),this.urlSerializer=F(bc),this.location=F(Ms),this.urlHandlingStrategy=F(hg),this._events=new yt,this.errorHandler=this.options.errorHandler||Jk,this.navigated=!1,this.routeReuseStrategy=F(Qk),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=F(Cc,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!F(Ad,{optional:!0}),this.eventsSubscription=new ct,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let o=this.navigationTransitions.currentTransition,i=this.navigationTransitions.currentNavigation;if(o!==null&&i!==null){if(this.stateManager.handleRouterEvent(r,i),r instanceof co&&r.code!==An.Redirect&&r.code!==An.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Or)this.navigated=!0;else if(r instanceof Ls){let s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),c=y({browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Yk(o.source)},s);this.scheduleNavigation(a,fc,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}}rR(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortSubject.next(o)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),fc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,o){let i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){let c=y({},o);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(i.state=c)}let a=this.parseUrl(t);this.scheduleNavigation(a,r,s,i)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(ug),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,l=c?this.currentUrlTree.fragment:s,u=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":u=y(y({},this.currentUrlTree.queryParams),i);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=i||null}u!==null&&(u=this.removeEmptyProps(u));let d;try{let f=o?o.snapshot:this.routerState.snapshot.root;d=G0(f)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),d=this.currentUrlTree.root}return Z0(d,t,u,l??null)}navigateByUrl(t,r={skipLocationChange:!1}){let o=ki(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,fc,null,r)}navigate(t,r={skipLocationChange:!1}){return nR(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let o;if(r===!0?o=y({},eR):r===!1?o=y({},tR):o=r,ki(t))return E0(this.currentUrlTree,t,o);let i=this.parseUrl(t);return E0(this.currentUrlTree,i,o)}removeEmptyProps(t){return Object.entries(t).reduce((r,[o,i])=>(i!=null&&(r[o]=i),r),{})}scheduleNavigation(t,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,c,l;s?(a=s.resolve,c=s.reject,l=s.promise):l=new Promise((d,f)=>{a=d,c=f});let u=this.pendingTasks.add();return fw(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:i,resolve:a,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(d=>Promise.reject(d))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function nR(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new ie(4008,!1)}function rR(n){return!(n instanceof vc)&&!(n instanceof Ls)}var pw=(()=>{class n{constructor(t,r,o,i,s,a){this.router=t,this.route=r,this.tabIndexAttribute=o,this.renderer=i,this.el=s,this.locationStrategy=a,this.href=null,this.onChanges=new yt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=c==="a"||c==="area",this.isAnchorElement?this.subscription=t.events.subscribe(l=>{l instanceof Or&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(ki(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,o,i,s){let a=this.urlTree;if(a===null||this.isAnchorElement&&(t!==0||r||o||i||s||typeof this.target=="string"&&this.target!="_self"))return!0;let c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:dx(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let o=this.renderer,i=this.el.nativeElement;r!==null?o.setAttribute(i,t,r):o.removeAttribute(i,t)}get urlTree(){return this.routerLinkInput===null?null:ki(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(Q(uo),Q(Wo),Lp("tabindex"),Q(eo),Q(Mr),Q(so))}}static{this.\u0275dir=Bt({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,o){r&1&&he("click",function(s){return o.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&ed("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ai],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ai],replaceUrl:[2,"replaceUrl","replaceUrl",Ai],routerLink:"routerLink"},standalone:!0,features:[im,Si]})}}return n})();var Md=class{};var oR=(()=>{class n{constructor(t,r,o,i,s){this.router=t,this.injector=o,this.preloadingStrategy=i,this.loader=s}setUpPreloading(){this.subscription=this.router.events.pipe(rn(t=>t instanceof Or),gi(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let o=[];for(let i of r){i.providers&&!i._injector&&(i._injector=Ju(i.providers,t,`Route: ${i.path}`));let s=i._injector??t,a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&i.canLoad===void 0||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return it(o).pipe(rs())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;r.loadChildren&&r.canLoad===void 0?o=this.loader.loadChildren(t,r):o=ue(null);let i=o.pipe(_t(s=>s===null?ue(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,this.processRoutes(s.injector??t,s.routes))));if(r.loadComponent&&!r._loadedComponent){let s=this.loader.loadComponent(r);return it([i,s]).pipe(rs())}else return i})}static{this.\u0275fac=function(r){return new(r||n)(ce(uo),ce(id),ce(In),ce(Md),ce(dg))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),mw=new pe(""),iR=(()=>{class n{constructor(t,r,o,i,s={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=o,this.zone=i,this.options=s,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},s.scrollPositionRestoration||="disabled",s.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Vs?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Or?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof qo&&t.code===xd.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Cd&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Cd(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){bx()}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac})}}return n})();function gw(n,...e){return Tp([{provide:Cc,multi:!0,useValue:n},[],{provide:Wo,useFactory:vw,deps:[uo]},{provide:od,multi:!0,useFactory:yw},e.map(t=>t.\u0275providers)])}function vw(n){return n.routerState.root}function Mc(n,e){return{\u0275kind:n,\u0275providers:e}}function yw(){let n=F(ar);return e=>{let t=n.get(Mi);if(e!==t.components[0])return;let r=n.get(uo),o=n.get(_w);n.get(pg)===1&&r.initialNavigation(),n.get(xw,null,be.Optional)?.setUpPreloading(),n.get(mw,null,be.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var _w=new pe("",{factory:()=>new yt}),pg=new pe("",{providedIn:"root",factory:()=>1});function sR(){return Mc(2,[{provide:pg,useValue:0},{provide:rd,multi:!0,deps:[ar],useFactory:e=>{let t=e.get(d0,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let o=e.get(uo),i=e.get(_w);fw(o,()=>{r(!0)}),e.get(fg).afterPreactivation=()=>(r(!0),i.closed?ue(void 0):i),o.initialNavigation()}))}}])}function aR(){return Mc(3,[{provide:rd,multi:!0,useFactory:()=>{let e=F(uo);return()=>{e.setUpLocationChangeListener()}}},{provide:pg,useValue:2}])}var xw=new pe("");function cR(n){return Mc(0,[{provide:xw,useExisting:oR},{provide:Md,useExisting:n}])}function lR(){return Mc(8,[N0,{provide:Ad,useExisting:N0}])}function uR(n){let e=[{provide:uw,useValue:zk},{provide:dw,useValue:y({skipNextTransition:!!n?.skipInitialTransition},n)}];return Mc(9,e)}var F0=new pe("ROUTER_FORROOT_GUARD"),dR=[Ms,{provide:bc,useClass:Ps},uo,Tc,{provide:Wo,useFactory:vw,deps:[uo]},dg,[]],Od=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[dR,[],{provide:Cc,multi:!0,useValue:t},{provide:F0,useFactory:mR,deps:[[uo,new Ka,new Ou]]},{provide:Ic,useValue:r||{}},r?.useHash?fR():pR(),hR(),r?.preloadingStrategy?cR(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?gR(r):[],r?.bindToComponentInputs?lR().\u0275providers:[],r?.enableViewTransitions?uR().\u0275providers:[],vR()]}}static forChild(t){return{ngModule:n,providers:[{provide:Cc,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(ce(F0,8))}}static{this.\u0275mod=Fo({type:n})}static{this.\u0275inj=Ro({})}}return n})();function hR(){return{provide:mw,useFactory:()=>{let n=F(v0),e=F(ft),t=F(Ic),r=F(fg),o=F(bc);return t.scrollOffset&&n.setOffset(t.scrollOffset),new iR(o,r,n,e,t)}}}function fR(){return{provide:so,useClass:h0}}function pR(){return{provide:so,useClass:Cm}}function mR(n){return"guarded"}function gR(n){return[n.initialNavigation==="disabled"?aR().\u0275providers:[],n.initialNavigation==="enabledBlocking"?sR().\u0275providers:[]]}var P0=new pe("");function vR(){return[{provide:P0,useFactory:yw},{provide:od,multi:!0,useExisting:P0}]}var Cw=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ze({type:n,selectors:[["app-navbar"]],standalone:!0,features:[Ye],decls:22,vars:0,consts:[[1,"navbar","navbar-expand-sm","navbar-dark","bg-dark","justify-content-between"],[1,"navbar-nav"],["routerLink","/",1,"navbar-brand"],[1,"navbar-nav","align-items-center"],[1,"nav-item"],["routerLink","#",1,"nav-link"],[1,"material-icons"],["routerLink","sketch",1,"nav-link"],["hidden","",1,"material-icons"],["routerLink","piano-roll",1,"nav-link"]],template:function(r,o){r&1&&(S(0,"nav",0)(1,"div",1)(2,"a",2),U(3,"Sketched"),T()(),S(4,"ul",3)(5,"li",4)(6,"a",5)(7,"span",6),U(8,"queue_music"),T()()(),S(9,"li",4)(10,"a",7)(11,"span",6),U(12,"add_circle"),T(),S(13,"span",8),U(14,"add_circle_outline"),T()()(),S(15,"li",4)(16,"a",9)(17,"span",6),U(18,"piano"),T()()()(),S(19,"div",1)(20,"a",5),U(21,"new sketch"),T()()())},dependencies:[Od,pw],styles:[".navbar[_ngcontent-%COMP%]   .nav-item[_ngcontent-%COMP%]   .material-icons[_ngcontent-%COMP%]{vertical-align:middle}.navbar[_ngcontent-%COMP%]:first-child, .navbar[_ngcontent-%COMP%]:last-child{padding-left:1rem;padding-right:1rem}.material-icons[_ngcontent-%COMP%]{font-size:24px}"]})}}return n})();var Re=function(n){return n.C="C",n.C_SHARP="C_SHARP",n.D="D",n.D_SHARP="D_SHARP",n.E="E",n.F="F",n.F_SHARP="F_SHARP",n.G="G",n.G_SHARP="G_SHARP",n.A="A",n.A_SHARP="A_SHARP",n.B="B",n}(Re||{});var kr=n=>({position:n.position+12,name:n.name,frequency:n.frequency*2,octave:n.octave+1}),Dw=[{position:0,name:Re.C,frequency:8.176,octave:-1},{position:1,name:Re.C_SHARP,frequency:8.662,octave:-1},{position:2,name:Re.D,frequency:9.177,octave:-1},{position:3,name:Re.D_SHARP,frequency:9.723,octave:-1},{position:4,name:Re.E,frequency:10.301,octave:-1},{position:5,name:Re.F,frequency:10.913,octave:-1},{position:6,name:Re.F_SHARP,frequency:11.562,octave:-1},{position:7,name:Re.G,frequency:12.25,octave:-1},{position:8,name:Re.G_SHARP,frequency:12.978,octave:-1},{position:9,name:Re.A,frequency:13.75,octave:-1},{position:10,name:Re.A_SHARP,frequency:14.568,octave:-1},{position:11,name:Re.B,frequency:15.434,octave:-1}],bw=Dw.map(n=>kr(n)),Sw=bw.map(n=>kr(n)),Tw=Sw.map(n=>kr(n)),Ew=Tw.map(n=>kr(n)),Iw=Ew.map(n=>kr(n)),Mw=Iw.map(n=>kr(n)),Aw=Mw.map(n=>kr(n)),Nw=Aw.map(n=>kr(n)),Ow=Nw.map(n=>kr(n)),yR=Ow.map(n=>kr(n)),Nn=[...Dw,...bw,...Sw,...Tw,...Ew,...Iw,...Mw,...Aw,...Nw,...Ow,...yR];var kd=class{static getNoteFromMIDIPosition(e){let t=Nn[e];if(!t)throw Error(`note not found from midi position: ${e}`);return t}};var Ac="14.7.77";var Dn=Cv(vg());var Gw=()=>new DOMException("","AbortError");var Zw=n=>(e,t,[r,o,i],s)=>{n(e[o],[t,r,i],a=>a[0]===t&&a[1]===r,s)};var Yw=n=>(e,t,r)=>{let o=[];for(let i=0;i<r.numberOfInputs;i+=1)o.push(new Set);n.set(e,{activeInputs:o,outputs:new Set,passiveInputs:new WeakMap,renderer:t})};var Qw=n=>(e,t)=>{n.set(e,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:t})};var Rr=new WeakSet,Fd=new WeakMap,$s=new WeakMap,Pd=new WeakMap,$c=new WeakMap,Hs=new WeakMap,Vd=new WeakMap,Hc=new WeakMap,Uc=new WeakMap,qc=new WeakMap;var Xw={construct(){return Xw}},Kw=n=>{try{let e=new Proxy(n,Xw);new e}catch{return!1}return!0};var Jw=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,yg=(n,e)=>{let t=[],r=n.replace(/^[\s]+/,""),o=r.match(Jw);for(;o!==null;){let i=o[1].slice(1,-1),s=o[0].replace(/([\s]+)?;?$/,"").replace(i,new URL(i,e).toString());t.push(s),r=r.slice(o[0].length).replace(/^[\s]+/,""),o=r.match(Jw)}return[t.join(";"),r]};var eC=n=>{if(n!==void 0&&!Array.isArray(n))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},tC=n=>{if(!Kw(n))throw new TypeError("The given value for processorCtor should be a constructor.");if(n.prototype===null||typeof n.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},nC=(n,e,t,r,o,i,s,a,c,l,u,d,f)=>{let h=0;return(p,m,g={credentials:"omit"})=>{let v=u.get(p);if(v!==void 0&&v.has(m))return Promise.resolve();let C=l.get(p);if(C!==void 0){let D=C.get(m);if(D!==void 0)return D}let I=i(p),A=I.audioWorklet===void 0?o(m).then(([D,w])=>{let[x,b]=yg(D,w),V=`${x};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${b}
})})(window,'_AWGS')`;return t(V)}).then(()=>{let D=f._AWGS.pop();if(D===void 0)throw new SyntaxError;r(I.currentTime,I.sampleRate,()=>D(class{},void 0,(w,x)=>{if(w.trim()==="")throw e();let b=Uc.get(I);if(b!==void 0){if(b.has(w))throw e();tC(x),eC(x.parameterDescriptors),b.set(w,x)}else tC(x),eC(x.parameterDescriptors),Uc.set(I,new Map([[w,x]]))},I.sampleRate,void 0,void 0))}):Promise.all([o(m),Promise.resolve(n(d,d))]).then(([[D,w],x])=>{let b=h+1;h=b;let[V,Y]=yg(D,w),N=`${V};((AudioWorkletProcessor,registerProcessor)=>{${Y}
})(${x?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${x?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${x?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${b}',class extends AudioWorkletProcessor{process(){return !1}})`,K=new Blob([N],{type:"application/javascript; charset=utf-8"}),W=URL.createObjectURL(K);return I.audioWorklet.addModule(W,g).then(()=>{if(a(I))return I;let ne=s(I);return ne.audioWorklet.addModule(W,g).then(()=>ne)}).then(ne=>{if(c===null)throw new SyntaxError;try{new c(ne,`__sac${b}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(W))});return C===void 0?l.set(p,new Map([[m,A]])):C.set(m,A),A.then(()=>{let D=u.get(p);D===void 0?u.set(p,new Set([m])):D.add(m)}).finally(()=>{let D=l.get(p);D!==void 0&&D.delete(m)}),A}};var Ct=(n,e)=>{let t=n.get(e);if(t===void 0)throw new Error("A value with the given key could not be found.");return t};var Go=(n,e)=>{let t=Array.from(n).filter(e);if(t.length>1)throw Error("More than one element was found.");if(t.length===0)throw Error("No element was found.");let[r]=t;return n.delete(r),r};var Ld=(n,e,t,r)=>{let o=Ct(n,e),i=Go(o,s=>s[0]===t&&s[1]===r);return o.size===0&&n.delete(e),i};var Fr=n=>Ct(Vd,n);var ur=n=>{if(Rr.has(n))throw new Error("The AudioNode is already stored.");Rr.add(n),Fr(n).forEach(e=>e(!0))};var jd=n=>"port"in n;var Pr=n=>{if(!Rr.has(n))throw new Error("The AudioNode is not stored.");Rr.delete(n),Fr(n).forEach(e=>e(!1))};var Wc=(n,e)=>{!jd(n)&&e.every(t=>t.size===0)&&Pr(n)};var rC=(n,e,t,r,o,i,s,a,c,l,u,d,f)=>{let h=new WeakMap;return(p,m,g,v,C)=>{let{activeInputs:I,passiveInputs:A}=i(m),{outputs:D}=i(p),w=a(p),x=b=>{let V=c(m),Y=c(p);if(b){let R=Ld(A,p,g,v);n(I,p,R,!1),!C&&!d(p)&&t(Y,V,g,v),f(m)&&ur(m)}else{let R=r(I,p,g,v);e(A,v,R,!1),!C&&!d(p)&&o(Y,V,g,v);let k=s(m);if(k===0)u(m)&&Wc(m,I);else{let X=h.get(m);X!==void 0&&clearTimeout(X),h.set(m,setTimeout(()=>{u(m)&&Wc(m,I)},k*1e3))}}};return l(D,[m,g,v],b=>b[0]===m&&b[1]===g&&b[2]===v,!0)?(w.add(x),u(p)?n(I,p,[g,v,x],!0):e(A,v,[p,g,x],!0),!0):!1}};var oC=n=>(e,t,[r,o,i],s)=>{let a=e.get(r);a===void 0?e.set(r,new Set([[o,t,i]])):n(a,[o,t,i],c=>c[0]===o&&c[1]===t,s)};var iC=n=>(e,t)=>{let r=n(e,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(r).connect(e.destination);let o=()=>{t.removeEventListener("ended",o),t.disconnect(r),r.disconnect()};t.addEventListener("ended",o)};var sC=n=>(e,t)=>{n(e).add(t)};var PR={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},aC=(n,e,t,r,o,i)=>class extends n{constructor(a,c){let l=o(a),u=y(y({},PR),c),d=r(l,u),f=i(l)?e():null;super(a,!1,d,f),this._nativeAnalyserNode=d}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(a){this._nativeAnalyserNode.fftSize=a}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(a){let c=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=a,!(a>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=c,t()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(a){let c=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=a,!(this._nativeAnalyserNode.maxDecibels>a))throw this._nativeAnalyserNode.minDecibels=c,t()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(a){this._nativeAnalyserNode.smoothingTimeConstant=a}getByteFrequencyData(a){this._nativeAnalyserNode.getByteFrequencyData(a)}getByteTimeDomainData(a){this._nativeAnalyserNode.getByteTimeDomainData(a)}getFloatFrequencyData(a){this._nativeAnalyserNode.getFloatFrequencyData(a)}getFloatTimeDomainData(a){this._nativeAnalyserNode.getFloatTimeDomainData(a)}};var Be=(n,e)=>n.context===e;var cC=(n,e,t)=>()=>{let r=new WeakMap,o=(i,s)=>te(void 0,null,function*(){let a=e(i);if(!Be(a,s)){let l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,fftSize:a.fftSize,maxDecibels:a.maxDecibels,minDecibels:a.minDecibels,smoothingTimeConstant:a.smoothingTimeConstant};a=n(s,l)}return r.set(s,a),yield t(i,s,a),a});return{render(i,s){let a=r.get(s);return a!==void 0?Promise.resolve(a):o(i,s)}}};var Us=n=>{try{n.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0};var Wn=()=>new DOMException("","IndexSizeError");var qs=n=>{n.getChannelData=(e=>t=>{try{return e.call(n,t)}catch(r){throw r.code===12?Wn():r}})(n.getChannelData)};var VR={numberOfChannels:1},lC=(n,e,t,r,o,i,s,a)=>{let c=null;return class uC{constructor(u){if(o===null)throw new Error("Missing the native OfflineAudioContext constructor.");let{length:d,numberOfChannels:f,sampleRate:h}=y(y({},VR),u);c===null&&(c=new o(1,1,44100));let p=r!==null&&e(i,i)?new r({length:d,numberOfChannels:f,sampleRate:h}):c.createBuffer(f,d,h);if(p.numberOfChannels===0)throw t();return typeof p.copyFromChannel!="function"?(s(p),qs(p)):e(Us,()=>Us(p))||a(p),n.add(p),p}static[Symbol.hasInstance](u){return u!==null&&typeof u=="object"&&Object.getPrototypeOf(u)===uC.prototype||n.has(u)}}};var mt=-34028234663852886e22,ut=-mt;var dn=n=>Rr.has(n);var LR={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},dC=(n,e,t,r,o,i,s,a)=>class extends n{constructor(l,u){let d=i(l),f=y(y({},LR),u),h=o(d,f),p=s(d),m=p?e():null;super(l,!1,h,m),this._audioBufferSourceNodeRenderer=m,this._isBufferNullified=!1,this._isBufferSet=f.buffer!==null,this._nativeAudioBufferSourceNode=h,this._onended=null,this._playbackRate=t(this,p,h.playbackRate,ut,mt)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(l){if(this._nativeAudioBufferSourceNode.buffer=l,l!==null){if(this._isBufferSet)throw r();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(l){this._nativeAudioBufferSourceNode.loop=l}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(l){this._nativeAudioBufferSourceNode.loopEnd=l}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(l){this._nativeAudioBufferSourceNode.loopStart=l}get onended(){return this._onended}set onended(l){let u=typeof l=="function"?a(this,l):null;this._nativeAudioBufferSourceNode.onended=u;let d=this._nativeAudioBufferSourceNode.onended;this._onended=d!==null&&d===u?l:d}get playbackRate(){return this._playbackRate}start(l=0,u=0,d){if(this._nativeAudioBufferSourceNode.start(l,u,d),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=d===void 0?[l,u]:[l,u,d]),this.context.state!=="closed"){ur(this);let f=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",f),dn(this)&&Pr(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",f)}}stop(l=0){this._nativeAudioBufferSourceNode.stop(l),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=l)}};var hC=(n,e,t,r,o)=>()=>{let i=new WeakMap,s=null,a=null,c=(l,u)=>te(void 0,null,function*(){let d=t(l),f=Be(d,u);if(!f){let h={buffer:d.buffer,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,loop:d.loop,loopEnd:d.loopEnd,loopStart:d.loopStart,playbackRate:d.playbackRate.value};d=e(u,h),s!==null&&d.start(...s),a!==null&&d.stop(a)}return i.set(u,d),f?yield n(u,l.playbackRate,d.playbackRate):yield r(u,l.playbackRate,d.playbackRate),yield o(l,u,d),d});return{set start(l){s=l},set stop(l){a=l},render(l,u){let d=i.get(u);return d!==void 0?Promise.resolve(d):c(l,u)}}};var fC=n=>"playbackRate"in n;var pC=n=>"frequency"in n&&"gain"in n;var mC=n=>"offset"in n;var gC=n=>!("frequency"in n)&&"gain"in n;var vC=n=>"detune"in n&&"frequency"in n;var yC=n=>"pan"in n;var At=n=>Ct(Fd,n);var Zo=n=>Ct(Pd,n);var Bd=(n,e)=>{let{activeInputs:t}=At(n);t.forEach(o=>o.forEach(([i])=>{e.includes(n)||Bd(i,[...e,n])}));let r=fC(n)?[n.playbackRate]:jd(n)?Array.from(n.parameters.values()):pC(n)?[n.Q,n.detune,n.frequency,n.gain]:mC(n)?[n.offset]:gC(n)?[n.gain]:vC(n)?[n.detune,n.frequency]:yC(n)?[n.pan]:[];for(let o of r){let i=Zo(o);i!==void 0&&i.activeInputs.forEach(([s])=>Bd(s,e))}dn(n)&&Pr(n)};var Yo=n=>{Bd(n.destination,[])};var $d=n=>n===void 0||typeof n=="number"||typeof n=="string"&&(n==="balanced"||n==="interactive"||n==="playback");var _C=(n,e,t,r,o,i,s,a,c)=>class extends n{constructor(u={}){if(c===null)throw new Error("Missing the native AudioContext constructor.");let d;try{d=new c(u)}catch(p){throw p.code===12&&p.message==="sampleRate is not in range"?t():p}if(d===null)throw r();if(!$d(u.latencyHint))throw new TypeError(`The provided value '${u.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(u.sampleRate!==void 0&&d.sampleRate!==u.sampleRate)throw t();super(d,2);let{latencyHint:f}=u,{sampleRate:h}=d;if(this._baseLatency=typeof d.baseLatency=="number"?d.baseLatency:f==="balanced"?512/h:f==="interactive"||f===void 0?256/h:f==="playback"?1024/h:Math.max(2,Math.min(128,Math.round(f*h/128)))*128/h,this._nativeAudioContext=d,c.name==="webkitAudioContext"?(this._nativeGainNode=d.createGain(),this._nativeOscillatorNode=d.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(d.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,d.state==="running"){this._state="suspended";let p=()=>{this._state==="suspended"&&(this._state=null),d.removeEventListener("statechange",p)};d.addEventListener("statechange",p)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw e()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Yo(this)}))}createMediaElementSource(u){return new o(this,{mediaElement:u})}createMediaStreamDestination(){return new i(this)}createMediaStreamSource(u){return new s(this,{mediaStream:u})}createMediaStreamTrackSource(u){return new a(this,{mediaStreamTrack:u})}resume(){return this._state==="suspended"?new Promise((u,d)=>{let f=()=>{this._nativeAudioContext.removeEventListener("statechange",f),this._nativeAudioContext.state==="running"?u():this.resume().then(u,d)};this._nativeAudioContext.addEventListener("statechange",f)}):this._nativeAudioContext.resume().catch(u=>{throw u===void 0||u.code===15?e():u})}suspend(){return this._nativeAudioContext.suspend().catch(u=>{throw u===void 0?e():u})}};var xC=(n,e,t,r,o,i,s,a)=>class extends n{constructor(l,u){let d=i(l),f=s(d),h=o(d,u,f),p=f?e(a):null;super(l,!1,h,p),this._isNodeOfNativeOfflineAudioContext=f,this._nativeAudioDestinationNode=h}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(l){if(this._isNodeOfNativeOfflineAudioContext)throw r();if(l>this._nativeAudioDestinationNode.maxChannelCount)throw t();this._nativeAudioDestinationNode.channelCount=l}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(l){if(this._isNodeOfNativeOfflineAudioContext)throw r();this._nativeAudioDestinationNode.channelCountMode=l}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}};var wC=n=>{let e=new WeakMap,t=(r,o)=>te(void 0,null,function*(){let i=o.destination;return e.set(o,i),yield n(r,o,i),i});return{render(r,o){let i=e.get(o);return i!==void 0?Promise.resolve(i):t(r,o)}}};var CC=(n,e,t,r,o,i,s,a)=>(c,l)=>{let u=l.listener,d=()=>{let D=new Float32Array(1),w=e(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),x=s(l),b=!1,V=[0,0,-1,0,1,0],Y=[0,0,0],R=()=>{if(b)return;b=!0;let K=r(l,256,9,0);K.onaudioprocess=({inputBuffer:W})=>{let ne=[i(W,D,0),i(W,D,1),i(W,D,2),i(W,D,3),i(W,D,4),i(W,D,5)];ne.some((E,L)=>E!==V[L])&&(u.setOrientation(...ne),V=ne);let H=[i(W,D,6),i(W,D,7),i(W,D,8)];H.some((E,L)=>E!==Y[L])&&(u.setPosition(...H),Y=H)},w.connect(K)},k=K=>W=>{W!==V[K]&&(V[K]=W,u.setOrientation(...V))},X=K=>W=>{W!==Y[K]&&(Y[K]=W,u.setPosition(...Y))},N=(K,W,ne)=>{let H=t(l,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:W});H.connect(w,0,K),H.start(),Object.defineProperty(H.offset,"defaultValue",{get(){return W}});let E=n({context:c},x,H.offset,ut,mt);return a(E,"value",L=>()=>L.call(E),L=>M=>{try{L.call(E,M)}catch(G){if(G.code!==9)throw G}R(),x&&ne(M)}),E.cancelAndHoldAtTime=(L=>x?()=>{throw o()}:(...M)=>{let G=L.apply(E,M);return R(),G})(E.cancelAndHoldAtTime),E.cancelScheduledValues=(L=>x?()=>{throw o()}:(...M)=>{let G=L.apply(E,M);return R(),G})(E.cancelScheduledValues),E.exponentialRampToValueAtTime=(L=>x?()=>{throw o()}:(...M)=>{let G=L.apply(E,M);return R(),G})(E.exponentialRampToValueAtTime),E.linearRampToValueAtTime=(L=>x?()=>{throw o()}:(...M)=>{let G=L.apply(E,M);return R(),G})(E.linearRampToValueAtTime),E.setTargetAtTime=(L=>x?()=>{throw o()}:(...M)=>{let G=L.apply(E,M);return R(),G})(E.setTargetAtTime),E.setValueAtTime=(L=>x?()=>{throw o()}:(...M)=>{let G=L.apply(E,M);return R(),G})(E.setValueAtTime),E.setValueCurveAtTime=(L=>x?()=>{throw o()}:(...M)=>{let G=L.apply(E,M);return R(),G})(E.setValueCurveAtTime),E};return{forwardX:N(0,0,k(0)),forwardY:N(1,0,k(1)),forwardZ:N(2,-1,k(2)),positionX:N(6,0,X(0)),positionY:N(7,0,X(1)),positionZ:N(8,0,X(2)),upX:N(3,0,k(3)),upY:N(4,1,k(4)),upZ:N(5,0,k(5))}},{forwardX:f,forwardY:h,forwardZ:p,positionX:m,positionY:g,positionZ:v,upX:C,upY:I,upZ:A}=u.forwardX===void 0?d():u;return{get forwardX(){return f},get forwardY(){return h},get forwardZ(){return p},get positionX(){return m},get positionY(){return g},get positionZ(){return v},get upX(){return C},get upY(){return I},get upZ(){return A}}};var Ri=n=>"context"in n;var Qo=n=>Ri(n[0]);var dr=(n,e,t,r)=>{for(let o of n)if(t(o)){if(r)return!1;throw Error("The set contains at least one similar element.")}return n.add(e),!0};var _g=(n,e,[t,r],o)=>{dr(n,[e,t,r],i=>i[0]===e&&i[1]===t,o)};var xg=(n,[e,t,r],o)=>{let i=n.get(e);i===void 0?n.set(e,new Set([[t,r]])):dr(i,[t,r],s=>s[0]===t,o)};var zn=n=>"inputs"in n;var Ws=(n,e,t,r)=>{if(zn(e)){let o=e.inputs[r];return n.connect(o,t,0),[o,t,0]}return n.connect(e,t,r),[e,t,r]};var wg=(n,e,t)=>{for(let r of n)if(r[0]===e&&r[1]===t)return n.delete(r),r;return null};var DC=(n,e,t)=>Go(n,r=>r[0]===e&&r[1]===t);var Cg=(n,e)=>{if(!Fr(n).delete(e))throw new Error("Missing the expected event listener.")};var Dg=(n,e,t)=>{let r=Ct(n,e),o=Go(r,i=>i[0]===t);return r.size===0&&n.delete(e),o};var zs=(n,e,t,r)=>{zn(e)?n.disconnect(e.inputs[r],t,0):n.disconnect(e,t,r)};var Qe=n=>Ct($s,n);var Fi=n=>Ct($c,n);var fo=n=>Hc.has(n);var Gs=n=>!Rr.has(n);var bg=(n,e)=>new Promise(t=>{if(e!==null)t(!0);else{let r=n.createScriptProcessor(256,1,1),o=n.createGain(),i=n.createBuffer(1,2,44100),s=i.getChannelData(0);s[0]=1,s[1]=1;let a=n.createBufferSource();a.buffer=i,a.loop=!0,a.connect(r).connect(n.destination),a.connect(o),a.disconnect(o),r.onaudioprocess=c=>{let l=c.inputBuffer.getChannelData(0);Array.prototype.some.call(l,u=>u===1)?t(!0):t(!1),a.stop(),r.onaudioprocess=null,a.disconnect(r),r.disconnect(n.destination)},a.start()}});var Hd=(n,e)=>{let t=new Map;for(let r of n)for(let o of r){let i=t.get(o);t.set(o,i===void 0?1:i+1)}t.forEach((r,o)=>e(o,r))};var Pi=n=>"context"in n;var bC=n=>{let e=new Map;n.connect=(t=>(r,o=0,i=0)=>{let s=Pi(r)?t(r,o,i):t(r,o),a=e.get(r);return a===void 0?e.set(r,[{input:i,output:o}]):a.every(c=>c.input!==i||c.output!==o)&&a.push({input:i,output:o}),s})(n.connect.bind(n)),n.disconnect=(t=>(r,o,i)=>{if(t.apply(n),r===void 0)e.clear();else if(typeof r=="number")for(let[s,a]of e){let c=a.filter(l=>l.output!==r);c.length===0?e.delete(s):e.set(s,c)}else if(e.has(r))if(o===void 0)e.delete(r);else{let s=e.get(r);if(s!==void 0){let a=s.filter(c=>c.output!==o&&(c.input!==i||i===void 0));a.length===0?e.delete(r):e.set(r,a)}}for(let[s,a]of e)a.forEach(c=>{Pi(s)?n.connect(s,c.output,c.input):n.connect(s,c.output)})})(n.disconnect)};var jR=(n,e,t,r)=>{let{activeInputs:o,passiveInputs:i}=Zo(e),{outputs:s}=At(n),a=Fr(n),c=l=>{let u=Qe(n),d=Fi(e);if(l){let f=Dg(i,n,t);_g(o,n,f,!1),!r&&!fo(n)&&u.connect(d,t)}else{let f=DC(o,n,t);xg(i,f,!1),!r&&!fo(n)&&u.disconnect(d,t)}};return dr(s,[e,t],l=>l[0]===e&&l[1]===t,!0)?(a.add(c),dn(n)?_g(o,n,[t,c],!0):xg(i,[n,t,c],!0),!0):!1},BR=(n,e,t,r)=>{let{activeInputs:o,passiveInputs:i}=At(e),s=wg(o[r],n,t);return s===null?[Ld(i,n,t,r)[2],!1]:[s[2],!0]},$R=(n,e,t)=>{let{activeInputs:r,passiveInputs:o}=Zo(e),i=wg(r,n,t);return i===null?[Dg(o,n,t)[1],!1]:[i[2],!0]},Sg=(n,e,t,r,o)=>{let[i,s]=BR(n,t,r,o);if(i!==null&&(Cg(n,i),s&&!e&&!fo(n)&&zs(Qe(n),Qe(t),r,o)),dn(t)){let{activeInputs:a}=At(t);Wc(t,a)}},Tg=(n,e,t,r)=>{let[o,i]=$R(n,t,r);o!==null&&(Cg(n,o),i&&!e&&!fo(n)&&Qe(n).disconnect(Fi(t),r))},HR=(n,e)=>{let t=At(n),r=[];for(let o of t.outputs)Qo(o)?Sg(n,e,...o):Tg(n,e,...o),r.push(o[0]);return t.outputs.clear(),r},UR=(n,e,t)=>{let r=At(n),o=[];for(let i of r.outputs)i[1]===t&&(Qo(i)?Sg(n,e,...i):Tg(n,e,...i),o.push(i[0]),r.outputs.delete(i));return o},qR=(n,e,t,r,o)=>{let i=At(n);return Array.from(i.outputs).filter(s=>s[0]===t&&(r===void 0||s[1]===r)&&(o===void 0||s[2]===o)).map(s=>(Qo(s)?Sg(n,e,...s):Tg(n,e,...s),i.outputs.delete(s),s[0]))},SC=(n,e,t,r,o,i,s,a,c,l,u,d,f,h,p,m)=>class extends l{constructor(v,C,I,A){super(I),this._context=v,this._nativeAudioNode=I;let D=u(v);d(D)&&t(bg,()=>bg(D,m))!==!0&&bC(I),$s.set(this,I),Vd.set(this,new Set),v.state!=="closed"&&C&&ur(this),n(this,A,I)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(v){this._nativeAudioNode.channelCount=v}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(v){this._nativeAudioNode.channelCountMode=v}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(v){this._nativeAudioNode.channelInterpretation=v}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(v,C=0,I=0){if(C<0||C>=this._nativeAudioNode.numberOfOutputs)throw o();let A=u(this._context),D=p(A);if(f(v)||h(v))throw i();if(Ri(v)){let b=Qe(v);try{let Y=Ws(this._nativeAudioNode,b,C,I),R=Gs(this);(D||R)&&this._nativeAudioNode.disconnect(...Y),this.context.state!=="closed"&&!R&&Gs(v)&&ur(v)}catch(Y){throw Y.code===12?i():Y}if(e(this,v,C,I,D)){let Y=c([this],v);Hd(Y,r(D))}return v}let w=Fi(v);if(w.name==="playbackRate"&&w.maxValue===1024)throw s();try{this._nativeAudioNode.connect(w,C),(D||Gs(this))&&this._nativeAudioNode.disconnect(w,C)}catch(b){throw b.code===12?i():b}if(jR(this,v,C,D)){let b=c([this],v);Hd(b,r(D))}}disconnect(v,C,I){let A,D=u(this._context),w=p(D);if(v===void 0)A=HR(this,w);else if(typeof v=="number"){if(v<0||v>=this.numberOfOutputs)throw o();A=UR(this,w,v)}else{if(C!==void 0&&(C<0||C>=this.numberOfOutputs)||Ri(v)&&I!==void 0&&(I<0||I>=v.numberOfInputs))throw o();if(A=qR(this,w,v,C,I),A.length===0)throw i()}for(let x of A){let b=c([this],x);Hd(b,a)}}};var TC=Cv(vg()),EC=(n,e,t,r,o,i,s,a,c,l,u,d,f)=>(h,p,m,g=null,v=null)=>{let C=new TC.AutomationEventList(m.defaultValue),I=p?r(C):null,A={get defaultValue(){return m.defaultValue},get maxValue(){return g===null?m.maxValue:g},get minValue(){return v===null?m.minValue:v},get value(){return m.value},set value(D){m.value=D,A.setValueAtTime(D,h.context.currentTime)},cancelAndHoldAtTime(D){if(typeof m.cancelAndHoldAtTime=="function")I===null&&C.flush(h.context.currentTime),C.add(o(D)),m.cancelAndHoldAtTime(D);else{let w=Array.from(C).pop();I===null&&C.flush(h.context.currentTime),C.add(o(D));let x=Array.from(C).pop();m.cancelScheduledValues(D),w!==x&&x!==void 0&&(x.type==="exponentialRampToValue"?m.exponentialRampToValueAtTime(x.value,x.endTime):x.type==="linearRampToValue"?m.linearRampToValueAtTime(x.value,x.endTime):x.type==="setValue"?m.setValueAtTime(x.value,x.startTime):x.type==="setValueCurve"&&m.setValueCurveAtTime(x.values,x.startTime,x.duration))}return A},cancelScheduledValues(D){return I===null&&C.flush(h.context.currentTime),C.add(i(D)),m.cancelScheduledValues(D),A},exponentialRampToValueAtTime(D,w){if(D===0)throw new RangeError;if(!Number.isFinite(w)||w<0)throw new RangeError;return I===null&&C.flush(h.context.currentTime),C.add(s(D,w)),m.exponentialRampToValueAtTime(D,w),A},linearRampToValueAtTime(D,w){return I===null&&C.flush(h.context.currentTime),C.add(a(D,w)),m.linearRampToValueAtTime(D,w),A},setTargetAtTime(D,w,x){return I===null&&C.flush(h.context.currentTime),C.add(c(D,w,x)),m.setTargetAtTime(D,w,x),A},setValueAtTime(D,w){return I===null&&C.flush(h.context.currentTime),C.add(l(D,w)),m.setValueAtTime(D,w),A},setValueCurveAtTime(D,w,x){let b=D instanceof Float32Array?D:new Float32Array(D);if(d!==null&&d.name==="webkitAudioContext"){let V=w+x,Y=h.context.sampleRate,R=Math.ceil(w*Y),k=Math.floor(V*Y),X=k-R,N=new Float32Array(X);for(let W=0;W<X;W+=1){let ne=(b.length-1)/x*((R+W)/Y-w),H=Math.floor(ne),E=Math.ceil(ne);N[W]=H===E?b[H]:(1-(ne-H))*b[H]+(1-(E-ne))*b[E]}I===null&&C.flush(h.context.currentTime),C.add(u(N,w,x)),m.setValueCurveAtTime(N,w,x);let K=k/Y;K<V&&f(A,N[N.length-1],K),f(A,b[b.length-1],V)}else I===null&&C.flush(h.context.currentTime),C.add(u(b,w,x)),m.setValueCurveAtTime(b,w,x);return A}};return t.set(A,m),e.set(A,h),n(A,I),A};var IC=n=>({replay(e){for(let t of n)if(t.type==="exponentialRampToValue"){let{endTime:r,value:o}=t;e.exponentialRampToValueAtTime(o,r)}else if(t.type==="linearRampToValue"){let{endTime:r,value:o}=t;e.linearRampToValueAtTime(o,r)}else if(t.type==="setTarget"){let{startTime:r,target:o,timeConstant:i}=t;e.setTargetAtTime(o,r,i)}else if(t.type==="setValue"){let{startTime:r,value:o}=t;e.setValueAtTime(o,r)}else if(t.type==="setValueCurve"){let{duration:r,startTime:o,values:i}=t;e.setValueCurveAtTime(i,o,r)}else throw new Error("Can't apply an unknown automation.")}});var Zs=class{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((r,o)=>e.call(t,r,o,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}};var WR={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},MC=(n,e,t,r,o,i,s,a,c,l,u,d,f,h)=>class extends e{constructor(m,g,v){var C;let I=a(m),A=c(I),D=u(y(y({},WR),v));f(D);let w=Uc.get(I),x=w?.get(g),b=A||I.state!=="closed"?I:(C=s(I))!==null&&C!==void 0?C:I,V=o(b,A?null:m.baseLatency,l,g,x,D),Y=A?r(g,D,x):null;super(m,!0,V,Y);let R=[];V.parameters.forEach((X,N)=>{let K=t(this,A,X);R.push([N,K])}),this._nativeAudioWorkletNode=V,this._onprocessorerror=null,this._parameters=new Zs(R),A&&n(I,this);let{activeInputs:k}=i(this);d(V,k)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(m){let g=typeof m=="function"?h(this,m):null;this._nativeAudioWorkletNode.onprocessorerror=g;let v=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=v!==null&&v===g?m:v}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function Ys(n,e,t,r,o){if(typeof n.copyFromChannel=="function")e[t].byteLength===0&&(e[t]=new Float32Array(128)),n.copyFromChannel(e[t],r,o);else{let i=n.getChannelData(r);if(e[t].byteLength===0)e[t]=i.slice(o,o+128);else{let s=new Float32Array(i.buffer,o*Float32Array.BYTES_PER_ELEMENT,128);e[t].set(s)}}}var Ud=(n,e,t,r,o)=>{typeof n.copyToChannel=="function"?e[t].byteLength!==0&&n.copyToChannel(e[t],r,o):e[t].byteLength!==0&&n.getChannelData(r).set(e[t],o)};var Qs=(n,e)=>{let t=[];for(let r=0;r<n;r+=1){let o=[],i=typeof e=="number"?e:e[r];for(let s=0;s<i;s+=1)o.push(new Float32Array(128));t.push(o)}return t};var AC=(n,e)=>{let t=Ct(qc,n),r=Qe(e);return Ct(t,r)};var zR=(n,e,t,r,o,i,s)=>te(void 0,null,function*(){let a=e===null?Math.ceil(n.context.length/128)*128:e.length,c=r.channelCount*r.numberOfInputs,l=o.reduce((g,v)=>g+v,0),u=l===0?null:t.createBuffer(l,a,t.sampleRate);if(i===void 0)throw new Error("Missing the processor constructor.");let d=At(n),f=yield AC(t,n),h=Qs(r.numberOfInputs,r.channelCount),p=Qs(r.numberOfOutputs,o),m=Array.from(n.parameters.keys()).reduce((g,v)=>O(y({},g),{[v]:new Float32Array(128)}),{});for(let g=0;g<a;g+=128){if(r.numberOfInputs>0&&e!==null)for(let v=0;v<r.numberOfInputs;v+=1)for(let C=0;C<r.channelCount;C+=1)Ys(e,h[v],C,C,g);i.parameterDescriptors!==void 0&&e!==null&&i.parameterDescriptors.forEach(({name:v},C)=>{Ys(e,m,v,c+C,g)});for(let v=0;v<r.numberOfInputs;v+=1)for(let C=0;C<o[v];C+=1)p[v][C].byteLength===0&&(p[v][C]=new Float32Array(128));try{let v=h.map((I,A)=>d.activeInputs[A].size===0?[]:I),C=s(g/t.sampleRate,t.sampleRate,()=>f.process(v,p,m));if(u!==null)for(let I=0,A=0;I<r.numberOfOutputs;I+=1){for(let D=0;D<o[I];D+=1)Ud(u,p[I],D,A+D,g);A+=o[I]}if(!C)break}catch(v){n.dispatchEvent(new ErrorEvent("processorerror",{colno:v.colno,filename:v.filename,lineno:v.lineno,message:v.message}));break}}return u}),NC=(n,e,t,r,o,i,s,a,c,l,u,d,f,h,p,m)=>(g,v,C)=>{let I=new WeakMap,A=null,D=(w,x)=>te(void 0,null,function*(){let b=u(w),V=null,Y=Be(b,x),R=Array.isArray(v.outputChannelCount)?v.outputChannelCount:Array.from(v.outputChannelCount);if(d===null){let k=R.reduce((W,ne)=>W+ne,0),X=o(x,{channelCount:Math.max(1,k),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,k)}),N=[];for(let W=0;W<w.numberOfOutputs;W+=1)N.push(r(x,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:R[W]}));let K=s(x,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1});K.connect=e.bind(null,N),K.disconnect=c.bind(null,N),V=[X,N,K]}else Y||(b=new d(x,g));if(I.set(x,V===null?b:V[2]),V!==null){if(A===null){if(C===void 0)throw new Error("Missing the processor constructor.");if(f===null)throw new Error("Missing the native OfflineAudioContext constructor.");let ne=w.channelCount*w.numberOfInputs,H=C.parameterDescriptors===void 0?0:C.parameterDescriptors.length,E=ne+H;A=zR(w,E===0?null:yield te(void 0,null,function*(){let M=new f(E,Math.ceil(w.context.length/128)*128,x.sampleRate),G=[],z=[];for(let Fe=0;Fe<v.numberOfInputs;Fe+=1)G.push(s(M,{channelCount:v.channelCount,channelCountMode:v.channelCountMode,channelInterpretation:v.channelInterpretation,gain:1})),z.push(o(M,{channelCount:v.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:v.channelCount}));let xe=yield Promise.all(Array.from(w.parameters.values()).map(Fe=>te(void 0,null,function*(){let fe=i(M,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Fe.value});return yield h(M,Fe,fe.offset),fe}))),oe=r(M,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,ne+H)});for(let Fe=0;Fe<v.numberOfInputs;Fe+=1){G[Fe].connect(z[Fe]);for(let fe=0;fe<v.channelCount;fe+=1)z[Fe].connect(oe,fe,Fe*v.channelCount+fe)}for(let[Fe,fe]of xe.entries())fe.connect(oe,0,ne+Fe),fe.start(0);return oe.connect(M.destination),yield Promise.all(G.map(Fe=>p(w,M,Fe))),m(M)}),x,v,R,C,l)}let k=yield A,X=t(x,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[N,K,W]=V;k!==null&&(X.buffer=k,X.start(0)),X.connect(N);for(let ne=0,H=0;ne<w.numberOfOutputs;ne+=1){let E=K[ne];for(let L=0;L<R[ne];L+=1)N.connect(E,H+L,L);H+=R[ne]}return W}if(Y)for(let[k,X]of w.parameters.entries())yield n(x,X,b.parameters.get(k));else for(let[k,X]of w.parameters.entries())yield h(x,X,b.parameters.get(k));return yield p(w,x,b),b});return{render(w,x){a(x,w);let b=I.get(x);return b!==void 0?Promise.resolve(b):D(w,x)}}};var OC=(n,e,t,r,o,i,s,a,c,l,u,d,f,h,p,m,g,v,C,I)=>class extends p{constructor(D,w){super(D,w),this._nativeContext=D,this._audioWorklet=n===void 0?void 0:{addModule:(x,b)=>n(this,x,b)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new e(this)}createBiquadFilter(){return new o(this)}createBuffer(D,w,x){return new t({length:w,numberOfChannels:D,sampleRate:x})}createBufferSource(){return new r(this)}createChannelMerger(D=6){return new i(this,{numberOfInputs:D})}createChannelSplitter(D=6){return new s(this,{numberOfOutputs:D})}createConstantSource(){return new a(this)}createConvolver(){return new c(this)}createDelay(D=1){return new u(this,{maxDelayTime:D})}createDynamicsCompressor(){return new d(this)}createGain(){return new f(this)}createIIRFilter(D,w){return new h(this,{feedback:w,feedforward:D})}createOscillator(){return new m(this)}createPanner(){return new g(this)}createPeriodicWave(D,w,x={disableNormalization:!1}){return new v(this,O(y({},x),{imag:w,real:D}))}createStereoPanner(){return new C(this)}createWaveShaper(){return new I(this)}decodeAudioData(D,w,x){return l(this._nativeContext,D).then(b=>(typeof w=="function"&&w(b),b),b=>{throw typeof x=="function"&&x(b),b})}};var GR={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},kC=(n,e,t,r,o,i,s,a)=>class extends n{constructor(l,u){let d=i(l),f=y(y({},GR),u),h=o(d,f),p=s(d),m=p?t():null;super(l,!1,h,m),this._Q=e(this,p,h.Q,ut,mt),this._detune=e(this,p,h.detune,1200*Math.log2(ut),-1200*Math.log2(ut)),this._frequency=e(this,p,h.frequency,l.sampleRate/2,0),this._gain=e(this,p,h.gain,40*Math.log10(ut),mt),this._nativeBiquadFilterNode=h,a(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(l){this._nativeBiquadFilterNode.type=l}getFrequencyResponse(l,u,d){try{this._nativeBiquadFilterNode.getFrequencyResponse(l,u,d)}catch(f){throw f.code===11?r():f}if(l.length!==u.length||u.length!==d.length)throw r()}};var RC=(n,e,t,r,o)=>()=>{let i=new WeakMap,s=(a,c)=>te(void 0,null,function*(){let l=t(a),u=Be(l,c);if(!u){let d={Q:l.Q.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,detune:l.detune.value,frequency:l.frequency.value,gain:l.gain.value,type:l.type};l=e(c,d)}return i.set(c,l),u?(yield n(c,a.Q,l.Q),yield n(c,a.detune,l.detune),yield n(c,a.frequency,l.frequency),yield n(c,a.gain,l.gain)):(yield r(c,a.Q,l.Q),yield r(c,a.detune,l.detune),yield r(c,a.frequency,l.frequency),yield r(c,a.gain,l.gain)),yield o(a,c,l),l});return{render(a,c){let l=i.get(c);return l!==void 0?Promise.resolve(l):s(a,c)}}};var FC=(n,e)=>(t,r)=>{let o=e.get(t);if(o!==void 0)return o;let i=n.get(t);if(i!==void 0)return i;try{let s=r();return s instanceof Promise?(n.set(t,s),s.catch(()=>!1).then(a=>(n.delete(t),e.set(t,a),a))):(e.set(t,s),s)}catch{return e.set(t,!1),!1}};var ZR={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},PC=(n,e,t,r,o)=>class extends n{constructor(s,a){let c=r(s),l=y(y({},ZR),a),u=t(c,l),d=o(c)?e():null;super(s,!1,u,d)}};var VC=(n,e,t)=>()=>{let r=new WeakMap,o=(i,s)=>te(void 0,null,function*(){let a=e(i);if(!Be(a,s)){let l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfInputs:a.numberOfInputs};a=n(s,l)}return r.set(s,a),yield t(i,s,a),a});return{render(i,s){let a=r.get(s);return a!==void 0?Promise.resolve(a):o(i,s)}}};var YR={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},LC=(n,e,t,r,o,i)=>class extends n{constructor(a,c){let l=r(a),u=i(y(y({},YR),c)),d=t(l,u),f=o(l)?e():null;super(a,!1,d,f)}};var jC=(n,e,t)=>()=>{let r=new WeakMap,o=(i,s)=>te(void 0,null,function*(){let a=e(i);if(!Be(a,s)){let l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,numberOfOutputs:a.numberOfOutputs};a=n(s,l)}return r.set(s,a),yield t(i,s,a),a});return{render(i,s){let a=r.get(s);return a!==void 0?Promise.resolve(a):o(i,s)}}};var BC=n=>(e,t,r)=>n(t,e,r);var $C=n=>(e,t,r=0,o=0)=>{let i=e[r];if(i===void 0)throw n();return Pi(t)?i.connect(t,0,o):i.connect(t,0)};var HC=n=>(e,t)=>{let r=n(e,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),o=e.createBuffer(1,2,44100);return r.buffer=o,r.loop=!0,r.connect(t),r.start(),()=>{r.stop(),r.disconnect(t)}};var QR={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},UC=(n,e,t,r,o,i,s)=>class extends n{constructor(c,l){let u=o(c),d=y(y({},QR),l),f=r(u,d),h=i(u),p=h?t():null;super(c,!1,f,p),this._constantSourceNodeRenderer=p,this._nativeConstantSourceNode=f,this._offset=e(this,h,f.offset,ut,mt),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(c){let l=typeof c=="function"?s(this,c):null;this._nativeConstantSourceNode.onended=l;let u=this._nativeConstantSourceNode.onended;this._onended=u!==null&&u===l?c:u}start(c=0){if(this._nativeConstantSourceNode.start(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=c),this.context.state!=="closed"){ur(this);let l=()=>{this._nativeConstantSourceNode.removeEventListener("ended",l),dn(this)&&Pr(this)};this._nativeConstantSourceNode.addEventListener("ended",l)}}stop(c=0){this._nativeConstantSourceNode.stop(c),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=c)}};var qC=(n,e,t,r,o)=>()=>{let i=new WeakMap,s=null,a=null,c=(l,u)=>te(void 0,null,function*(){let d=t(l),f=Be(d,u);if(!f){let h={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=e(u,h),s!==null&&d.start(s),a!==null&&d.stop(a)}return i.set(u,d),f?yield n(u,l.offset,d.offset):yield r(u,l.offset,d.offset),yield o(l,u,d),d});return{set start(l){s=l},set stop(l){a=l},render(l,u){let d=i.get(u);return d!==void 0?Promise.resolve(d):c(l,u)}}};var WC=n=>e=>(n[0]=e,n[0]);var XR={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},zC=(n,e,t,r,o,i)=>class extends n{constructor(a,c){let l=r(a),u=y(y({},XR),c),d=t(l,u),h=o(l)?e():null;super(a,!1,d,h),this._isBufferNullified=!1,this._nativeConvolverNode=d,u.buffer!==null&&i(this,u.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(a){if(this._nativeConvolverNode.buffer=a,a===null&&this._nativeConvolverNode.buffer!==null){let c=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=c.createBuffer(1,1,c.sampleRate),this._isBufferNullified=!0,i(this,0)}else this._isBufferNullified=!1,i(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(a){this._nativeConvolverNode.normalize=a}};var GC=(n,e,t)=>()=>{let r=new WeakMap,o=(i,s)=>te(void 0,null,function*(){let a=e(i);if(!Be(a,s)){let l={buffer:a.buffer,channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,disableNormalization:!a.normalize};a=n(s,l)}return r.set(s,a),zn(a)?yield t(i,s,a.inputs[0]):yield t(i,s,a),a});return{render(i,s){let a=r.get(s);return a!==void 0?Promise.resolve(a):o(i,s)}}};var ZC=(n,e)=>(t,r,o)=>{if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new e(t,r,o)}catch(i){throw i.name==="SyntaxError"?n():i}};var YC=()=>new DOMException("","DataCloneError");var Eg=n=>{let{port1:e,port2:t}=new MessageChannel;return new Promise(r=>{let o=()=>{t.onmessage=null,e.close(),t.close(),r()};t.onmessage=()=>o();try{e.postMessage(n,[n])}finally{o()}})};var QC=(n,e,t,r,o,i,s,a,c,l,u)=>(d,f)=>{let h=s(d)?d:i(d);if(o.has(f)){let p=t();return Promise.reject(p)}try{o.add(f)}catch{}return e(c,()=>c(h))?h.decodeAudioData(f).then(p=>(Eg(f).catch(()=>{}),e(a,()=>a(p))||u(p),n.add(p),p)):new Promise((p,m)=>{let g=()=>te(void 0,null,function*(){try{yield Eg(f)}catch{}}),v=C=>{m(C),g()};try{h.decodeAudioData(f,C=>{typeof C.copyFromChannel!="function"&&(l(C),qs(C)),n.add(C),g().then(()=>p(C))},C=>{v(C===null?r():C)})}catch(C){v(C)}})};var XC=(n,e,t,r,o,i,s,a)=>(c,l)=>{let u=e.get(c);if(u===void 0)throw new Error("Missing the expected cycle count.");let d=i(c.context),f=a(d);if(u===l){if(e.delete(c),!f&&s(c)){let h=r(c),{outputs:p}=t(c);for(let m of p)if(Qo(m)){let g=r(m[0]);n(h,g,m[1],m[2])}else{let g=o(m[0]);h.connect(g,m[1])}}}else e.set(c,u-l)};var KR={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},KC=(n,e,t,r,o,i,s)=>class extends n{constructor(c,l){let u=o(c),d=y(y({},KR),l),f=r(u,d),h=i(u),p=h?t(d.maxDelayTime):null;super(c,!1,f,p),this._delayTime=e(this,h,f.delayTime),s(this,d.maxDelayTime)}get delayTime(){return this._delayTime}};var JC=(n,e,t,r,o)=>i=>{let s=new WeakMap,a=(c,l)=>te(void 0,null,function*(){let u=t(c),d=Be(u,l);if(!d){let f={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,delayTime:u.delayTime.value,maxDelayTime:i};u=e(l,f)}return s.set(l,u),d?yield n(l,c.delayTime,u.delayTime):yield r(l,c.delayTime,u.delayTime),yield o(c,l,u),u});return{render(c,l){let u=s.get(l);return u!==void 0?Promise.resolve(u):a(c,l)}}};var eD=n=>(e,t,r,o)=>n(e[o],i=>i[0]===t&&i[1]===r);var tD=n=>(e,t)=>{n(e).delete(t)};var nD=n=>"delayTime"in n;var rD=(n,e,t)=>function r(o,i){let s=Ri(i)?i:t(n,i);if(nD(s))return[];if(o[0]===s)return[o];if(o.includes(s))return[];let{outputs:a}=e(s);return Array.from(a).map(c=>r([...o,s],c[0])).reduce((c,l)=>c.concat(l),[])};var qd=(n,e,t)=>{let r=e[t];if(r===void 0)throw n();return r},oD=n=>(e,t=void 0,r=void 0,o=0)=>t===void 0?e.forEach(i=>i.disconnect()):typeof t=="number"?qd(n,e,t).disconnect():Pi(t)?r===void 0?e.forEach(i=>i.disconnect(t)):o===void 0?qd(n,e,r).disconnect(t,0):qd(n,e,r).disconnect(t,0,o):r===void 0?e.forEach(i=>i.disconnect(t)):qd(n,e,r).disconnect(t,0);var JR={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},iD=(n,e,t,r,o,i,s,a)=>class extends n{constructor(l,u){let d=i(l),f=y(y({},JR),u),h=r(d,f),p=s(d),m=p?t():null;super(l,!1,h,m),this._attack=e(this,p,h.attack),this._knee=e(this,p,h.knee),this._nativeDynamicsCompressorNode=h,this._ratio=e(this,p,h.ratio),this._release=e(this,p,h.release),this._threshold=e(this,p,h.threshold),a(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(l){let u=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=l,l>2)throw this._nativeDynamicsCompressorNode.channelCount=u,o()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(l){let u=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=l,l==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=u,o()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}};var sD=(n,e,t,r,o)=>()=>{let i=new WeakMap,s=(a,c)=>te(void 0,null,function*(){let l=t(a),u=Be(l,c);if(!u){let d={attack:l.attack.value,channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,knee:l.knee.value,ratio:l.ratio.value,release:l.release.value,threshold:l.threshold.value};l=e(c,d)}return i.set(c,l),u?(yield n(c,a.attack,l.attack),yield n(c,a.knee,l.knee),yield n(c,a.ratio,l.ratio),yield n(c,a.release,l.release),yield n(c,a.threshold,l.threshold)):(yield r(c,a.attack,l.attack),yield r(c,a.knee,l.knee),yield r(c,a.ratio,l.ratio),yield r(c,a.release,l.release),yield r(c,a.threshold,l.threshold)),yield o(a,c,l),l});return{render(a,c){let l=i.get(c);return l!==void 0?Promise.resolve(l):s(a,c)}}};var aD=()=>new DOMException("","EncodingError");var cD=n=>e=>new Promise((t,r)=>{if(n===null){r(new SyntaxError);return}let o=n.document.head;if(o===null)r(new SyntaxError);else{let i=n.document.createElement("script"),s=new Blob([e],{type:"application/javascript"}),a=URL.createObjectURL(s),c=n.onerror,l=()=>{n.onerror=c,URL.revokeObjectURL(a)};n.onerror=(u,d,f,h,p)=>{if(d===a||d===n.location.href&&f===1&&h===1)return l(),r(p),!1;if(c!==null)return c(u,d,f,h,p)},i.onerror=()=>{l(),r(new SyntaxError)},i.onload=()=>{l(),t()},i.src=a,i.type="module",o.appendChild(i)}});var lD=n=>class{constructor(t){this._nativeEventTarget=t,this._listeners=new WeakMap}addEventListener(t,r,o){if(r!==null){let i=this._listeners.get(r);i===void 0&&(i=n(this,r),typeof r=="function"&&this._listeners.set(r,i)),this._nativeEventTarget.addEventListener(t,i,o)}}dispatchEvent(t){return this._nativeEventTarget.dispatchEvent(t)}removeEventListener(t,r,o){let i=r===null?void 0:this._listeners.get(r);this._nativeEventTarget.removeEventListener(t,i===void 0?null:i,o)}};var uD=n=>(e,t,r)=>{Object.defineProperties(n,{currentFrame:{configurable:!0,get(){return Math.round(e*t)}},currentTime:{configurable:!0,get(){return e}}});try{return r()}finally{n!==null&&(delete n.currentFrame,delete n.currentTime)}};var dD=n=>e=>te(void 0,null,function*(){try{let t=yield fetch(e);if(t.ok)return[yield t.text(),t.url]}catch{}throw n()});var eF={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},hD=(n,e,t,r,o,i)=>class extends n{constructor(a,c){let l=o(a),u=y(y({},eF),c),d=r(l,u),f=i(l),h=f?t():null;super(a,!1,d,h),this._gain=e(this,f,d.gain,ut,mt)}get gain(){return this._gain}};var fD=(n,e,t,r,o)=>()=>{let i=new WeakMap,s=(a,c)=>te(void 0,null,function*(){let l=t(a),u=Be(l,c);if(!u){let d={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=e(c,d)}return i.set(c,l),u?yield n(c,a.gain,l.gain):yield r(c,a.gain,l.gain),yield o(a,c,l),l});return{render(a,c){let l=i.get(c);return l!==void 0?Promise.resolve(l):s(a,c)}}};var pD=(n,e)=>t=>e(n,t);var mD=n=>e=>{let t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return t.renderer};var gD=n=>e=>{var t;return(t=n.get(e))!==null&&t!==void 0?t:0};var vD=n=>e=>{let t=n(e);if(t.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer};var yD=n=>e=>n.get(e);var nt=()=>new DOMException("","InvalidStateError");var _D=n=>e=>{let t=n.get(e);if(t===void 0)throw nt();return t};var xD=(n,e)=>t=>{let r=n.get(t);if(r!==void 0)return r;if(e===null)throw new Error("Missing the native OfflineAudioContext constructor.");return r=new e(1,1,44100),n.set(t,r),r};var wD=n=>e=>{let t=n.get(e);if(t===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return t};var Xs=()=>new DOMException("","InvalidAccessError");var CD=n=>{n.getFrequencyResponse=(e=>(t,r,o)=>{if(t.length!==r.length||r.length!==o.length)throw Xs();return e.call(n,t,r,o)})(n.getFrequencyResponse)};var tF={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},DD=(n,e,t,r,o,i)=>class extends n{constructor(a,c){let l=r(a),u=o(l),d=y(y({},tF),c),f=e(l,u?null:a.baseLatency,d),h=u?t(d.feedback,d.feedforward):null;super(a,!1,f,h),CD(f),this._nativeIIRFilterNode=f,i(this,1)}getFrequencyResponse(a,c,l){return this._nativeIIRFilterNode.getFrequencyResponse(a,c,l)}};var Wd=(n,e,t,r,o,i,s,a,c,l,u)=>{let d=l.length,f=a;for(let h=0;h<d;h+=1){let p=t[0]*l[h];for(let m=1;m<o;m+=1){let g=f-m&c-1;p+=t[m]*i[g],p-=n[m]*s[g]}for(let m=o;m<r;m+=1)p+=t[m]*i[f-m&c-1];for(let m=o;m<e;m+=1)p-=n[m]*s[f-m&c-1];i[f]=l[h],s[f]=p,f=f+1&c-1,u[h]=p}return f};var nF=(n,e,t,r)=>{let o=t instanceof Float64Array?t:new Float64Array(t),i=r instanceof Float64Array?r:new Float64Array(r),s=o.length,a=i.length,c=Math.min(s,a);if(o[0]!==1){for(let p=0;p<s;p+=1)i[p]/=o[0];for(let p=1;p<a;p+=1)o[p]/=o[0]}let l=32,u=new Float32Array(l),d=new Float32Array(l),f=e.createBuffer(n.numberOfChannels,n.length,n.sampleRate),h=n.numberOfChannels;for(let p=0;p<h;p+=1){let m=n.getChannelData(p),g=f.getChannelData(p);u.fill(0),d.fill(0),Wd(o,s,i,a,c,u,d,0,l,m,g)}return f},bD=(n,e,t,r,o)=>(i,s)=>{let a=new WeakMap,c=null,l=(u,d)=>te(void 0,null,function*(){let f=null,h=e(u),p=Be(h,d);if(d.createIIRFilter===void 0?f=n(d,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):p||(h=d.createIIRFilter(s,i)),a.set(d,f===null?h:f),f!==null){if(c===null){if(t===null)throw new Error("Missing the native OfflineAudioContext constructor.");let g=new t(u.context.destination.channelCount,u.context.length,d.sampleRate);c=te(void 0,null,function*(){yield r(u,g,g.destination);let v=yield o(g);return nF(v,d,i,s)})}let m=yield c;return f.buffer=m,f.start(0),f}return yield r(u,d,h),h});return{render(u,d){let f=a.get(d);return f!==void 0?Promise.resolve(f):l(u,d)}}};var SD=(n,e,t,r,o,i)=>s=>(a,c)=>{let l=n.get(a);if(l===void 0){if(!s&&i(a)){let u=r(a),{outputs:d}=t(a);for(let f of d)if(Qo(f)){let h=r(f[0]);e(u,h,f[1],f[2])}else{let h=o(f[0]);u.disconnect(h,f[1])}}n.set(a,c)}else n.set(a,l+c)};var TD=(n,e)=>t=>{let r=n.get(t);return e(r)||e(t)};var ED=(n,e)=>t=>n.has(t)||e(t);var ID=(n,e)=>t=>n.has(t)||e(t);var MD=(n,e)=>t=>{let r=n.get(t);return e(r)||e(t)};var AD=n=>e=>n!==null&&e instanceof n;var ND=n=>e=>n!==null&&typeof n.AudioNode=="function"&&e instanceof n.AudioNode;var OD=n=>e=>n!==null&&typeof n.AudioParam=="function"&&e instanceof n.AudioParam;var kD=(n,e)=>t=>n(t)||e(t);var RD=n=>e=>n!==null&&e instanceof n;var FD=n=>n!==null&&n.isSecureContext;var PD=(n,e,t,r)=>class extends n{constructor(i,s){let a=t(i),c=e(a,s);if(r(a))throw TypeError();super(i,!0,c,null),this._nativeMediaElementAudioSourceNode=c}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}};var rF={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},VD=(n,e,t,r)=>class extends n{constructor(i,s){let a=t(i);if(r(a))throw new TypeError;let c=y(y({},rF),s),l=e(a,c);super(i,!1,l,null),this._nativeMediaStreamAudioDestinationNode=l}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}};var LD=(n,e,t,r)=>class extends n{constructor(i,s){let a=t(i),c=e(a,s);if(r(a))throw new TypeError;super(i,!0,c,null),this._nativeMediaStreamAudioSourceNode=c}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}};var jD=(n,e,t)=>class extends n{constructor(o,i){let s=t(o),a=e(s,i);super(o,!0,a,null)}};var BD=(n,e,t,r,o)=>class extends r{constructor(s={}){if(o===null)throw new Error("Missing the native AudioContext constructor.");let a;try{a=new o(s)}catch(u){throw u.code===12&&u.message==="sampleRate is not in range"?e():u}if(a===null)throw t();if(!$d(s.latencyHint))throw new TypeError(`The provided value '${s.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(s.sampleRate!==void 0&&a.sampleRate!==s.sampleRate)throw e();super(a,2);let{latencyHint:c}=s,{sampleRate:l}=a;if(this._baseLatency=typeof a.baseLatency=="number"?a.baseLatency:c==="balanced"?512/l:c==="interactive"||c===void 0?256/l:c==="playback"?1024/l:Math.max(2,Math.min(128,Math.round(c*l/128)))*128/l,this._nativeAudioContext=a,o.name==="webkitAudioContext"?(this._nativeGainNode=a.createGain(),this._nativeOscillatorNode=a.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(a.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,a.state==="running"){this._state="suspended";let u=()=>{this._state==="suspended"&&(this._state=null),a.removeEventListener("statechange",u)};a.addEventListener("statechange",u)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw n()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),Yo(this)}))}resume(){return this._state==="suspended"?new Promise((s,a)=>{let c=()=>{this._nativeAudioContext.removeEventListener("statechange",c),this._nativeAudioContext.state==="running"?s():this.resume().then(s,a)};this._nativeAudioContext.addEventListener("statechange",c)}):this._nativeAudioContext.resume().catch(s=>{throw s===void 0||s.code===15?n():s})}suspend(){return this._nativeAudioContext.suspend().catch(s=>{throw s===void 0?n():s})}};var $D=(n,e,t,r,o,i)=>class extends t{constructor(a,c){super(a),this._nativeContext=a,Hs.set(this,a),r(a)&&o.set(a,new Set),this._destination=new n(this,c),this._listener=e(this,a),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(a){let c=typeof a=="function"?i(this,a):null;this._nativeContext.onstatechange=c;let l=this._nativeContext.onstatechange;this._onstatechange=l!==null&&l===c?a:l}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}};var hr=n=>{let e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{let t=n.decodeAudioData(e.buffer,()=>{});return t===void 0?!1:(t.catch(()=>{}),!0)}catch{}return!1};var oF={numberOfChannels:1},HD=(n,e,t,r,o)=>class extends r{constructor(s){let{length:a,numberOfChannels:c,sampleRate:l}=y(y({},oF),s),u=t(c,a,l);n(hr,()=>hr(u))||u.addEventListener("statechange",(()=>{let d=0,f=h=>{this._state==="running"&&(d>0?(u.removeEventListener("statechange",f),h.stopImmediatePropagation(),this._waitForThePromiseToSettle(h)):d+=1)};return f})()),super(u,c),this._length=a,this._nativeOfflineAudioContext=u,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(e()):(this._state="running",o(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Yo(this)}))}_waitForThePromiseToSettle(s){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(s):setTimeout(()=>this._waitForThePromiseToSettle(s))}};var UD=(n,e)=>(t,r,o)=>{let i=new Set;return t.connect=(s=>(a,c=0,l=0)=>{let u=i.size===0;if(e(a))return s.call(t,a,c,l),n(i,[a,c,l],d=>d[0]===a&&d[1]===c&&d[2]===l,!0),u&&r(),a;s.call(t,a,c),n(i,[a,c],d=>d[0]===a&&d[1]===c,!0),u&&r()})(t.connect),t.disconnect=(s=>(a,c,l)=>{let u=i.size>0;if(a===void 0)s.apply(t),i.clear();else if(typeof a=="number"){s.call(t,a);for(let f of i)f[1]===a&&i.delete(f)}else{e(a)?s.call(t,a,c,l):s.call(t,a,c);for(let f of i)f[0]===a&&(c===void 0||f[1]===c)&&(l===void 0||f[2]===l)&&i.delete(f)}let d=i.size===0;u&&d&&o()})(t.disconnect),t};var $e=(n,e,t)=>{let r=e[t];r!==void 0&&r!==n[t]&&(n[t]=r)};var Ne=(n,e)=>{$e(n,e,"channelCount"),$e(n,e,"channelCountMode"),$e(n,e,"channelInterpretation")};var Ig=n=>typeof n.getFloatTimeDomainData=="function";var qD=n=>{n.getFloatTimeDomainData=e=>{let t=new Uint8Array(e.length);n.getByteTimeDomainData(t);let r=Math.max(t.length,n.fftSize);for(let o=0;o<r;o+=1)e[o]=(t[o]-128)*.0078125;return e}};var WD=(n,e)=>(t,r)=>{let o=t.createAnalyser();if(Ne(o,r),!(r.maxDecibels>r.minDecibels))throw e();return $e(o,r,"fftSize"),$e(o,r,"maxDecibels"),$e(o,r,"minDecibels"),$e(o,r,"smoothingTimeConstant"),n(Ig,()=>Ig(o))||qD(o),o};var zD=n=>n===null?null:n.hasOwnProperty("AudioBuffer")?n.AudioBuffer:null;var qe=(n,e,t)=>{let r=e[t];r!==void 0&&r!==n[t].value&&(n[t].value=r)};var GD=n=>{n.start=(e=>{let t=!1;return(r=0,o=0,i)=>{if(t)throw nt();e.call(n,r,o,i),t=!0}})(n.start)};var Ks=n=>{n.start=(e=>(t=0,r=0,o)=>{if(typeof o=="number"&&o<0||r<0||t<0)throw new RangeError("The parameters can't be negative.");e.call(n,t,r,o)})(n.start)};var Js=n=>{n.stop=(e=>(t=0)=>{if(t<0)throw new RangeError("The parameter can't be negative.");e.call(n,t)})(n.stop)};var ZD=(n,e,t,r,o,i,s,a,c,l,u)=>(d,f)=>{let h=d.createBufferSource();return Ne(h,f),qe(h,f,"playbackRate"),$e(h,f,"buffer"),$e(h,f,"loop"),$e(h,f,"loopEnd"),$e(h,f,"loopStart"),e(t,()=>t(d))||GD(h),e(r,()=>r(d))||c(h),e(o,()=>o(d))||l(h,d),e(i,()=>i(d))||Ks(h),e(s,()=>s(d))||u(h,d),e(a,()=>a(d))||Js(h),n(d,h),h};var YD=n=>n===null?null:n.hasOwnProperty("AudioContext")?n.AudioContext:n.hasOwnProperty("webkitAudioContext")?n.webkitAudioContext:null;var QD=(n,e)=>(t,r,o)=>{let i=t.destination;if(i.channelCount!==r)try{i.channelCount=r}catch{}o&&i.channelCountMode!=="explicit"&&(i.channelCountMode="explicit"),i.maxChannelCount===0&&Object.defineProperty(i,"maxChannelCount",{value:r});let s=n(t,{channelCount:r,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,gain:1});return e(s,"channelCount",a=>()=>a.call(s),a=>c=>{a.call(s,c);try{i.channelCount=c}catch(l){if(c>i.maxChannelCount)throw l}}),e(s,"channelCountMode",a=>()=>a.call(s),a=>c=>{a.call(s,c),i.channelCountMode=c}),e(s,"channelInterpretation",a=>()=>a.call(s),a=>c=>{a.call(s,c),i.channelInterpretation=c}),Object.defineProperty(s,"maxChannelCount",{get:()=>i.maxChannelCount}),s.connect(i),s};var XD=n=>n===null?null:n.hasOwnProperty("AudioWorkletNode")?n.AudioWorkletNode:null;var KD=n=>{let{port1:e}=new MessageChannel;try{e.postMessage(n)}finally{e.close()}};var JD=(n,e,t,r,o)=>(i,s,a,c,l,u)=>{if(a!==null)try{let d=new a(i,c,u),f=new Map,h=null;if(Object.defineProperties(d,{channelCount:{get:()=>u.channelCount,set:()=>{throw n()}},channelCountMode:{get:()=>"explicit",set:()=>{throw n()}},onprocessorerror:{get:()=>h,set:p=>{typeof h=="function"&&d.removeEventListener("processorerror",h),h=typeof p=="function"?p:null,typeof h=="function"&&d.addEventListener("processorerror",h)}}}),d.addEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){let g=typeof m[1]=="function"?m[1]:typeof m[1]=="object"&&m[1]!==null&&typeof m[1].handleEvent=="function"?m[1].handleEvent:null;if(g!==null){let v=f.get(m[1]);v!==void 0?m[1]=v:(m[1]=C=>{C.type==="error"?(Object.defineProperties(C,{type:{value:"processorerror"}}),g(C)):g(new ErrorEvent(m[0],y({},C)))},f.set(g,m[1]))}}return p.call(d,"error",m[1],m[2]),p.call(d,...m)})(d.addEventListener),d.removeEventListener=(p=>(...m)=>{if(m[0]==="processorerror"){let g=f.get(m[1]);g!==void 0&&(f.delete(m[1]),m[1]=g)}return p.call(d,"error",m[1],m[2]),p.call(d,m[0],m[1],m[2])})(d.removeEventListener),u.numberOfOutputs!==0){let p=t(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return d.connect(p).connect(i.destination),o(d,()=>p.disconnect(),()=>p.connect(i.destination))}return d}catch(d){throw d.code===11?r():d}if(l===void 0)throw r();return KD(u),e(i,s,l,u)};var zd=(n,e)=>n===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(n*e)))));var eb=n=>new Promise((e,t)=>{let{port1:r,port2:o}=new MessageChannel;r.onmessage=({data:i})=>{r.close(),o.close(),e(i)},r.onmessageerror=({data:i})=>{r.close(),o.close(),t(i)},o.postMessage(n)});var tb=(n,e)=>te(void 0,null,function*(){let t=yield eb(e);return new n(t)});var nb=(n,e,t,r)=>{let o=qc.get(n);o===void 0&&(o=new WeakMap,qc.set(n,o));let i=tb(t,r);return o.set(e,i),i};var rb=(n,e,t,r,o,i,s,a,c,l,u,d,f)=>(h,p,m,g)=>{if(g.numberOfInputs===0&&g.numberOfOutputs===0)throw c();let v=Array.isArray(g.outputChannelCount)?g.outputChannelCount:Array.from(g.outputChannelCount);if(v.some(Z=>Z<1))throw c();if(v.length!==g.numberOfOutputs)throw e();if(g.channelCountMode!=="explicit")throw c();let C=g.channelCount*g.numberOfInputs,I=v.reduce((Z,me)=>Z+me,0),A=m.parameterDescriptors===void 0?0:m.parameterDescriptors.length;if(C+A>6||I>6)throw c();let D=new MessageChannel,w=[],x=[];for(let Z=0;Z<g.numberOfInputs;Z+=1)w.push(s(h,{channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation,gain:1})),x.push(o(h,{channelCount:g.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:g.channelCount}));let b=[];if(m.parameterDescriptors!==void 0)for(let{defaultValue:Z,maxValue:me,minValue:Tt,name:ot}of m.parameterDescriptors){let He=i(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:g.parameterData[ot]!==void 0?g.parameterData[ot]:Z===void 0?0:Z});Object.defineProperties(He.offset,{defaultValue:{get:()=>Z===void 0?0:Z},maxValue:{get:()=>me===void 0?ut:me},minValue:{get:()=>Tt===void 0?mt:Tt}}),b.push(He)}let V=r(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,C+A)}),Y=zd(p,h.sampleRate),R=a(h,Y,C+A,Math.max(1,I)),k=o(h,{channelCount:Math.max(1,I),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,I)}),X=[];for(let Z=0;Z<g.numberOfOutputs;Z+=1)X.push(r(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:v[Z]}));for(let Z=0;Z<g.numberOfInputs;Z+=1){w[Z].connect(x[Z]);for(let me=0;me<g.channelCount;me+=1)x[Z].connect(V,me,Z*g.channelCount+me)}let N=new Zs(m.parameterDescriptors===void 0?[]:m.parameterDescriptors.map(({name:Z},me)=>{let Tt=b[me];return Tt.connect(V,0,C+me),Tt.start(0),[Z,Tt.offset]}));V.connect(R);let K=g.channelInterpretation,W=null,ne=g.numberOfOutputs===0?[R]:X,H={get bufferSize(){return Y},get channelCount(){return g.channelCount},set channelCount(Z){throw t()},get channelCountMode(){return g.channelCountMode},set channelCountMode(Z){throw t()},get channelInterpretation(){return K},set channelInterpretation(Z){for(let me of w)me.channelInterpretation=Z;K=Z},get context(){return R.context},get inputs(){return w},get numberOfInputs(){return g.numberOfInputs},get numberOfOutputs(){return g.numberOfOutputs},get onprocessorerror(){return W},set onprocessorerror(Z){typeof W=="function"&&H.removeEventListener("processorerror",W),W=typeof Z=="function"?Z:null,typeof W=="function"&&H.addEventListener("processorerror",W)},get parameters(){return N},get port(){return D.port2},addEventListener(...Z){return R.addEventListener(Z[0],Z[1],Z[2])},connect:n.bind(null,ne),disconnect:l.bind(null,ne),dispatchEvent(...Z){return R.dispatchEvent(Z[0])},removeEventListener(...Z){return R.removeEventListener(Z[0],Z[1],Z[2])}},E=new Map;D.port1.addEventListener=(Z=>(...me)=>{if(me[0]==="message"){let Tt=typeof me[1]=="function"?me[1]:typeof me[1]=="object"&&me[1]!==null&&typeof me[1].handleEvent=="function"?me[1].handleEvent:null;if(Tt!==null){let ot=E.get(me[1]);ot!==void 0?me[1]=ot:(me[1]=He=>{u(h.currentTime,h.sampleRate,()=>Tt(He))},E.set(Tt,me[1]))}}return Z.call(D.port1,me[0],me[1],me[2])})(D.port1.addEventListener),D.port1.removeEventListener=(Z=>(...me)=>{if(me[0]==="message"){let Tt=E.get(me[1]);Tt!==void 0&&(E.delete(me[1]),me[1]=Tt)}return Z.call(D.port1,me[0],me[1],me[2])})(D.port1.removeEventListener);let L=null;Object.defineProperty(D.port1,"onmessage",{get:()=>L,set:Z=>{typeof L=="function"&&D.port1.removeEventListener("message",L),L=typeof Z=="function"?Z:null,typeof L=="function"&&(D.port1.addEventListener("message",L),D.port1.start())}}),m.prototype.port=D.port1;let M=null;nb(h,H,m,g).then(Z=>M=Z);let z=Qs(g.numberOfInputs,g.channelCount),xe=Qs(g.numberOfOutputs,v),oe=m.parameterDescriptors===void 0?[]:m.parameterDescriptors.reduce((Z,{name:me})=>O(y({},Z),{[me]:new Float32Array(128)}),{}),Fe=!0,fe=()=>{g.numberOfOutputs>0&&R.disconnect(k);for(let Z=0,me=0;Z<g.numberOfOutputs;Z+=1){let Tt=X[Z];for(let ot=0;ot<v[Z];ot+=1)k.disconnect(Tt,me+ot,ot);me+=v[Z]}},tr=new Map;R.onaudioprocess=({inputBuffer:Z,outputBuffer:me})=>{if(M!==null){let Tt=d(H);for(let ot=0;ot<Y;ot+=128){for(let He=0;He<g.numberOfInputs;He+=1)for(let at=0;at<g.channelCount;at+=1)Ys(Z,z[He],at,at,ot);m.parameterDescriptors!==void 0&&m.parameterDescriptors.forEach(({name:He},at)=>{Ys(Z,oe,He,C+at,ot)});for(let He=0;He<g.numberOfInputs;He+=1)for(let at=0;at<v[He];at+=1)xe[He][at].byteLength===0&&(xe[He][at]=new Float32Array(128));try{let He=z.map((Ln,_o)=>{if(Tt[_o].size>0)return tr.set(_o,Y/128),Ln;let Fh=tr.get(_o);return Fh===void 0?[]:(Ln.every(QT=>QT.every(XT=>XT===0))&&(Fh===1?tr.delete(_o):tr.set(_o,Fh-1)),Ln)});Fe=u(h.currentTime+ot/h.sampleRate,h.sampleRate,()=>M.process(He,xe,oe));for(let Ln=0,_o=0;Ln<g.numberOfOutputs;Ln+=1){for(let Oa=0;Oa<v[Ln];Oa+=1)Ud(me,xe[Ln],Oa,_o+Oa,ot);_o+=v[Ln]}}catch(He){Fe=!1,H.dispatchEvent(new ErrorEvent("processorerror",{colno:He.colno,filename:He.filename,lineno:He.lineno,message:He.message}))}if(!Fe){for(let He=0;He<g.numberOfInputs;He+=1){w[He].disconnect(x[He]);for(let at=0;at<g.channelCount;at+=1)x[ot].disconnect(V,at,He*g.channelCount+at)}if(m.parameterDescriptors!==void 0){let He=m.parameterDescriptors.length;for(let at=0;at<He;at+=1){let Ln=b[at];Ln.disconnect(V,0,C+at),Ln.stop()}}V.disconnect(R),R.onaudioprocess=null,qr?fe():nr();break}}}};let qr=!1,ee=s(h,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),yn=()=>R.connect(ee).connect(h.destination),nr=()=>{R.disconnect(ee),ee.disconnect()},_n=()=>{if(Fe){nr(),g.numberOfOutputs>0&&R.connect(k);for(let Z=0,me=0;Z<g.numberOfOutputs;Z+=1){let Tt=X[Z];for(let ot=0;ot<v[Z];ot+=1)k.connect(Tt,me+ot,ot);me+=v[Z]}}qr=!0},di=()=>{Fe&&(yn(),fe()),qr=!1};return yn(),f(H,_n,di)};var Mg=(n,e)=>{let t=n.createBiquadFilter();return Ne(t,e),qe(t,e,"Q"),qe(t,e,"detune"),qe(t,e,"frequency"),qe(t,e,"gain"),$e(t,e,"type"),t};var ob=(n,e)=>(t,r)=>{let o=t.createChannelMerger(r.numberOfInputs);return n!==null&&n.name==="webkitAudioContext"&&e(t,o),Ne(o,r),o};var ib=n=>{let e=n.numberOfOutputs;Object.defineProperty(n,"channelCount",{get:()=>e,set:t=>{if(t!==e)throw nt()}}),Object.defineProperty(n,"channelCountMode",{get:()=>"explicit",set:t=>{if(t!=="explicit")throw nt()}}),Object.defineProperty(n,"channelInterpretation",{get:()=>"discrete",set:t=>{if(t!=="discrete")throw nt()}})};var ea=(n,e)=>{let t=n.createChannelSplitter(e.numberOfOutputs);return Ne(t,e),ib(t),t};var sb=(n,e,t,r,o)=>(i,s)=>{if(i.createConstantSource===void 0)return t(i,s);let a=i.createConstantSource();return Ne(a,s),qe(a,s,"offset"),e(r,()=>r(i))||Ks(a),e(o,()=>o(i))||Js(a),n(i,a),a};var Gn=(n,e)=>(n.connect=e.connect.bind(e),n.disconnect=e.disconnect.bind(e),n);var ab=(n,e,t,r)=>(o,a)=>{var c=a,{offset:i}=c,s=xo(c,["offset"]);let l=o.createBuffer(1,2,44100),u=e(o,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),d=t(o,O(y({},s),{gain:i})),f=l.getChannelData(0);f[0]=1,f[1]=1,u.buffer=l,u.loop=!0;let h={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(g){d.channelCount=g},get channelCountMode(){return d.channelCountMode},set channelCountMode(g){d.channelCountMode=g},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(g){d.channelInterpretation=g},get context(){return d.context},get inputs(){return[]},get numberOfInputs(){return u.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get offset(){return d.gain},get onended(){return u.onended},set onended(g){u.onended=g},addEventListener(...g){return u.addEventListener(g[0],g[1],g[2])},dispatchEvent(...g){return u.dispatchEvent(g[0])},removeEventListener(...g){return u.removeEventListener(g[0],g[1],g[2])},start(g=0){u.start.call(u,g)},stop(g=0){u.stop.call(u,g)}},p=()=>u.connect(d),m=()=>u.disconnect(d);return n(o,u),r(Gn(h,d),p,m)};var cb=(n,e)=>(t,r)=>{let o=t.createConvolver();if(Ne(o,r),r.disableNormalization===o.normalize&&(o.normalize=!r.disableNormalization),$e(o,r,"buffer"),r.channelCount>2||(e(o,"channelCount",i=>()=>i.call(o),i=>s=>{if(s>2)throw n();return i.call(o,s)}),r.channelCountMode==="max"))throw n();return e(o,"channelCountMode",i=>()=>i.call(o),i=>s=>{if(s==="max")throw n();return i.call(o,s)}),o};var Ag=(n,e)=>{let t=n.createDelay(e.maxDelayTime);return Ne(t,e),qe(t,e,"delayTime"),t};var lb=n=>(e,t)=>{let r=e.createDynamicsCompressor();if(Ne(r,t),t.channelCount>2||t.channelCountMode==="max")throw n();return qe(r,t,"attack"),qe(r,t,"knee"),qe(r,t,"ratio"),qe(r,t,"release"),qe(r,t,"threshold"),r};var hn=(n,e)=>{let t=n.createGain();return Ne(t,e),qe(t,e,"gain"),t};var ub=n=>(e,t,r)=>{if(e.createIIRFilter===void 0)return n(e,t,r);let o=e.createIIRFilter(r.feedforward,r.feedback);return Ne(o,r),o};function iF(n,e){let t=e[0]*e[0]+e[1]*e[1];return[(n[0]*e[0]+n[1]*e[1])/t,(n[1]*e[0]-n[0]*e[1])/t]}function sF(n,e){return[n[0]*e[0]-n[1]*e[1],n[0]*e[1]+n[1]*e[0]]}function db(n,e){let t=[0,0];for(let r=n.length-1;r>=0;r-=1)t=sF(t,e),t[0]+=n[r];return t}var hb=(n,e,t,r)=>(o,i,{channelCount:s,channelCountMode:a,channelInterpretation:c,feedback:l,feedforward:u})=>{let d=zd(i,o.sampleRate),f=l instanceof Float64Array?l:new Float64Array(l),h=u instanceof Float64Array?u:new Float64Array(u),p=f.length,m=h.length,g=Math.min(p,m);if(p===0||p>20)throw r();if(f[0]===0)throw e();if(m===0||m>20)throw r();if(h[0]===0)throw e();if(f[0]!==1){for(let b=0;b<m;b+=1)h[b]/=f[0];for(let b=1;b<p;b+=1)f[b]/=f[0]}let v=t(o,d,s,s);v.channelCount=s,v.channelCountMode=a,v.channelInterpretation=c;let C=32,I=[],A=[],D=[];for(let b=0;b<s;b+=1){I.push(0);let V=new Float32Array(C),Y=new Float32Array(C);V.fill(0),Y.fill(0),A.push(V),D.push(Y)}v.onaudioprocess=b=>{let V=b.inputBuffer,Y=b.outputBuffer,R=V.numberOfChannels;for(let k=0;k<R;k+=1){let X=V.getChannelData(k),N=Y.getChannelData(k);I[k]=Wd(f,p,h,m,g,A[k],D[k],I[k],C,X,N)}};let w=o.sampleRate/2;return Gn({get bufferSize(){return d},get channelCount(){return v.channelCount},set channelCount(b){v.channelCount=b},get channelCountMode(){return v.channelCountMode},set channelCountMode(b){v.channelCountMode=b},get channelInterpretation(){return v.channelInterpretation},set channelInterpretation(b){v.channelInterpretation=b},get context(){return v.context},get inputs(){return[v]},get numberOfInputs(){return v.numberOfInputs},get numberOfOutputs(){return v.numberOfOutputs},addEventListener(...b){return v.addEventListener(b[0],b[1],b[2])},dispatchEvent(...b){return v.dispatchEvent(b[0])},getFrequencyResponse(b,V,Y){if(b.length!==V.length||V.length!==Y.length)throw n();let R=b.length;for(let k=0;k<R;k+=1){let X=-Math.PI*(b[k]/w),N=[Math.cos(X),Math.sin(X)],K=db(h,N),W=db(f,N),ne=iF(K,W);V[k]=Math.sqrt(ne[0]*ne[0]+ne[1]*ne[1]),Y[k]=Math.atan2(ne[1],ne[0])}},removeEventListener(...b){return v.removeEventListener(b[0],b[1],b[2])}},v)};var fb=(n,e)=>n.createMediaElementSource(e.mediaElement);var pb=(n,e)=>{let t=n.createMediaStreamDestination();return Ne(t,e),t.numberOfOutputs===1&&Object.defineProperty(t,"numberOfOutputs",{get:()=>0}),t};var mb=(n,{mediaStream:e})=>{let t=e.getAudioTracks();t.sort((i,s)=>i.id<s.id?-1:i.id>s.id?1:0);let r=t.slice(0,1),o=n.createMediaStreamSource(new MediaStream(r));return Object.defineProperty(o,"mediaStream",{value:e}),o};var gb=(n,e)=>(t,{mediaStreamTrack:r})=>{if(typeof t.createMediaStreamTrackSource=="function")return t.createMediaStreamTrackSource(r);let o=new MediaStream([r]),i=t.createMediaStreamSource(o);if(r.kind!=="audio")throw n();if(e(t))throw new TypeError;return i};var vb=n=>n===null?null:n.hasOwnProperty("OfflineAudioContext")?n.OfflineAudioContext:n.hasOwnProperty("webkitOfflineAudioContext")?n.webkitOfflineAudioContext:null;var yb=(n,e,t,r,o,i)=>(s,a)=>{let c=s.createOscillator();return Ne(c,a),qe(c,a,"detune"),qe(c,a,"frequency"),a.periodicWave!==void 0?c.setPeriodicWave(a.periodicWave):$e(c,a,"type"),e(t,()=>t(s))||Ks(c),e(r,()=>r(s))||i(c,s),e(o,()=>o(s))||Js(c),n(s,c),c};var _b=n=>(e,t)=>{let r=e.createPanner();return r.orientationX===void 0?n(e,t):(Ne(r,t),qe(r,t,"orientationX"),qe(r,t,"orientationY"),qe(r,t,"orientationZ"),qe(r,t,"positionX"),qe(r,t,"positionY"),qe(r,t,"positionZ"),$e(r,t,"coneInnerAngle"),$e(r,t,"coneOuterAngle"),$e(r,t,"coneOuterGain"),$e(r,t,"distanceModel"),$e(r,t,"maxDistance"),$e(r,t,"panningModel"),$e(r,t,"refDistance"),$e(r,t,"rolloffFactor"),r)};var xb=(n,e,t,r,o,i,s,a,c,l)=>(u,Y)=>{var R=Y,{coneInnerAngle:d,coneOuterAngle:f,coneOuterGain:h,distanceModel:p,maxDistance:m,orientationX:g,orientationY:v,orientationZ:C,panningModel:I,positionX:A,positionY:D,positionZ:w,refDistance:x,rolloffFactor:b}=R,V=xo(R,["coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor"]);let k=u.createPanner();if(V.channelCount>2||V.channelCountMode==="max")throw s();Ne(k,V);let X={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},N=t(u,O(y({},X),{channelInterpretation:"speakers",numberOfInputs:6})),K=r(u,O(y({},V),{gain:1})),W=r(u,O(y({},X),{gain:1})),ne=r(u,O(y({},X),{gain:0})),H=r(u,O(y({},X),{gain:0})),E=r(u,O(y({},X),{gain:0})),L=r(u,O(y({},X),{gain:0})),M=r(u,O(y({},X),{gain:0})),G=o(u,256,6,1),z=i(u,O(y({},X),{curve:new Float32Array([1,1]),oversample:"none"})),xe=[g,v,C],oe=[A,D,w],Fe=new Float32Array(1);G.onaudioprocess=({inputBuffer:ee})=>{let yn=[c(ee,Fe,0),c(ee,Fe,1),c(ee,Fe,2)];yn.some((_n,di)=>_n!==xe[di])&&(k.setOrientation(...yn),xe=yn);let nr=[c(ee,Fe,3),c(ee,Fe,4),c(ee,Fe,5)];nr.some((_n,di)=>_n!==oe[di])&&(k.setPosition(...nr),oe=nr)},Object.defineProperty(ne.gain,"defaultValue",{get:()=>0}),Object.defineProperty(H.gain,"defaultValue",{get:()=>0}),Object.defineProperty(E.gain,"defaultValue",{get:()=>0}),Object.defineProperty(L.gain,"defaultValue",{get:()=>0}),Object.defineProperty(M.gain,"defaultValue",{get:()=>0});let fe={get bufferSize(){},get channelCount(){return k.channelCount},set channelCount(ee){if(ee>2)throw s();K.channelCount=ee,k.channelCount=ee},get channelCountMode(){return k.channelCountMode},set channelCountMode(ee){if(ee==="max")throw s();K.channelCountMode=ee,k.channelCountMode=ee},get channelInterpretation(){return k.channelInterpretation},set channelInterpretation(ee){K.channelInterpretation=ee,k.channelInterpretation=ee},get coneInnerAngle(){return k.coneInnerAngle},set coneInnerAngle(ee){k.coneInnerAngle=ee},get coneOuterAngle(){return k.coneOuterAngle},set coneOuterAngle(ee){k.coneOuterAngle=ee},get coneOuterGain(){return k.coneOuterGain},set coneOuterGain(ee){if(ee<0||ee>1)throw e();k.coneOuterGain=ee},get context(){return k.context},get distanceModel(){return k.distanceModel},set distanceModel(ee){k.distanceModel=ee},get inputs(){return[K]},get maxDistance(){return k.maxDistance},set maxDistance(ee){if(ee<0)throw new RangeError;k.maxDistance=ee},get numberOfInputs(){return k.numberOfInputs},get numberOfOutputs(){return k.numberOfOutputs},get orientationX(){return W.gain},get orientationY(){return ne.gain},get orientationZ(){return H.gain},get panningModel(){return k.panningModel},set panningModel(ee){k.panningModel=ee},get positionX(){return E.gain},get positionY(){return L.gain},get positionZ(){return M.gain},get refDistance(){return k.refDistance},set refDistance(ee){if(ee<0)throw new RangeError;k.refDistance=ee},get rolloffFactor(){return k.rolloffFactor},set rolloffFactor(ee){if(ee<0)throw new RangeError;k.rolloffFactor=ee},addEventListener(...ee){return K.addEventListener(ee[0],ee[1],ee[2])},dispatchEvent(...ee){return K.dispatchEvent(ee[0])},removeEventListener(...ee){return K.removeEventListener(ee[0],ee[1],ee[2])}};d!==fe.coneInnerAngle&&(fe.coneInnerAngle=d),f!==fe.coneOuterAngle&&(fe.coneOuterAngle=f),h!==fe.coneOuterGain&&(fe.coneOuterGain=h),p!==fe.distanceModel&&(fe.distanceModel=p),m!==fe.maxDistance&&(fe.maxDistance=m),g!==fe.orientationX.value&&(fe.orientationX.value=g),v!==fe.orientationY.value&&(fe.orientationY.value=v),C!==fe.orientationZ.value&&(fe.orientationZ.value=C),I!==fe.panningModel&&(fe.panningModel=I),A!==fe.positionX.value&&(fe.positionX.value=A),D!==fe.positionY.value&&(fe.positionY.value=D),w!==fe.positionZ.value&&(fe.positionZ.value=w),x!==fe.refDistance&&(fe.refDistance=x),b!==fe.rolloffFactor&&(fe.rolloffFactor=b),(xe[0]!==1||xe[1]!==0||xe[2]!==0)&&k.setOrientation(...xe),(oe[0]!==0||oe[1]!==0||oe[2]!==0)&&k.setPosition(...oe);let tr=()=>{K.connect(k),n(K,z,0,0),z.connect(W).connect(N,0,0),z.connect(ne).connect(N,0,1),z.connect(H).connect(N,0,2),z.connect(E).connect(N,0,3),z.connect(L).connect(N,0,4),z.connect(M).connect(N,0,5),N.connect(G).connect(u.destination)},qr=()=>{K.disconnect(k),a(K,z,0,0),z.disconnect(W),W.disconnect(N),z.disconnect(ne),ne.disconnect(N),z.disconnect(H),H.disconnect(N),z.disconnect(E),E.disconnect(N),z.disconnect(L),L.disconnect(N),z.disconnect(M),M.disconnect(N),N.disconnect(G),G.disconnect(u.destination)};return l(Gn(fe,k),tr,qr)};var wb=n=>(e,{disableNormalization:t,imag:r,real:o})=>{let i=r instanceof Float32Array?r:new Float32Array(r),s=o instanceof Float32Array?o:new Float32Array(o),a=e.createPeriodicWave(s,i,{disableNormalization:t});if(Array.from(r).length<2)throw n();return a};var ta=(n,e,t,r)=>n.createScriptProcessor(e,t,r);var Cb=(n,e)=>(t,r)=>{let o=r.channelCountMode;if(o==="clamped-max")throw e();if(t.createStereoPanner===void 0)return n(t,r);let i=t.createStereoPanner();return Ne(i,r),qe(i,r,"pan"),Object.defineProperty(i,"channelCountMode",{get:()=>o,set:s=>{if(s!==o)throw e()}}),i};var Db=(n,e,t,r,o,i)=>{let a=new Float32Array([1,1]),c=Math.PI/2,l={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},u=O(y({},l),{oversample:"none"}),d=(p,m,g,v)=>{let C=new Float32Array(16385),I=new Float32Array(16385);for(let V=0;V<16385;V+=1){let Y=V/16384*c;C[V]=Math.cos(Y),I[V]=Math.sin(Y)}let A=t(p,O(y({},l),{gain:0})),D=r(p,O(y({},u),{curve:C})),w=r(p,O(y({},u),{curve:a})),x=t(p,O(y({},l),{gain:0})),b=r(p,O(y({},u),{curve:I}));return{connectGraph(){m.connect(A),m.connect(w.inputs===void 0?w:w.inputs[0]),m.connect(x),w.connect(g),g.connect(D.inputs===void 0?D:D.inputs[0]),g.connect(b.inputs===void 0?b:b.inputs[0]),D.connect(A.gain),b.connect(x.gain),A.connect(v,0,0),x.connect(v,0,1)},disconnectGraph(){m.disconnect(A),m.disconnect(w.inputs===void 0?w:w.inputs[0]),m.disconnect(x),w.disconnect(g),g.disconnect(D.inputs===void 0?D:D.inputs[0]),g.disconnect(b.inputs===void 0?b:b.inputs[0]),D.disconnect(A.gain),b.disconnect(x.gain),A.disconnect(v,0,0),x.disconnect(v,0,1)}}},f=(p,m,g,v)=>{let C=new Float32Array(16385),I=new Float32Array(16385),A=new Float32Array(16385),D=new Float32Array(16385),w=Math.floor(16385/2);for(let ne=0;ne<16385;ne+=1)if(ne>w){let H=(ne-w)/(16384-w)*c;C[ne]=Math.cos(H),I[ne]=Math.sin(H),A[ne]=0,D[ne]=1}else{let H=ne/(16384-w)*c;C[ne]=1,I[ne]=0,A[ne]=Math.cos(H),D[ne]=Math.sin(H)}let x=e(p,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),b=t(p,O(y({},l),{gain:0})),V=r(p,O(y({},u),{curve:C})),Y=t(p,O(y({},l),{gain:0})),R=r(p,O(y({},u),{curve:I})),k=r(p,O(y({},u),{curve:a})),X=t(p,O(y({},l),{gain:0})),N=r(p,O(y({},u),{curve:A})),K=t(p,O(y({},l),{gain:0})),W=r(p,O(y({},u),{curve:D}));return{connectGraph(){m.connect(x),m.connect(k.inputs===void 0?k:k.inputs[0]),x.connect(b,0),x.connect(Y,0),x.connect(X,1),x.connect(K,1),k.connect(g),g.connect(V.inputs===void 0?V:V.inputs[0]),g.connect(R.inputs===void 0?R:R.inputs[0]),g.connect(N.inputs===void 0?N:N.inputs[0]),g.connect(W.inputs===void 0?W:W.inputs[0]),V.connect(b.gain),R.connect(Y.gain),N.connect(X.gain),W.connect(K.gain),b.connect(v,0,0),X.connect(v,0,0),Y.connect(v,0,1),K.connect(v,0,1)},disconnectGraph(){m.disconnect(x),m.disconnect(k.inputs===void 0?k:k.inputs[0]),x.disconnect(b,0),x.disconnect(Y,0),x.disconnect(X,1),x.disconnect(K,1),k.disconnect(g),g.disconnect(V.inputs===void 0?V:V.inputs[0]),g.disconnect(R.inputs===void 0?R:R.inputs[0]),g.disconnect(N.inputs===void 0?N:N.inputs[0]),g.disconnect(W.inputs===void 0?W:W.inputs[0]),V.disconnect(b.gain),R.disconnect(Y.gain),N.disconnect(X.gain),W.disconnect(K.gain),b.disconnect(v,0,0),X.disconnect(v,0,0),Y.disconnect(v,0,1),K.disconnect(v,0,1)}}},h=(p,m,g,v,C)=>{if(m===1)return d(p,g,v,C);if(m===2)return f(p,g,v,C);throw o()};return(p,I)=>{var A=I,{channelCount:m,channelCountMode:g,pan:v}=A,C=xo(A,["channelCount","channelCountMode","pan"]);if(g==="max")throw o();let D=n(p,O(y({},C),{channelCount:1,channelCountMode:g,numberOfInputs:2})),w=t(p,O(y({},C),{channelCount:m,channelCountMode:g,gain:1})),x=t(p,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:v}),{connectGraph:b,disconnectGraph:V}=h(p,m,w,x,D);Object.defineProperty(x.gain,"defaultValue",{get:()=>0}),Object.defineProperty(x.gain,"maxValue",{get:()=>1}),Object.defineProperty(x.gain,"minValue",{get:()=>-1});let Y={get bufferSize(){},get channelCount(){return w.channelCount},set channelCount(N){w.channelCount!==N&&(R&&V(),{connectGraph:b,disconnectGraph:V}=h(p,N,w,x,D),R&&b()),w.channelCount=N},get channelCountMode(){return w.channelCountMode},set channelCountMode(N){if(N==="clamped-max"||N==="max")throw o();w.channelCountMode=N},get channelInterpretation(){return w.channelInterpretation},set channelInterpretation(N){w.channelInterpretation=N},get context(){return w.context},get inputs(){return[w]},get numberOfInputs(){return w.numberOfInputs},get numberOfOutputs(){return w.numberOfOutputs},get pan(){return x.gain},addEventListener(...N){return w.addEventListener(N[0],N[1],N[2])},dispatchEvent(...N){return w.dispatchEvent(N[0])},removeEventListener(...N){return w.removeEventListener(N[0],N[1],N[2])}},R=!1,k=()=>{b(),R=!0},X=()=>{V(),R=!1};return i(Gn(Y,D),k,X)}};var bb=(n,e,t,r,o,i,s)=>(a,c)=>{let l=a.createWaveShaper();if(i!==null&&i.name==="webkitAudioContext"&&a.createGain().gain.automationRate===void 0)return t(a,c);Ne(l,c);let u=c.curve===null||c.curve instanceof Float32Array?c.curve:new Float32Array(c.curve);if(u!==null&&u.length<2)throw e();$e(l,{curve:u},"curve"),$e(l,c,"oversample");let d=null,f=!1;return s(l,"curve",m=>()=>m.call(l),m=>g=>(m.call(l,g),f&&(r(g)&&d===null?d=n(a,l):!r(g)&&d!==null&&(d(),d=null)),g)),o(l,()=>{f=!0,r(l.curve)&&(d=n(a,l))},()=>{f=!1,d!==null&&(d(),d=null)})};var Sb=(n,e,t,r,o)=>(i,l)=>{var u=l,{curve:s,oversample:a}=u,c=xo(u,["curve","oversample"]);let d=i.createWaveShaper(),f=i.createWaveShaper();Ne(d,c),Ne(f,c);let h=t(i,O(y({},c),{gain:1})),p=t(i,O(y({},c),{gain:-1})),m=t(i,O(y({},c),{gain:1})),g=t(i,O(y({},c),{gain:-1})),v=null,C=!1,I=null,A={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(x){h.channelCount=x,p.channelCount=x,d.channelCount=x,m.channelCount=x,f.channelCount=x,g.channelCount=x},get channelCountMode(){return d.channelCountMode},set channelCountMode(x){h.channelCountMode=x,p.channelCountMode=x,d.channelCountMode=x,m.channelCountMode=x,f.channelCountMode=x,g.channelCountMode=x},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(x){h.channelInterpretation=x,p.channelInterpretation=x,d.channelInterpretation=x,m.channelInterpretation=x,f.channelInterpretation=x,g.channelInterpretation=x},get context(){return d.context},get curve(){return I},set curve(x){if(x!==null&&x.length<2)throw e();if(x===null)d.curve=x,f.curve=x;else{let b=x.length,V=new Float32Array(b+2-b%2),Y=new Float32Array(b+2-b%2);V[0]=x[0],Y[0]=-x[b-1];let R=Math.ceil((b+1)/2),k=(b+1)/2-1;for(let X=1;X<R;X+=1){let N=X/R*k,K=Math.floor(N),W=Math.ceil(N);V[X]=K===W?x[K]:(1-(N-K))*x[K]+(1-(W-N))*x[W],Y[X]=K===W?-x[b-1-K]:-((1-(N-K))*x[b-1-K])-(1-(W-N))*x[b-1-W]}V[R]=b%2===1?x[R-1]:(x[R-2]+x[R-1])/2,d.curve=V,f.curve=Y}I=x,C&&(r(I)&&v===null?v=n(i,h):v!==null&&(v(),v=null))},get inputs(){return[h]},get numberOfInputs(){return d.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get oversample(){return d.oversample},set oversample(x){d.oversample=x,f.oversample=x},addEventListener(...x){return h.addEventListener(x[0],x[1],x[2])},dispatchEvent(...x){return h.dispatchEvent(x[0])},removeEventListener(...x){return h.removeEventListener(x[0],x[1],x[2])}};s!==null&&(A.curve=s instanceof Float32Array?s:new Float32Array(s)),a!==A.oversample&&(A.oversample=a);let D=()=>{h.connect(d).connect(m),h.connect(p).connect(f).connect(g).connect(m),C=!0,r(I)&&(v=n(i,h))},w=()=>{h.disconnect(d),d.disconnect(m),h.disconnect(p),p.disconnect(f),f.disconnect(g),g.disconnect(m),C=!1,v!==null&&(v(),v=null)};return o(Gn(A,m),D,w)};var Ut=()=>new DOMException("","NotSupportedError");var aF={numberOfChannels:1},Tb=(n,e,t,r,o)=>class extends n{constructor(s,a,c){let l;if(typeof s=="number"&&a!==void 0&&c!==void 0)l={length:a,numberOfChannels:s,sampleRate:c};else if(typeof s=="object")l=s;else throw new Error("The given parameters are not valid.");let{length:u,numberOfChannels:d,sampleRate:f}=y(y({},aF),l),h=r(d,u,f);e(hr,()=>hr(h))||h.addEventListener("statechange",(()=>{let p=0,m=g=>{this._state==="running"&&(p>0?(h.removeEventListener("statechange",m),g.stopImmediatePropagation(),this._waitForThePromiseToSettle(g)):p+=1)};return m})()),super(h,d),this._length=u,this._nativeOfflineAudioContext=h,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(t()):(this._state="running",o(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,Yo(this)}))}_waitForThePromiseToSettle(s){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(s):setTimeout(()=>this._waitForThePromiseToSettle(s))}};var cF={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},Eb=(n,e,t,r,o,i,s)=>class extends n{constructor(c,l){let u=o(c),d=y(y({},cF),l),f=t(u,d),h=i(u),p=h?r():null,m=c.sampleRate/2;super(c,!1,f,p),this._detune=e(this,h,f.detune,153600,-153600),this._frequency=e(this,h,f.frequency,m,-m),this._nativeOscillatorNode=f,this._onended=null,this._oscillatorNodeRenderer=p,this._oscillatorNodeRenderer!==null&&d.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=d.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(c){let l=typeof c=="function"?s(this,c):null;this._nativeOscillatorNode.onended=l;let u=this._nativeOscillatorNode.onended;this._onended=u!==null&&u===l?c:u}get type(){return this._nativeOscillatorNode.type}set type(c){this._nativeOscillatorNode.type=c,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(c){this._nativeOscillatorNode.setPeriodicWave(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=c)}start(c=0){if(this._nativeOscillatorNode.start(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=c),this.context.state!=="closed"){ur(this);let l=()=>{this._nativeOscillatorNode.removeEventListener("ended",l),dn(this)&&Pr(this)};this._nativeOscillatorNode.addEventListener("ended",l)}}stop(c=0){this._nativeOscillatorNode.stop(c),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=c)}};var Ib=(n,e,t,r,o)=>()=>{let i=new WeakMap,s=null,a=null,c=null,l=(u,d)=>te(void 0,null,function*(){let f=t(u),h=Be(f,d);if(!h){let p={channelCount:f.channelCount,channelCountMode:f.channelCountMode,channelInterpretation:f.channelInterpretation,detune:f.detune.value,frequency:f.frequency.value,periodicWave:s===null?void 0:s,type:f.type};f=e(d,p),a!==null&&f.start(a),c!==null&&f.stop(c)}return i.set(d,f),h?(yield n(d,u.detune,f.detune),yield n(d,u.frequency,f.frequency)):(yield r(d,u.detune,f.detune),yield r(d,u.frequency,f.frequency)),yield o(u,d,f),f});return{set periodicWave(u){s=u},set start(u){a=u},set stop(u){c=u},render(u,d){let f=i.get(d);return f!==void 0?Promise.resolve(f):l(u,d)}}};var lF={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},Mb=(n,e,t,r,o,i,s)=>class extends n{constructor(c,l){let u=o(c),d=y(y({},lF),l),f=t(u,d),h=i(u),p=h?r():null;super(c,!1,f,p),this._nativePannerNode=f,this._orientationX=e(this,h,f.orientationX,ut,mt),this._orientationY=e(this,h,f.orientationY,ut,mt),this._orientationZ=e(this,h,f.orientationZ,ut,mt),this._positionX=e(this,h,f.positionX,ut,mt),this._positionY=e(this,h,f.positionY,ut,mt),this._positionZ=e(this,h,f.positionZ,ut,mt),s(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(c){this._nativePannerNode.coneInnerAngle=c}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(c){this._nativePannerNode.coneOuterAngle=c}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(c){this._nativePannerNode.coneOuterGain=c}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(c){this._nativePannerNode.distanceModel=c}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(c){this._nativePannerNode.maxDistance=c}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(c){this._nativePannerNode.panningModel=c}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(c){this._nativePannerNode.refDistance=c}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(c){this._nativePannerNode.rolloffFactor=c}};var Ab=(n,e,t,r,o,i,s,a,c,l)=>()=>{let u=new WeakMap,d=null,f=(h,p)=>te(void 0,null,function*(){let m=null,g=i(h),v={channelCount:g.channelCount,channelCountMode:g.channelCountMode,channelInterpretation:g.channelInterpretation},C=O(y({},v),{coneInnerAngle:g.coneInnerAngle,coneOuterAngle:g.coneOuterAngle,coneOuterGain:g.coneOuterGain,distanceModel:g.distanceModel,maxDistance:g.maxDistance,panningModel:g.panningModel,refDistance:g.refDistance,rolloffFactor:g.rolloffFactor}),I=Be(g,p);if("bufferSize"in g)m=r(p,O(y({},v),{gain:1}));else if(!I){let A=O(y({},C),{orientationX:g.orientationX.value,orientationY:g.orientationY.value,orientationZ:g.orientationZ.value,positionX:g.positionX.value,positionY:g.positionY.value,positionZ:g.positionZ.value});g=o(p,A)}if(u.set(p,m===null?g:m),m!==null){if(d===null){if(s===null)throw new Error("Missing the native OfflineAudioContext constructor.");let R=new s(6,h.context.length,p.sampleRate),k=e(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});k.connect(R.destination),d=te(void 0,null,function*(){let X=yield Promise.all([h.orientationX,h.orientationY,h.orientationZ,h.positionX,h.positionY,h.positionZ].map((N,K)=>te(void 0,null,function*(){let W=t(R,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:K===0?1:0});return yield a(R,N,W.offset),W})));for(let N=0;N<6;N+=1)X[N].connect(k,0,N),X[N].start(0);return l(R)})}let A=yield d,D=r(p,O(y({},v),{gain:1}));yield c(h,p,D);let w=[];for(let R=0;R<A.numberOfChannels;R+=1)w.push(A.getChannelData(R));let x=[w[0][0],w[1][0],w[2][0]],b=[w[3][0],w[4][0],w[5][0]],V=r(p,O(y({},v),{gain:1})),Y=o(p,O(y({},C),{orientationX:x[0],orientationY:x[1],orientationZ:x[2],positionX:b[0],positionY:b[1],positionZ:b[2]}));D.connect(V).connect(Y.inputs[0]),Y.connect(m);for(let R=128;R<A.length;R+=128){let k=[w[0][R],w[1][R],w[2][R]],X=[w[3][R],w[4][R],w[5][R]];if(k.some((N,K)=>N!==x[K])||X.some((N,K)=>N!==b[K])){x=k,b=X;let N=R/p.sampleRate;V.gain.setValueAtTime(0,N),V=r(p,O(y({},v),{gain:0})),Y=o(p,O(y({},C),{orientationX:x[0],orientationY:x[1],orientationZ:x[2],positionX:b[0],positionY:b[1],positionZ:b[2]})),V.gain.setValueAtTime(1,N),D.connect(V).connect(Y.inputs[0]),Y.connect(m)}}return m}return I?(yield n(p,h.orientationX,g.orientationX),yield n(p,h.orientationY,g.orientationY),yield n(p,h.orientationZ,g.orientationZ),yield n(p,h.positionX,g.positionX),yield n(p,h.positionY,g.positionY),yield n(p,h.positionZ,g.positionZ)):(yield a(p,h.orientationX,g.orientationX),yield a(p,h.orientationY,g.orientationY),yield a(p,h.orientationZ,g.orientationZ),yield a(p,h.positionX,g.positionX),yield a(p,h.positionY,g.positionY),yield a(p,h.positionZ,g.positionZ)),zn(g)?yield c(h,p,g.inputs[0]):yield c(h,p,g),g});return{render(h,p){let m=u.get(p);return m!==void 0?Promise.resolve(m):f(h,p)}}};var uF={disableNormalization:!1},Nb=(n,e,t,r)=>class Ob{constructor(i,s){let a=e(i),c=r(y(y({},uF),s)),l=n(a,c);return t.add(l),l}static[Symbol.hasInstance](i){return i!==null&&typeof i=="object"&&Object.getPrototypeOf(i)===Ob.prototype||t.has(i)}};var kb=(n,e)=>(t,r,o)=>(n(r).replay(o),e(r,t,o));var Rb=(n,e,t)=>(r,o,i)=>te(void 0,null,function*(){let s=n(r);yield Promise.all(s.activeInputs.map((a,c)=>Array.from(a).map(d=>te(void 0,[d],function*([l,u]){let h=yield e(l).render(l,o),p=r.context.destination;!t(l)&&(r!==p||!t(r))&&h.connect(i,u,c)}))).reduce((a,c)=>[...a,...c],[]))});var Fb=(n,e,t)=>(r,o,i)=>te(void 0,null,function*(){let s=e(r);yield Promise.all(Array.from(s.activeInputs).map(l=>te(void 0,[l],function*([a,c]){let d=yield n(a).render(a,o);t(a)||d.connect(i,c)})))});var Pb=(n,e,t,r)=>o=>n(hr,()=>hr(o))?Promise.resolve(n(r,r)).then(i=>{if(!i){let s=t(o,512,0,1);o.oncomplete=()=>{s.onaudioprocess=null,s.disconnect()},s.onaudioprocess=()=>o.currentTime,s.connect(o.destination)}return o.startRendering()}):new Promise(i=>{let s=e(o,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});o.oncomplete=a=>{s.disconnect(),i(a.renderedBuffer)},s.connect(o.destination),o.startRendering()});var Vb=n=>(e,t)=>{n.set(e,t)};var Lb=n=>(e,t)=>n.set(e,t);var jb=(n,e,t,r,o,i,s,a)=>(c,l)=>t(c).render(c,l).then(()=>Promise.all(Array.from(r(l)).map(u=>t(u).render(u,l)))).then(()=>o(l)).then(u=>(typeof u.copyFromChannel!="function"?(s(u),qs(u)):e(i,()=>i(u))||a(u),n.add(u),u));var dF={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},Bb=(n,e,t,r,o,i)=>class extends n{constructor(a,c){let l=o(a),u=y(y({},dF),c),d=t(l,u),f=i(l),h=f?r():null;super(a,!1,d,h),this._pan=e(this,f,d.pan)}get pan(){return this._pan}};var $b=(n,e,t,r,o)=>()=>{let i=new WeakMap,s=(a,c)=>te(void 0,null,function*(){let l=t(a),u=Be(l,c);if(!u){let d={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,pan:l.pan.value};l=e(c,d)}return i.set(c,l),u?yield n(c,a.pan,l.pan):yield r(c,a.pan,l.pan),zn(l)?yield o(a,c,l.inputs[0]):yield o(a,c,l),l});return{render(a,c){let l=i.get(c);return l!==void 0?Promise.resolve(l):s(a,c)}}};var Hb=n=>()=>{if(n===null)return!1;try{new n({length:1,sampleRate:44100})}catch{return!1}return!0};var Ub=(n,e)=>()=>te(void 0,null,function*(){if(n===null)return!0;if(e===null)return!1;let t=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),r=new e(1,128,44100),o=URL.createObjectURL(t),i=!1,s=!1;try{yield r.audioWorklet.addModule(o);let a=new n(r,"a",{numberOfOutputs:0}),c=r.createOscillator();a.port.onmessage=()=>i=!0,a.onprocessorerror=()=>s=!0,c.connect(a),c.start(0),yield r.startRendering()}catch{}finally{URL.revokeObjectURL(o)}return i&&!s});var qb=(n,e)=>()=>{if(e===null)return Promise.resolve(!1);let t=new e(1,1,44100),r=n(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(o=>{t.oncomplete=()=>{r.disconnect(),o(t.currentTime!==0)},t.startRendering()})};var Ng=()=>new DOMException("","UnknownError");var hF={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},Wb=(n,e,t,r,o,i,s)=>class extends n{constructor(c,l){let u=o(c),d=y(y({},hF),l),f=t(u,d),p=i(u)?r():null;super(c,!0,f,p),this._isCurveNullified=!1,this._nativeWaveShaperNode=f,s(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(c){if(c===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(c.length<2)throw e();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=c}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(c){this._nativeWaveShaperNode.oversample=c}};var zb=(n,e,t)=>()=>{let r=new WeakMap,o=(i,s)=>te(void 0,null,function*(){let a=e(i);if(!Be(a,s)){let l={channelCount:a.channelCount,channelCountMode:a.channelCountMode,channelInterpretation:a.channelInterpretation,curve:a.curve,oversample:a.oversample};a=n(s,l)}return r.set(s,a),zn(a)?yield t(i,s,a.inputs[0]):yield t(i,s,a),a});return{render(i,s){let a=r.get(s);return a!==void 0?Promise.resolve(a):o(i,s)}}};var Gb=()=>typeof window>"u"?null:window;var Zb=(n,e)=>t=>{t.copyFromChannel=(r,o,i=0)=>{let s=n(i),a=n(o);if(a>=t.numberOfChannels)throw e();let c=t.length,l=t.getChannelData(a),u=r.length;for(let d=s<0?-s:0;d+s<c&&d<u;d+=1)r[d]=l[d+s]},t.copyToChannel=(r,o,i=0)=>{let s=n(i),a=n(o);if(a>=t.numberOfChannels)throw e();let c=t.length,l=t.getChannelData(a),u=r.length;for(let d=s<0?-s:0;d+s<c&&d<u;d+=1)l[d+s]=r[d]}};var Yb=n=>e=>{e.copyFromChannel=(t=>(r,o,i=0)=>{let s=n(i),a=n(o);if(s<e.length)return t.call(e,r,a,s)})(e.copyFromChannel),e.copyToChannel=(t=>(r,o,i=0)=>{let s=n(i),a=n(o);if(s<e.length)return t.call(e,r,a,s)})(e.copyToChannel)};var Qb=n=>(e,t)=>{let r=t.createBuffer(1,1,44100);e.buffer===null&&(e.buffer=r),n(e,"buffer",o=>()=>{let i=o.call(e);return i===r?null:i},o=>i=>o.call(e,i===null?r:i))};var Xb=(n,e)=>(t,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw n()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw n()}});let o=t.createBufferSource();e(r,()=>{let a=r.numberOfInputs;for(let c=0;c<a;c+=1)o.connect(r,0,c)},()=>o.disconnect(r))};var Og=(n,e,t)=>n.copyFromChannel===void 0?n.getChannelData(t)[0]:(n.copyFromChannel(e,t),e[0]);var kg=n=>{if(n===null)return!1;let e=n.length;return e%2!==0?n[Math.floor(e/2)]!==0:n[e/2-1]+n[e/2]!==0};var na=(n,e,t,r)=>{let o=n;for(;!o.hasOwnProperty(e);)o=Object.getPrototypeOf(o);let{get:i,set:s}=Object.getOwnPropertyDescriptor(o,e);Object.defineProperty(n,e,{get:t(i),set:r(s)})};var Kb=n=>O(y({},n),{outputChannelCount:n.outputChannelCount!==void 0?n.outputChannelCount:n.numberOfInputs===1&&n.numberOfOutputs===1?[n.channelCount]:Array.from({length:n.numberOfOutputs},()=>1)});var Jb=n=>O(y({},n),{channelCount:n.numberOfOutputs});var eS=n=>{let{imag:e,real:t}=n;return e===void 0?t===void 0?O(y({},n),{imag:[0,0],real:[0,0]}):O(y({},n),{imag:Array.from(t,()=>0),real:t}):t===void 0?O(y({},n),{imag:e,real:Array.from(e,()=>0)}):O(y({},n),{imag:e,real:t})};var Rg=(n,e,t)=>{try{n.setValueAtTime(e,t)}catch(r){if(r.code!==9)throw r;Rg(n,e,t+1e-7)}};var tS=n=>{let e=n.createBufferSource();e.start();try{e.start()}catch{return!0}return!1};var nS=n=>{let e=n.createBufferSource(),t=n.createBuffer(1,1,44100);e.buffer=t;try{e.start(0,1)}catch{return!1}return!0};var rS=n=>{let e=n.createBufferSource();e.start();try{e.stop()}catch{return!1}return!0};var Gd=n=>{let e=n.createOscillator();try{e.start(-1)}catch(t){return t instanceof RangeError}return!1};var Fg=n=>{let e=n.createBuffer(1,1,44100),t=n.createBufferSource();t.buffer=e,t.start(),t.stop();try{return t.stop(),!0}catch{return!1}};var Zd=n=>{let e=n.createOscillator();try{e.stop(-1)}catch(t){return t instanceof RangeError}return!1};var oS=n=>{let{port1:e,port2:t}=new MessageChannel;try{e.postMessage(n)}finally{e.close(),t.close()}};var iS=n=>{n.start=(e=>(t=0,r=0,o)=>{let i=n.buffer,s=i===null?r:Math.min(i.duration,r);i!==null&&s>i.duration-.5/n.context.sampleRate?e.call(n,t,0,0):e.call(n,t,s,o)})(n.start)};var Pg=(n,e)=>{let t=e.createGain();n.connect(t);let r=(o=>()=>{o.call(n,t),n.removeEventListener("ended",r)})(n.disconnect);n.addEventListener("ended",r),Gn(n,t),n.stop=(o=>{let i=!1;return(s=0)=>{if(i)try{o.call(n,s)}catch{t.gain.setValueAtTime(0,s)}else o.call(n,s),i=!0}})(n.stop)};var Vi=(n,e)=>t=>{let r={value:n};return Object.defineProperties(t,{currentTarget:r,target:r}),typeof e=="function"?e.call(n,t):e.handleEvent.call(n,t)};var fF=Zw(dr),pF=oC(dr),mF=eD(Go),aS=new WeakMap,gF=gD(aS),Zn=FC(new Map,new WeakMap),Vr=Gb(),cS=WD(Zn,Wn),Vg=mD(At),qt=Rb(At,Vg,fo),vF=cC(cS,Qe,qt),et=_D(Hs),po=vb(Vr),Xe=RD(po),lS=new WeakMap,uS=lD(Vi),ra=YD(Vr),Lg=AD(ra),jg=ND(Vr),dS=OD(Vr),zc=XD(Vr),gt=SC(Yw(Fd),rC(fF,pF,Ws,mF,zs,At,gF,Fr,Qe,dr,dn,fo,Gs),Zn,SD(Hc,zs,At,Qe,Fi,dn),Wn,Xs,Ut,XC(Ws,Hc,At,Qe,Fi,et,dn,Xe),rD(lS,At,Ct),uS,et,Lg,jg,dS,Xe,zc),yF=aC(gt,vF,Wn,cS,et,Xe);var Bg=new WeakSet,sS=zD(Vr),hS=WC(new Uint32Array(1)),$g=Zb(hS,Wn),Hg=Yb(hS),_F=lC(Bg,Zn,Ut,sS,po,Hb(sS),$g,Hg);var Yd=iC(hn),fS=Fb(Vg,Zo,fo),Lr=BC(fS),oa=ZD(Yd,Zn,tS,nS,rS,Gd,Fg,Zd,iS,Qb(na),Pg),jr=kb(vD(Zo),fS),xF=hC(Lr,oa,Qe,jr,qt),fr=EC(Qw(Pd),lS,$c,IC,Dn.createCancelAndHoldAutomationEvent,Dn.createCancelScheduledValuesAutomationEvent,Dn.createExponentialRampToValueAutomationEvent,Dn.createLinearRampToValueAutomationEvent,Dn.createSetTargetAutomationEvent,Dn.createSetValueAutomationEvent,Dn.createSetValueCurveAutomationEvent,ra,Rg),wF=dC(gt,xF,fr,nt,oa,et,Xe,Vi);var CF=xC(gt,wC,Wn,nt,QD(hn,na),et,Xe,qt),DF=RC(Lr,Mg,Qe,jr,qt),Li=Lb(aS),bF=kC(gt,fr,DF,Xs,Mg,et,Xe,Li),Xo=UD(dr,jg),SF=Xb(nt,Xo),Ko=ob(ra,SF),TF=VC(Ko,Qe,qt),EF=PC(gt,TF,Ko,et,Xe),IF=jC(ea,Qe,qt),MF=LC(gt,IF,ea,et,Xe,Jb),AF=ab(Yd,oa,hn,Xo),ia=sb(Yd,Zn,AF,Gd,Zd),NF=qC(Lr,ia,Qe,jr,qt),OF=UC(gt,fr,NF,ia,et,Xe,Vi),pS=cb(Ut,na),kF=GC(pS,Qe,qt),RF=zC(gt,kF,pS,et,Xe,Li),FF=JC(Lr,Ag,Qe,jr,qt),PF=KC(gt,fr,FF,Ag,et,Xe,Li),mS=lb(Ut),VF=sD(Lr,mS,Qe,jr,qt),LF=iD(gt,fr,VF,mS,Ut,et,Xe,Li),jF=fD(Lr,hn,Qe,jr,qt),BF=hD(gt,fr,jF,hn,et,Xe),$F=hb(Xs,nt,ta,Ut),Qd=Pb(Zn,hn,ta,qb(hn,po)),HF=bD(oa,Qe,po,qt,Qd),UF=ub($F),qF=DD(gt,UF,HF,et,Xe,Li),WF=CC(fr,Ko,ia,ta,Ut,Og,Xe,na),gS=new WeakMap,Ug=$D(CF,WF,uS,Xe,gS,Vi),vS=yb(Yd,Zn,Gd,Fg,Zd,Pg),zF=Ib(Lr,vS,Qe,jr,qt),GF=Eb(gt,fr,vS,zF,et,Xe,Vi),yS=HC(oa),ZF=Sb(yS,nt,hn,kg,Xo),Xd=bb(yS,nt,ZF,kg,Xo,ra,na),YF=xb(Ws,nt,Ko,hn,ta,Xd,Ut,zs,Og,Xo),_S=_b(YF),QF=Ab(Lr,Ko,ia,hn,_S,Qe,po,jr,qt,Qd),XF=Mb(gt,fr,_S,QF,et,Xe,Li),KF=wb(Wn),JF=Nb(KF,et,new WeakSet,eS),eP=Db(Ko,ea,hn,Xd,Ut,Xo),xS=Cb(eP,Ut),tP=$b(Lr,xS,Qe,jr,qt),nP=Bb(gt,fr,xS,tP,et,Xe),rP=zb(Xd,Qe,qt),oP=Wb(gt,nt,Xd,rP,et,Xe,Li),wS=FD(Vr),qg=uD(Vr),CS=new WeakMap,iP=xD(CS,po),sP=wS?nC(Zn,Ut,cD(Vr),qg,dD(Gw),et,iP,Xe,zc,new WeakMap,new WeakMap,Ub(zc,po),Vr):void 0,aP=kD(Lg,Xe),cP=QC(Bg,Zn,YC,aD,new WeakSet,et,aP,Us,hr,$g,Hg),DS=OC(sP,yF,_F,wF,bF,EF,MF,OF,RF,cP,PF,LF,BF,qF,Ug,GF,XF,JF,nP,oP),lP=PD(gt,fb,et,Xe),uP=VD(gt,pb,et,Xe),dP=LD(gt,mb,et,Xe),hP=gb(nt,Xe),fP=jD(gt,hP,et),bS=_C(DS,nt,Ut,Ng,lP,uP,dP,fP,ra);var Wg=wD(gS),pP=sC(Wg),SS=$C(Wn),mP=tD(Wg),TS=oD(Wn),ES=new WeakMap,gP=pD(ES,Ct),vP=rb(SS,Wn,nt,Ko,ea,ia,hn,ta,Ut,TS,qg,gP,Xo),yP=JD(nt,vP,hn,Ut,Xo),_P=NC(Lr,SS,oa,Ko,ea,ia,hn,mP,TS,qg,Qe,zc,po,jr,qt,Qd),xP=yD(CS),wP=Vb(ES),zg=wS?MC(pP,gt,fr,_P,yP,At,xP,et,Xe,zc,Kb,wP,oS,Vi):void 0;var Iae=BD(nt,Ut,Ng,Ug,ra);var IS=ZC(Ut,po),MS=jb(Bg,Zn,Vg,Wg,Qd,Us,$g,Hg),Mae=HD(Zn,nt,IS,Ug,MS);var AS=Tb(DS,Zn,nt,IS,MS);var NS=TD(Hs,Lg),OS=ED($s,jg),kS=ID($c,dS),RS=MD(Hs,Xe);function q(n,e){if(!n)throw new Error(e)}function Nt(n,e,t=1/0){if(!(e<=n&&n<=t))throw new RangeError(`Value must be within [${e}, ${t}], got: ${n}`)}function Kd(n){!n.isOffline&&n.state!=="running"&&sa('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}var FS=console;function PS(...n){FS.log(...n)}function sa(...n){FS.warn(...n)}function Dt(n){return typeof n>"u"}function de(n){return!Dt(n)}function VS(n){return typeof n=="function"}function Wt(n){return typeof n=="number"}function pr(n){return Object.prototype.toString.call(n)==="[object Object]"&&n.constructor===Object}function Gg(n){return typeof n=="boolean"}function st(n){return Array.isArray(n)}function Vt(n){return typeof n=="string"}function Gc(n){return Vt(n)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(n)}function LS(n){return new bS(n)}function jS(n,e,t){return new AS(n,e,t)}var Br=typeof self=="object"?self:null,BS=Br&&(Br.hasOwnProperty("AudioContext")||Br.hasOwnProperty("webkitAudioContext"));function $S(n,e,t){return q(de(zg),"This node only works in a secure context (https or localhost)"),new zg(n,e,t)}var Jd=class{constructor(e,t,r){this._callback=e,this._type=t,this._updateInterval=r,this._createClock()}_createWorker(){let e=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),t=URL.createObjectURL(e),r=new Worker(t);r.onmessage=this._callback.bind(this),this._worker=r}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(e){this._updateInterval=Math.max(e,128/44100),this._type==="worker"&&this._worker.postMessage(Math.max(e*1e3,1))}get type(){return this._type}set type(e){this._disposeClock(),this._type=e,this._createClock()}dispose(){this._disposeClock()}};function mr(n){return kS(n)}function $r(n){return OS(n)}function aa(n){return RS(n)}function Jo(n){return NS(n)}function eh(n){return n instanceof AudioBuffer}function bP(n,e){return n==="value"||mr(e)||$r(e)||eh(e)}function Yn(n,...e){if(!e.length)return n;let t=e.shift();if(pr(n)&&pr(t))for(let r in t)bP(r,t[r])?n[r]=t[r]:pr(t[r])?(n[r]||Object.assign(n,{[r]:{}}),Yn(n[r],t[r])):Object.assign(n,{[r]:t[r]});return Yn(n,...e)}function HS(n,e){return n.length===e.length&&n.every((t,r)=>e[r]===t)}function _(n,e,t=[],r){let o={},i=Array.from(e);if(pr(i[0])&&r&&!Reflect.has(i[0],r)&&(Object.keys(i[0]).some(a=>Reflect.has(n,a))||(Yn(o,{[r]:i[0]}),t.splice(t.indexOf(r),1),i.shift())),i.length===1&&pr(i[0]))Yn(o,i[0]);else for(let s=0;s<t.length;s++)de(i[s])&&(o[t[s]]=i[s]);return Yn(n,o)}function US(n){return n.constructor.getDefaults()}function On(n,e){return Dt(n)?e:n}function fn(n,e){return e.forEach(t=>{Reflect.has(n,t)&&delete n[t]}),n}var Kt=(()=>{class n{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...t){(this.debug||Br&&this.toString()===Br.TONE_DEBUG_CLASS)&&PS(this,...t)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}return n.version=Ac,n})();function ca(n,e){return n>e+1e-6}function Zc(n,e){return ca(n,e)||pn(n,e)}function th(n,e){return n+1e-6<e}function pn(n,e){return Math.abs(n-e)<1e-6}function Zg(n,e,t){return Math.max(Math.min(n,t),e)}var Lt=class n extends Kt{constructor(){super(),this.name="Timeline",this._timeline=[];let e=_(n.getDefaults(),arguments,["memory"]);this.memory=e.memory,this.increasing=e.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(e){if(q(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){let t=this._timeline[this.length-1];q(Zc(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{let t=this._search(e.time);this._timeline.splice(t+1,0,e)}if(this.length>this.memory){let t=this.length-this.memory;this._timeline.splice(0,t)}return this}remove(e){let t=this._timeline.indexOf(e);return t!==-1&&this._timeline.splice(t,1),this}get(e,t="time"){let r=this._search(e,t);return r!==-1?this._timeline[r]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(e,t="time"){let r=this._search(e,t);return r+1<this._timeline.length?this._timeline[r+1]:null}getBefore(e){let t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];let r=this._search(e);return r-1>=0?this._timeline[r-1]:null}cancel(e){if(this._timeline.length>1){let t=this._search(e);if(t>=0)if(pn(this._timeline[t].time,e)){for(let r=t;r>=0&&pn(this._timeline[r].time,e);r--)t=r;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else this._timeline.length===1&&Zc(this._timeline[0].time,e)&&(this._timeline=[]);return this}cancelBefore(e){let t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this}previousEvent(e){let t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null}_search(e,t="time"){if(this._timeline.length===0)return-1;let r=0,o=this._timeline.length,i=o;if(o>0&&this._timeline[o-1][t]<=e)return o-1;for(;r<i;){let s=Math.floor(r+(i-r)/2),a=this._timeline[s],c=this._timeline[s+1];if(pn(a[t],e)){for(let l=s;l<this._timeline.length;l++){let u=this._timeline[l];if(pn(u[t],e))s=l;else break}return s}else{if(th(a[t],e)&&ca(c[t],e))return s;ca(a[t],e)?i=s:r=s+1}}return-1}_iterate(e,t=0,r=this._timeline.length-1){this._timeline.slice(t,r+1).forEach(e)}forEach(e){return this._iterate(e),this}forEachBefore(e,t){let r=this._search(e);return r!==-1&&this._iterate(t,0,r),this}forEachAfter(e,t){let r=this._search(e);return this._iterate(t,r+1),this}forEachBetween(e,t,r){let o=this._search(e),i=this._search(t);return o!==-1&&i!==-1?(this._timeline[o].time!==e&&(o+=1),this._timeline[i].time===t&&(i-=1),this._iterate(r,o,i)):o===-1&&this._iterate(r,0,i),this}forEachFrom(e,t){let r=this._search(e);for(;r>=0&&this._timeline[r].time>=e;)r--;return this._iterate(t,r+1),this}forEachAtTime(e,t){let r=this._search(e);if(r!==-1&&pn(this._timeline[r].time,e)){let o=r;for(let i=r;i>=0&&pn(this._timeline[i].time,e);i--)o=i;this._iterate(i=>{t(i)},o,r)}return this}dispose(){return super.dispose(),this._timeline=[],this}};var qS=[];function ei(n){qS.push(n)}function WS(n){qS.forEach(e=>e(n))}var zS=[];function ti(n){zS.push(n)}function GS(n){zS.forEach(e=>e(n))}var ni=class n extends Kt{constructor(){super(...arguments),this.name="Emitter"}on(e,t){return e.split(/\W+/).forEach(o=>{Dt(this._events)&&(this._events={}),this._events.hasOwnProperty(o)||(this._events[o]=[]),this._events[o].push(t)}),this}once(e,t){let r=(...o)=>{t(...o),this.off(e,r)};return this.on(e,r),this}off(e,t){return e.split(/\W+/).forEach(o=>{if(Dt(this._events)&&(this._events={}),this._events.hasOwnProperty(e))if(Dt(t))this._events[e]=[];else{let i=this._events[e];for(let s=i.length-1;s>=0;s--)i[s]===t&&i.splice(s,1)}}),this}emit(e,...t){if(this._events&&this._events.hasOwnProperty(e)){let r=this._events[e].slice(0);for(let o=0,i=r.length;o<i;o++)r[o].apply(this,t)}return this}static mixin(e){["on","once","off","emit"].forEach(t=>{let r=Object.getOwnPropertyDescriptor(n.prototype,t);Object.defineProperty(e.prototype,t,r)})}dispose(){return super.dispose(),this._events=void 0,this}};var la=class extends ni{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}};var ji=class n extends la{constructor(){super(),this.name="Context",this._constants=new Map,this._timeouts=new Lt,this._timeoutIds=0,this._initialized=!1,this.isOffline=!1,this._workletModules=new Map;let e=_(n.getDefaults(),arguments,["context"]);e.context?this._context=e.context:this._context=LS({latencyHint:e.latencyHint}),this._ticker=new Jd(this.emit.bind(this,"tick"),e.clockSource,e.updateInterval),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this._setLatencyHint(e.latencyHint),this.lookAhead=e.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(WS(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(e,t,r){return this._context.createBuffer(e,t,r)}createChannelMerger(e){return this._context.createChannelMerger(e)}createChannelSplitter(e){return this._context.createChannelSplitter(e)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(e){return this._context.createDelay(e)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(e,t){return this._context.createIIRFilter(e,t)}createPanner(){return this._context.createPanner()}createPeriodicWave(e,t,r){return this._context.createPeriodicWave(e,t,r)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(e){return q(Jo(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(e)}createMediaElementSource(e){return q(Jo(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(e)}createMediaStreamDestination(){return q(Jo(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(e){return this._context.decodeAudioData(e)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(e){q(!this._initialized,"The listener cannot be set after initialization."),this._listener=e}get transport(){return this.initialize(),this._transport}set transport(e){q(!this._initialized,"The transport cannot be set after initialization."),this._transport=e}get draw(){return this.initialize(),this._draw}set draw(e){q(!this._initialized,"Draw cannot be set after initialization."),this._draw=e}get destination(){return this.initialize(),this._destination}set destination(e){q(!this._initialized,"The destination cannot be set after initialization."),this._destination=e}createAudioWorkletNode(e,t){return $S(this.rawContext,e,t)}addAudioWorkletModule(e,t){return ke(this,void 0,void 0,function*(){q(de(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(t)||this._workletModules.set(t,this.rawContext.audioWorklet.addModule(e)),yield this._workletModules.get(t)})}workletsAreReady(){return ke(this,void 0,void 0,function*(){let e=[];this._workletModules.forEach(t=>e.push(t)),yield Promise.all(e)})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(e){this._ticker.updateInterval=e}get clockSource(){return this._ticker.type}set clockSource(e){this._ticker.type=e}get latencyHint(){return this._latencyHint}_setLatencyHint(e){let t=0;if(this._latencyHint=e,Vt(e))switch(e){case"interactive":t=.1;break;case"playback":t=.5;break;case"balanced":t=.25;break}this.lookAhead=t,this.updateInterval=t/2}get rawContext(){return this._context}now(){return this._context.currentTime+this.lookAhead}immediate(){return this._context.currentTime}resume(){return Jo(this._context)?this._context.resume():Promise.resolve()}close(){return ke(this,void 0,void 0,function*(){Jo(this._context)&&(yield this._context.close()),this._initialized&&GS(this)})}getConstant(e){if(this._constants.has(e))return this._constants.get(e);{let t=this._context.createBuffer(1,128,this._context.sampleRate),r=t.getChannelData(0);for(let i=0;i<r.length;i++)r[i]=e;let o=this._context.createBufferSource();return o.channelCount=1,o.channelCountMode="explicit",o.buffer=t,o.loop=!0,o.start(0),this._constants.set(e,o),o}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(e=>this._constants[e].disconnect()),this}_timeoutLoop(){let e=this.now(),t=this._timeouts.peek();for(;this._timeouts.length&&t&&t.time<=e;)t.callback(),this._timeouts.shift(),t=this._timeouts.peek()}setTimeout(e,t){this._timeoutIds++;let r=this.now();return this._timeouts.add({callback:e,id:this._timeoutIds,time:r+t}),this._timeoutIds}clearTimeout(e){return this._timeouts.forEach(t=>{t.id===e&&this._timeouts.remove(t)}),this}clearInterval(e){return this.clearTimeout(e)}setInterval(e,t){let r=++this._timeoutIds,o=()=>{let i=this.now();this._timeouts.add({callback:()=>{e(),o()},id:r,time:i+t})};return o(),r}};var nh=class extends la{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(e,t,r){return{}}createChannelMerger(e){return{}}createChannelSplitter(e){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(e){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(e,t){return{}}createPanner(){return{}}createPeriodicWave(e,t,r){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(e){return{}}createMediaElementSource(e){return{}}createMediaStreamDestination(){return{}}decodeAudioData(e){return Promise.resolve({})}createAudioWorkletNode(e,t){return{}}get rawContext(){return{}}addAudioWorkletModule(e,t){return ke(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(e,t){return 0}clearTimeout(e){return this}setInterval(e,t){return 0}clearInterval(e){return this}getConstant(e){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(e){}get destination(){return{}}set destination(e){}now(){return 0}immediate(){return 0}};function B(n,e){st(e)?e.forEach(t=>B(n,t)):Object.defineProperty(n,e,{enumerable:!0,writable:!1})}function Bi(n,e){st(e)?e.forEach(t=>Bi(n,t)):Object.defineProperty(n,e,{writable:!0})}var ge=()=>{};var mn=(()=>{class n extends Kt{constructor(){super(),this.name="ToneAudioBuffer",this.onload=ge;let t=_(n.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=t.reverse,this.onload=t.onload,t.url&&eh(t.url)||t.url instanceof n?this.set(t.url):Vt(t.url)&&this.load(t.url).catch(t.onerror)}static getDefaults(){return{onerror:ge,onload:ge,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:dt().sampleRate}set(t){return t instanceof n?t.loaded?this._buffer=t.get():t.onload=()=>{this.set(t),this.onload(this)}:this._buffer=t,this._reversed&&this._reverse(),this}get(){return this._buffer}load(t){return ke(this,void 0,void 0,function*(){let r=n.load(t).then(o=>{this.set(o),this.onload(this)});n.downloads.push(r);try{yield r}finally{let o=n.downloads.indexOf(r);n.downloads.splice(o,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(t){let r=st(t)&&t[0].length>0,o=r?t.length:1,i=r?t[0].length:t.length,s=dt(),a=s.createBuffer(o,i,s.sampleRate),c=!r&&o===1?[t]:t;for(let l=0;l<o;l++)a.copyToChannel(c[l],l);return this._buffer=a,this}toMono(t){if(Wt(t))this.fromArray(this.toArray(t));else{let r=new Float32Array(this.length),o=this.numberOfChannels;for(let i=0;i<o;i++){let s=this.toArray(i);for(let a=0;a<s.length;a++)r[a]+=s[a]}r=r.map(i=>i/o),this.fromArray(r)}return this}toArray(t){if(Wt(t))return this.getChannelData(t);if(this.numberOfChannels===1)return this.toArray(0);{let r=[];for(let o=0;o<this.numberOfChannels;o++)r[o]=this.getChannelData(o);return r}}getChannelData(t){return this._buffer?this._buffer.getChannelData(t):new Float32Array(0)}slice(t,r=this.duration){let o=Math.floor(t*this.sampleRate),i=Math.floor(r*this.sampleRate);q(o<i,"The start time must be less than the end time");let s=i-o,a=dt().createBuffer(this.numberOfChannels,s,this.sampleRate);for(let c=0;c<this.numberOfChannels;c++)a.copyToChannel(this.getChannelData(c).subarray(o,i),c);return new n(a)}_reverse(){if(this.loaded)for(let t=0;t<this.numberOfChannels;t++)this.getChannelData(t).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(t){this._reversed!==t&&(this._reversed=t,this._reverse())}static fromArray(t){return new n().fromArray(t)}static fromUrl(t){return ke(this,void 0,void 0,function*(){return yield new n().load(t)})}static load(t){return ke(this,void 0,void 0,function*(){let r=t.match(/\[([^\]\[]+\|.+)\]$/);if(r){let c=r[1].split("|"),l=c[0];for(let u of c)if(n.supportsType(u)){l=u;break}t=t.replace(r[0],l)}let o=n.baseUrl===""||n.baseUrl.endsWith("/")?n.baseUrl:n.baseUrl+"/",i=yield fetch(o+t);if(!i.ok)throw new Error(`could not load url: ${t}`);let s=yield i.arrayBuffer();return yield dt().decodeAudioData(s)})}static supportsType(t){let r=t.split("."),o=r[r.length-1];return document.createElement("audio").canPlayType("audio/"+o)!==""}static loaded(){return ke(this,void 0,void 0,function*(){for(yield Promise.resolve();n.downloads.length;)yield n.downloads[0]})}}return n.baseUrl="",n.downloads=[],n})();var Hr=class extends ji{constructor(){super({clockSource:"offline",context:aa(arguments[0])?arguments[0]:jS(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:aa(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=aa(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(e){return ke(this,void 0,void 0,function*(){let t=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,t++;let r=Math.floor(this.sampleRate/128);e&&t%r===0&&(yield new Promise(o=>setTimeout(o,1)))}})}render(e=!0){return ke(this,void 0,void 0,function*(){yield this.workletsAreReady(),yield this._renderClock(e);let t=yield this._context.startRendering();return new mn(t)})}close(){return Promise.resolve()}};var ZS=new nh,Yc=ZS;function dt(){return Yc===ZS&&BS&&Yg(new ji),Yc}function Yg(n){Jo(n)?Yc=new ji(n):aa(n)?Yc=new Hr(n):Yc=n}if(Br&&!Br.TONE_SILENCE_LOGGING){let n="v";Ac==="dev"&&(n="");let e=` * Tone.js ${n}${Ac} * `;console.log(`%c${e}`,"background: #000; color: #fff")}function ua(n){return Math.pow(10,n/20)}function da(n){return 20*(Math.log(n)/Math.LN10)}function $i(n){return Math.pow(2,n/12)}var rh=440;function YS(){return rh}function QS(n){rh=n}function gr(n){return Math.round(Qg(n))}function Qg(n){return 69+12*Math.log2(n/rh)}function Qc(n){return rh*Math.pow(2,(n-69)/12)}var oh=class n extends Kt{constructor(e,t,r){super(),this.defaultUnits="s",this._val=t,this._units=r,this.context=e,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:e=>this._frequencyToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:e=>this._ticksToUnits(parseInt(e,10)),regexp:/^(\d+)i$/i},m:{method:e=>this._beatsToUnits(parseInt(e,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(e,t)=>{let r=parseInt(e,10),o=t==="."?1.5:1;return r===1?this._beatsToUnits(this._getTimeSignature())*o:this._beatsToUnits(4/r)*o},regexp:/^(\d+)n(\.?)$/i},number:{method:e=>this._expressions[this.defaultUnits].method.call(this,e),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:e=>this._secondsToUnits(parseFloat(e)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:e=>parseInt(e,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:e=>{let t=parseInt(e,10);return this._beatsToUnits(8/(Math.floor(t)*3))},regexp:/^(\d+)t$/i},tr:{method:(e,t,r)=>{let o=0;return e&&e!=="0"&&(o+=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(o+=this._beatsToUnits(parseFloat(t))),r&&r!=="0"&&(o+=this._beatsToUnits(parseFloat(r)/4)),o},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof n&&this.fromType(this._val),Dt(this._val))return this._noArg();if(Vt(this._val)&&Dt(this._units)){for(let e in this._expressions)if(this._expressions[e].regexp.test(this._val.trim())){this._units=e;break}}else if(pr(this._val)){let e=0;for(let t in this._val)if(de(this._val[t])){let r=this._val[t],o=new this.constructor(this.context,t).valueOf()*r;e+=o}return e}if(de(this._units)){let e=this._expressions[this._units],t=this._val.toString().trim().match(e.regexp);return t?e.method.apply(this,t.slice(1)):e.method.call(this,this._val)}else return Vt(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(e){return 1/e}_beatsToUnits(e){return 60/this._getBpm()*e}_secondsToUnits(e){return e}_ticksToUnits(e){return e*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(e){switch(this._units=void 0,this.defaultUnits){case"s":this._val=e.toSeconds();break;case"i":this._val=e.toTicks();break;case"hz":this._val=e.toFrequency();break;case"midi":this._val=e.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}};var kn=class n extends oh{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:e=>this._now()+new this.constructor(this.context,e).valueOf(),regexp:/^\+(.+)/},quantize:{method:e=>{let t=new n(this.context,e).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(t))},regexp:/^@(.+)/}})}quantize(e,t=1){let r=new this.constructor(this.context,e).valueOf(),o=this.valueOf(),a=Math.round(o/r)*r-o;return o+a*t}toNotation(){let e=this.toSeconds(),t=["1m"];for(let i=1;i<9;i++){let s=Math.pow(2,i);t.push(s+"n."),t.push(s+"n"),t.push(s+"t")}t.push("0");let r=t[0],o=new n(this.context,t[0]).toSeconds();return t.forEach(i=>{let s=new n(this.context,i).toSeconds();Math.abs(s-e)<Math.abs(o-e)&&(r=i,o=s)}),r}toBarsBeatsSixteenths(){let e=this._beatsToUnits(1),t=this.valueOf()/e;t=parseFloat(t.toFixed(4));let r=Math.floor(t/this._getTimeSignature()),o=t%1*4;t=Math.floor(t)%this._getTimeSignature();let i=o.toString();return i.length>3&&(o=parseFloat(parseFloat(i).toFixed(3))),[r,t,o].join(":")}toTicks(){let e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.round(t*this._getPPQ())}toSeconds(){return this.valueOf()}toMidi(){return gr(this.toFrequency())}_now(){return this.context.now()}};var gn=class n extends kn{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return YS()}static set A4(e){QS(e)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(e){return this.defaultUnits==="midi"?e:n.mtof(e)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method(e,t){let o=SP[e.toLowerCase()]+(parseInt(t,10)+1)*12;return this.defaultUnits==="midi"?o:n.mtof(o)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(e,t,r){let o=1;return e&&e!=="0"&&(o*=this._beatsToUnits(this._getTimeSignature()*parseFloat(e))),t&&t!=="0"&&(o*=this._beatsToUnits(parseFloat(t))),r&&r!=="0"&&(o*=this._beatsToUnits(parseFloat(r)/4)),o}}})}transpose(e){return new n(this.context,this.valueOf()*$i(e))}harmonize(e){return e.map(t=>this.transpose(t))}toMidi(){return gr(this.valueOf())}toNote(){let e=this.toFrequency(),t=Math.log2(e/n.A4),r=Math.round(12*t)+57,o=Math.floor(r/12);return o<0&&(r+=-12*o),TP[r%12]+o.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){let e=this._beatsToUnits(1),t=this.valueOf()/e;return Math.floor(t*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(e){return e}_ticksToUnits(e){return 1/(e*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(e){return 1/super._beatsToUnits(e)}_secondsToUnits(e){return 1/e}static mtof(e){return Qc(e)}static ftom(e){return gr(e)}},SP={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},TP=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];var Qn=class extends kn{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}};var bt=class n extends Kt{constructor(){super();let e=_(n.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=e.context}static getDefaults(){return{context:dt()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(e){return new kn(this.context,e).toSeconds()}toFrequency(e){return new gn(this.context,e).toFrequency()}toTicks(e){return new Qn(this.context,e).toTicks()}_getPartialProperties(e){let t=this.get();return Object.keys(t).forEach(r=>{Dt(e[r])&&delete t[r]}),t}get(){let e=US(this);return Object.keys(e).forEach(t=>{if(Reflect.has(this,t)){let r=this[t];de(r)&&de(r.value)&&de(r.setValueAtTime)?e[t]=r.value:r instanceof n?e[t]=r._getPartialProperties(e[t]):st(r)||Wt(r)||Vt(r)||Gg(r)?e[t]=r:delete e[t]}}),e}set(e){return Object.keys(e).forEach(t=>{Reflect.has(this,t)&&de(this[t])&&(this[t]&&de(this[t].value)&&de(this[t].setValueAtTime)?this[t].value!==e[t]&&(this[t].value=e[t]):this[t]instanceof n?this[t].set(e[t]):this[t]=e[t])}),this}};var Ur=class extends Lt{constructor(e="stopped"){super(),this.name="StateTimeline",this._initial=e,this.setStateAtTime(this._initial,0)}getValueAtTime(e){let t=this.get(e);return t!==null?t.state:this._initial}setStateAtTime(e,t,r){return Nt(t,0),this.add(Object.assign({},r,{state:e,time:t})),this}getLastState(e,t){let r=this._search(t);for(let o=r;o>=0;o--){let i=this._timeline[o];if(i.state===e)return i}}getNextState(e,t){let r=this._search(t);if(r!==-1)for(let o=r;o<this._timeline.length;o++){let i=this._timeline[o];if(i.state===e)return i}}};var _e=class n extends bt{constructor(){super(_(n.getDefaults(),arguments,["param","units","convert"])),this.name="Param",this.overridden=!1,this._minOutput=1e-7;let e=_(n.getDefaults(),arguments,["param","units","convert"]);for(q(de(e.param)&&(mr(e.param)||e.param instanceof n),"param must be an AudioParam");!mr(e.param);)e.param=e.param._param;this._swappable=de(e.swappable)?e.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=e.param,this.input.connect(this._param)):this._param=this.input=e.param,this._events=new Lt(1e3),this._initialValue=this._param.defaultValue,this.units=e.units,this.convert=e.convert,this._minValue=e.minValue,this._maxValue=e.maxValue,de(e.value)&&e.value!==this._toType(this._initialValue)&&this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(bt.getDefaults(),{convert:!0,units:"number"})}get value(){let e=this.now();return this.getValueAtTime(e)}set value(e){this.cancelScheduledValues(this.now()),this.setValueAtTime(e,this.now())}get minValue(){return de(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return de(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(e,t){return this.units===t}_assertRange(e){return de(this.maxValue)&&de(this.minValue)&&Nt(e,this._fromType(this.minValue),this._fromType(this.maxValue)),e}_fromType(e){return this.convert&&!this.overridden?this._is(e,"time")?this.toSeconds(e):this._is(e,"decibels")?ua(e):this._is(e,"frequency")?this.toFrequency(e):e:this.overridden?0:e}_toType(e){return this.convert&&this.units==="decibels"?da(e):e}setValueAtTime(e,t){let r=this.toSeconds(t),o=this._fromType(e);return q(isFinite(o)&&isFinite(r),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(o),this.log(this.units,"setValueAtTime",e,r),this._events.add({time:r,type:"setValueAtTime",value:o}),this._param.setValueAtTime(o,r),this}getValueAtTime(e){let t=Math.max(this.toSeconds(e),0),r=this._events.getAfter(t),o=this._events.get(t),i=this._initialValue;if(o===null)i=this._initialValue;else if(o.type==="setTargetAtTime"&&(r===null||r.type==="setValueAtTime")){let s=this._events.getBefore(o.time),a;s===null?a=this._initialValue:a=s.value,o.type==="setTargetAtTime"&&(i=this._exponentialApproach(o.time,a,o.value,o.constant,t))}else if(r===null)i=o.value;else if(r.type==="linearRampToValueAtTime"||r.type==="exponentialRampToValueAtTime"){let s=o.value;if(o.type==="setTargetAtTime"){let a=this._events.getBefore(o.time);a===null?s=this._initialValue:s=a.value}r.type==="linearRampToValueAtTime"?i=this._linearInterpolate(o.time,s,r.time,r.value,t):i=this._exponentialInterpolate(o.time,s,r.time,r.value,t)}else i=o.value;return this._toType(i)}setRampPoint(e){e=this.toSeconds(e);let t=this.getValueAtTime(e);return this.cancelAndHoldAtTime(e),this._fromType(t)===0&&(t=this._toType(this._minOutput)),this.setValueAtTime(t,e),this}linearRampToValueAtTime(e,t){let r=this._fromType(e),o=this.toSeconds(t);return q(isFinite(r)&&isFinite(o),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._assertRange(r),this._events.add({time:o,type:"linearRampToValueAtTime",value:r}),this.log(this.units,"linearRampToValueAtTime",e,o),this._param.linearRampToValueAtTime(r,o),this}exponentialRampToValueAtTime(e,t){let r=this._fromType(e);r=pn(r,0)?this._minOutput:r,this._assertRange(r);let o=this.toSeconds(t);return q(isFinite(r)&&isFinite(o),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({time:o,type:"exponentialRampToValueAtTime",value:r}),this.log(this.units,"exponentialRampToValueAtTime",e,o),this._param.exponentialRampToValueAtTime(r,o),this}exponentialRampTo(e,t,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialRampToValueAtTime(e,r+this.toSeconds(t)),this}linearRampTo(e,t,r){return r=this.toSeconds(r),this.setRampPoint(r),this.linearRampToValueAtTime(e,r+this.toSeconds(t)),this}targetRampTo(e,t,r){return r=this.toSeconds(r),this.setRampPoint(r),this.exponentialApproachValueAtTime(e,r,t),this}exponentialApproachValueAtTime(e,t,r){t=this.toSeconds(t),r=this.toSeconds(r);let o=Math.log(r+1)/Math.log(200);return this.setTargetAtTime(e,t,o),this.cancelAndHoldAtTime(t+r*.9),this.linearRampToValueAtTime(e,t+r),this}setTargetAtTime(e,t,r){let o=this._fromType(e);q(isFinite(r)&&r>0,"timeConstant must be a number greater than 0");let i=this.toSeconds(t);return this._assertRange(o),q(isFinite(o)&&isFinite(i),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(e)}, ${JSON.stringify(t)}`),this._events.add({constant:r,time:i,type:"setTargetAtTime",value:o}),this.log(this.units,"setTargetAtTime",e,i,r),this._param.setTargetAtTime(o,i,r),this}setValueCurveAtTime(e,t,r,o=1){r=this.toSeconds(r),t=this.toSeconds(t);let i=this._fromType(e[0])*o;this.setValueAtTime(this._toType(i),t);let s=r/(e.length-1);for(let a=1;a<e.length;a++){let c=this._fromType(e[a])*o;this.linearRampToValueAtTime(this._toType(c),t+a*s)}return this}cancelScheduledValues(e){let t=this.toSeconds(e);return q(isFinite(t),`Invalid argument to cancelScheduledValues: ${JSON.stringify(e)}`),this._events.cancel(t),this._param.cancelScheduledValues(t),this.log(this.units,"cancelScheduledValues",t),this}cancelAndHoldAtTime(e){let t=this.toSeconds(e),r=this._fromType(this.getValueAtTime(t));q(isFinite(t),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(e)}`),this.log(this.units,"cancelAndHoldAtTime",t,"value="+r);let o=this._events.get(t),i=this._events.getAfter(t);return o&&pn(o.time,t)?i?(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time)):(this._param.cancelAndHoldAtTime(t),this._events.cancel(t+this.sampleTime)):i&&(this._param.cancelScheduledValues(i.time),this._events.cancel(i.time),i.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(r),t):i.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(r),t)),this._events.add({time:t,type:"setValueAtTime",value:r}),this._param.setValueAtTime(r,t),this}rampTo(e,t=.1,r){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(e,t,r):this.linearRampTo(e,t,r),this}apply(e){let t=this.context.currentTime;e.setValueAtTime(this.getValueAtTime(t),t);let r=this._events.get(t);if(r&&r.type==="setTargetAtTime"){let o=this._events.getAfter(r.time),i=o?o.time:t+2,s=(i-t)/10;for(let a=t;a<i;a+=s)e.linearRampToValueAtTime(this.getValueAtTime(a),a)}return this._events.forEachAfter(this.context.currentTime,o=>{o.type==="cancelScheduledValues"?e.cancelScheduledValues(o.time):o.type==="setTargetAtTime"?e.setTargetAtTime(o.value,o.time,o.constant):e[o.type](o.value,o.time)}),this}setParam(e){q(this._swappable,"The Param must be assigned as 'swappable' in the constructor");let t=this.input;return t.disconnect(this._param),this.apply(e),this._param=e,t.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(e,t,r,o,i){return r+(t-r)*Math.exp(-(i-e)/o)}_linearInterpolate(e,t,r,o,i){return t+(o-t)*((i-e)/(r-e))}_exponentialInterpolate(e,t,r,o,i){return t*Math.pow(o/t,(i-e)/(r-e))}};var P=class n extends bt{constructor(){super(...arguments),this.name="ToneAudioNode",this._internalChannels=[]}get numberOfInputs(){return de(this.input)?mr(this.input)||this.input instanceof _e?1:this.input.numberOfInputs:0}get numberOfOutputs(){return de(this.output)?this.output.numberOfOutputs:0}_isAudioNode(e){return de(e)&&(e instanceof n||$r(e))}_getInternalNodes(){let e=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&e.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&e.push(this.output),e}_setChannelProperties(e){this._getInternalNodes().forEach(r=>{r.channelCount=e.channelCount,r.channelCountMode=e.channelCountMode,r.channelInterpretation=e.channelInterpretation})}_getChannelProperties(){let e=this._getInternalNodes();q(e.length>0,"ToneAudioNode does not have any internal nodes");let t=e[0];return{channelCount:t.channelCount,channelCountMode:t.channelCountMode,channelInterpretation:t.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(e){let t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCount:e}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(e){let t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelCountMode:e}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(e){let t=this._getChannelProperties();this._setChannelProperties(Object.assign(t,{channelInterpretation:e}))}connect(e,t=0,r=0){return vn(this,e,t,r),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return sa("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(e,t=0,r=0){return XS(this,e,t,r),this}chain(...e){return Rn(this,...e),this}fan(...e){return e.forEach(t=>this.connect(t)),this}dispose(){return super.dispose(),de(this.input)&&(this.input instanceof n?this.input.dispose():$r(this.input)&&this.input.disconnect()),de(this.output)&&(this.output instanceof n?this.output.dispose():$r(this.output)&&this.output.disconnect()),this._internalChannels=[],this}};function Rn(...n){let e=n.shift();n.reduce((t,r)=>(t instanceof P?t.connect(r):$r(t)&&vn(t,r),r),e)}function vn(n,e,t=0,r=0){for(q(de(n),"Cannot connect from undefined node"),q(de(e),"Cannot connect to undefined node"),(e instanceof P||$r(e))&&q(e.numberOfInputs>0,"Cannot connect to node with no inputs"),q(n.numberOfOutputs>0,"Cannot connect from node with no outputs");e instanceof P||e instanceof _e;)de(e.input)&&(e=e.input);for(;n instanceof P;)de(n.output)&&(n=n.output);mr(e)?n.connect(e,t):n.connect(e,t,r)}function XS(n,e,t=0,r=0){if(de(e))for(;e instanceof P;)e=e.input;for(;!$r(n);)de(n.output)&&(n=n.output);mr(e)?n.disconnect(e,t):$r(e)?n.disconnect(e,t,r):n.disconnect()}var re=class n extends P{constructor(){super(_(n.getDefaults(),arguments,["gain","units"])),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode;let e=_(n.getDefaults(),arguments,["gain","units"]);this.gain=new _e({context:this.context,convert:e.convert,param:this._gainNode.gain,units:e.units,value:e.gain,minValue:e.minValue,maxValue:e.maxValue}),B(this,"gain")}static getDefaults(){return Object.assign(P.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}};var vr=class extends P{constructor(e){super(e),this.onended=ge,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new re({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(t){let r=this.toSeconds(t);return this._startTime!==-1&&r>=this._startTime&&(this._stopTime===-1||r<=this._stopTime)?"started":"stopped"},this._fadeIn=e.fadeIn,this._fadeOut=e.fadeOut,this._curve=e.curve,this.onended=e.onended}static getDefaults(){return Object.assign(P.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:ge})}_startGain(e,t=1){q(this._startTime===-1,"Source cannot be started more than once");let r=this.toSeconds(this._fadeIn);return this._startTime=e+r,this._startTime=Math.max(this._startTime,this.context.currentTime),r>0?(this._gainNode.gain.setValueAtTime(0,e),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(t,e+r):this._gainNode.gain.exponentialApproachValueAtTime(t,e,r)):this._gainNode.gain.setValueAtTime(t,e),this}stop(e){return this.log("stop",e),this._stopGain(this.toSeconds(e)),this}_stopGain(e){q(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();let t=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(e)+t,this._stopTime=Math.max(this._stopTime,this.context.currentTime),t>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,t,e):this._gainNode.gain.targetRampTo(0,t,e):(this._gainNode.gain.cancelAndHoldAtTime(e),this._gainNode.gain.setValueAtTime(0,e)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{let r=this._curve==="exponential"?t*2:0;this._stopSource(this.now()+r),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==ge&&(this.onended(this),this.onended=ge,!this.context.isOffline)){let e=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(e):setTimeout(e,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),q(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.disconnect(),this}};var Xc=class n extends vr{constructor(){super(_(n.getDefaults(),arguments,["offset"])),this.name="ToneConstantSource",this._source=this.context.createConstantSource();let e=_(n.getDefaults(),arguments,["offset"]);vn(this._source,this._gainNode),this.offset=new _e({context:this.context,convert:e.convert,param:this._source.offset,units:e.units,value:e.offset,minValue:e.minValue,maxValue:e.maxValue})}static getDefaults(){return Object.assign(vr.getDefaults(),{convert:!0,offset:1,units:"number"})}start(e){let t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._source.start(t),this}_stopSource(e){this._source.stop(e)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}};var le=class n extends P{constructor(){super(_(n.getDefaults(),arguments,["value","units"])),this.name="Signal",this.override=!0;let e=_(n.getDefaults(),arguments,["value","units"]);this.output=this._constantSource=new Xc({context:this.context,convert:e.convert,offset:e.value,units:e.units,minValue:e.minValue,maxValue:e.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(P.getDefaults(),{convert:!0,units:"number",value:0})}connect(e,t=0,r=0){return ha(this,e,t,r),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(e,t){return this._param.setValueAtTime(e,t),this}getValueAtTime(e){return this._param.getValueAtTime(e)}setRampPoint(e){return this._param.setRampPoint(e),this}linearRampToValueAtTime(e,t){return this._param.linearRampToValueAtTime(e,t),this}exponentialRampToValueAtTime(e,t){return this._param.exponentialRampToValueAtTime(e,t),this}exponentialRampTo(e,t,r){return this._param.exponentialRampTo(e,t,r),this}linearRampTo(e,t,r){return this._param.linearRampTo(e,t,r),this}targetRampTo(e,t,r){return this._param.targetRampTo(e,t,r),this}exponentialApproachValueAtTime(e,t,r){return this._param.exponentialApproachValueAtTime(e,t,r),this}setTargetAtTime(e,t,r){return this._param.setTargetAtTime(e,t,r),this}setValueCurveAtTime(e,t,r,o){return this._param.setValueCurveAtTime(e,t,r,o),this}cancelScheduledValues(e){return this._param.cancelScheduledValues(e),this}cancelAndHoldAtTime(e){return this._param.cancelAndHoldAtTime(e),this}rampTo(e,t,r){return this._param.rampTo(e,t,r),this}get value(){return this._param.value}set value(e){this._param.value=e}get convert(){return this._param.convert}set convert(e){this._param.convert=e}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(e){this._param.overridden=e}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(e){return this._param.apply(e),this}};function ha(n,e,t,r){(e instanceof _e||mr(e)||e instanceof le&&e.override)&&(e.cancelScheduledValues(0),e.setValueAtTime(0,0),e instanceof le&&(e.overridden=!0)),vn(n,e,t,r)}var ih=class n extends _e{constructor(){super(_(n.getDefaults(),arguments,["value"])),this.name="TickParam",this._events=new Lt(1/0),this._multiplier=1;let e=_(n.getDefaults(),arguments,["value"]);this._multiplier=e.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(e.value)}),this.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(_e.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(e,t,r){t=this.toSeconds(t),this.setRampPoint(t);let o=this._fromType(e),i=this._events.get(t),s=Math.round(Math.max(1/r,1));for(let a=0;a<=s;a++){let c=r*a+t,l=this._exponentialApproach(i.time,i.value,o,r,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}setValueAtTime(e,t){let r=this.toSeconds(t);super.setValueAtTime(e,t);let o=this._events.get(r),i=this._events.previousEvent(o),s=this._getTicksUntilEvent(i,r);return o.ticks=Math.max(s,0),this}linearRampToValueAtTime(e,t){let r=this.toSeconds(t);super.linearRampToValueAtTime(e,t);let o=this._events.get(r),i=this._events.previousEvent(o),s=this._getTicksUntilEvent(i,r);return o.ticks=Math.max(s,0),this}exponentialRampToValueAtTime(e,t){t=this.toSeconds(t);let r=this._fromType(e),o=this._events.get(t),i=Math.round(Math.max((t-o.time)*10,1)),s=(t-o.time)/i;for(let a=0;a<=i;a++){let c=s*a+o.time,l=this._exponentialInterpolate(o.time,o.value,t,r,c);this.linearRampToValueAtTime(this._toType(l),c)}return this}_getTicksUntilEvent(e,t){if(e===null)e={ticks:0,time:0,type:"setValueAtTime",value:0};else if(Dt(e.ticks)){let s=this._events.previousEvent(e);e.ticks=this._getTicksUntilEvent(s,e.time)}let r=this._fromType(this.getValueAtTime(e.time)),o=this._fromType(this.getValueAtTime(t)),i=this._events.get(t);return i&&i.time===t&&i.type==="setValueAtTime"&&(o=this._fromType(this.getValueAtTime(t-this.sampleTime))),.5*(t-e.time)*(r+o)+e.ticks}getTicksAtTime(e){let t=this.toSeconds(e),r=this._events.get(t);return Math.max(this._getTicksUntilEvent(r,t),0)}getDurationOfTicks(e,t){let r=this.toSeconds(t),o=this.getTicksAtTime(t);return this.getTimeOfTick(o+e)-r}getTimeOfTick(e){let t=this._events.get(e,"ticks"),r=this._events.getAfter(e,"ticks");if(t&&t.ticks===e)return t.time;if(t&&r&&r.type==="linearRampToValueAtTime"&&t.value!==r.value){let o=this._fromType(this.getValueAtTime(t.time)),s=(this._fromType(this.getValueAtTime(r.time))-o)/(r.time-t.time),a=Math.sqrt(Math.pow(o,2)-2*s*(t.ticks-e)),c=(-o+a)/s,l=(-o-a)/s;return(c>0?c:l)+t.time}else return t?t.value===0?1/0:t.time+(e-t.ticks)/t.value:e/this._initialValue}ticksToTime(e,t){return this.getDurationOfTicks(e,t)}timeToTicks(e,t){let r=this.toSeconds(t),o=this.toSeconds(e),i=this.getTicksAtTime(r);return this.getTicksAtTime(r+o)-i}_fromType(e){return this.units==="bpm"&&this.multiplier?1/(60/e/this.multiplier):super._fromType(e)}_toType(e){return this.units==="bpm"&&this.multiplier?e/this.multiplier*60:super._toType(e)}get multiplier(){return this._multiplier}set multiplier(e){let t=this.value;this._multiplier=e,this.cancelScheduledValues(0),this.setValueAtTime(t,0)}};var sh=class n extends le{constructor(){super(_(n.getDefaults(),arguments,["value"])),this.name="TickSignal";let e=_(n.getDefaults(),arguments,["value"]);this.input=this._param=new ih({context:this.context,convert:e.convert,multiplier:e.multiplier,param:this._constantSource.offset,units:e.units,value:e.value})}static getDefaults(){return Object.assign(le.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(e,t){return this._param.ticksToTime(e,t)}timeToTicks(e,t){return this._param.timeToTicks(e,t)}getTimeOfTick(e){return this._param.getTimeOfTick(e)}getDurationOfTicks(e,t){return this._param.getDurationOfTicks(e,t)}getTicksAtTime(e){return this._param.getTicksAtTime(e)}get multiplier(){return this._param.multiplier}set multiplier(e){this._param.multiplier=e}dispose(){return super.dispose(),this._param.dispose(),this}};var ah=class n extends bt{constructor(){super(_(n.getDefaults(),arguments,["frequency"])),this.name="TickSource",this._state=new Ur,this._tickOffset=new Lt;let e=_(n.getDefaults(),arguments,["frequency"]);this.frequency=new sh({context:this.context,units:e.units,value:e.frequency}),B(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},bt.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(e,t){let r=this.toSeconds(e);return this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),de(t)&&this.setTicksAtTime(t,r)),this}stop(e){let t=this.toSeconds(e);if(this._state.getValueAtTime(t)==="stopped"){let r=this._state.get(t);r&&r.time>0&&(this._tickOffset.cancel(r.time),this._state.cancel(r.time))}return this._state.cancel(t),this._state.setStateAtTime("stopped",t),this.setTicksAtTime(0,t),this}pause(e){let t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&this._state.setStateAtTime("paused",t),this}cancel(e){return e=this.toSeconds(e),this._state.cancel(e),this._tickOffset.cancel(e),this}getTicksAtTime(e){let t=this.toSeconds(e),r=this._state.getLastState("stopped",t),o={state:"paused",time:t};this._state.add(o);let i=r,s=0;return this._state.forEachBetween(r.time,t+this.sampleTime,a=>{let c=i.time,l=this._tickOffset.get(a.time);l&&l.time>=i.time&&(s=l.ticks,c=l.time),i.state==="started"&&a.state!=="started"&&(s+=this.frequency.getTicksAtTime(a.time)-this.frequency.getTicksAtTime(c)),i=a}),this._state.remove(o),s}get ticks(){return this.getTicksAtTime(this.now())}set ticks(e){this.setTicksAtTime(e,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(e){let t=this.now(),r=this.frequency.timeToTicks(e,t);this.setTicksAtTime(r,t)}getSecondsAtTime(e){e=this.toSeconds(e);let t=this._state.getLastState("stopped",e),r={state:"paused",time:e};this._state.add(r);let o=t,i=0;return this._state.forEachBetween(t.time,e+this.sampleTime,s=>{let a=o.time,c=this._tickOffset.get(s.time);c&&c.time>=o.time&&(i=c.seconds,a=c.time),o.state==="started"&&s.state!=="started"&&(i+=s.time-a),o=s}),this._state.remove(r),i}setTicksAtTime(e,t){return t=this.toSeconds(t),this._tickOffset.cancel(t),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(e,t),ticks:e,time:t}),this}getStateAtTime(e){return e=this.toSeconds(e),this._state.getValueAtTime(e)}getTimeOfTick(e,t=this.now()){let r=this._tickOffset.get(t),o=this._state.get(t),i=Math.max(r.time,o.time),s=this.frequency.getTicksAtTime(i)+e-r.ticks;return this.frequency.getTimeOfTick(s)}forEachTickBetween(e,t,r){let o=this._state.get(e);this._state.forEachBetween(e,t,s=>{o&&o.state==="started"&&s.state!=="started"&&this.forEachTickBetween(Math.max(o.time,e),s.time-this.sampleTime,r),o=s});let i=null;if(o&&o.state==="started"){let s=Math.max(o.time,e),a=this.frequency.getTicksAtTime(s),c=this.frequency.getTicksAtTime(o.time),l=a-c,u=Math.ceil(l)-l;u=pn(u,1)?0:u;let d=this.frequency.getTimeOfTick(a+u);for(;d<t;){try{r(d,Math.round(this.getTicksAtTime(d)))}catch(f){i=f;break}d+=this.frequency.getDurationOfTicks(1,d)}}if(i)throw i;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this}};var fa=class n extends bt{constructor(){super(_(n.getDefaults(),arguments,["callback","frequency"])),this.name="Clock",this.callback=ge,this._lastUpdate=0,this._state=new Ur("stopped"),this._boundLoop=this._loop.bind(this);let e=_(n.getDefaults(),arguments,["callback","frequency"]);this.callback=e.callback,this._tickSource=new ah({context:this.context,frequency:e.frequency,units:e.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,B(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(bt.getDefaults(),{callback:ge,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(e,t){Kd(this.context);let r=this.toSeconds(e);return this.log("start",r),this._state.getValueAtTime(r)!=="started"&&(this._state.setStateAtTime("started",r),this._tickSource.start(r,t),r<this._lastUpdate&&this.emit("start",r,t)),this}stop(e){let t=this.toSeconds(e);return this.log("stop",t),this._state.cancel(t),this._state.setStateAtTime("stopped",t),this._tickSource.stop(t),t<this._lastUpdate&&this.emit("stop",t),this}pause(e){let t=this.toSeconds(e);return this._state.getValueAtTime(t)==="started"&&(this._state.setStateAtTime("paused",t),this._tickSource.pause(t),t<this._lastUpdate&&this.emit("pause",t)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(e){this._tickSource.ticks=e}get seconds(){return this._tickSource.seconds}set seconds(e){this._tickSource.seconds=e}getSecondsAtTime(e){return this._tickSource.getSecondsAtTime(e)}setTicksAtTime(e,t){return this._tickSource.setTicksAtTime(e,t),this}getTimeOfTick(e,t=this.now()){return this._tickSource.getTimeOfTick(e,t)}getTicksAtTime(e){return this._tickSource.getTicksAtTime(e)}nextTickTime(e,t){let r=this.toSeconds(t),o=this.getTicksAtTime(r);return this._tickSource.getTimeOfTick(o+e,r)}_loop(){let e=this._lastUpdate,t=this.now();this._lastUpdate=t,this.log("loop",e,t),e!==t&&(this._state.forEachBetween(e,t,r=>{switch(r.state){case"started":let o=this._tickSource.getTicksAtTime(r.time);this.emit("start",r.time,o);break;case"stopped":r.time!==0&&this.emit("stop",r.time);break;case"paused":this.emit("pause",r.time);break}}),this._tickSource.forEachTickBetween(e,t,(r,o)=>{this.callback(r,o)}))}getStateAtTime(e){let t=this.toSeconds(e);return this._state.getValueAtTime(t)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}};ni.mixin(fa);var pa=class n extends Kt{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;let e=_(n.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=e.baseUrl,Object.keys(e.urls).forEach(t=>{this._loadingCount++;let r=e.urls[t];this.add(t,r,this._bufferLoaded.bind(this,e.onload),e.onerror)})}static getDefaults(){return{baseUrl:"",onerror:ge,onload:ge,urls:{}}}has(e){return this._buffers.has(e.toString())}get(e){return q(this.has(e),`ToneAudioBuffers has no buffer named: ${e}`),this._buffers.get(e.toString())}_bufferLoaded(e){this._loadingCount--,this._loadingCount===0&&e&&e()}get loaded(){return Array.from(this._buffers).every(([e,t])=>t.loaded)}add(e,t,r=ge,o=ge){return Vt(t)?this._buffers.set(e.toString(),new mn(this.baseUrl+t,r,o)):this._buffers.set(e.toString(),new mn(t,r,o)),this}dispose(){return super.dispose(),this._buffers.forEach(e=>e.dispose()),this._buffers.clear(),this}};var Kc=class n extends gn{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(e){return gr(super._frequencyToUnits(e))}_ticksToUnits(e){return gr(super._ticksToUnits(e))}_beatsToUnits(e){return gr(super._beatsToUnits(e))}_secondsToUnits(e){return gr(super._secondsToUnits(e))}toMidi(){return this.valueOf()}toFrequency(){return Qc(this.toMidi())}transpose(e){return new n(this.context,this.toMidi()+e)}};var Jt=class extends Qn{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(e){return this._getPPQ()*e}_secondsToUnits(e){return Math.floor(e/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(e){return e}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}};var Xg=class extends bt{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Lt,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(e,t){return this._events.add({callback:e,time:this.toSeconds(t)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(e){return this._events.cancel(this.toSeconds(e)),this}_drawLoop(){let e=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=e;){let t=this._events.shift();t&&e-t.time<=this.expiration&&t.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}};ei(n=>{n.draw=new Xg({context:n})});ti(n=>{n.draw.dispose()});var ch=class extends Kt{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(e){q(de(e.time),"Events must have a time property"),q(de(e.duration),"Events must have a duration parameter"),e.time=e.time.valueOf();let t=new Kg(e.time,e.time+e.duration,e);for(this._root===null?this._root=t:this._root.insert(t),this._length++;t!==null;)t.updateHeight(),t.updateMax(),this._rebalance(t),t=t.parent;return this}remove(e){if(this._root!==null){let t=[];this._root.search(e.time,t);for(let r of t)if(r.event===e){this._removeNode(r),this._length--;break}}return this}get length(){return this._length}cancel(e){return this.forEachFrom(e,t=>this.remove(t)),this}_setRoot(e){this._root=e,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(e,t){e.parent!==null?(e.isLeftChild()?e.parent.left=t:e.parent.right=t,this._rebalance(e.parent)):this._setRoot(t)}_removeNode(e){if(e.left===null&&e.right===null)this._replaceNodeInParent(e,null);else if(e.right===null)this._replaceNodeInParent(e,e.left);else if(e.left===null)this._replaceNodeInParent(e,e.right);else{let t=e.getBalance(),r,o=null;if(t>0)if(e.left.right===null)r=e.left,r.right=e.right,o=r;else{for(r=e.left.right;r.right!==null;)r=r.right;r.parent&&(r.parent.right=r.left,o=r.parent,r.left=e.left,r.right=e.right)}else if(e.right.left===null)r=e.right,r.left=e.left,o=r;else{for(r=e.right.left;r.left!==null;)r=r.left;r.parent&&(r.parent.left=r.right,o=r.parent,r.left=e.left,r.right=e.right)}e.parent!==null?e.isLeftChild()?e.parent.left=r:e.parent.right=r:this._setRoot(r),o&&this._rebalance(o)}e.dispose()}_rotateLeft(e){let t=e.parent,r=e.isLeftChild(),o=e.right;o&&(e.right=o.left,o.left=e),t!==null?r?t.left=o:t.right=o:this._setRoot(o)}_rotateRight(e){let t=e.parent,r=e.isLeftChild(),o=e.left;o&&(e.left=o.right,o.right=e),t!==null?r?t.left=o:t.right=o:this._setRoot(o)}_rebalance(e){let t=e.getBalance();t>1&&e.left?e.left.getBalance()<0?this._rotateLeft(e.left):this._rotateRight(e):t<-1&&e.right&&(e.right.getBalance()>0?this._rotateRight(e.right):this._rotateLeft(e))}get(e){if(this._root!==null){let t=[];if(this._root.search(e,t),t.length>0){let r=t[0];for(let o=1;o<t.length;o++)t[o].low>r.low&&(r=t[o]);return r.event}}return null}forEach(e){if(this._root!==null){let t=[];this._root.traverse(r=>t.push(r)),t.forEach(r=>{r.event&&e(r.event)})}return this}forEachAtTime(e,t){if(this._root!==null){let r=[];this._root.search(e,r),r.forEach(o=>{o.event&&t(o.event)})}return this}forEachFrom(e,t){if(this._root!==null){let r=[];this._root.searchAfter(e,r),r.forEach(o=>{o.event&&t(o.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(e=>e.dispose()),this._root=null,this}},Kg=class{constructor(e,t,r){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=r,this.low=e,this.high=t,this.max=this.high}insert(e){e.low<=this.low?this.left===null?this.left=e:this.left.insert(e):this.right===null?this.right=e:this.right.insert(e)}search(e,t){e>this.max||(this.left!==null&&this.left.search(e,t),this.low<=e&&this.high>e&&t.push(this),!(this.low>e)&&this.right!==null&&this.right.search(e,t))}searchAfter(e,t){this.low>=e&&(t.push(this),this.left!==null&&this.left.searchAfter(e,t)),this.right!==null&&this.right.searchAfter(e,t)}traverse(e){e(this),this.left!==null&&this.left.traverse(e),this.right!==null&&this.right.traverse(e)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let e=0;return this.left!==null&&this.right!==null?e=this.left.height-this.right.height:this.left!==null?e=this.left.height+1:this.right!==null&&(e=-(this.right.height+1)),e}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(e){this._left=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(e){this._right=e,e!==null&&(e.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}};var Xn=class n extends P{constructor(){super(_(n.getDefaults(),arguments,["volume"])),this.name="Volume";let e=_(n.getDefaults(),arguments,["volume"]);this.input=this.output=new re({context:this.context,gain:e.volume,units:"decibels"}),this.volume=this.output.gain,B(this,"volume"),this._unmutedVolume=e.volume,this.mute=e.mute}static getDefaults(){return Object.assign(P.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}};var Jg=class n extends P{constructor(){super(_(n.getDefaults(),arguments)),this.name="Destination",this.input=new Xn({context:this.context}),this.output=new re({context:this.context}),this.volume=this.input.volume;let e=_(n.getDefaults(),arguments);Rn(this.input,this.output,this.context.rawContext.destination),this.mute=e.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(P.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(e){this.input.mute=e}chain(...e){return this.input.disconnect(),e.unshift(this.input),e.push(this.output),Rn(...e),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}};ei(n=>{n.destination=new Jg({context:n})});ti(n=>{n.destination.dispose()});var lh=class extends Kt{constructor(e){super(),this.name="TimelineValue",this._timeline=new Lt({memory:10}),this._initialValue=e}set(e,t){return this._timeline.add({value:e,time:t}),this}get(e){let t=this._timeline.get(e);return t?t.value:this._initialValue}};var ma=(()=>{class n{constructor(t,r){this.id=n._eventId++;let o=Object.assign(n.getDefaults(),r);this.transport=t,this.callback=o.callback,this._once=o.once,this.time=o.time}static getDefaults(){return{callback:ge,once:!1,time:0}}invoke(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))}dispose(){return this.callback=void 0,this}}return n._eventId=0,n})();var uh=class n extends ma{constructor(e,t){super(e,t),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);let r=Object.assign(n.getDefaults(),t);this.duration=new Jt(e.context,r.duration).valueOf(),this._interval=new Jt(e.context,r.interval).valueOf(),this._nextTick=r.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},ma.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(e){this._createEvents(e),super.invoke(e)}_createEvents(e){let t=this.transport.getTicksAtTime(e);t>=this.time&&t>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Jt(this.context,this._nextTick).toSeconds()))}_restart(e){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;let t=this.transport.getTicksAtTime(e);t>this.time&&(this._nextTick=this.time+Math.ceil((t-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new Jt(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new Jt(this.context,this._nextTick).toSeconds())}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this}};var dh=class n extends bt{constructor(){super(_(n.getDefaults(),arguments)),this.name="Transport",this._loop=new lh(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Lt,this._repeatedEvents=new ch,this._syncedSignals=[],this._swingAmount=0;let e=_(n.getDefaults(),arguments);this._ppq=e.ppq,this._clock=new fa({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=e.ppq,this.bpm.setValueAtTime(e.bpm,0),B(this,"bpm"),this._timeSignature=e.timeSignature,this._swingTicks=e.ppq/2}static getDefaults(){return Object.assign(bt.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(e,t){if(this._loop.get(e)&&t>=this._loopEnd&&(this.emit("loopEnd",e),this._clock.setTicksAtTime(this._loopStart,e),t=this._loopStart,this.emit("loopStart",e,this._clock.getSecondsAtTime(e)),this.emit("loop",e)),this._swingAmount>0&&t%this._ppq!==0&&t%(this._swingTicks*2)!==0){let r=t%(this._swingTicks*2)/(this._swingTicks*2),o=Math.sin(r*Math.PI)*this._swingAmount;e+=new Jt(this.context,this._swingTicks*2/3).toSeconds()*o}this._timeline.forEachAtTime(t,r=>r.invoke(e))}schedule(e,t){let r=new ma(this,{callback:e,time:new Qn(this.context,t).toTicks()});return this._addEvent(r,this._timeline)}scheduleRepeat(e,t,r,o=1/0){let i=new uh(this,{callback:e,duration:new kn(this.context,o).toTicks(),interval:new kn(this.context,t).toTicks(),time:new Qn(this.context,r).toTicks()});return this._addEvent(i,this._repeatedEvents)}scheduleOnce(e,t){let r=new ma(this,{callback:e,once:!0,time:new Qn(this.context,t).toTicks()});return this._addEvent(r,this._timeline)}clear(e){if(this._scheduledEvents.hasOwnProperty(e)){let t=this._scheduledEvents[e.toString()];t.timeline.remove(t.event),t.event.dispose(),delete this._scheduledEvents[e.toString()]}return this}_addEvent(e,t){return this._scheduledEvents[e.id.toString()]={event:e,timeline:t},t.add(e),e.id}cancel(e=0){let t=this.toTicks(e);return this._timeline.forEachFrom(t,r=>this.clear(r.id)),this._repeatedEvents.forEachFrom(t,r=>this.clear(r.id)),this}_bindClockEvents(){this._clock.on("start",(e,t)=>{t=new Jt(this.context,t).toSeconds(),this.emit("start",e,t)}),this._clock.on("stop",e=>{this.emit("stop",e)}),this._clock.on("pause",e=>{this.emit("pause",e)})}get state(){return this._clock.getStateAtTime(this.now())}start(e,t){let r;return de(t)&&(r=this.toTicks(t)),this._clock.start(e,r),this}stop(e){return this._clock.stop(e),this}pause(e){return this._clock.pause(e),this}toggle(e){return e=this.toSeconds(e),this._clock.getStateAtTime(e)!=="started"?this.start(e):this.stop(e),this}get timeSignature(){return this._timeSignature}set timeSignature(e){st(e)&&(e=e[0]/e[1]*4),this._timeSignature=e}get loopStart(){return new kn(this.context,this._loopStart,"i").toSeconds()}set loopStart(e){this._loopStart=this.toTicks(e)}get loopEnd(){return new kn(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(e){this._loopEnd=this.toTicks(e)}get loop(){return this._loop.get(this.now())}set loop(e){this._loop.set(e,this.now())}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get swing(){return this._swingAmount}set swing(e){this._swingAmount=e}get swingSubdivision(){return new Jt(this.context,this._swingTicks).toNotation()}set swingSubdivision(e){this._swingTicks=this.toTicks(e)}get position(){let e=this.now(),t=this._clock.getTicksAtTime(e);return new Jt(this.context,t).toBarsBeatsSixteenths()}set position(e){let t=this.toTicks(e);this.ticks=t}get seconds(){return this._clock.seconds}set seconds(e){let t=this.now(),r=this._clock.frequency.timeToTicks(e,t);this.ticks=r}get progress(){if(this.loop){let e=this.now();return(this._clock.getTicksAtTime(e)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(e){if(this._clock.ticks!==e){let t=this.now();if(this.state==="started"){let r=this._clock.getTicksAtTime(t),o=this._clock.frequency.getDurationOfTicks(Math.ceil(r)-r,t),i=t+o;this.emit("stop",i),this._clock.setTicksAtTime(e,i),this.emit("start",i,this._clock.getSecondsAtTime(i))}else this._clock.setTicksAtTime(e,t)}}getTicksAtTime(e){return Math.round(this._clock.getTicksAtTime(e))}getSecondsAtTime(e){return this._clock.getSecondsAtTime(e)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(e){this._clock.frequency.multiplier=e}nextSubdivision(e){if(e=this.toTicks(e),this.state!=="started")return 0;{let t=this.now(),r=this.getTicksAtTime(t),o=e-r%e;return this._clock.nextTickTime(o,t)}}syncSignal(e,t){if(!t){let o=this.now();if(e.getValueAtTime(o)!==0){let s=1/(60/this.bpm.getValueAtTime(o)/this.PPQ);t=e.getValueAtTime(o)/s}else t=0}let r=new re(t);return this.bpm.connect(r),r.connect(e._param),this._syncedSignals.push({initial:e.value,ratio:r,signal:e}),e.value=0,this}unsyncSignal(e){for(let t=this._syncedSignals.length-1;t>=0;t--){let r=this._syncedSignals[t];r.signal===e&&(r.ratio.dispose(),r.signal.value=r.initial,this._syncedSignals.splice(t,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),Bi(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}};ni.mixin(dh);ei(n=>{n.transport=new dh({context:n})});ti(n=>{n.transport.dispose()});var We=class extends P{constructor(e){super(e),this.input=void 0,this._state=new Ur("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=ge,this._syncedStop=ge,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Xn({context:this.context,mute:e.mute,volume:e.volume}),this.volume=this._volume.volume,B(this,"volume"),this.onstop=e.onstop}static getDefaults(){return Object.assign(P.getDefaults(),{mute:!1,onstop:ge,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}_clampToCurrentTime(e){return this._synced?e:Math.max(e,this.context.currentTime)}start(e,t,r){let o=Dt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(o=this._clampToCurrentTime(o),!this._synced&&this._state.getValueAtTime(o)==="started")q(ca(o,this._state.get(o).time),"Start time must be strictly greater than previous start time"),this._state.cancel(o),this._state.setStateAtTime("started",o),this.log("restart",o),this.restart(o,t,r);else if(this.log("start",o),this._state.setStateAtTime("started",o),this._synced){let i=this._state.get(o);i&&(i.offset=this.toSeconds(On(t,0)),i.duration=r?this.toSeconds(r):void 0);let s=this.context.transport.schedule(a=>{this._start(a,t,r)},o);this._scheduled.push(s),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>o&&this._syncedStart(this.now(),this.context.transport.seconds)}else Kd(this.context),this._start(o,t,r);return this}stop(e){let t=Dt(e)&&this._synced?this.context.transport.seconds:this.toSeconds(e);if(t=this._clampToCurrentTime(t),this._state.getValueAtTime(t)==="started"||de(this._state.getNextState("started",t))){if(this.log("stop",t),!this._synced)this._stop(t);else{let r=this.context.transport.schedule(this._stop.bind(this),t);this._scheduled.push(r)}this._state.cancel(t),this._state.setStateAtTime("stopped",t)}return this}restart(e,t,r){return e=this.toSeconds(e),this._state.getValueAtTime(e)==="started"&&(this._state.cancel(e),this._restart(e,t,r)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(e,t)=>{if(t>0){let r=this._state.get(t);if(r&&r.state==="started"&&r.time!==t){let o=t-this.toSeconds(r.time),i;r.duration&&(i=this.toSeconds(r.duration)-o),this._start(e,this.toSeconds(r.offset)+o,i)}}},this._syncedStop=e=>{let t=this.context.transport.getSecondsAtTime(Math.max(e-this.sampleTime,0));this._state.getValueAtTime(t)==="started"&&this._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(e=>this.context.transport.clear(e)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=ge,this.unsync(),this._volume.dispose(),this._state.dispose(),this}};var mo=class n extends vr{constructor(){super(_(n.getDefaults(),arguments,["url","onload"])),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1;let e=_(n.getDefaults(),arguments,["url","onload"]);vn(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new _e({context:this.context,param:this._source.playbackRate,units:"positive",value:e.playbackRate}),this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this._buffer=new mn(e.url,e.onload,e.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(vr.getDefaults(),{url:new mn,loop:!1,loopEnd:0,loopStart:0,onload:ge,onerror:ge,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(e){this._fadeIn=e}get fadeOut(){return this._fadeOut}set fadeOut(e){this._fadeOut=e}get curve(){return this._curve}set curve(e){this._curve=e}start(e,t,r,o=1){q(this.buffer.loaded,"buffer is either not set or not loaded");let i=this.toSeconds(e);this._startGain(i,o),this.loop?t=On(t,this.loopStart):t=On(t,0);let s=Math.max(this.toSeconds(t),0);if(this.loop){let a=this.toSeconds(this.loopEnd)||this.buffer.duration,c=this.toSeconds(this.loopStart),l=a-c;Zc(s,a)&&(s=(s-c)%l+c),pn(s,this.buffer.duration)&&(s=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,th(s,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(i,s)),de(r)){let a=this.toSeconds(r);a=Math.max(a,0),this.stop(i+a)}return this}_stopSource(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(e){this._source.loopStart=this.toSeconds(e)}get loopEnd(){return this._source.loopEnd}set loopEnd(e){this._source.loopEnd=this.toSeconds(e)}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._source.loop}set loop(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}};var jhe=44100*5;function bn(n,e){return ke(this,void 0,void 0,function*(){let t=e/n.context.sampleRate,r=new Hr(1,t,n.context.sampleRate);return new n.constructor(Object.assign(n.get(),{frequency:2/t,detune:0,context:r})).toDestination().start(0),(yield r.render()).getChannelData(0)})}var Jc=class n extends vr{constructor(){super(_(n.getDefaults(),arguments,["frequency","type"])),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator];let e=_(n.getDefaults(),arguments,["frequency","type"]);vn(this._oscillator,this._gainNode),this.type=e.type,this.frequency=new _e({context:this.context,param:this._oscillator.frequency,units:"frequency",value:e.frequency}),this.detune=new _e({context:this.context,param:this._oscillator.detune,units:"cents",value:e.detune}),B(this,["frequency","detune"])}static getDefaults(){return Object.assign(vr.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(e){let t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this}_stopSource(e){this._oscillator.stop(e)}setPeriodicWave(e){return this._oscillator.setPeriodicWave(e),this}get type(){return this._oscillator.type}set type(e){this._oscillator.type=e}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}};var St=(()=>{class n extends We{constructor(){super(_(n.getDefaults(),arguments,["frequency","type"])),this.name="Oscillator",this._oscillator=null;let t=_(n.getDefaults(),arguments,["frequency","type"]);this.frequency=new le({context:this.context,units:"frequency",value:t.frequency}),B(this,"frequency"),this.detune=new le({context:this.context,units:"cents",value:t.detune}),B(this,"detune"),this._partials=t.partials,this._partialCount=t.partialCount,this._type=t.type,t.partialCount&&t.type!=="custom"&&(this._type=this.baseType+t.partialCount.toString()),this.phase=t.phase}static getDefaults(){return Object.assign(We.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(t){let r=this.toSeconds(t),o=new Jc({context:this.context,onended:()=>this.onstop(this)});this._oscillator=o,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(r)}_stop(t){let r=this.toSeconds(t);this._oscillator&&this._oscillator.stop(r)}_restart(t){let r=this.toSeconds(t);return this.log("restart",r),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(r),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return n._periodicWaveCache.find(r=>r.phase===this._phase&&HS(r.partials,this._partials));{let t=n._periodicWaveCache.find(r=>r.type===this._type&&r.phase===this._phase);return this._partialCount=t?t.partialCount:this._partialCount,t}}get type(){return this._type}set type(t){this._type=t;let r=["sine","square","sawtooth","triangle"].indexOf(t)!==-1;if(this._phase===0&&r)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=t);else{let o=this._getCachedPeriodicWave();if(de(o)){let{partials:i,wave:s}=o;this._wave=s,this._partials=i,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{let[i,s]=this._getRealImaginary(t,this._phase),a=this.context.createPeriodicWave(i,s);this._wave=a,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),n._periodicWaveCache.push({imag:s,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:i,type:this._type,wave:this._wave}),n._periodicWaveCache.length>100&&n._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(t){this.partialCount&&this._type!=="custom"&&t!=="custom"?this.type=t+this.partialCount:this.type=t}get partialCount(){return this._partialCount}set partialCount(t){Nt(t,0);let r=this._type,o=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(o&&(r=o[1]),this._type!=="custom")t===0?this.type=r:this.type=r+t.toString();else{let i=new Float32Array(t);this._partials.forEach((s,a)=>i[a]=s),this._partials=Array.from(i),this.type=this._type}}_getRealImaginary(t,r){let i=2048,s=new Float32Array(i),a=new Float32Array(i),c=1;if(t==="custom"){if(c=this._partials.length+1,this._partialCount=this._partials.length,i=c,this._partials.length===0)return[s,a]}else{let l=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);l?(c=parseInt(l[2],10)+1,this._partialCount=parseInt(l[2],10),t=l[1],c=Math.max(c,2),i=c):this._partialCount=0,this._partials=[]}for(let l=1;l<i;++l){let u=2/(l*Math.PI),d;switch(t){case"sine":d=l<=c?1:0,this._partials[l-1]=d;break;case"square":d=l&1?2*u:0,this._partials[l-1]=d;break;case"sawtooth":d=u*(l&1?1:-1),this._partials[l-1]=d;break;case"triangle":l&1?d=2*(u*u)*(l-1>>1&1?-1:1):d=0,this._partials[l-1]=d;break;case"custom":d=this._partials[l-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}d!==0?(s[l]=-d*Math.sin(r*l),a[l]=d*Math.cos(r*l)):(s[l]=0,a[l]=0)}return[s,a]}_inverseFFT(t,r,o){let i=0,s=t.length;for(let a=0;a<s;a++)i+=t[a]*Math.cos(a*o)+r[a]*Math.sin(a*o);return i}getInitialValue(){let[t,r]=this._getRealImaginary(this._type,0),o=0,i=Math.PI*2,s=32;for(let a=0;a<s;a++)o=Math.max(this._inverseFFT(t,r,a/s*i),o);return Zg(-this._inverseFFT(t,r,this._phase)/o,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(t){this._phase=t*Math.PI/180,this.type=this._type}asArray(t=1024){return ke(this,void 0,void 0,function*(){return bn(this,t)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}return n._periodicWaveCache=[],n})();var zt=class n extends P{constructor(){super(Object.assign(_(n.getDefaults(),arguments,["context"])))}connect(e,t=0,r=0){return ha(this,e,t,r),this}};var Fn=class n extends zt{constructor(){super(Object.assign(_(n.getDefaults(),arguments,["mapping","length"]))),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper;let e=_(n.getDefaults(),arguments,["mapping","length"]);st(e.mapping)||e.mapping instanceof Float32Array?this.curve=Float32Array.from(e.mapping):VS(e.mapping)&&this.setMap(e.mapping,e.length)}static getDefaults(){return Object.assign(le.getDefaults(),{length:1024})}setMap(e,t=1024){let r=new Float32Array(t);for(let o=0,i=t;o<i;o++){let s=o/(i-1)*2-1;r[o]=e(s,o)}return this.curve=r,this}get curve(){return this._shaper.curve}set curve(e){this._shaper.curve=e}get oversample(){return this._shaper.oversample}set oversample(e){let t=["none","2x","4x"].some(r=>r.includes(e));q(t,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e}dispose(){return super.dispose(),this._shaper.disconnect(),this}};var ga=class extends zt{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new Fn({context:this.context,mapping:e=>(e+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}};var vt=class n extends le{constructor(){super(Object.assign(_(n.getDefaults(),arguments,["value"]))),this.name="Multiply",this.override=!1;let e=_(n.getDefaults(),arguments,["value"]);this._mult=this.input=this.output=new re({context:this.context,minValue:e.minValue,maxValue:e.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(e.value,0)}static getDefaults(){return Object.assign(le.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}};var el=class n extends We{constructor(){super(_(n.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="AMOscillator",this._modulationScale=new ga({context:this.context}),this._modulationNode=new re({context:this.context});let e=_(n.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new St({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new St({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new vt({context:this.context,units:"positive",value:e.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),B(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(St.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){this._modulator.restart(e),this._carrier.restart(e)}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return ke(this,void 0,void 0,function*(){return bn(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}};var va=class n extends We{constructor(){super(_(n.getDefaults(),arguments,["frequency","type","modulationType"])),this.name="FMOscillator",this._modulationNode=new re({context:this.context,gain:0});let e=_(n.getDefaults(),arguments,["frequency","type","modulationType"]);this._carrier=new St({context:this.context,detune:e.detune,frequency:0,onstop:()=>this.onstop(this),phase:e.phase,type:e.type}),this.detune=this._carrier.detune,this.frequency=new le({context:this.context,units:"frequency",value:e.frequency}),this._modulator=new St({context:this.context,phase:e.phase,type:e.modulationType}),this.harmonicity=new vt({context:this.context,units:"positive",value:e.harmonicity}),this.modulationIndex=new vt({context:this.context,units:"positive",value:e.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),B(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(St.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(e){this._modulator.start(e),this._carrier.start(e)}_stop(e){this._modulator.stop(e),this._carrier.stop(e)}_restart(e){return this._modulator.restart(e),this._carrier.restart(e),this}get type(){return this._carrier.type}set type(e){this._carrier.type=e}get baseType(){return this._carrier.baseType}set baseType(e){this._carrier.baseType=e}get partialCount(){return this._carrier.partialCount}set partialCount(e){this._carrier.partialCount=e}get modulationType(){return this._modulator.type}set modulationType(e){this._modulator.type=e}get phase(){return this._carrier.phase}set phase(e){this._carrier.phase=e,this._modulator.phase=e}get partials(){return this._carrier.partials}set partials(e){this._carrier.partials=e}asArray(e=1024){return ke(this,void 0,void 0,function*(){return bn(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}};var Hi=class n extends We{constructor(){super(_(n.getDefaults(),arguments,["frequency","width"])),this.name="PulseOscillator",this._widthGate=new re({context:this.context,gain:0}),this._thresh=new Fn({context:this.context,mapping:t=>t<=0?-1:1});let e=_(n.getDefaults(),arguments,["frequency","width"]);this.width=new le({context:this.context,units:"audioRange",value:e.width}),this._triangle=new St({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),B(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(We.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)}_stop(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)}_restart(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)}get phase(){return this._triangle.phase}set phase(e){this._triangle.phase=e}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(e){this._triangle.type=e}asArray(e=1024){return ke(this,void 0,void 0,function*(){return bn(this,e)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}};var tl=class n extends We{constructor(){super(_(n.getDefaults(),arguments,["frequency","type","spread"])),this.name="FatOscillator",this._oscillators=[];let e=_(n.getDefaults(),arguments,["frequency","type","spread"]);this.frequency=new le({context:this.context,units:"frequency",value:e.frequency}),this.detune=new le({context:this.context,units:"cents",value:e.detune}),this._spread=e.spread,this._type=e.type,this._phase=e.phase,this._partials=e.partials,this._partialCount=e.partialCount,this.count=e.count,B(this,["frequency","detune"])}static getDefaults(){return Object.assign(St.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(e){e=this.toSeconds(e),this._forEach(t=>t.start(e))}_stop(e){e=this.toSeconds(e),this._forEach(t=>t.stop(e))}_restart(e){this._forEach(t=>t.restart(e))}_forEach(e){for(let t=0;t<this._oscillators.length;t++)e(this._oscillators[t],t)}get type(){return this._type}set type(e){this._type=e,this._forEach(t=>t.type=e)}get spread(){return this._spread}set spread(e){if(this._spread=e,this._oscillators.length>1){let t=-e/2,r=e/(this._oscillators.length-1);this._forEach((o,i)=>o.detune.value=t+r*i)}}get count(){return this._oscillators.length}set count(e){if(Nt(e,1),this._oscillators.length!==e){this._forEach(t=>t.dispose()),this._oscillators=[];for(let t=0;t<e;t++){let r=new St({context:this.context,volume:-6-e*1.1,type:this._type,phase:this._phase+t/e*360,partialCount:this._partialCount,onstop:t===0?()=>this.onstop(this):ge});this.type==="custom"&&(r.partials=this._partials),this.frequency.connect(r.frequency),this.detune.connect(r.detune),r.detune.overridden=!1,r.connect(this.output),this._oscillators[t]=r}this.spread=this._spread,this.state==="started"&&this._forEach(t=>t.start())}}get phase(){return this._phase}set phase(e){this._phase=e,this._forEach((t,r)=>t.phase=this._phase+r/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(e){this._forEach(t=>t.baseType=e),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(e){this._partials=e,this._partialCount=this._partials.length,e.length&&(this._type="custom",this._forEach(t=>t.partials=e))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(e){this._partialCount=e,this._forEach(t=>t.partialCount=e),this._type=this._oscillators[0].type}asArray(e=1024){return ke(this,void 0,void 0,function*(){return bn(this,e)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(e=>e.dispose()),this}};var nl=class n extends We{constructor(){super(_(n.getDefaults(),arguments,["frequency","modulationFrequency"])),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new vt({context:this.context,value:2});let e=_(n.getDefaults(),arguments,["frequency","modulationFrequency"]);this._pulse=new Hi({context:this.context,frequency:e.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new St({context:this.context,detune:e.detune,frequency:e.frequency,onstop:()=>this.onstop(this),phase:e.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),B(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(We.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)}_stop(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)}_restart(e){this._modulator.restart(e),this._pulse.restart(e)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(e){this._modulator.phase=e}asArray(e=1024){return ke(this,void 0,void 0,function*(){return bn(this,e)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}};var KS={am:el,fat:tl,fm:va,oscillator:St,pulse:Hi,pwm:nl},go=class n extends We{constructor(){super(_(n.getDefaults(),arguments,["frequency","type"])),this.name="OmniOscillator";let e=_(n.getDefaults(),arguments,["frequency","type"]);this.frequency=new le({context:this.context,units:"frequency",value:e.frequency}),this.detune=new le({context:this.context,units:"cents",value:e.detune}),B(this,["frequency","detune"]),this.set(e)}static getDefaults(){return Object.assign(St.getDefaults(),va.getDefaults(),el.getDefaults(),tl.getDefaults(),Hi.getDefaults(),nl.getDefaults())}_start(e){this._oscillator.start(e)}_stop(e){this._oscillator.stop(e)}_restart(e){return this._oscillator.restart(e),this}get type(){let e="";return["am","fm","fat"].some(t=>this._sourceType===t)&&(e=this._sourceType),e+this._oscillator.type}set type(e){e.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(2)):e.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=e.substr(3)):e==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):e==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=e)}get partials(){return this._oscillator.partials}set partials(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=e)}get partialCount(){return this._oscillator.partialCount}set partialCount(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=e)}set(e){return Reflect.has(e,"type")&&e.type&&(this.type=e.type),super.set(e),this}_createNewOscillator(e){if(e!==this._sourceType){this._sourceType=e;let t=KS[e],r=this.now();if(this._oscillator){let o=this._oscillator;o.stop(r),this.context.setTimeout(()=>o.dispose(),this.blockTime)}this._oscillator=new t({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(r)}}get phase(){return this._oscillator.phase}set phase(e){this._oscillator.phase=e}get sourceType(){return this._sourceType}set sourceType(e){let t="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(t=this._oscillator.type),e==="fm"?this.type="fm"+t:e==="am"?this.type="am"+t:e==="fat"?this.type="fat"+t:e==="oscillator"?this.type=t:e==="pulse"?this.type="pulse":e==="pwm"&&(this.type="pwm")}_getOscType(e,t){return e instanceof KS[t]}get baseType(){return this._oscillator.baseType}set baseType(e){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&e!=="pulse"&&e!=="pwm"&&(this._oscillator.baseType=e)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(e){this._getOscType(this._oscillator,"fat")&&Wt(e)&&(this._oscillator.count=e)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(e){this._getOscType(this._oscillator,"fat")&&Wt(e)&&(this._oscillator.spread=e)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(e){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&Vt(e)&&(this._oscillator.modulationType=e)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(e=1024){return ke(this,void 0,void 0,function*(){return bn(this,e)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}};var Ui=class n extends le{constructor(){super(Object.assign(_(n.getDefaults(),arguments,["value"]))),this.override=!1,this.name="Add",this._sum=new re({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,Rn(this._constantSource,this._sum)}static getDefaults(){return Object.assign(le.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}};var ri=class n extends zt{constructor(){super(Object.assign(_(n.getDefaults(),arguments,["min","max"]))),this.name="Scale";let e=_(n.getDefaults(),arguments,["min","max"]);this._mult=this.input=new vt({context:this.context,value:e.max-e.min}),this._add=this.output=new Ui({context:this.context,value:e.min}),this._min=e.min,this._max=e.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(zt.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(e){this._min=e,this._setRange()}get max(){return this._max}set max(e){this._max=e,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}};function hh(n,e=1/0){let t=new WeakMap;return function(r,o){Reflect.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){Nt(i,n,e),t.set(this,i)}})}}function Sn(n,e=1/0){let t=new WeakMap;return function(r,o){Reflect.defineProperty(r,o,{configurable:!0,enumerable:!0,get:function(){return t.get(this)},set:function(i){Nt(this.toSeconds(i),n,e),t.set(this,i)}})}}var yr=class n extends We{constructor(){super(_(n.getDefaults(),arguments,["url","onload"])),this.name="Player",this._activeSources=new Set;let e=_(n.getDefaults(),arguments,["url","onload"]);this._buffer=new mn({onload:this._onload.bind(this,e.onload),onerror:e.onerror,reverse:e.reverse,url:e.url}),this.autostart=e.autostart,this._loop=e.loop,this._loopStart=e.loopStart,this._loopEnd=e.loopEnd,this._playbackRate=e.playbackRate,this.fadeIn=e.fadeIn,this.fadeOut=e.fadeOut}static getDefaults(){return Object.assign(We.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:ge,onerror:ge,playbackRate:1,reverse:!1})}load(e){return ke(this,void 0,void 0,function*(){return yield this._buffer.load(e),this._onload(),this})}_onload(e=ge){e(),this.autostart&&this.start()}_onSourceEnd(e){this.onstop(this),this._activeSources.delete(e),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(e,t,r){return super.start(e,t,r),this}_start(e,t,r){this._loop?t=On(t,this._loopStart):t=On(t,0);let o=this.toSeconds(t),i=r;r=On(r,Math.max(this._buffer.duration-o,0));let s=this.toSeconds(r);s=s/this._playbackRate,e=this.toSeconds(e);let a=new mo({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(e+s),this._state.setStateAtTime("stopped",e+s,{implicitEnd:!0})),this._activeSources.add(a),this._loop&&Dt(i)?a.start(e,o):a.start(e,o,s-this.toSeconds(this.fadeOut))}_stop(e){let t=this.toSeconds(e);this._activeSources.forEach(r=>r.stop(t))}restart(e,t,r){return super.restart(e,t,r),this}_restart(e,t,r){this._stop(e),this._start(e,t,r)}seek(e,t){let r=this.toSeconds(t);if(this._state.getValueAtTime(r)==="started"){let o=this.toSeconds(e);this._stop(r),this._start(r,o)}return this}setLoopPoints(e,t){return this.loopStart=e,this.loopEnd=t,this}get loopStart(){return this._loopStart}set loopStart(e){this._loopStart=e,this.buffer.loaded&&Nt(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopStart=e})}get loopEnd(){return this._loopEnd}set loopEnd(e){this._loopEnd=e,this.buffer.loaded&&Nt(this.toSeconds(e),0,this.buffer.duration),this._activeSources.forEach(t=>{t.loopEnd=e})}get buffer(){return this._buffer}set buffer(e){this._buffer.set(e)}get loop(){return this._loop}set loop(e){if(this._loop!==e&&(this._loop=e,this._activeSources.forEach(t=>{t.loop=e}),e)){let t=this._state.getNextState("stopped",this.now());t&&this._state.cancel(t.time)}}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e;let t=this.now(),r=this._state.getNextState("stopped",t);r&&r.implicitEnd&&(this._state.cancel(r.time),this._activeSources.forEach(o=>o.cancelStop())),this._activeSources.forEach(o=>{o.playbackRate.setValueAtTime(e,t)})}get reverse(){return this._buffer.reverse}set reverse(e){this._buffer.reverse=e}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(e=>e.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}};Yt([Sn(0)],yr.prototype,"fadeIn",void 0);Yt([Sn(0)],yr.prototype,"fadeOut",void 0);var rl=class n extends zt{constructor(){super(Object.assign(_(n.getDefaults(),arguments,["value"]))),this.name="Pow";let e=_(n.getDefaults(),arguments,["value"]);this._exponentScaler=this.input=this.output=new Fn({context:this.context,mapping:this._expFunc(e.value),length:8192}),this._exponent=e.value}static getDefaults(){return Object.assign(zt.getDefaults(),{value:1})}_expFunc(e){return t=>Math.pow(Math.abs(t),e)}get value(){return this._exponent}set value(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}};var jt=class n extends P{constructor(){super(_(n.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="Envelope",this._sig=new le({context:this.context,value:0}),this.output=this._sig,this.input=void 0;let e=_(n.getDefaults(),arguments,["attack","decay","sustain","release"]);this.attack=e.attack,this.decay=e.decay,this.sustain=e.sustain,this.release=e.release,this.attackCurve=e.attackCurve,this.releaseCurve=e.releaseCurve,this.decayCurve=e.decayCurve}static getDefaults(){return Object.assign(P.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(e,t){if(Vt(e))return e;{let r;for(r in fh)if(fh[r][t]===e)return r;return e}}_setCurve(e,t,r){if(Vt(r)&&Reflect.has(fh,r)){let o=fh[r];pr(o)?e!=="_decayCurve"&&(this[e]=o[t]):this[e]=o}else if(st(r)&&e!=="_decayCurve")this[e]=r;else throw new Error("Envelope: invalid curve: "+r)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(e){this._setCurve("_attackCurve","In",e)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(e){this._setCurve("_releaseCurve","Out",e)}get decayCurve(){return this._decayCurve}set decayCurve(e){q(["linear","exponential"].some(t=>t===e),`Invalid envelope curve: ${e}`),this._decayCurve=e}triggerAttack(e,t=1){this.log("triggerAttack",e,t),e=this.toSeconds(e);let o=this.toSeconds(this.attack),i=this.toSeconds(this.decay),s=this.getValueAtTime(e);if(s>0){let a=1/o;o=(1-s)/a}if(o<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if(this._attackCurve==="linear")this._sig.linearRampTo(t,o,e);else if(this._attackCurve==="exponential")this._sig.targetRampTo(t,o,e);else{this._sig.cancelAndHoldAtTime(e);let a=this._attackCurve;for(let c=1;c<a.length;c++)if(a[c-1]<=s&&s<=a[c]){a=this._attackCurve.slice(c),a[0]=s;break}this._sig.setValueCurveAtTime(a,e,o,t)}if(i&&this.sustain<1){let a=t*this.sustain,c=e+o;this.log("decay",c),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(a,i+c):this._sig.exponentialApproachValueAtTime(a,c,i)}return this}triggerRelease(e){this.log("triggerRelease",e),e=this.toSeconds(e);let t=this.getValueAtTime(e);if(t>0){let r=this.toSeconds(this.release);r<this.sampleTime?this._sig.setValueAtTime(0,e):this._releaseCurve==="linear"?this._sig.linearRampTo(0,r,e):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,r,e):(q(st(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,r,t))}return this}getValueAtTime(e){return this._sig.getValueAtTime(e)}triggerAttackRelease(e,t,r=1){return t=this.toSeconds(t),this.triggerAttack(t,r),this.triggerRelease(t+this.toSeconds(e)),this}cancel(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this}connect(e,t=0,r=0){return ha(this,e,t,r),this}asArray(e=1024){return ke(this,void 0,void 0,function*(){let t=e/this.context.sampleRate,r=new Hr(1,t,this.context.sampleRate),o=this.toSeconds(this.attack)+this.toSeconds(this.decay),i=o+this.toSeconds(this.release),s=i*.1,a=i+s,c=new this.constructor(Object.assign(this.get(),{attack:t*this.toSeconds(this.attack)/a,decay:t*this.toSeconds(this.decay)/a,release:t*this.toSeconds(this.release)/a,context:r}));return c._sig.toDestination(),c.triggerAttackRelease(t*(o+s)/a,0),(yield r.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}};Yt([Sn(0)],jt.prototype,"attack",void 0);Yt([Sn(0)],jt.prototype,"decay",void 0);Yt([hh(0,1)],jt.prototype,"sustain",void 0);Yt([Sn(0)],jt.prototype,"release",void 0);var fh=(()=>{let e,t,r=[];for(e=0;e<128;e++)r[e]=Math.sin(e/127*(Math.PI/2));let o=[],i=6.4;for(e=0;e<127;e++){t=e/127;let f=Math.sin(t*(Math.PI*2)*i-Math.PI/2)+1;o[e]=f/10+t*.83}o[127]=1;let s=[],a=5;for(e=0;e<128;e++)s[e]=Math.ceil(e/127*a)/a;let c=[];for(e=0;e<128;e++)t=e/127,c[e]=.5*(1-Math.cos(Math.PI*t));let l=[];for(e=0;e<128;e++){t=e/127;let f=Math.pow(t,3)*4+.2,h=Math.cos(f*Math.PI*2*t);l[e]=Math.abs(h*(1-t))}function u(f){let h=new Array(f.length);for(let p=0;p<f.length;p++)h[p]=1-f[p];return h}function d(f){return f.slice(0).reverse()}return{bounce:{In:u(l),Out:l},cosine:{In:r,Out:d(r)},exponential:"exponential",linear:"linear",ripple:{In:o,Out:u(o)},sine:{In:c,Out:u(c)},step:{In:s,Out:u(s)}}})();var Pn=class n extends P{constructor(){super(_(n.getDefaults(),arguments)),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease;let e=_(n.getDefaults(),arguments);this._volume=this.output=new Xn({context:this.context,volume:e.volume}),this.volume=this._volume.volume,B(this,"volume")}static getDefaults(){return Object.assign(P.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this}_syncState(){let e=!1;return this._synced||(this._synced=!0,e=!0),e}_syncMethod(e,t){let r=this["_original_"+e]=this[e];this[e]=(...o)=>{let i=o[t],s=this.context.transport.schedule(a=>{o[t]=a,r.apply(this,o)},i);this._scheduledEvents.push(s)}}unsync(){return this._scheduledEvents.forEach(e=>this.context.transport.clear(e)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this}triggerAttackRelease(e,t,r,o){let i=this.toSeconds(r),s=this.toSeconds(t);return this.triggerAttack(e,i,o),this.triggerRelease(i+s),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}};var Tn=class n extends Pn{constructor(){super(_(n.getDefaults(),arguments));let e=_(n.getDefaults(),arguments);this.portamento=e.portamento,this.onsilence=e.onsilence}static getDefaults(){return Object.assign(Pn.getDefaults(),{detune:0,onsilence:ge,portamento:0})}triggerAttack(e,t,r=1){this.log("triggerAttack",e,t,r);let o=this.toSeconds(t);return this._triggerEnvelopeAttack(o,r),this.setNote(e,o),this}triggerRelease(e){this.log("triggerRelease",e);let t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this}setNote(e,t){let r=this.toSeconds(t),o=e instanceof gn?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(r)>.05){let i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(o,i,r)}else this.frequency.setValueAtTime(o,r);return this}};Yt([Sn(0)],Tn.prototype,"portamento",void 0);var qi=class n extends jt{constructor(){super(_(n.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new re({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}};var Kn=class n extends Tn{constructor(){super(_(n.getDefaults(),arguments)),this.name="Synth";let e=_(n.getDefaults(),arguments);this.oscillator=new go(Object.assign({context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)},e.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new qi(Object.assign({context:this.context},e.envelope)),this.oscillator.chain(this.envelope,this.output),B(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Tn.getDefaults(),{envelope:Object.assign(fn(jt.getDefaults(),Object.keys(P.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(fn(go.getDefaults(),[...Object.keys(We.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),this.envelope.sustain===0){let r=this.toSeconds(this.envelope.attack),o=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+o)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}};var ol=class n extends P{constructor(){super(_(n.getDefaults(),arguments,["frequency","type"])),this.name="BiquadFilter";let e=_(n.getDefaults(),arguments,["frequency","type"]);this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new _e({context:this.context,units:"number",value:e.Q,param:this._filter.Q}),this.frequency=new _e({context:this.context,units:"frequency",value:e.frequency,param:this._filter.frequency}),this.detune=new _e({context:this.context,units:"cents",value:e.detune,param:this._filter.detune}),this.gain=new _e({context:this.context,units:"decibels",convert:!1,value:e.gain,param:this._filter.gain}),this.type=e.type}static getDefaults(){return Object.assign(P.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(e){q(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._filter.type=e}getFrequencyResponse(e=128){let t=new Float32Array(e);for(let s=0;s<e;s++){let c=Math.pow(s/e,2)*19980+20;t[s]=c}let r=new Float32Array(e),o=new Float32Array(e),i=this.context.createBiquadFilter();return i.type=this.type,i.Q.value=this.Q.value,i.frequency.value=this.frequency.value,i.gain.value=this.gain.value,i.getFrequencyResponse(t,r,o),r}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}};var vo=class n extends P{constructor(){super(_(n.getDefaults(),arguments,["frequency","type","rolloff"])),this.name="Filter",this.input=new re({context:this.context}),this.output=new re({context:this.context}),this._filters=[];let e=_(n.getDefaults(),arguments,["frequency","type","rolloff"]);this._filters=[],this.Q=new le({context:this.context,units:"positive",value:e.Q}),this.frequency=new le({context:this.context,units:"frequency",value:e.frequency}),this.detune=new le({context:this.context,units:"cents",value:e.detune}),this.gain=new le({context:this.context,units:"decibels",convert:!1,value:e.gain}),this._type=e.type,this.rolloff=e.rolloff,B(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(P.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(e){q(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e)!==-1,`Invalid filter type: ${e}`),this._type=e,this._filters.forEach(r=>r.type=e)}get rolloff(){return this._rolloff}set rolloff(e){let t=Wt(e)?e:parseInt(e,10),r=[-12,-24,-48,-96],o=r.indexOf(t);q(o!==-1,`rolloff can only be ${r.join(", ")}`),o+=1,this._rolloff=t,this.input.disconnect(),this._filters.forEach(i=>i.disconnect()),this._filters=new Array(o);for(let i=0;i<o;i++){let s=new ol({context:this.context});s.type=this._type,this.frequency.connect(s.frequency),this.detune.connect(s.detune),this.Q.connect(s.Q),this.gain.connect(s.gain),this._filters[i]=s}this._internalChannels=this._filters,Rn(this.input,...this._internalChannels,this.output)}getFrequencyResponse(e=128){let t=new ol({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),r=new Float32Array(e).map(()=>1);return this._filters.forEach(()=>{t.getFrequencyResponse(e).forEach((i,s)=>r[s]*=i)}),t.dispose(),r}dispose(){return super.dispose(),this._filters.forEach(e=>{e.dispose()}),Bi(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}};var il=class n extends jt{constructor(){super(_(n.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="FrequencyEnvelope";let e=_(n.getDefaults(),arguments,["attack","decay","sustain","release"]);this._octaves=e.octaves,this._baseFrequency=this.toFrequency(e.baseFrequency),this._exponent=this.input=new rl({context:this.context,value:e.exponent}),this._scale=this.output=new ri({context:this.context,min:this._baseFrequency,max:this._baseFrequency*Math.pow(2,this._octaves)}),this._sig.chain(this._exponent,this._scale)}static getDefaults(){return Object.assign(jt.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})}get baseFrequency(){return this._baseFrequency}set baseFrequency(e){let t=this.toFrequency(e);Nt(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(e){this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)}get exponent(){return this._exponent.value}set exponent(e){this._exponent.value=e}dispose(){return super.dispose(),this._exponent.dispose(),this._scale.dispose(),this}};var oi=class n extends Tn{constructor(){super(_(n.getDefaults(),arguments)),this.name="MonoSynth";let e=_(n.getDefaults(),arguments);this.oscillator=new go(Object.assign(e.oscillator,{context:this.context,detune:e.detune,onstop:()=>this.onsilence(this)})),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.filter=new vo(Object.assign(e.filter,{context:this.context})),this.filterEnvelope=new il(Object.assign(e.filterEnvelope,{context:this.context})),this.envelope=new qi(Object.assign(e.envelope,{context:this.context})),this.oscillator.chain(this.filter,this.envelope,this.output),this.filterEnvelope.connect(this.filter.frequency),B(this,["oscillator","frequency","detune","filter","filterEnvelope","envelope"])}static getDefaults(){return Object.assign(Tn.getDefaults(),{envelope:Object.assign(fn(jt.getDefaults(),Object.keys(P.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign(fn(vo.getDefaults(),Object.keys(P.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign(fn(il.getDefaults(),Object.keys(P.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign(fn(go.getDefaults(),Object.keys(We.getDefaults())),{type:"sawtooth"})})}_triggerEnvelopeAttack(e,t=1){if(this.envelope.triggerAttack(e,t),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),this.envelope.sustain===0){let r=this.toSeconds(this.envelope.attack),o=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+r+o)}}_triggerEnvelopeRelease(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))}getLevelAtTime(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this}};var ph=class n extends Kn{constructor(){super(_(n.getDefaults(),arguments)),this.name="MembraneSynth",this.portamento=0;let e=_(n.getDefaults(),arguments);this.pitchDecay=e.pitchDecay,this.octaves=e.octaves,B(this,["oscillator","envelope"])}static getDefaults(){return Yn(Tn.getDefaults(),Kn.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(e,t){let r=this.toSeconds(t),o=this.toFrequency(e instanceof gn?e.toFrequency():e),i=o*this.octaves;return this.oscillator.frequency.setValueAtTime(i,r),this.oscillator.frequency.exponentialRampToValueAtTime(o,r+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}};Yt([hh(0)],ph.prototype,"octaves",void 0);Yt([Sn(0)],ph.prototype,"pitchDecay",void 0);var eT=new Set;function _a(n){eT.add(n)}function mh(n,e){let t=`registerProcessor("${n}", ${e})`;eT.add(t)}var MP=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the [[ToneAudioWorklet]]. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;_a(MP);var AP=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;_a(AP);var NP=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;_a(NP);var tT="feedback-comb-filter",OP=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;mh(tT,OP);var xa=class n extends Pn{constructor(){super(_(n.getDefaults(),arguments,["voice","options"])),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0;let e=_(n.getDefaults(),arguments,["voice","options"]);q(!Wt(e.voice),"DEPRECATED: The polyphony count is no longer the first argument.");let t=e.voice.getDefaults();this.options=Object.assign(t,e.options),this.voice=e.voice,this.maxPolyphony=e.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();let r=this._voices.indexOf(this._dummyVoice);this._voices.splice(r,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Pn.getDefaults(),{maxPolyphony:32,options:{},voice:Kn})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(e){this._availableVoices.push(e);let t=this._activeVoices.findIndex(r=>r.voice===e);this._activeVoices.splice(t,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){let e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return e.connect(this.output),this._voices.push(e),e}else sa("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){let e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}}_triggerAttack(e,t,r){e.forEach(o=>{let i=new Kc(this.context,o).toMidi(),s=this._getNextAvailableVoice();s&&(s.triggerAttack(o,t,r),this._activeVoices.push({midi:i,voice:s,released:!1}),this.log("triggerAttack",o,t))})}_triggerRelease(e,t){e.forEach(r=>{let o=new Kc(this.context,r).toMidi(),i=this._activeVoices.find(({midi:s,released:a})=>s===o&&!a);i&&(i.voice.triggerRelease(t),i.released=!0,this.log("triggerRelease",r,t))})}_scheduleEvent(e,t,r,o){q(!this.disposed,"Synth was already disposed"),r<=this.now()?e==="attack"?this._triggerAttack(t,r,o):this._triggerRelease(t,r):this.context.setTimeout(()=>{this._scheduleEvent(e,t,r,o)},r-this.now())}triggerAttack(e,t,r){Array.isArray(e)||(e=[e]);let o=this.toSeconds(t);return this._scheduleEvent("attack",e,o,r),this}triggerRelease(e,t){Array.isArray(e)||(e=[e]);let r=this.toSeconds(t);return this._scheduleEvent("release",e,r),this}triggerAttackRelease(e,t,r,o){let i=this.toSeconds(r);if(this.triggerAttack(e,i,o),st(t)){q(st(e),"If the duration is an array, the notes must also be an array"),e=e;for(let s=0;s<e.length;s++){let a=t[Math.min(s,t.length-1)],c=this.toSeconds(a);q(c>0,"The duration must be greater than 0"),this.triggerRelease(e[s],i+c)}}else{let s=this.toSeconds(t);q(s>0,"The duration must be greater than 0"),this.triggerRelease(e,i+s)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}set(e){let t=fn(e,["onsilence","context"]);return this.options=Yn(this.options,t),this._voices.forEach(r=>r.set(t)),this._dummyVoice.set(t),this}get(){return this._dummyVoice.get()}releaseAll(e){let t=this.toSeconds(e);return this._activeVoices.forEach(({voice:r})=>{r.triggerRelease(t)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(e=>e.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}};var gh=class n extends Pn{constructor(){super(_(n.getDefaults(),arguments,["urls","onload","baseUrl"],"urls")),this.name="Sampler",this._activeSources=new Map;let e=_(n.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),t={};Object.keys(e.urls).forEach(r=>{let o=parseInt(r,10);if(q(Gc(r)||Wt(o)&&isFinite(o),`url key is neither a note or midi pitch: ${r}`),Gc(r)){let i=new gn(this.context,r).toMidi();t[i]=e.urls[r]}else Wt(o)&&isFinite(o)&&(t[o]=e.urls[o])}),this._buffers=new pa({urls:t,onload:e.onload,baseUrl:e.baseUrl,onerror:e.onerror}),this.attack=e.attack,this.release=e.release,this.curve=e.curve,this._buffers.loaded&&Promise.resolve().then(e.onload)}static getDefaults(){return Object.assign(Pn.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:ge,onerror:ge,release:.1,urls:{}})}_findClosest(e){let r=0;for(;r<96;){if(this._buffers.has(e+r))return-r;if(this._buffers.has(e-r))return r;r++}throw new Error(`No available buffers for note: ${e}`)}triggerAttack(e,t,r=1){return this.log("triggerAttack",e,t,r),Array.isArray(e)||(e=[e]),e.forEach(o=>{let i=Qg(new gn(this.context,o).toFrequency()),s=Math.round(i),a=i-s,c=this._findClosest(s),l=s-c,u=this._buffers.get(l),d=$i(c+a),f=new mo({url:u,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:d}).connect(this.output);f.start(t,0,u.duration/d,r),st(this._activeSources.get(s))||this._activeSources.set(s,[]),this._activeSources.get(s).push(f),f.onended=()=>{if(this._activeSources&&this._activeSources.has(s)){let h=this._activeSources.get(s),p=h.indexOf(f);p!==-1&&h.splice(p,1)}}}),this}triggerRelease(e,t){return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(r=>{let o=new gn(this.context,r).toMidi();if(this._activeSources.has(o)&&this._activeSources.get(o).length){let i=this._activeSources.get(o);t=this.toSeconds(t),i.forEach(s=>{s.stop(t)}),this._activeSources.set(o,[])}}),this}releaseAll(e){let t=this.toSeconds(e);return this._activeSources.forEach(r=>{for(;r.length;)r.shift().stop(t)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(e,t,r,o=1){let i=this.toSeconds(r);return this.triggerAttack(e,i,o),st(t)?(q(st(e),"notes must be an array when duration is array"),e.forEach((s,a)=>{let c=t[Math.min(a,t.length-1)];this.triggerRelease(s,i+this.toSeconds(c))})):this.triggerRelease(e,i+this.toSeconds(t)),this}add(e,t,r){if(q(Gc(e)||isFinite(e),`note must be a pitch or midi: ${e}`),Gc(e)){let o=new gn(this.context,e).toMidi();this._buffers.add(o,t,r)}else this._buffers.add(e,t,r);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(e=>{e.forEach(t=>t.dispose())}),this._activeSources.clear(),this}};Yt([Sn(0)],gh.prototype,"attack",void 0);Yt([Sn(0)],gh.prototype,"release",void 0);var sl=class n extends P{constructor(){super(Object.assign(_(n.getDefaults(),arguments,["pan"]))),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner;let e=_(n.getDefaults(),arguments,["pan"]);this.pan=new _e({context:this.context,param:this._panner.pan,value:e.pan,minValue:-1,maxValue:1}),this._panner.channelCount=e.channelCount,this._panner.channelCountMode="explicit",B(this,"pan")}static getDefaults(){return Object.assign(P.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}};var oT="bit-crusher",jP=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;mh(oT,jP);var LCe=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100];var zCe=[1687/25e3,1601/25e3,2053/25e3,2251/25e3];var wa=class n extends P{constructor(){super(_(n.getDefaults(),arguments,["solo"])),this.name="Solo";let e=_(n.getDefaults(),arguments,["solo"]);this.input=this.output=new re({context:this.context}),n._allSolos.has(this.context)||n._allSolos.set(this.context,new Set),n._allSolos.get(this.context).add(this),this.solo=e.solo}static getDefaults(){return Object.assign(P.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(e){e?this._addSolo():this._removeSolo(),n._allSolos.get(this.context).forEach(t=>t._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){n._soloed.has(this.context)||n._soloed.set(this.context,new Set),n._soloed.get(this.context).add(this)}_removeSolo(){n._soloed.has(this.context)&&n._soloed.get(this.context).delete(this)}_isSoloed(){return n._soloed.has(this.context)&&n._soloed.get(this.context).has(this)}_noSolos(){return!n._soloed.has(this.context)||n._soloed.has(this.context)&&n._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),n._allSolos.get(this.context).delete(this),this._removeSolo(),this}};wa._allSolos=new Map;wa._soloed=new Map;var xh=class n extends P{constructor(){super(_(n.getDefaults(),arguments,["pan","volume"])),this.name="PanVol";let e=_(n.getDefaults(),arguments,["pan","volume"]);this._panner=this.input=new sl({context:this.context,pan:e.pan,channelCount:e.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Xn({context:this.context,volume:e.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=e.mute,B(this,["pan","volume"])}static getDefaults(){return Object.assign(P.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(e){this._volume.mute=e}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}};var rv=class n extends P{constructor(){super(_(n.getDefaults(),arguments,["volume","pan"])),this.name="Channel";let e=_(n.getDefaults(),arguments,["volume","pan"]);this._solo=this.input=new wa({solo:e.solo,context:this.context}),this._panVol=this.output=new xh({context:this.context,pan:e.pan,volume:e.volume,mute:e.mute,channelCount:e.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),B(this,["pan","volume"])}static getDefaults(){return Object.assign(P.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(e){this._solo.solo=e}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(e){this._panVol.mute=e}_getBus(e){return n.buses.has(e)||n.buses.set(e,new re({context:this.context})),n.buses.get(e)}send(e,t=0){let r=this._getBus(e),o=new re({context:this.context,units:"decibels",gain:t});return this.connect(o),o.connect(r),o}receive(e){return this._getBus(e).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}};rv.buses=new Map;var ov=class extends P{constructor(){super(...arguments),this.name="Listener",this.positionX=new _e({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new _e({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new _e({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new _e({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new _e({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new _e({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new _e({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new _e({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new _e({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(P.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}};ei(n=>{n.listener=new ov({context:n})});ti(n=>{n.listener.dispose()});function Ca(){return dt().now()}var FEe=dt().transport;var PEe=dt().destination,VEe=dt().destination;var LEe=dt().listener;var jEe=dt().draw;var BEe=dt();var rt=function(n){return n.WHOLE="WHOLE",n.HALF="HALF",n.QUARTER="QUARTER",n.EIGHTH="EIGHTH",n.SIXTEENTH="SIXTEENTH",n}(rt||{});var wh=new Map([[1,rt.WHOLE],[2,rt.HALF],[4,rt.QUARTER],[8,rt.EIGHTH],[16,rt.SIXTEENTH]]),sT={[rt.WHOLE]:4,[rt.HALF]:2,[rt.QUARTER]:1,[rt.EIGHTH]:.5,[rt.SIXTEENTH]:.25},Ch=n=>({[rt.WHOLE]:rt.HALF,[rt.HALF]:rt.QUARTER,[rt.QUARTER]:rt.EIGHTH,[rt.EIGHTH]:rt.SIXTEENTH,[rt.SIXTEENTH]:rt.SIXTEENTH})[n];var ii=function(n){return n.TIP="TIP",n.TAP="TAP",n.HALF_TIP="HALF_TIP",n.QUARTER_TIP="QUARTER_TIP",n}(ii||{}),Da=(()=>{class n{constructor(){this._isMetronomeOn=new je(!0),this._isPlaying=new je(!1),this._bpm=new je(120),this._numBeatsPerBar=new je(4),this._beatValue=new je(4),this._loopDuration=new je(2),this.isMetronomeOn$=this._isMetronomeOn.asObservable(),this.isPlaying$=this._isPlaying.asObservable(),this.bpm$=this._bpm.asObservable(),this.numBeatsPerBar$=this._numBeatsPerBar.asObservable(),this.beatValue$=this._beatValue.asObservable(),this.loopDuration$=this._loopDuration.asObservable(),this.beatCounter$=It([this.isPlaying$,this.bpm$,this.beatValue$]).pipe(ht(([t,r,o])=>{let i=wh.get(o);return t?this.buildTimer(r,i):_r}),ht(t=>this.discardFirstTick(t))),this.beatTick$=this.beatCounter$.pipe(zl(this.numBeatsPerBar$,this.beatValue$,this.loopDuration$),ae(([t,r,o,i])=>{if(t>r){if(t>i*r){let s=t%(i*r);return s===0?i*r:s}return t}return t%r===0?r:t%r}),Ge(t=>console.log("beat tick: ",t))),this.halfTick$=It([this.isPlaying$,this.beatCounter$,this.bpm$,this.beatValue$]).pipe(ht(([t,r,o,i])=>{let s=wh.get(i);return t?this.buildTimer(o,Ch(s)):_r})),this.quarterTick$=It([this.beatTick$,this.isPlaying$,this.bpm$,this.beatValue$]).pipe(ht(([t,r,o,i])=>{let s=wh.get(i),a=Ch(s),c=Ch(a);return r?this.buildTimer(o,c):_r}),ae(t=>t+1),Ge(t=>console.log("quarter tick: ",t))),this.metronomeClick$=this.beatTick$.pipe(zl(this.numBeatsPerBar$,this.isMetronomeOn$),ht(([t,r,o])=>o?ue(t%r===1?ii.TIP:ii.TAP):_r))}get isMetronomeOn(){return this._isMetronomeOn.getValue()}get isPlaying(){return this._isPlaying.getValue()}get bpm(){return this._bpm.getValue()}get numBeatsPerBar(){return this._numBeatsPerBar.getValue()}get noteDurationPerBeat(){return this._beatValue.getValue()}get loopDuration(){return this._loopDuration.getValue()}toggleIsMetronomeOn(){this._isMetronomeOn.next(!this.isMetronomeOn)}toggleIsPlaying(){this._isPlaying.next(!this.isPlaying)}setBpm(t){this._bpm.next(t)}setNumBeatsPerBar(t){this._numBeatsPerBar.next(t)}setNoteDurationPerBeat(t){this._beatValue.next(t)}setLoopDuration(t){this._loopDuration.next(t)}buildTimer(t,r=rt.QUARTER){let o=1e3*(60/t),i=sT[r];return nf(0,o*i)}discardFirstTick(t,r=1){return t===0?_r:ue(t)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Jn=function(n){return n.MONO_SYNTH="mono_synth",n.POLY_SYNTH="poly_synth",n.MONO_SAMPLE="mono_sample",n.POLY_SAMPLE="poly_sample",n}(Jn||{});var en=(()=>{class n{constructor(){this.metronomePlayers={[ii.TIP]:new yr("./assets/audio/metronome_tip.wav").toDestination(),[ii.TAP]:new yr("./assets/audio/metronome_tap.wav").toDestination(),[ii.HALF_TIP]:new yr("./assets/audio/metronome_half_tip.wav").toDestination(),[ii.QUARTER_TIP]:new yr("./assets/audio/metronome_quarter_tip.wav").toDestination()},this.samples={snare:new yr("./assets/audio/clap_basic.wav").toDestination()},this.polySynths=[new xa(Kn).toDestination(),new xa(Kn).toDestination(),new xa(Kn).toDestination()],this.synthSetups=[{id:1,octave:3,synth:new oi({oscillator:{type:"sine"}}).toDestination()},{id:2,octave:3,synth:new oi({oscillator:{type:"sine"}}).toDestination()},{id:3,octave:3,synth:new oi({oscillator:{type:"sine"}}).toDestination()}]}getPolySynths(){return this.polySynths}getSynthSetups(){return this.synthSetups}setOscillatorType(t,r){this.replaceSynth(t,this.buildMonoSynth(r))}setOscillatorOctave(t,r){}playMetronomeClick(t){this.metronomePlayers[t].start()}playSample(t){this.samples[t].start()}playMonoSynth(t){let r=Ca();t?.triggerAttackRelease("C3","2n",r)}playNoteOld(t,r=.8){let o=Ca();this.synthSetups[0].synth?.triggerAttackRelease(t.frequency,"4n",o,r)}playNote(t,r=.8,o){try{let i=Ca(),s=o?.instrumentType,a;if(s===Jn.MONO_SYNTH)a=this.synthSetups[0].synth,a.triggerAttackRelease(t.frequency,"4n",i,r);else if(s===Jn.POLY_SYNTH)a=this.polySynths[0],a.triggerAttackRelease(t.frequency,"4n",i,r);else if(s===Jn.MONO_SAMPLE)a=this.samples.snare,a.start();else if(s===Jn.POLY_SAMPLE)a=this.samples.snare,a.start();else throw new Error(`Unsupported instrument type: ${s}`)}catch(i){console.error("Error playing note:",i);try{let s=Ca();this.polySynths[0]?.triggerAttackRelease(t.frequency,"8n",s,r)}catch(s){console.error("Fallback also failed:",s)}}}playNotes(t){let r=Ca(),o=this.polySynths[0],i=t.map(s=>s.frequency);o?.triggerAttackRelease(i,"4n",r)}replaceSynth(t,r){let o=this.getSynthSetups().findIndex(i=>i.synth==t);this.synthSetups[o].synth.disconnect(),this.synthSetups[o].synth=r.toDestination()}buildMonoSynth(t){return new oi({oscillator:{type:t}})}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var aT=(()=>{class n{constructor(t){this.toneService=t}init(){return te(this,null,function*(){let t=yield this.getMIDIAccess();t&&(this._midi=t,this.initializeMIDIListeners(t))})}getMIDIAccess(){return te(this,null,function*(){let t=o=>(console.log("MIDI ready!"),o),r=o=>{console.error(`Failed to get MIDI access - ${o}`)};return navigator.requestMIDIAccess().then(t,r)})}initializeMIDIListeners(t){let r=o=>{let i=`MIDI message received at timestamp ${o.timeStamp}[${o.data?.length??0} bytes]: `;for(let s of o.data??[])i+=`0x${s.toString(16)} `;console.log(i)};t.inputs.forEach((o,i,s)=>{o.onmidimessage=a=>{this.handleMIDIMessage(a)}}),t.onstatechange=o=>{console.log(`MIDI state changed: ${JSON.stringify(o)}`)},t.inputs.forEach(o=>{o.onmidimessage=r})}handleMIDIMessage(t){console.log(`Received MIDI event: ${JSON.stringify(t)}`);let{command:r,channel:o,note:i,velocity:s}=this.parseMIDIMessage(t),a=kd.getNoteFromMIDIPosition(i);r===8||r===9&&o===0&&this.toneService.playNote(a,s)}parseMIDIMessage(t){if(t.data)return{command:t.data[0]>>4,channel:t.data[0]&15,note:t.data[1],velocity:t.data[2]/127};throw console.error("midi message with no data"),Error("midi message with no data? should not happen")}static{this.\u0275fac=function(r){return new(r||n)(ce(en))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var cT=(()=>{class n{constructor(t){this.midiService=t,this.title="sketched-app"}ngOnInit(){this.midiService.init()}static{this.\u0275fac=function(r){return new(r||n)(Q(aT))}}static{this.\u0275cmp=Ze({type:n,selectors:[["app-root"]],standalone:!0,features:[Ye],decls:4,vars:0,consts:[[1,"content"]],template:function(r,o){r&1&&(S(0,"div"),pt(1,"app-navbar"),S(2,"div",0),pt(3,"router-outlet"),T()())},dependencies:[Od,lg,Cw],styles:[".content[_ngcontent-%COMP%]{padding:2rem}@media (max-width: 1000px){.content[_ngcontent-%COMP%]{padding:.5rem}}"]})}}return n})();var vT=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(r){return new(r||n)(Q(eo),Q(Mr))}}static{this.\u0275dir=Bt({type:n})}}return n})(),Eh=(()=>{class n extends vT{static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Vo(n)))(o||n)}})()}static{this.\u0275dir=Bt({type:n,features:[to]})}}return n})(),hl=new pe("");var ZP={provide:hl,useExisting:ko(()=>Ih),multi:!0};function YP(){let n=io()?io().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var QP=new pe(""),Ih=(()=>{class n extends vT{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!YP())}writeValue(t){let r=t??"";this.setProperty("value",r)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(r){return new(r||n)(Q(eo),Q(Mr),Q(QP,8))}}static{this.\u0275dir=Bt({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){r&1&&he("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},features:[Is([ZP]),to]})}}return n})();var XP=new pe(""),KP=new pe("");function yT(n){return n!=null}function _T(n){return $o(n)?it(n):n}function xT(n){let e={};return n.forEach(t=>{e=t!=null?y(y({},e),t):e}),Object.keys(e).length===0?null:e}function wT(n,e){return e.map(t=>t(n))}function JP(n){return!n.validate}function CT(n){return n.map(e=>JP(e)?e:t=>e.validate(t))}function eV(n){if(!n)return null;let e=n.filter(yT);return e.length==0?null:function(t){return xT(wT(t,e))}}function DT(n){return n!=null?eV(CT(n)):null}function tV(n){if(!n)return null;let e=n.filter(yT);return e.length==0?null:function(t){let r=wT(t,e).map(_T);return tf(r).pipe(ae(xT))}}function bT(n){return n!=null?tV(CT(n)):null}function lT(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function nV(n){return n._rawValidators}function rV(n){return n._rawAsyncValidators}function sv(n){return n?Array.isArray(n)?n:[n]:[]}function bh(n,e){return Array.isArray(n)?n.includes(e):n===e}function uT(n,e){let t=sv(e);return sv(n).forEach(o=>{bh(t,o)||t.push(o)}),t}function dT(n,e){return sv(e).filter(t=>!bh(n,t))}var Sh=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=DT(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=bT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},av=class extends Sh{get formDirective(){return null}get path(){return null}},dl=class extends Sh{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},cv=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},oV={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},DIe=O(y({},oV),{"[class.ng-submitted]":"isSubmitted"}),Ea=(()=>{class n extends cv{constructor(t){super(t)}static{this.\u0275fac=function(r){return new(r||n)(Q(dl,2))}}static{this.\u0275dir=Bt({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){r&2&&Ot("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[to]})}}return n})();var al="VALID",Dh="INVALID",ba="PENDING",cl="DISABLED",Ta=class{},Th=class extends Ta{constructor(e,t){super(),this.value=e,this.source=t}},ll=class extends Ta{constructor(e,t){super(),this.pristine=e,this.source=t}},ul=class extends Ta{constructor(e,t){super(),this.touched=e,this.source=t}},Sa=class extends Ta{constructor(e,t){super(),this.status=e,this.source=t}};function iV(n){return(Mh(n)?n.validators:n)||null}function sV(n){return Array.isArray(n)?DT(n):n||null}function aV(n,e){return(Mh(e)?e.asyncValidators:n)||null}function cV(n){return Array.isArray(n)?bT(n):n||null}function Mh(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}var lv=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=sd(()=>this.statusReactive()),this.statusReactive=Ku(void 0),this._pristine=sd(()=>this.pristineReactive()),this.pristineReactive=Ku(!0),this._touched=sd(()=>this.touchedReactive()),this.touchedReactive=Ku(!1),this._events=new yt,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return Ar(this.statusReactive)}set status(e){Ar(()=>this.statusReactive.set(e))}get valid(){return this.status===al}get invalid(){return this.status===Dh}get pending(){return this.status==ba}get disabled(){return this.status===cl}get enabled(){return this.status!==cl}get pristine(){return Ar(this.pristineReactive)}set pristine(e){Ar(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return Ar(this.touchedReactive)}set touched(e){Ar(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(uT(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(uT(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(dT(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(dT(e,this._rawAsyncValidators))}hasValidator(e){return bh(this._rawValidators,e)}hasAsyncValidator(e){return bh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(O(y({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ul(!0,r))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let r=e.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),t&&e.emitEvent!==!1&&this._events.next(new ul(!1,r))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(O(y({},e),{sourceControl:r})),t&&e.emitEvent!==!1&&this._events.next(new ll(!1,r))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let r=e.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),t&&e.emitEvent!==!1&&this._events.next(new ll(!0,r))}markAsPending(e={}){this.status=ba;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Sa(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(O(y({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=cl,this.errors=null,this._forEachChild(o=>{o.disable(O(y({},e),{onlySelf:!0}))}),this._updateValue();let r=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Th(this.value,r)),this._events.next(new Sa(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(O(y({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=al,this._forEachChild(r=>{r.enable(O(y({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(O(y({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===al||this.status===ba)&&this._runAsyncValidator(r,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Th(this.value,t)),this._events.next(new Sa(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(O(y({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?cl:al}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ba,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let r=_T(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){let r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Sa(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,r)}_initObservables(){this.valueChanges=new Mt,this.statusChanges=new Mt}_calculateStatus(){return this._allControlsDisabled()?cl:this.errors?Dh:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ba)?ba:this._anyControlsHaveStatus(Dh)?Dh:al}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let r=!this._anyControlsDirty(),o=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),o&&this._events.next(new ll(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new ul(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Mh(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=sV(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=cV(this._rawAsyncValidators)}};var ST=new pe("CallSetDisabledState",{providedIn:"root",factory:()=>uv}),uv="always";function lV(n,e){return[...e.path,n]}function uV(n,e,t=uv){hV(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),fV(n,e),mV(n,e),pV(n,e),dV(n,e)}function hT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function dV(n,e){if(e.valueAccessor.setDisabledState){let t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function hV(n,e){let t=nV(n);e.validator!==null?n.setValidators(lT(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let r=rV(n);e.asyncValidator!==null?n.setAsyncValidators(lT(r,e.asyncValidator)):typeof r=="function"&&n.setAsyncValidators([r]);let o=()=>n.updateValueAndValidity();hT(e._rawValidators,o),hT(e._rawAsyncValidators,o)}function fV(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&TT(n,e)})}function pV(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&TT(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function TT(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function mV(n,e){let t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function gV(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function vV(n){return Object.getPrototypeOf(n.constructor)===Eh}function yV(n,e){if(!e)return null;Array.isArray(e);let t,r,o;return e.forEach(i=>{i.constructor===Ih?t=i:vV(i)?r=i:o=i}),o||r||t||null}function fT(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function pT(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var _V=class extends lv{constructor(e=null,t,r){super(iV(t),aV(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Mh(t)&&(t.nonNullable||t.initialValueIsDefault)&&(pT(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(r=>r(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){fT(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){fT(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){pT(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var xV={provide:dl,useExisting:ko(()=>Wi)},mT=Promise.resolve(),Wi=(()=>{class n extends dl{constructor(t,r,o,i,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this.control=new _V,this._registered=!1,this.name="",this.update=new Mt,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=yV(this,i)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),gV(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){uV(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){mT.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let r=t.isDisabled.currentValue,o=r!==0&&Ai(r);mT.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?lV(t,this._parent):[t]}static{this.\u0275fac=function(r){return new(r||n)(Q(av,9),Q(XP,10),Q(KP,10),Q(hl,10),Q(Ho,8),Q(ST,8))}}static{this.\u0275dir=Bt({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Is([xV]),to,Si]})}}return n})();var wV={provide:hl,useExisting:ko(()=>dv),multi:!0},dv=(()=>{class n extends Eh{writeValue(t){this.setProperty("value",parseFloat(t))}registerOnChange(t){this.onChange=r=>{t(r==""?null:parseFloat(r))}}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Vo(n)))(o||n)}})()}static{this.\u0275dir=Bt({type:n,selectors:[["input","type","range","formControlName",""],["input","type","range","formControl",""],["input","type","range","ngModel",""]],hostBindings:function(r,o){r&1&&he("change",function(s){return o.onChange(s.target.value)})("input",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},features:[Is([wV]),to]})}}return n})();var CV={provide:hl,useExisting:ko(()=>ai),multi:!0};function ET(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function DV(n){return n.split(":")[0]}var ai=(()=>{class n extends Eh{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r=this._getOptionId(t),o=ET(r,t);this.setProperty("value",o)}registerOnChange(t){this.onChange=r=>{this.value=this._getOptionValue(r),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),t))return r;return null}_getOptionValue(t){let r=DV(t);return this._optionMap.has(r)?this._optionMap.get(r):t}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Vo(n)))(o||n)}})()}static{this.\u0275dir=Bt({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,o){r&1&&he("change",function(s){return o.onChange(s.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[Is([CV]),to]})}}return n})(),Ia=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(ET(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Q(Mr),Q(eo),Q(ai,9))}}static{this.\u0275dir=Bt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})(),bV={provide:hl,useExisting:ko(()=>IT),multi:!0};function gT(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function SV(n){return n.split(":")[0]}var IT=(()=>{class n extends Eh{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let r;if(Array.isArray(t)){let o=t.map(i=>this._getOptionId(i));r=(i,s)=>{i._setSelected(o.indexOf(s.toString())>-1)}}else r=(o,i)=>{o._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(t){this.onChange=r=>{let o=[],i=r.selectedOptions;if(i!==void 0){let s=i;for(let a=0;a<s.length;a++){let c=s[a],l=this._getOptionValue(c.value);o.push(l)}}else{let s=r.options;for(let a=0;a<s.length;a++){let c=s[a];if(c.selected){let l=this._getOptionValue(c.value);o.push(l)}}}this.value=o,t(o)}}_registerOption(t){let r=(this._idCounter++).toString();return this._optionMap.set(r,t),r}_getOptionId(t){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,t))return r;return null}_getOptionValue(t){let r=SV(t);return this._optionMap.has(r)?this._optionMap.get(r)._value:t}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Vo(n)))(o||n)}})()}static{this.\u0275dir=Bt({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,o){r&1&&he("change",function(s){return o.onChange(s.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[Is([bV]),to]})}}return n})(),Ma=(()=>{class n{constructor(t,r,o){this._element=t,this._renderer=r,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(gT(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(gT(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(r){return new(r||n)(Q(Mr),Q(eo),Q(IT,9))}}static{this.\u0275dir=Bt({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return n})();var TV=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Fo({type:n})}static{this.\u0275inj=Ro({})}}return n})();var er=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:ST,useValue:t.callSetDisabledState??uv}]}}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275mod=Fo({type:n})}static{this.\u0275inj=Ro({imports:[TV]})}}return n})();var Aa=(()=>{class n{constructor(){this.nameMap={[Re.A]:"A",[Re.A_SHARP]:"A\u266F",[Re.B]:"B",[Re.C]:"C",[Re.C_SHARP]:"C\u266F",[Re.D]:"D",[Re.D_SHARP]:"D\u266F",[Re.E]:"E",[Re.F]:"F",[Re.F_SHARP]:"F\u266F",[Re.G]:"G",[Re.G_SHARP]:"G\u266F"}}transform(t,r){return this.nameMap[t.name]+(r?.toString()??"")}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=Er({name:"note",type:n,pure:!0,standalone:!0})}}return n})();var se=function(n){return n.FIFTH="FIFTH",n.TRIAD="TRIAD",n.SEVENTH="SEVENTH",n.NINTH="NINTH",n.ELEVENTH="ELEVENTH",n.THIRTEENTH="THIRTEENTH",n.ADDED_NINTH="ADDED_NINTH",n.SUS="SUS",n.SUS_SEVENTH="SUS_SEVENTH",n.SIXTH="SIXTH",n.SIXTH_NINTH="SIXTH_NINTH",n.ADDED_ELEVENTH="ADDED_ELEVENTH",n}(se||{});var MT=(()=>{class n{constructor(){this.chordTypeMap={[se.FIFTH]:"Fifth",[se.TRIAD]:"Triad",[se.SEVENTH]:"Seventh",[se.NINTH]:"Ninth",[se.ELEVENTH]:"Eleventh",[se.THIRTEENTH]:"Thirteenth",[se.ADDED_NINTH]:"Added Ninth",[se.SUS]:"Suspended",[se.SUS_SEVENTH]:"Suspended Seventh",[se.SIXTH]:"Sixth",[se.SIXTH_NINTH]:"Sixth/Ninth",[se.ADDED_ELEVENTH]:"Added Eleventh"}}transform(t){return this.chordTypeMap[t]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=Er({name:"chordtype",type:n,pure:!0,standalone:!0})}}return n})();var AT=(()=>{class n{constructor(){this.degreeMap={0:"I",1:"II",2:"III",3:"IV",4:"V",5:"VI",6:"VII"}}transform(t){return this.degreeMap[t]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275pipe=Er({name:"degree",type:n,pure:!0,standalone:!0})}}return n})();var Gt=function(n){return n[n.I=1]="I",n[n.II=2]="II",n[n.III=3]="III",n[n.IV=4]="IV",n[n.V=5]="V",n[n.VI=6]="VI",n[n.VII=7]="VII",n}(Gt||{});var Vn=function(n){return n.IONIAN="Ionian",n.AEOLIAN="Aeolian",n.DORIAN="Dorian",n.PHRYGIAN="Phrygian",n.LYDIAN="Lydian",n.MIXOLYDIAN="Mixolydian",n.LOCRIAN="Locrian",n}(Vn||{});var fv=function(n){return n.WHOLE="WHOLE",n.HALF="HALF",n}(fv||{});var Ah={[Vn.IONIAN]:[0,2,4,5,7,9,11],[Vn.AEOLIAN]:[0,2,3,5,7,8,10],[Vn.DORIAN]:[0,2,3,5,7,9,10],[Vn.PHRYGIAN]:[0,1,3,5,7,8,10],[Vn.LYDIAN]:[0,2,4,6,7,9,11],[Vn.MIXOLYDIAN]:[0,2,4,5,7,9,10],[Vn.LOCRIAN]:[0,1,3,5,6,8,10]},NT={[Gt.I]:0,[Gt.II]:1,[Gt.III]:2,[Gt.IV]:3,[Gt.V]:4,[Gt.VI]:5,[Gt.VII]:6},OT={[se.FIFTH]:[0,4],[se.TRIAD]:[0,2,4],[se.SEVENTH]:[0,2,4,6],[se.NINTH]:[0,2,4,6,8],[se.ELEVENTH]:[0,2,4,6,8,10],[se.THIRTEENTH]:[0,2,4,6,8,10,12],[se.ADDED_NINTH]:[0,2,4,8],[se.SUS]:[0,3,4],[se.SUS_SEVENTH]:[0,3,4,6],[se.SIXTH]:[0,2,4,5],[se.SIXTH_NINTH]:[0,2,4,5,8],[se.ADDED_ELEVENTH]:[0,2,4,10]};var tn=(()=>{class n{constructor(){this._currentScaleMode=new je(Vn.IONIAN),this._currentRootNote=new je(Nn.find(t=>t.position===36)),this.currentScaleMode$=this._currentScaleMode.asObservable(),this.currentRootNote$=this._currentRootNote.asObservable(),this.currentScale$=It([this.currentRootNote$,this.currentScaleMode$]).pipe(ae(([t,r])=>this.generateScale(t.position,r))),this.currentChords$=this.currentScale$.pipe(ae(t=>this.generateChords(t))),this.allChords$=this.currentScale$.pipe(ae(t=>this.generateAllChords(t))),this.octaveThreeAndFourNotes=Nn.filter(t=>t.octave===3||t.octave===4)}get currentScaleMode(){return this._currentScaleMode.getValue()}get currentRootNote(){return this._currentRootNote.getValue()}setCurrentScaleMode(t){this._currentScaleMode.next(t)}setCurrentRootNote(t){this._currentRootNote.next(t)}getNextStep(t,r){let o=r===fv.HALF?1:2;return Nn.find(i=>i.position===t.position+o)??{position:-1,name:Re.C,frequency:0,octave:0}}generateScale(t,r){let o=Nn,i=[];for(let s of Ah[r]){let a=t+s;i.push(o[a])}for(let s of Ah[r]){let a=t+12+s;i.push(o[a])}for(let s of Ah[r]){let a=t+24+s;i.push(o[a])}return i}generateAllChords(t){return{[se.FIFTH]:this.generateChords(t,se.FIFTH),[se.TRIAD]:this.generateChords(t,se.TRIAD),[se.SEVENTH]:this.generateChords(t,se.SEVENTH),[se.NINTH]:this.generateChords(t,se.NINTH),[se.ELEVENTH]:this.generateChords(t,se.ELEVENTH),[se.THIRTEENTH]:this.generateChords(t,se.THIRTEENTH),[se.ADDED_NINTH]:this.generateChords(t,se.ADDED_NINTH),[se.SUS]:this.generateChords(t,se.SUS),[se.SUS_SEVENTH]:this.generateChords(t,se.SUS_SEVENTH),[se.SIXTH]:this.generateChords(t,se.SIXTH),[se.SIXTH_NINTH]:this.generateChords(t,se.SIXTH_NINTH),[se.ADDED_ELEVENTH]:this.generateChords(t,se.ADDED_ELEVENTH)}}generateChords(t,r=se.TRIAD){return[this.getChord(Gt.I,t,r),this.getChord(Gt.II,t,r),this.getChord(Gt.III,t,r),this.getChord(Gt.IV,t,r),this.getChord(Gt.V,t,r),this.getChord(Gt.VI,t,r),this.getChord(Gt.VII,t,r)]}getChord(t,r,o){if(!r.length)return[];let i=OT[o],s=NT[t],a=[];for(let c of i){let l=(c+s)%21,u=r[l];a.push(u)}return a}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function EV(n,e){if(n&1&&(S(0,"div",8),U(1),Ae(2,"note"),T()),n&2){let t=e.$implicit;j(),wt(" ",ic(2,1,t,t.octave)," ")}}function IV(n,e){if(n&1){let t=tt();S(0,"button",6),he("click",function(){let o=Se(t).$implicit,i=J(3);return Te(i.playChord(o))}),S(1,"div",7),Rt(2,EV,3,4,"div",8,kt),T(),S(4,"div",9),U(5),Ae(6,"degree"),T()()}if(n&2){let t=e.$implicit,r=e.$index;j(2),Ft(t),j(3),wt(" ",Le(6,1,r)," ")}}function MV(n,e){if(n&1&&(S(0,"div")(1,"div",2)(2,"div",3),U(3),Ae(4,"chordtype"),T(),S(5,"div",4),Rt(6,IV,7,3,"button",5,kt),T()()()),n&2){let t=e.$implicit;j(3),un(Le(4,1,t.key)),j(3),Ft(t.value)}}function AV(n,e){if(n&1&&(S(0,"div",1),Rt(1,MV,8,3,"div",null,kt),Ae(3,"async"),Ae(4,"keyvalue"),T()),n&2){let t=J();j(),Ft(ic(4,2,Le(3,0,t.allChords$),t.keepOriginalOrder))}}var kT=(()=>{class n{constructor(t,r){this.musicService=t,this.toneService=r,this.chords$=this.musicService.currentChords$,this.allChords$=this.musicService.allChords$,this.ChordType=se}playChord(t){this.toneService.playNotes(t)}keepOriginalOrder(t,r){return 0}static{this.\u0275fac=function(r){return new(r||n)(Q(tn),Q(en))}}static{this.\u0275cmp=Ze({type:n,selectors:[["app-chords-view"]],standalone:!0,features:[Ye],decls:3,vars:3,consts:[[1,"chords-view"],[1,"d-flex","flex-column","overflow-auto"],[1,"row"],[1,"col-lg-1","d-flex","align-items-center"],[1,"col-lg-11","col-12","d-flex"],[1,"card","p-1","m-1","w-100","square","d-flex","flex-column","justify-content-center","align-items-center"],[1,"card","p-1","m-1","w-100","square","d-flex","flex-column","justify-content-center","align-items-center",3,"click"],[1,"d-flex","flex-row","flex-wrap","justify-content-center"],[1,"fs-6",2,"padding","1px"],[1,"chord-degree","fs-5"]],template:function(r,o){r&1&&(S(0,"div",0),Je(1,AV,5,5,"div",1),Ae(2,"async"),T()),r&2&&(j(),jo(Le(2,1,o.allChords$)?1:-1))},dependencies:[Ht,Un,g0,MT,Aa,AT],styles:[".chords-container[_ngcontent-%COMP%]{margin-left:24px}"]})}}return n})();function NV(n,e){if(n&1){let t=tt();S(0,"button",7),he("click",function(){let o=Se(t).$implicit,i=J().$implicit,s=J();return Te(s.changeOscillatorType(i.synth,o))}),U(1),Ae(2,"uppercase"),T()}if(n&2){let t=e.$implicit;j(),wt(" ",Le(2,1,t)," ")}}function OV(n,e){if(n&1){let t=tt();S(0,"div",1)(1,"div",2)(2,"div"),U(3,"Synth"),T(),S(4,"div"),U(5),T()(),S(6,"div",3)(7,"button",4),he("click",function(){let o=Se(t).$implicit,i=J();return Te(i.playSynth(o.synth))}),S(8,"span",5),U(9,"play_arrow"),T()(),Rt(10,NV,3,3,"button",6,kt),T()()}if(n&2){let t=e.$implicit,r=J();j(5),un(t.synth.oscillator.type),j(5),Ft(r.oscillatorTypes)}}var RT=(()=>{class n{constructor(t){this.toneService=t,this.oscillatorTypes=["sine","sawtooth","square","triangle"],this.synthSetups=[],this.synths=[]}ngOnInit(){this.synths=this.toneService.getPolySynths(),this.synthSetups=this.toneService.getSynthSetups()}playSynth(t){this.toneService.playMonoSynth(t)}changeOscillatorOctave(t,r){this.toneService.setOscillatorOctave(t,r)}changeOscillatorType(t,r){this.toneService.setOscillatorType(t,r)}static{this.\u0275fac=function(r){return new(r||n)(Q(en))}}static{this.\u0275cmp=Ze({type:n,selectors:[["app-synth-view"]],standalone:!0,features:[Ye],decls:3,vars:0,consts:[[1,"synth-view","d-flex","flex-row","overflow-auto"],[1,"card"],[1,"card-header","d-flex","justify-content-between"],[1,"d-flex","flex-column"],[1,"btn","btn-primary","m-2","align",3,"click"],[1,"material-icons"],[1,"btn","btn-secondary","m-2"],[1,"btn","btn-secondary","m-2",3,"click"]],template:function(r,o){r&1&&(S(0,"div",0),Rt(1,OV,12,1,"div",1,kt),T()),r&2&&(j(),Ft(o.synthSetups))},dependencies:[Ht,m0],styles:[".synth-view[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{min-width:250px}"]})}}return n})();function kV(n,e){if(n&1&&(S(0,"option",1),U(1),Ae(2,"note"),T()),n&2){let t=e.$implicit;Me("value",t.name),j(),wt(" ",Le(2,2,t)," ")}}var Nh=(()=>{class n{constructor(t){this.musicService=t,this.rootNoteName=this.musicService.currentRootNote.name,this.octaveThreeNotes=Nn.filter(r=>r.octave===3)}updateRootNote(){this.musicService.setCurrentRootNote(this.octaveThreeNotes.find(t=>t.name===this.rootNoteName))}static{this.\u0275fac=function(r){return new(r||n)(Q(tn))}}static{this.\u0275cmp=Ze({type:n,selectors:[["app-root-note-selector"]],standalone:!0,features:[Ye],decls:3,vars:1,consts:[["name","selectRootNote",3,"ngModelChange","change","ngModel"],[3,"value"]],template:function(r,o){r&1&&(S(0,"select",0),ro("ngModelChange",function(s){return Bo(o.rootNoteName,s)||(o.rootNoteName=s),s}),he("change",function(){return o.updateRootNote()}),Rt(1,kV,3,4,"option",1,kt),T()),r&2&&(no("ngModel",o.rootNoteName),j(),Ft(o.octaveThreeNotes))},dependencies:[Aa,er,Ia,Ma,ai,Ea,Wi]})}}return n})();function RV(n,e){if(n&1&&(S(0,"option",1),U(1),T()),n&2){let t=e.$implicit;Me("value",t),j(),wt(" ",t," ")}}var Oh=(()=>{class n{constructor(t){this.musicService=t,this.scaleMode=this.musicService.currentScaleMode,this.modes=Object.values(Vn)}updateMode(){this.musicService.setCurrentScaleMode(this.scaleMode)}static{this.\u0275fac=function(r){return new(r||n)(Q(tn))}}static{this.\u0275cmp=Ze({type:n,selectors:[["app-scale-mode-selector"]],standalone:!0,features:[Ye],decls:3,vars:1,consts:[["name","selectedScaleMode",3,"ngModelChange","change","ngModel"],[3,"value"]],template:function(r,o){r&1&&(S(0,"select",0),ro("ngModelChange",function(s){return Bo(o.scaleMode,s)||(o.scaleMode=s),s}),he("change",function(){return o.updateMode()}),Rt(1,RV,2,2,"option",1,kt),T()),r&2&&(no("ngModel",o.scaleMode),j(),Ft(o.modes))},dependencies:[er,Ia,Ma,ai,Ea,Wi],encapsulation:2})}}return n})();function FV(n,e){if(n&1){let t=tt();S(0,"div",3),he("click",function(){let o=Se(t).$implicit,i=J();return Te(i.playNote(o))}),S(1,"div",4)(2,"div"),U(3),Ae(4,"note"),T()()()}if(n&2){let t=e.$implicit;j(3),un(Le(4,1,t))}}function PV(n,e){if(n&1){let t=tt();S(0,"div",3),he("click",function(){let o=Se(t).$implicit,i=J();return Te(i.playNote(o))}),S(1,"div",5)(2,"div",6),U(3),Ae(4,"note"),T()(),S(5,"div",7)(6,"div",8),U(7),T()()()}if(n&2){let t=e.$implicit;j(3),un(ic(4,2,t,t.octave)),j(4),un(t.position)}}var FT=(()=>{class n{constructor(t,r){this.musicService=t,this.toneService=r,this.scaleNotes$=this.musicService.currentScale$,this.chords$=this.musicService.currentChords$,this.notes=Nn}playNote(t){this.toneService.playNote(t)}static{this.\u0275fac=function(r){return new(r||n)(Q(tn),Q(en))}}static{this.\u0275cmp=Ze({type:n,selectors:[["app-notes-player-view"]],standalone:!0,features:[Ye],decls:8,vars:2,consts:[[1,"notes-player-view"],[1,"d-flex","overflow-auto"],[1,"card"],[1,"card",3,"click"],[1,"d-flex","flex-row","justify-content-center"],[1,"d-flex","flex-row","justify-content-center","fs-5"],[1,"note-name"],[1,"d-flex","flex-row","justify-content-center","fs-6"],[1,"note-position"]],template:function(r,o){r&1&&(S(0,"div",0)(1,"div",1),Rt(2,FV,5,3,"div",2,kt),Ae(4,"async"),T(),S(5,"div",1),Rt(6,PV,8,5,"div",2,kt),T()()),r&2&&(j(2),Ft(Le(4,0,o.scaleNotes$)),j(4),Ft(o.notes))},dependencies:[Ht,Un,Aa],styles:[".notes-player-view[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{min-width:60px}"]})}}return n})();var PT=(()=>{class n{constructor(t,r){this.musicService=t,this.toneService=r,this.scaleNotes$=this.musicService.currentScale$,this.chords$=this.musicService.currentChords$,this.notes=Nn}static{this.\u0275fac=function(r){return new(r||n)(Q(tn),Q(en))}}static{this.\u0275cmp=Ze({type:n,selectors:[["app-player-view"]],standalone:!0,features:[Ye],decls:10,vars:0,consts:[[1,"player-view","container"],[1,"row"]],template:function(r,o){r&1&&(S(0,"div",0)(1,"div",1),pt(2,"app-root-note-selector")(3,"app-scale-mode-selector"),T(),S(4,"div",1),pt(5,"app-chords-view"),T(),S(6,"div",1),pt(7,"app-notes-player-view"),T(),S(8,"div",1),pt(9,"app-synth-view"),T()())},dependencies:[er,kT,RT,Nh,Oh,FT],styles:[".player-view[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{margin-bottom:1rem}"]})}}return n})();var li=function(n){return n.WHOLE="WHOLE",n.HALF="HALF",n.QUARTER="QUARTER",n}(li||{}),zi=function(n){return n.REGISTER="REGISTER",n.DEREGISTER="DEREGISTER",n}(zi||{}),VT=function(n){return n.HIT="HIT",n}(VT||{}),Na=(()=>{class n{constructor(t){this.timeService=t,this.subscriptions=[],this._observableEmitter=new Pa,this.observableEmitter$=this._observableEmitter.asObservable(),this.ticks={[li.WHOLE]:this.timeService.beatTick$,[li.HALF]:this.timeService.halfTick$,[li.QUARTER]:this.timeService.quarterTick$}}registerHit(t,r,o=li.QUARTER){console.log("registerHit",t,r,o);let i=this.timeService.beatTick$,s=this.buildHitStream(t,i);this._observableEmitter.next({instrument:r,onTick:t,action:zi.REGISTER,stream:s})}deregisterHit(t,r,o=li.QUARTER){this._observableEmitter.next({instrument:r,onTick:t,action:zi.DEREGISTER,stream:_r})}buildHitStream(t,r=this.timeService.quarterTick$){return r.pipe(ae(o=>o===t?(console.log("HIT",o,t),!0):!1),ht(o=>o?ue(VT.HIT):_r))}static{this.\u0275fac=function(r){return new(r||n)(ce(Da))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var LT=(()=>{class n{constructor(t){this.musicService=t,this.cellWidth=40,this.cellHeight=20}setupGridRows(t){let o=[...this.musicService.octaveThreeAndFourNotes].sort((s,a)=>a.position-s.position);return{gridRows:o.map(s=>({note:s,cells:Array.from({length:t},(a,c)=>({beat:c+1}))})),visibleNotes:o}}setupGridBeats(t){return Array.from({length:t},(r,o)=>o+1)}getGridCoordinates(t,r){let o=r.getBoundingClientRect(),i=t.clientX-o.left,s=t.clientY-o.top-30,a=Math.floor(i/this.cellWidth),c=Math.floor(s/this.cellHeight);return{beatIndex:a,noteIndex:c}}isWithinBounds(t,r,o,i){return t>=0&&t<o&&r>=0&&r<i}static{this.\u0275fac=function(r){return new(r||n)(ce(tn))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var kh=(()=>{class n{constructor(){this.cellWidth=40,this.cellHeight=20}getNoteTop(t,r){let o=r.findIndex(i=>i.name===t.note.name&&i.octave===t.note.octave);return o!==-1?o*this.cellHeight:0}getNoteLeft(t){return t.startTime*this.cellWidth}getNoteWidth(t){return t.duration*this.cellWidth}getPlaybackPositionPixels(t){return t*this.cellWidth}getBeatFromX(t){return Math.floor(t/this.cellWidth)}getNoteIndexFromY(t){return Math.floor(t/this.cellHeight)}getResizeDeltaBeats(t){return Math.round(t/this.cellWidth)}getTotalWidth(t){return t*this.cellWidth}getTotalHeight(t){return t*this.cellHeight}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var jT=(()=>{class n{constructor(){this.positionService=F(kh)}createSelectionBox(t,r){return{startX:t,startY:r,width:0,height:0}}updateSelectionBox(t,r,o){return O(y({},t),{width:r-t.startX,height:o-t.startY})}getNormalizedBox(t){let r=t.width<0?t.startX+t.width:t.startX,o=t.height<0?t.startY+t.height:t.startY,i=Math.abs(t.width),s=Math.abs(t.height);return{x:r,y:o,width:i,height:s}}getNotesInBox(t,r,o,i){let{x:s,y:a,width:c,height:l}=this.getNormalizedBox(t);return r.filter(u=>{let d=this.positionService.getNoteTop(u,i),f=this.positionService.getNoteLeft(u),h=this.positionService.getNoteWidth(u),p=o,m=f+h,g=d+p;return m>s&&f<s+c&&g>a&&d<a+l})}addToSelection(t,r){return r.some(i=>i.note.name===t.note.name&&i.note.octave===t.note.octave&&i.startTime===t.startTime&&i.duration===t.duration)?r:[...r,t]}removeFromSelection(t,r){return r.filter(o=>o.note.name!==t.note.name||o.note.octave!==t.note.octave||o.startTime!==t.startTime||o.duration!==t.duration)}toggleSelection(t,r){return r.some(i=>i.note.name===t.note.name&&i.note.octave===t.note.octave&&i.startTime===t.startTime&&i.duration===t.duration)?this.removeFromSelection(t,r):this.addToSelection(t,r)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Zt=[];for(let n=0;n<256;++n)Zt.push((n+256).toString(16).slice(1));function BT(n,e=0){return(Zt[n[e+0]]+Zt[n[e+1]]+Zt[n[e+2]]+Zt[n[e+3]]+"-"+Zt[n[e+4]]+Zt[n[e+5]]+"-"+Zt[n[e+6]]+Zt[n[e+7]]+"-"+Zt[n[e+8]]+Zt[n[e+9]]+"-"+Zt[n[e+10]]+Zt[n[e+11]]+Zt[n[e+12]]+Zt[n[e+13]]+Zt[n[e+14]]+Zt[n[e+15]]).toLowerCase()}var mv,VV=new Uint8Array(16);function gv(){if(!mv){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");mv=crypto.getRandomValues.bind(crypto)}return mv(VV)}var LV=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),vv={randomUUID:LV};function jV(n,e,t){if(vv.randomUUID&&!e&&!n)return vv.randomUUID();n=n||{};let r=n.random??n.rng?.()??gv();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){if(t=t||0,t<0||t+16>e.length)throw new RangeError(`UUID byte range ${t}:${t+15} is out of buffer bounds`);for(let o=0;o<16;++o)e[t+o]=r[o];return e}return BT(r)}var yv=jV;var ui=(()=>{class n{constructor(t){this.sequencerService=t,this._tracks=new je([]),this._currentTrackId=new je(null),this.tracks$=this._tracks.asObservable(),this.currentTrackId$=this._currentTrackId.asObservable(),this.currentTrack$=It([this.tracks$,this.currentTrackId$]).pipe(ae(([r,o])=>r.find(i=>i.id===o)||null))}get tracks(){return this._tracks.getValue()}get currentTrackId(){return this._currentTrackId.getValue()}set currentTrackId(t){this._currentTrackId.next(t)}createTrack(t="New Track"){let r={id:yv(),name:t,notes:[],instrumentType:Jn.MONO_SYNTH,isMuted:!1,isSolo:!1,volume:.8};return this._tracks.next([...this.tracks,r]),this.getCurrentTrack()===null&&(this.currentTrackId=r.id),r}removeTrack(t){let r=this.tracks.filter(o=>o.id!==t);this._tracks.next(r),this.currentTrackId===t&&(this.currentTrackId=r.length>0?r[0].id:null)}setCurrentTrack(t){let r=this.tracks.find(o=>o.id===t)||null;this.currentTrackId=r?.id||null}getCurrentTrack(){let t=this.currentTrackId;return t&&this.tracks.find(r=>r.id===t)||null}addNote(t){let r=this.getCurrentTrack();r&&this.updateTrack(O(y({},r),{notes:[...r.notes,t]}))}clearNotes(){let t=this.getCurrentTrack();t&&this.updateTrack(O(y({},t),{notes:[]}))}deleteNote(t){let r=this.getCurrentTrack();r&&this.updateTrack(O(y({},r),{notes:r.notes.filter(o=>o!==t)}))}updateTrack(t){let r=this.tracks.map(o=>o.id===t.id?t:o);this._tracks.next(r)}registerAllTracksForPlayback(){this.deregisterAllTracksFromPlayback(),this.tracks.forEach(t=>{if(t.isMuted)return;let r=new Set;t.notes.forEach(o=>{r.add(Math.floor(o.startTime)+1)}),Array.from(r).forEach(o=>{this.sequencerService.registerHit(o,t.id,li.QUARTER)})}),console.log("Registered all tracks for playback")}deregisterAllTracksFromPlayback(){this.tracks.forEach(t=>{let r=new Set;t.notes.forEach(o=>{r.add(Math.floor(o.startTime)+1)}),Array.from(r).forEach(o=>{this.sequencerService.deregisterHit(o,t.id)})}),console.log("Deregistered all tracks from playback")}static{this.\u0275fac=function(r){return new(r||n)(ce(Na))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var HT=(()=>{class n{constructor(t,r){this.toneService=t,this.trackService=r}createNewNote(t,r,o){let i={note:y({},o),startTime:r,duration:1,velocity:.8};return t.notes.push(i),this.trackService.updateTrack(t),this.toneService.playNote(o,.5),console.log(`Created note at beat ${r+1} (${this.getNoteLabel(o)})`),i}deleteNote(t,r){let o=t.notes.findIndex(i=>i.note.name===r.note.name&&i.note.octave===r.note.octave&&i.startTime===r.startTime&&i.duration===r.duration);o!==-1&&(t.notes.splice(o,1),this.trackService.updateTrack(t))}findNoteAt(t,r,o,i){if(!t||o<0||o>=i.length)return null;let s=i[o];return t.notes.find(c=>{let l=Math.floor(c.startTime),u=Math.floor(c.startTime+c.duration);return c.note.name===s.name&&c.note.octave===s.octave&&r>=l&&r<u})||null}getNoteLabel(t){return`${t.name}${t.octave}`}isBlackKey(t){return t.name.includes("#")}playNote(t){this.toneService.playNote(t,.8)}static{this.\u0275fac=function(r){return new(r||n)(ce(en),ce(ui))}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function BV(n,e){n&1&&(S(0,"ul")(1,"li"),U(2,"Click - Select note"),T(),S(3,"li"),U(4,"Ctrl+Click - Add/remove from selection"),T(),S(5,"li"),U(6,"Click & drag empty space - Select multiple notes"),T(),S(7,"li"),U(8,"Double-click on empty space - Create note"),T(),S(9,"li"),U(10,"Double-click on note - Delete note"),T(),S(11,"li"),U(12,"Delete/Backspace - Delete selected notes"),T(),S(13,"li"),U(14,"Drag note - Move selected notes"),T(),S(15,"li"),U(16,"Drag handle - Resize selected notes"),T()())}function $V(n,e){n&1&&(S(0,"ul")(1,"li"),U(2,"Click empty space - Create note"),T(),S(3,"li"),U(4,"Click note - Delete note"),T(),S(5,"li"),U(6,"Click & drag - Create note with length"),T()())}var UT=(()=>{class n{constructor(){this.isPencilMode=!1}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ze({type:n,selectors:[["app-piano-roll-legend-box"]],inputs:{isPencilMode:"isPencilMode"},standalone:!0,features:[Ye],decls:5,vars:3,consts:[[1,"keyboard-shortcuts"],[4,"ngIf"]],template:function(r,o){r&1&&(S(0,"div",0)(1,"strong"),U(2),T(),Je(3,BV,17,0,"ul",1)(4,$V,7,0,"ul",1),T()),r&2&&(j(2),wt("",o.isPencilMode?"Pencil Mode":"Selection Mode"," Controls:"),j(),Me("ngIf",!o.isPencilMode),j(),Me("ngIf",o.isPencilMode))},dependencies:[Ht,Uo],styles:[".keyboard-shortcuts[_ngcontent-%COMP%]{position:absolute;bottom:10px;right:10px;padding:10px;background-color:#0009;color:#fff;border-radius:4px;font-size:12px;pointer-events:none;opacity:.7}.keyboard-shortcuts[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding:0 0 0 15px}"]})}}return n})();var Rh=(()=>{class n{constructor(){this._isPencilMode=new je(!1),this.isPencilMode$=this._isPencilMode.asObservable()}toggleIsPencilMode(){this._isPencilMode.next(!this._isPencilMode.value)}get isPencilMode(){return this._isPencilMode.value}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=$({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function HV(n,e){if(n&1&&(S(0,"option",9),U(1),T()),n&2){let t=e.$implicit;Me("value",t.id),j(),wt(" ",t.name," ")}}function UV(n,e){if(n&1){let t=tt();S(0,"div",1)(1,"button",2),he("click",function(){Se(t);let o=J();return Te(o.createNewTrack())}),U(2,"Add Track"),T(),S(3,"select",3),he("change",function(o){Se(t);let i=J();return Te(i.onTrackSelectionChange(o))}),Je(4,HV,2,2,"option",4),T(),S(5,"button",5),he("click",function(){Se(t);let o=J();return Te(o.pianoRollStateService.toggleIsPencilMode())}),S(6,"span",6),U(7,"\u270F\uFE0F"),T()(),S(8,"button",7),he("click",function(){Se(t);let o=J();return Te(o.showDebugInfo())}),U(9,"Debug"),T(),S(10,"button",8),he("click",function(){Se(t);let o=J();return Te(o.addTestPattern())}),U(11,"Test Pattern"),T()()}if(n&2){let t=e.ngIf;j(3),Me("value",t.currentTrack),j(),Me("ngForOf",t.tracks),j(),Ot("active",t.isPencilMode)}}var qT=(()=>{class n{constructor(){this.visibleNotes=[],this.trackService=F(ui),this.pianoRollStateService=F(Rh),this.data$=It({isPencilMode:this.pianoRollStateService.isPencilMode$,currentTrack:this.trackService.currentTrack$,tracks:this.trackService.tracks$})}createNewTrack(){this.trackService.createTrack()}onTrackSelectionChange(t){let r=t.target.value;this.trackService.setCurrentTrack(r)}showDebugInfo(){let t=this.trackService.getCurrentTrack();if(!t){console.log("No track selected");return}console.log("Current Track:",{id:t.id,name:t.name,instrumentType:t.instrumentType,noteCount:t.notes.length}),console.log("Notes:"),t.notes.forEach((r,o)=>{console.log(`Note ${o}:`,{pitch:this.getNoteLabel(r.note),startTime:r.startTime,beat:Math.floor(r.startTime)+1,duration:r.duration,velocity:r.velocity})})}addTestPattern(){if(!this.trackService.getCurrentTrack()){console.log("No track selected");return}this.trackService.clearNotes();for(let r=0;r<8;r++){let o=r*2;if(o<this.visibleNotes.length){let i=this.visibleNotes[o],s={note:y({},i),startTime:r*2,duration:1,velocity:.8};this.trackService.addNote(s)}}console.log("Added test pattern with",this.trackService.getCurrentTrack().notes.length,"notes"),this.showDebugInfo()}getNoteLabel(t){return`${t.name.replace("_SHARP","#")}${t.octave}`}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ze({type:n,selectors:[["app-piano-roll-track-selection"]],inputs:{visibleNotes:"visibleNotes"},standalone:!0,features:[Ye],decls:2,vars:3,consts:[["class","track-selection",4,"ngIf"],[1,"track-selection"],[3,"click"],[3,"change","value"],[3,"value",4,"ngFor","ngForOf"],["title","Toggle between selection and pencil modes",1,"mode-toggle",3,"click"],[1,"icon"],[1,"debug-button",3,"click"],[1,"test-pattern-button",3,"click"],[3,"value"]],template:function(r,o){r&1&&(Je(0,UV,12,4,"div",0),Ae(1,"async")),r&2&&Me("ngIf",Le(1,1,o.data$))},dependencies:[Ht,ud,Uo,Un],styles:[".track-selection[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:15px}.track-selection[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-left:10px;padding:5px;border:1px solid #ccc;border-radius:4px;min-width:150px}.mode-toggle[_ngcontent-%COMP%]{background-color:gray!important;margin-left:10px;display:flex;align-items:center;justify-content:space-between;padding:5px 10px!important;transition:background-color .3s ease}.mode-toggle[_ngcontent-%COMP%]:hover{background-color:#1976d2!important}.mode-toggle.active[_ngcontent-%COMP%]{background-color:#4caf50!important}.mode-toggle.active[_ngcontent-%COMP%]:hover{background-color:#388e3c!important}.mode-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;white-space:nowrap}.mode-toggle[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:16px}.debug-button[_ngcontent-%COMP%]{background-color:#9c27b0!important}.debug-button[_ngcontent-%COMP%]:hover{background-color:#7b1fa2!important}.test-pattern-button[_ngcontent-%COMP%]{background-color:#ff9800!important}.test-pattern-button[_ngcontent-%COMP%]:hover{background-color:#f57c00!important}button[_ngcontent-%COMP%]{padding:5px 10px;margin-right:10px;background-color:#3f51b5;color:#fff;border:none;border-radius:4px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#303f9f}button.active[_ngcontent-%COMP%]{background-color:#ff5722}"]})}}return n})();function qV(n,e){if(n&1){let t=tt();S(0,"div",2)(1,"input",3),ro("ngModelChange",function(o){Se(t);let i=J().ngIf;return Bo(i.currentTrack.name,o)||(i.currentTrack.name=o),Te(o)}),he("ngModelChange",function(){Se(t);let o=J().ngIf,i=J();return Te(i.updateTrack(o.currentTrack))}),T(),S(2,"select",4),ro("ngModelChange",function(o){Se(t);let i=J().ngIf;return Bo(i.currentTrack.instrumentType,o)||(i.currentTrack.instrumentType=o),Te(o)}),he("ngModelChange",function(){Se(t);let o=J().ngIf,i=J();return Te(i.updateTrack(o.currentTrack))}),S(3,"option",5),U(4,"Mono Synth"),T(),S(5,"option",5),U(6,"Poly Synth"),T(),S(7,"option",5),U(8,"Snare"),T(),S(9,"option",5),U(10,"Hat"),T()(),S(11,"div",6)(12,"button",7),he("click",function(){Se(t);let o=J(2);return Te(o.toggleTrackMute())}),U(13,"M"),T(),S(14,"button",7),he("click",function(){Se(t);let o=J(2);return Te(o.toggleTrackSolo())}),U(15,"S"),T(),S(16,"input",8),ro("ngModelChange",function(o){Se(t);let i=J().ngIf;return Bo(i.currentTrack.volume,o)||(i.currentTrack.volume=o),Te(o)}),he("ngModelChange",function(){Se(t);let o=J().ngIf,i=J();return Te(i.updateTrack(o.currentTrack))}),T()()()}if(n&2){let t=J().ngIf,r=J();j(),no("ngModel",t.currentTrack.name),j(),no("ngModel",t.currentTrack.instrumentType),j(),Me("value",r.InstrumentType.MONO_SYNTH),j(2),Me("value",r.InstrumentType.POLY_SYNTH),j(2),Me("value",r.InstrumentType.MONO_SAMPLE),j(2),Me("value",r.InstrumentType.POLY_SAMPLE),j(3),Ot("active",t.currentTrack.isMuted),j(2),Ot("active",t.currentTrack.isSolo),j(2),no("ngModel",t.currentTrack.volume)}}function WV(n,e){if(n&1&&(rc(0),Je(1,qV,17,11,"div",1),oc()),n&2){let t=e.ngIf;j(),Me("ngIf",t.currentTrack)}}var WT=(()=>{class n{constructor(){this.trackService=F(ui),this.InstrumentType=Jn,this.updateTrack=this.trackService.updateTrack.bind(this.trackService),this.data$=It({currentTrack:this.trackService.currentTrack$.pipe(rn(t=>t!==null))})}toggleTrackMute(){let t=this.trackService.getCurrentTrack();t&&this.trackService.updateTrack(O(y({},t),{isMuted:!t.isMuted}))}toggleTrackSolo(){let t=this.trackService.getCurrentTrack();t&&this.trackService.updateTrack(O(y({},t),{isSolo:!t.isSolo}))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ze({type:n,selectors:[["app-piano-roll-track-control"]],standalone:!0,features:[Ye],decls:2,vars:3,consts:[[4,"ngIf"],["class","track-info",4,"ngIf"],[1,"track-info"],["type","text","placeholder","Track Name",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[3,"value"],[1,"track-controls"],[3,"click"],["type","range","min","0","max","1","step","0.01",3,"ngModelChange","ngModel"]],template:function(r,o){r&1&&(Je(0,WV,2,1,"ng-container",0),Ae(1,"async")),r&2&&Me("ngIf",Le(1,1,o.data$))},dependencies:[Ht,Uo,Un,er,Ia,Ma,Ih,dv,ai,Ea,Wi],styles:[".track-info[_ngcontent-%COMP%]{display:flex;align-items:center}.track-info[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .track-info[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{margin-right:10px;padding:5px;border:1px solid #ccc;border-radius:4px}.track-info[_ngcontent-%COMP%]   .track-controls[_ngcontent-%COMP%]{display:flex;align-items:center}.track-info[_ngcontent-%COMP%]   .track-controls[_ngcontent-%COMP%]   input[type=range][_ngcontent-%COMP%]{width:100px}.track-info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px 10px;margin-right:10px;background-color:#3f51b5;color:#fff;border:none;border-radius:4px;cursor:pointer}.track-info[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#303f9f}.track-info[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#ff5722}"]})}}return n})();function zV(n,e){n&1&&pt(0,"app-piano-roll-track-control")}function GV(n,e){if(n&1){let t=tt();S(0,"div",20),he("mousedown",function(){let o=Se(t).$implicit,i=J(2).ngIf,s=J();return Te(s.playNote(o,.8,i.currentTrack))}),U(1),T()}if(n&2){let t=e.$implicit,r=J(3);Ot("black-key",r.isBlackKey(t))("white-key",!r.isBlackKey(t)),j(),wt(" ",r.getNoteLabel(t)," ")}}function ZV(n,e){if(n&1&&(S(0,"div",21),U(1),T()),n&2){let t=e.$implicit;j(),un(t)}}function YV(n,e){n&1&&pt(0,"div",24)}function QV(n,e){if(n&1&&(S(0,"div",22),Je(1,YV,1,0,"div",23),T()),n&2){let t=e.$implicit,r=J(3);Ot("black-key-row",r.isBlackKey(t.note)),j(),Me("ngForOf",t.cells)}}function XV(n,e){if(n&1){let t=tt();S(0,"div",25),he("mousedown",function(o){let i=Se(t).$implicit,s=J(3);return Te(s.selectNote(i,o))}),S(1,"div",26),he("mousedown",function(o){let i=Se(t).$implicit,s=J(3);return Te(s.startResizing(o,i))}),T()()}if(n&2){let t=e.$implicit,r=J(3);nc("top",r.getNoteTop(t,r.visibleNotes),"px")("left",r.getNoteLeft(t),"px")("width",r.getNoteWidth(t),"px")("height",r.cellHeight,"px"),Ot("selected",r.selectedNotes.includes(t))("primary-selected",r.selectedNote===t)("dragging",r.isDragging&&r.selectedNotes.includes(t))}}function KV(n,e){if(n&1){let t=tt();S(0,"div",7)(1,"div",8),pt(2,"div",9),Je(3,GV,2,5,"div",10),T(),S(4,"div",11),he("mousedown",function(o){Se(t);let i=J(2);return Te(i.startDrawing(o))})("mousemove",function(o){Se(t);let i=J(2);return Te(i.drawNote(o))})("mouseup",function(){Se(t);let o=J(2);return Te(o.stopDrawing())})("dblclick",function(o){Se(t);let i=J(2);return Te(i.handleDoubleClick(o))}),S(5,"div",12),Je(6,ZV,2,1,"div",13),T(),S(7,"div",14),Je(8,QV,2,3,"div",15)(9,XV,2,14,"div",16),pt(10,"div",17),Ae(11,"async"),pt(12,"div",18),T()(),pt(13,"app-piano-roll-legend-box",19),T()}if(n&2){let t=J().ngIf,r=J();j(3),Me("ngForOf",r.visibleNotes),j(),Ot("pencil-mode",t.isPencilMode)("selection-mode",!t.isPencilMode),j(2),Me("ngForOf",r.gridBeats),j(2),Me("ngForOf",r.gridRows),j(),Me("ngForOf",t.currentTrack.notes),j(),nc("left",Le(11,11,r.playbackPosition$),"px"),j(3),Me("isPencilMode",t.isPencilMode)}}function JV(n,e){if(n&1){let t=tt();S(0,"div",27)(1,"p"),U(2,"No track selected. Create a new track to get started."),T(),S(3,"button",3),he("click",function(){Se(t);let o=J(2);return Te(o.createNewTrack())}),U(4,"Create Track"),T()()}}function eL(n,e){if(n&1){let t=tt();rc(0),S(1,"div",1)(2,"div",2)(3,"button",3),he("click",function(){Se(t);let o=J();return Te(o.togglePlayback())}),U(4),T(),pt(5,"app-piano-roll-track-selection",4),Je(6,zV,1,0,"app-piano-roll-track-control",0),T(),Je(7,KV,14,13,"div",5)(8,JV,5,0,"div",6),T(),oc()}if(n&2){let t=e.ngIf,r=J();j(),Ot("pencil-mode-active",t.isPencilMode),j(3),un(r.isPlaying?"Stop":"Play"),j(),Me("visibleNotes",r.visibleNotes),j(),Me("ngIf",t.currentTrack),j(),Me("ngIf",t.currentTrack),j(),Me("ngIf",!t.currentTrack)}}var zT=(()=>{class n{get cellWidth(){return this.gridService.cellWidth}get cellHeight(){return this.gridService.cellHeight}constructor(t,r,o,i,s){this.timeService=t,this.toneService=r,this.musicService=o,this.sequencerService=i,this.trackService=s,this.gridService=F(LT),this.positionService=F(kh),this.selectionService=F(jT),this.noteService=F(HT),this.pianoRollStateService=F(Rh),this.getNoteTop=this.positionService.getNoteTop,this.getNoteLeft=this.positionService.getNoteLeft,this.getNoteWidth=this.positionService.getNoteWidth,this.gridBeats=[],this.gridRows=[],this.visibleNotes=[],this.totalBeats=16,this.playbackPosition$=this.timeService.beatTick$.pipe(ae(a=>(a-1)*this.cellWidth)),this.isDrawing=!1,this.selectedNote=null,this.selectedNotes=[],this.isDragging=!1,this.isResizing=!1,this.dragStartPosition={x:0,y:0},this.isSelecting=!1,this.selectionBox=null,this.isPlaying=!1,this.subscriptions=[],this.hitSubscriptions=[],this.data$=It({isPencilMode:this.pianoRollStateService.isPencilMode$,currentTrack:this.trackService.currentTrack$}),this.handleResizeMove=a=>{let c=this.trackService.getCurrentTrack();if(!this.isResizing||!this.selectedNote||!c)return;let l=a.clientX-this.dragStartPosition.x;if(Math.abs(l)>2){let u=this.positionService.getBeatFromX(l);if(u!==0){let d=this.selectedNote.duration,f=Math.max(1,d+u),h=this.totalBeats-this.selectedNote.startTime;this.selectedNote.duration=Math.min(f,h);let p=f/d;this.selectedNotes.forEach(m=>{if(m!==this.selectedNote){let g=m.duration,v=Math.max(1,Math.round(g*p)),C=this.totalBeats-m.startTime;m.duration=Math.min(v,C)}}),this.trackService.updateTrack(c),this.dragStartPosition.x+=u*this.cellWidth}}},this.handleResizeEnd=()=>{this.isResizing=!1,document.removeEventListener("mousemove",this.handleResizeMove),document.removeEventListener("mouseup",this.handleResizeEnd)}}ngOnInit(){this.setupGrid(),this.setupPlaybackTracking()}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe()),this.hitSubscriptions.forEach(t=>t.subscription.unsubscribe()),document.removeEventListener("mousemove",this.handleResizeMove),document.removeEventListener("mouseup",this.handleResizeEnd)}setupGrid(){this.gridBeats=this.gridService.setupGridBeats(this.totalBeats);let{gridRows:t,visibleNotes:r}=this.gridService.setupGridRows(this.totalBeats);this.gridRows=t,this.visibleNotes=r}setupPlaybackTracking(){this.subscriptions.push(this.sequencerService.observableEmitter$.pipe(Ge(t=>this.handleHitTarget(t))).subscribe())}handleHitTarget(t){t.action===zi.REGISTER?this.registerHitSubscription(t):this.deregisterHitSubscription(t)}registerHitSubscription(t){if(this.getHitSubscription(t.onTick,t.instrument))return;console.log(`Registering hit for tick ${t.onTick}, track ${t.instrument}`);let o=this.timeService.beatTick$.pipe(Ge(i=>{let s=this.timeService.numBeatsPerBar,a=this.timeService.loopDuration;i%(s*a)===t.onTick&&(console.log(`Tick ${i} matches target ${t.onTick} for track ${t.instrument}`),this.trackService.getCurrentTrack()?.id===t.instrument&&this.playNotesAtBeat(t.onTick))})).subscribe();this.hitSubscriptions.push({trackId:t.instrument,onTick:t.onTick,subscription:o})}deregisterHitSubscription(t){let r=this.getHitSubscription(t.onTick,t.instrument);r&&(console.log(`Deregistering hit for tick ${t.onTick}, track ${t.instrument}`),r.subscription.unsubscribe(),this.hitSubscriptions=this.hitSubscriptions.filter(o=>o!==r))}getHitSubscription(t,r){return this.hitSubscriptions.find(o=>o.trackId===r&&o.onTick===t)}isMonophonic(t){return t===Jn.MONO_SYNTH}playNotesAtBeat(t){let r=this.trackService.getCurrentTrack();if(!this.isPlaying||!r||r.isMuted)return;console.log(`Looking for notes at beat ${t}`);let o=r.notes.filter(i=>Math.floor(i.startTime)+1===t);if(console.log(`Found ${o.length} notes to play at beat ${t}`),this.isMonophonic(r.instrumentType)&&o.length>1){let i=o.reduce((s,a)=>a.note.position>s.note.position?a:s);console.log(`Playing highest note for MonoSynth: ${this.getNoteLabel(i.note)}`),this.playNote(i.note,i.velocity,r)}else o.forEach(i=>{console.log(`Playing note: ${this.getNoteLabel(i.note)}`),this.playNote(i.note,i.velocity,r)})}togglePlayback(){this.isPlaying=!this.isPlaying,this.isPlaying?(console.log("Starting playback..."),this.trackService.registerAllTracksForPlayback(),this.timeService.toggleIsPlaying()):(console.log("Stopping playback..."),this.timeService.toggleIsPlaying(),this.trackService.deregisterAllTracksFromPlayback())}createNewTrack(){this.trackService.createTrack()}onTrackSelectionChange(t){let r=t.target;this.trackService.setCurrentTrack(r.value)}startDrawing(t){if(t.button!==0)return;let r=this.trackService.getCurrentTrack();if(!r)return;let o=t.currentTarget,{beatIndex:i,noteIndex:s}=this.gridService.getGridCoordinates(t,o),a=o.getBoundingClientRect(),c=t.clientX-a.left,l=t.clientY-a.top-30;if(s<0||s>=this.visibleNotes.length||i<0||i>=this.totalBeats)return;let u=this.findNoteAt(i,s);if(this.pianoRollStateService.isPencilMode){if(this.isDrawing=!0,!u){let d=this.visibleNotes[s],f={note:y({},d),startTime:i,duration:1,velocity:.8};this.trackService.addNote(f),this.selectedNote=f,this.selectedNotes=[f],this.playNote(d,.5,r),console.log(`Created note at beat ${i+1} (${this.getNoteLabel(d)})`)}}else if(u){if(t.ctrlKey||t.metaKey){let d=this.selectedNotes.indexOf(u);d>-1?(this.selectedNotes.splice(d,1),this.selectedNotes.length>0?this.selectedNote=this.selectedNotes[0]:this.selectedNote=null):(this.selectedNotes.push(u),this.selectedNote=u,this.playNote(u.note,.5,r))}else this.selectedNotes.includes(u)||(this.selectedNotes=[u],this.selectedNote=u,this.playNote(u.note,.5,r));this.selectedNotes.length>0&&(this.isDragging=!0,this.dragStartPosition={x:c,y:l})}else!t.ctrlKey&&!t.metaKey&&(this.selectedNotes=[],this.selectedNote=null),this.isSelecting=!0,this.selectionBox=this.selectionService.createSelectionBox(c,l)}drawNote(t){if(!this.trackService.getCurrentTrack())return;let i=t.currentTarget.getBoundingClientRect(),s=t.clientX-i.left,a=t.clientY-i.top-30;this.pianoRollStateService.isPencilMode?this.handlePencilModeDrawing(s):this.isSelecting&&this.selectionBox?this.handleSelectionBoxUpdate(s,a):this.isDragging&&this.selectedNotes.length>0?this.handleNoteDragging(s,a):this.isResizing&&this.selectedNote&&this.handleNoteResizing(s)}handlePencilModeDrawing(t){let r=this.trackService.getCurrentTrack();if(!r||!this.isDrawing||!this.selectedNote)return;let o=this.positionService.getBeatFromX(t),i=this.selectedNote.startTime,s=Math.max(1,o-i+1),a=this.totalBeats-i;this.selectedNote.duration=Math.min(s,a),this.trackService.updateTrack(r)}handleSelectionBoxUpdate(t,r){this.selectionBox&&(this.selectionBox=this.selectionService.updateSelectionBox(this.selectionBox,t,r),this.updateSelectionBoxVisual(),this.selectNotesInBox())}handleNoteDragging(t,r){let o=t-this.dragStartPosition.x,i=r-this.dragStartPosition.y;if(Math.abs(o)>2||Math.abs(i)>2){let s=this.positionService.getBeatFromX(o),a=this.positionService.getNoteIndexFromY(i);(s!==0||a!==0)&&(this.moveSelectedNotes(s,a),this.dragStartPosition.x+=s*this.cellWidth,this.dragStartPosition.y+=a*this.cellHeight)}}moveSelectedNotes(t,r){let o=this.trackService.getCurrentTrack();o&&(this.selectedNotes.forEach(i=>{let s=i.startTime,a=y({},i.note);if(t!==0){let c=Math.max(0,s+t),l=this.totalBeats-i.duration;i.startTime=Math.min(c,l)}r!==0&&this.updateNotePitch(i,a,r)}),this.trackService.updateTrack(o))}updateNotePitch(t,r,o){let i=this.trackService.getCurrentTrack(),s=this.visibleNotes.findIndex(c=>c.position===r.position&&c.octave===r.octave),a=Math.max(0,Math.min(s+o,this.visibleNotes.length-1));a!==s&&(t.note=y({},this.visibleNotes[a]),t===this.selectedNote&&this.playNote(t.note,.3,i))}handleNoteResizing(t){let r=this.trackService.getCurrentTrack(),o=this.positionService.getBeatFromX(t),i=this.selectedNote.startTime,s=Math.max(1,o-i+1),a=s/this.selectedNote.duration;this.resizeSelectedNotes(s,a),this.trackService.updateTrack(r)}resizeSelectedNotes(t,r){this.selectedNotes.forEach(i=>{if(i!==this.selectedNote){let s=Math.max(1,Math.round(i.duration*r)),a=this.totalBeats-i.startTime;i.duration=Math.min(s,a)}});let o=this.totalBeats-this.selectedNote.startTime;this.selectedNote.duration=Math.min(t,o)}updateSelectionBoxVisual(){let t=document.getElementById("selection-box");if(!t||!this.selectionBox)return;let r=this.selectionBox.width>=0?this.selectionBox.startX:this.selectionBox.startX+this.selectionBox.width,o=this.selectionBox.height>=0?this.selectionBox.startY:this.selectionBox.startY+this.selectionBox.height,i=Math.abs(this.selectionBox.width),s=Math.abs(this.selectionBox.height);t.style.left=`${r}px`,t.style.top=`${o}px`,t.style.width=`${i}px`,t.style.height=`${s}px`,t.style.display="block"}selectNotesInBox(){let t=this.trackService.getCurrentTrack();!t||!this.selectionBox||(this.selectedNotes.length||(this.selectedNotes=[]),this.selectedNotes=this.selectionService.getNotesInBox(this.selectionBox,t.notes,this.cellHeight,this.visibleNotes),this.selectedNotes.length>0?this.selectedNote=this.selectedNotes[0]:this.selectedNote=null)}selectNote(t,r){r.stopPropagation();let o=this.trackService.getCurrentTrack();if(this.pianoRollStateService.isPencilMode)this.deleteNote(t);else{if(r.ctrlKey||r.metaKey){let c=this.selectedNotes.indexOf(t);c>-1?(this.selectedNotes.splice(c,1),this.selectedNotes.length>0?this.selectedNote=this.selectedNotes[0]:this.selectedNote=null):(this.selectedNotes.push(t),this.selectedNote=t)}else this.selectedNotes=[t],this.selectedNote=t;this.playNote(t.note,.5,o),console.log(`Selected note: ${this.getNoteLabel(t.note)} at beat ${Math.floor(t.startTime)+1}`),this.isDragging=!0;let i=null,a=r.currentTarget.parentElement;for(;a&&!i;)a.classList.contains("grid-container")&&(i=a),a=a.parentElement;if(i){let c=i.getBoundingClientRect();this.dragStartPosition={x:r.clientX-c.left,y:r.clientY-c.top-30}}else this.dragStartPosition={x:r.clientX,y:r.clientY}}}deleteNote(t){let r=this.trackService.getCurrentTrack();if(!r)return;let o=this.getNoteLabel(t.note),i=Math.floor(t.startTime)+1;r.notes=r.notes.filter(s=>s!==t),this.trackService.updateTrack(r),console.log(`Deleted note ${o} at beat ${i}`)}playNote(t,r=.8,o){this.toneService.playNote(t,r,o)}isBlackKey(t){return t.name===Re.C_SHARP||t.name===Re.D_SHARP||t.name===Re.F_SHARP||t.name===Re.G_SHARP||t.name===Re.A_SHARP}getNoteLabel(t){return`${t.name.replace("_SHARP","#")}${t.octave}`}findNoteAt(t,r){let o=this.trackService.getCurrentTrack();if(!o||r<0||r>=this.visibleNotes.length)return null;let i=this.visibleNotes[r];return o.notes.find(s=>s.note.position===i.position&&s.note.octave===i.octave&&t>=s.startTime&&t<s.startTime+s.duration)||null}handleKeyDown(t){this.trackService.getCurrentTrack()&&(t.key==="Delete"||t.key==="Backspace")&&this.selectedNotes.length>0&&(console.log(`Deleting ${this.selectedNotes.length} selected notes`),this.deleteSelectedNotes(),t.preventDefault())}deleteSelectedNotes(){let t=this.trackService.getCurrentTrack();this.selectedNotes.length===0||!t||(t.notes=t.notes.filter(r=>!this.selectedNotes.includes(r)),this.trackService.updateTrack(t),this.selectedNotes=[],this.selectedNote=null,console.log(`Deleted ${this.selectedNotes.length} notes`))}deleteSelectedNote(){this.deleteSelectedNotes()}startResizing(t,r){t.stopPropagation(),this.trackService.getCurrentTrack()&&(this.isResizing=!0,this.selectedNotes.includes(r)||(this.selectedNotes=[r]),this.selectedNote=r,this.dragStartPosition={x:t.clientX,y:t.clientY},document.addEventListener("mousemove",this.handleResizeMove),document.addEventListener("mouseup",this.handleResizeEnd))}stopDrawing(){let t=this.trackService.getCurrentTrack();if(this.isSelecting){let r=document.getElementById("selection-box");r&&(r.style.display="none")}this.pianoRollStateService.isPencilMode?(this.isDrawing&&this.selectedNote&&(this.playNote(this.selectedNote.note,.5,t),console.log(`Created note with duration ${this.selectedNote.duration} at beat ${Math.floor(this.selectedNote.startTime)+1}`)),this.selectedNote=null,this.selectedNotes=[]):this.isDragging&&this.selectedNote&&(this.playNote(this.selectedNote.note,.5,t),this.selectedNotes.length===1?console.log(`Moved note to beat ${Math.floor(this.selectedNote.startTime)+1} (${this.getNoteLabel(this.selectedNote.note)})`):this.selectedNotes.length>1&&console.log(`Moved ${this.selectedNotes.length} notes`)),this.isDrawing=!1,this.isDragging=!1,this.isSelecting=!1,this.selectionBox=null}toggleEditMode(){this.pianoRollStateService.toggleIsPencilMode(),console.log(`Switched to ${this.pianoRollStateService.isPencilMode?"pencil":"regular"} mode`),this.selectedNote=null,this.selectedNotes=[]}handleDoubleClick(t){let r=this.trackService.getCurrentTrack();if(this.pianoRollStateService.isPencilMode||!r)return;let i=t.currentTarget.getBoundingClientRect(),s=t.clientX-i.left,a=t.clientY-i.top-30,c=this.positionService.getBeatFromX(s),l=this.positionService.getNoteIndexFromY(a);if(this.gridService.isWithinBounds(l,c,this.visibleNotes.length,this.totalBeats)){let u=this.visibleNotes[l],d=this.findNoteAt(c,l);if(d)this.deleteNote(d),this.selectedNote=null,t.stopPropagation();else{let f={note:y({},u),startTime:c,duration:1,velocity:.8};r.notes.push(f),this.trackService.updateTrack(r),this.selectedNote=f,this.playNote(u,.5,r),console.log(`Created note at beat ${c+1} (${this.getNoteLabel(u)})`)}}}static{this.\u0275fac=function(r){return new(r||n)(Q(Da),Q(en),Q(tn),Q(Na),Q(ui))}}static{this.\u0275cmp=Ze({type:n,selectors:[["app-piano-roll-view"]],hostBindings:function(r,o){r&1&&he("keydown",function(s){return o.handleKeyDown(s)},!1,fx)},standalone:!0,features:[Ye],decls:2,vars:3,consts:[[4,"ngIf"],[1,"piano-roll-container"],[1,"piano-roll-controls"],[3,"click"],[3,"visibleNotes"],["class","piano-roll-view",4,"ngIf"],["class","empty-state",4,"ngIf"],[1,"piano-roll-view"],[1,"piano-keys"],[1,"key-spacer"],["class","piano-key",3,"black-key","white-key","mousedown",4,"ngFor","ngForOf"],[1,"grid-container",3,"mousedown","mousemove","mouseup","dblclick"],[1,"time-indicators"],["class","beat-marker",4,"ngFor","ngForOf"],[1,"note-grid"],["class","grid-row",3,"black-key-row",4,"ngFor","ngForOf"],["class","piano-roll-note",3,"selected","primary-selected","dragging","top","left","width","height","mousedown",4,"ngFor","ngForOf"],[1,"playback-position"],["id","selection-box",1,"selection-box"],[3,"isPencilMode"],[1,"piano-key",3,"mousedown"],[1,"beat-marker"],[1,"grid-row"],["class","grid-cell",4,"ngFor","ngForOf"],[1,"grid-cell"],[1,"piano-roll-note",3,"mousedown"],[1,"resize-handle",3,"mousedown"],[1,"empty-state"]],template:function(r,o){r&1&&(Je(0,eL,9,7,"ng-container",0),Ae(1,"async")),r&2&&Me("ngIf",Le(1,1,o.data$))},dependencies:[Ht,ud,Uo,Un,er,qT,UT,WT],styles:[`.piano-roll-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:600px;width:100%;background-color:#f5f5f5;border:1px solid #ccc;border-radius:4px;overflow:hidden;transition:border-color .3s ease}.piano-roll-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:5px 10px;margin-right:10px;background-color:#3f51b5;color:#fff;border:none;border-radius:4px;cursor:pointer}.piano-roll-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#303f9f}.piano-roll-container[_ngcontent-%COMP%]   button.active[_ngcontent-%COMP%]{background-color:#ff5722}.piano-roll-container.pencil-mode-active[_ngcontent-%COMP%]{border:1px solid #4caf50;box-shadow:0 0 10px #4caf504d}.piano-roll-container.pencil-mode-active[_ngcontent-%COMP%]   .piano-keys[_ngcontent-%COMP%]   .piano-key[_ngcontent-%COMP%]{cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z'%3E%3C/path%3E%3C/svg%3E") 0 24,crosshair}.piano-roll-container.pencil-mode-active[_ngcontent-%COMP%]   .piano-roll-note[_ngcontent-%COMP%]:hover{background-color:#f44336;transform:scale(1.03);border-color:#d32f2f}.piano-roll-controls[_ngcontent-%COMP%]{display:flex;padding:10px;background-color:#e0e0e0;border-bottom:1px solid #ccc}.piano-roll-view[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden}.piano-roll-view[_ngcontent-%COMP%]   .key-spacer[_ngcontent-%COMP%]{margin-top:30px}.piano-keys[_ngcontent-%COMP%]{width:80px;overflow-y:auto;background-color:#fff;border-right:1px solid #ccc}.piano-keys[_ngcontent-%COMP%]   .piano-key[_ngcontent-%COMP%]{height:20px;display:flex;align-items:center;padding-left:5px;font-size:12px;-webkit-user-select:none;user-select:none}.piano-keys[_ngcontent-%COMP%]   .piano-key.white-key[_ngcontent-%COMP%]{background-color:#fff;color:#333;border-bottom:1px solid #ccc}.piano-keys[_ngcontent-%COMP%]   .piano-key.black-key[_ngcontent-%COMP%]{background-color:#333;color:#fff;border-bottom:1px solid #555}.piano-keys[_ngcontent-%COMP%]   .piano-key[_ngcontent-%COMP%]:hover{background-color:#e3f2fd;cursor:pointer}.grid-container[_ngcontent-%COMP%]{flex:1;position:relative;overflow:auto}.grid-container.pencil-mode[_ngcontent-%COMP%]{cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z'%3E%3C/path%3E%3C/svg%3E") 0 24,crosshair}.grid-container.pencil-mode[_ngcontent-%COMP%]   .note-grid[_ngcontent-%COMP%]   .grid-row[_ngcontent-%COMP%]   .grid-cell[_ngcontent-%COMP%]:hover{background-color:#4caf5033}.grid-container.pencil-mode[_ngcontent-%COMP%]   .piano-roll-note[_ngcontent-%COMP%]{cursor:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='black' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cline x1='18' y1='6' x2='6' y2='18'%3E%3C/line%3E%3Cline x1='6' y1='6' x2='18' y2='18'%3E%3C/line%3E%3C/svg%3E") 10 10,pointer}.grid-container.selection-mode[_ngcontent-%COMP%]{cursor:default}.grid-container.selection-mode[_ngcontent-%COMP%]   .note-grid[_ngcontent-%COMP%]   .grid-row[_ngcontent-%COMP%]   .grid-cell[_ngcontent-%COMP%]:hover{background-color:#2196f31a}.grid-container[_ngcontent-%COMP%]   .time-indicators[_ngcontent-%COMP%]{height:30px;background-color:#eee;border-bottom:1px solid #ccc;display:flex}.grid-container[_ngcontent-%COMP%]   .time-indicators[_ngcontent-%COMP%]   .beat-marker[_ngcontent-%COMP%]{width:40px;display:flex;align-items:center;justify-content:center;font-size:12px;border-right:1px solid #ddd}.grid-container[_ngcontent-%COMP%]   .note-grid[_ngcontent-%COMP%]{position:relative}.grid-container[_ngcontent-%COMP%]   .note-grid[_ngcontent-%COMP%]   .grid-row[_ngcontent-%COMP%]{height:20px;display:flex;border-bottom:1px solid #ddd}.grid-container[_ngcontent-%COMP%]   .note-grid[_ngcontent-%COMP%]   .grid-row.black-key-row[_ngcontent-%COMP%]{background-color:#f9f9f9}.grid-container[_ngcontent-%COMP%]   .note-grid[_ngcontent-%COMP%]   .grid-row[_ngcontent-%COMP%]   .grid-cell[_ngcontent-%COMP%]{width:40px;height:100%;border-right:1px solid #eee}.grid-container[_ngcontent-%COMP%]   .note-grid[_ngcontent-%COMP%]   .grid-row[_ngcontent-%COMP%]   .grid-cell[_ngcontent-%COMP%]:nth-child(4n){border-right:1px solid #ccc}.piano-roll-note[_ngcontent-%COMP%]{position:absolute;background-color:#2196f3;border:1px solid #1976d2;border-radius:2px;cursor:pointer;transition:all .1s ease;z-index:1}.piano-roll-note[_ngcontent-%COMP%]:hover{background-color:#1e88e5;transform:scale(1.02);z-index:2;box-shadow:0 2px 4px #0003}.selection-mode[_ngcontent-%COMP%]   .piano-roll-note[_ngcontent-%COMP%]{cursor:grab}.selection-mode[_ngcontent-%COMP%]   .piano-roll-note[_ngcontent-%COMP%]:active{cursor:grabbing}.piano-roll-note.selected[_ngcontent-%COMP%]{background-color:#ff9800;border-color:#f57c00;z-index:3;box-shadow:0 2px 6px #0000004d;transform:scale(1.02)}.piano-roll-note.selected[_ngcontent-%COMP%]:hover{background-color:#fb8c00}.piano-roll-note.primary-selected[_ngcontent-%COMP%]{background-color:#ff5722;border-color:#e64a19;z-index:4;box-shadow:0 2px 8px #0006;transform:scale(1.03)}.piano-roll-note.primary-selected[_ngcontent-%COMP%]:hover{background-color:#f4511e}.piano-roll-note.dragging[_ngcontent-%COMP%]{opacity:.8;cursor:grabbing!important;box-shadow:0 5px 15px #0000004d}.piano-roll-note.dragging.selected[_ngcontent-%COMP%]{box-shadow:0 5px 15px #f57c0066}.piano-roll-note.dragging.primary-selected[_ngcontent-%COMP%]{box-shadow:0 5px 15px #e64a1980}.piano-roll-note[_ngcontent-%COMP%]   .resize-handle[_ngcontent-%COMP%]{position:absolute;right:0;top:0;bottom:0;width:6px;cursor:ew-resize;background-color:#0000001a;border-left:1px solid rgba(0,0,0,.2)}.piano-roll-note[_ngcontent-%COMP%]   .resize-handle[_ngcontent-%COMP%]:hover{background-color:#0000004d;width:8px}.playback-position[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;width:2px;background-color:#f44336;pointer-events:none}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:400px;background-color:#f5f5f5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px;font-size:16px;color:#666}.empty-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px 20px;background-color:#3f51b5;color:#fff;border:none;border-radius:4px;cursor:pointer}.empty-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#303f9f}.grid-cell[_ngcontent-%COMP%]{transition:background-color .1s ease}.grid-cell[_ngcontent-%COMP%]:hover{background-color:#2196f31a}.selection-box[_ngcontent-%COMP%]{position:absolute;border:2px dashed #2196f3;background-color:#2196f31a;pointer-events:none;z-index:5;display:none}`],changeDetection:0})}}return n})();var _v=()=>[];function tL(n,e){if(n&1){let t=tt();S(0,"button",10),he("click",function(){Se(t);let o=J();return Te(o.toggleIsMetronomeOn())}),U(1,"toggle_on"),T()}}function nL(n,e){if(n&1){let t=tt();S(0,"button",10),he("click",function(){Se(t);let o=J();return Te(o.toggleIsMetronomeOn())}),U(1,"toggle_off"),T()}}function rL(n,e){if(n&1){let t=tt();S(0,"button",10),he("click",function(){Se(t);let o=J();return Te(o.toggleIsPlaying())}),U(1,"pause_circle"),T()}}function oL(n,e){if(n&1){let t=tt();S(0,"button",10),he("click",function(){Se(t);let o=J();return Te(o.toggleIsPlaying())}),U(1,"play_circle"),T()}}function iL(n,e){if(n&1&&(S(0,"button",13)(1,"span"),Ae(2,"async"),U(3),T()()),n&2){let t=e.$index,r=J(),o=J();j(),Ot("text-bg-secondary",(t+1)%r===1)("text-bg-warning",Le(2,5,o.beatTick$)===t+1),j(2),wt(" ",t%r+1," ")}}function sL(n,e){if(n&1&&(S(0,"div",1)(1,"div",11),U(2,"#"),T(),S(3,"div",12),Rt(4,iL,4,7,"button",13,kt),Ae(6,"async"),T()()),n&2){let t,r=J();j(4),Ft(td(2,_v).constructor(e*((t=Le(6,0,r.loopDuration$))!==null&&t!==void 0?t:1)))}}function aL(n,e){if(n&1){let t=tt();S(0,"button",15),he("click",function(){let o=Se(t).$index,i=J(2);return Te(i.toggleHit(o+1,"snare"))}),S(1,"span",16),U(2),T()()}if(n&2){let t=e.$index,r=J(),o=J();Ot("bg-success",!!o.getRegisteredHit(t+1,"snare")),j(2),un(t%r+1)}}function cL(n,e){if(n&1&&(S(0,"div",1)(1,"div",11),U(2,"Snare"),T(),S(3,"div",12),Rt(4,aL,3,3,"button",14,kt),Ae(6,"async"),T()()),n&2){let t,r=J();j(4),Ft(td(2,_v).constructor(e*((t=Le(6,0,r.loopDuration$))!==null&&t!==void 0?t:1)))}}function lL(n,e){if(n&1&&(S(0,"button",18)(1,"span",16),U(2),T()()),n&2){let t=e.$index,r=J();Ot("bg-success",!1),j(2),un(t%r+1)}}function uL(n,e){if(n&1&&(S(0,"div",1)(1,"div",11),U(2,"Hat"),T(),S(3,"div",12),Rt(4,lL,3,3,"button",17,kt),Ae(6,"async"),T()()),n&2){let t,r=J();j(4),Ft(td(2,_v).constructor(2*e*((t=Le(6,0,r.loopDuration$))!==null&&t!==void 0?t:1)))}}var GT=(()=>{class n{constructor(t,r,o,i){this.musicService=t,this.toneService=r,this.timeService=o,this.sequencerService=i,this.subscriptions=[],this.hitSubscriptions=[],this.isMetronomeOn$=this.timeService.isMetronomeOn$,this.isPlaying$=this.timeService.isPlaying$,this.bpm$=this.timeService.bpm$,this.numBeatsPerBar$=this.timeService.numBeatsPerBar$,this.noteDurationPerBeat$=this.timeService.beatValue$,this.beatTick$=this.timeService.beatTick$,this.metronomeClick$=this.timeService.metronomeClick$,this.loopDuration$=this.timeService.loopDuration$}ngOnInit(){this.subscriptions.push(this.metronomeClick$.pipe(Ge(t=>this.toneService.playMetronomeClick(t))).subscribe(),this.timeService.halfTick$.pipe(ae(t=>t===1)).subscribe(),this.timeService.quarterTick$.pipe(ae(t=>t===1||t===3)).subscribe(),this.sequencerService.observableEmitter$.pipe(Ge(t=>this.subscribeToNewObservable(t))).subscribe())}getRegisteredHit(t,r="snare"){return this.hitSubscriptions.find(o=>o.instrument===r&&o.onTick===t)}toggleHit(t,r){this.getRegisteredHit(t,r)?this.sequencerService.deregisterHit(t,r):this.sequencerService.registerHit(t,r)}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}toggleIsMetronomeOn(){this.timeService.toggleIsMetronomeOn()}toggleIsPlaying(){this.timeService.toggleIsPlaying()}setBpm(t){t.target.value&&this.timeService.setBpm(Number(t.target.value))}setNumBeatsPerBar(t){t.target.value&&this.timeService.setNumBeatsPerBar(Number(t.target.value))}setNoteDurationPerBeat(t){t.target.value&&this.timeService.setNoteDurationPerBeat(Number(t.target.value))}setLoopDuration(t){t.target.value&&this.timeService.setLoopDuration(Number(t.target.value))}subscribeToNewObservable(t){if(t.action===zi.REGISTER)this.hitSubscriptions.push({instrument:t.instrument,onTick:t.onTick,subscription:this.timeService.beatTick$.pipe(Ge(r=>{let o=this.timeService.numBeatsPerBar,i=this.timeService.loopDuration;r%(o*i)===t.onTick&&this.toneService.playSample(t.instrument)})).subscribe()});else{let r=this.getRegisteredHit(t.onTick,t.instrument);r?(r.subscription.unsubscribe(),this.hitSubscriptions=this.hitSubscriptions.filter(o=>o!==r)):console.log("should not happen !")}}static{this.\u0275fac=function(r){return new(r||n)(Q(tn),Q(en),Q(Da),Q(Na))}}static{this.\u0275cmp=Ze({type:n,selectors:[["ng-component"]],standalone:!0,features:[Ye],decls:44,vars:30,consts:[[1,"sketch-view","container"],[1,"row"],[1,"col"],[1,"d-flex","flex-row"],["for","bpm"],["type","number","name","bpm","id","bpm","step","1",3,"change","value"],["type","number","name","numBeatsPerBar","id","numBeatsPerBar",3,"change","value"],["type","number","name","noteDurationPerBeat","id","noteDurationPerBeat",3,"change","value"],["type","number","name","loopDuration","id","loopDuration",3,"change","value"],[1,"material-icons"],[1,"material-icons",3,"click"],[1,"col-lg-1","d-flex","align-items-center"],[1,"col-lg-11","col-12","d-flex"],[1,"card","p-1","m-1","square","d-flex","flex-column","justify-content-center","align-items-center"],[1,"card","p-1","m-1","square","d-flex","flex-column","justify-content-center","align-items-center",3,"bg-success"],[1,"card","p-1","m-1","square","d-flex","flex-column","justify-content-center","align-items-center",3,"click"],[1,"hidden"],[1,"card","pad-card","p-1","m-1","square","d-flex","flex-column","justify-content-center","align-items-center",3,"bg-success"],[1,"card","pad-card","p-1","m-1","square","d-flex","flex-column","justify-content-center","align-items-center"]],template:function(r,o){if(r&1&&(S(0,"div",0)(1,"div",1),pt(2,"app-root-note-selector")(3,"app-scale-mode-selector"),T(),S(4,"div",1)(5,"div",2)(6,"div",3)(7,"label",4),U(8,"BPM"),T(),S(9,"input",5),Ae(10,"async"),he("change",function(s){return o.setBpm(s)}),T()()()(),S(11,"div",1)(12,"div"),U(13,"Time Signature"),T(),S(14,"input",6),Ae(15,"async"),he("change",function(s){return o.setNumBeatsPerBar(s)}),T(),S(16,"input",7),Ae(17,"async"),he("change",function(s){return o.setNoteDurationPerBeat(s)}),T()(),S(18,"div",1)(19,"div"),U(20,"Loop Duration"),T(),S(21,"input",8),Ae(22,"async"),he("change",function(s){return o.setLoopDuration(s)}),T()(),S(23,"div",1)(24,"div",2)(25,"div"),U(26,"Metronome"),T(),Je(27,tL,2,0,"button",9),Ae(28,"async"),Je(29,nL,2,0,"button",9),T()(),S(30,"div",1)(31,"div",2),Je(32,rL,2,0,"button",9),Ae(33,"async"),Je(34,oL,2,0,"button",9),T()(),S(35,"div",1),U(36),Ae(37,"async"),T(),Je(38,sL,7,3,"div",1),Ae(39,"async"),Je(40,cL,7,3,"div",1),Ae(41,"async"),Je(42,uL,7,3,"div",1),Ae(43,"async"),T()),r&2){let i,s,a;j(9),Me("value",Le(10,10,o.bpm$)),j(5),Me("value",Le(15,12,o.numBeatsPerBar$)),j(2),Me("value",Le(17,14,o.noteDurationPerBeat$)),j(5),Me("value",Le(22,16,o.loopDuration$)),j(6),jo(Le(28,18,o.isMetronomeOn$)?27:29),j(5),jo(Le(33,20,o.isPlaying$)?32:34),j(4),wt(" ",Le(37,22,o.metronomeClick$)," "),j(2),jo((i=Le(39,24,o.numBeatsPerBar$))?38:-1,i),j(2),jo((s=Le(41,26,o.numBeatsPerBar$))?40:-1,s),j(2),jo((a=Le(43,28,o.numBeatsPerBar$))?42:-1,a)}},dependencies:[Ht,Un,Nh,Oh,er],styles:[".card[_ngcontent-%COMP%]{width:60px;height:60px;flex-shrink:0}.card.pad-card[_ngcontent-%COMP%]{width:6px}.hidden[_ngcontent-%COMP%]{visibility:hidden}"]})}}return n})();var ZT=[{path:"",component:PT},{path:"piano-roll",component:zT},{path:"sketch",component:GT}];var YT={production:!0,baseHref:"/sketched/"};S0(cT,{providers:[gw([...ZT]),{provide:ld,useValue:YT.baseHref}]});
